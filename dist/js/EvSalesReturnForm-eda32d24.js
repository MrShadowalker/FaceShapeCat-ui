var B=(s,u,d)=>new Promise((S,R)=>{var T=n=>{try{a(d.next(n))}catch(b){R(b)}},C=n=>{try{a(d.throw(n))}catch(b){R(b)}},a=n=>n.done?S(n.value):Promise.resolve(n.value).then(T,C);a((d=d.apply(s,u)).next())});import{d as V,f as x,r as z,e as H,Y as p,a6 as L,ab as N,a9 as l,k as e,ae as c,u as _,n as Y}from"./tinymce-vendor-3c2b3d6e.js";import{C as E,ap as y,aM as $,_ as q}from"./jeecg-online-vendor-f57c6456.js";import{l as U}from"./JDictSelectTag-f0227cc5.js";import{J as G}from"./JSearchSelect-4158b9a9.js";import{a5 as K}from"./antd-vue-vendor-05bfa84d.js";const{createConfirm:Q}=E();const ne="/evSalesReturn/evSalesReturn/exportXls",oe="/evSalesReturn/evSalesReturn/importExcel",ue=s=>y.get({url:"/evSalesReturn/evSalesReturn/list",params:s}),de=(s,u)=>y.delete({url:"/evSalesReturn/evSalesReturn/delete",params:s},{joinParamsToUrl:!0}).then(()=>{u()}),ie=(s,u)=>{Q({iconType:"warning",title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>y.delete({url:"/evSalesReturn/evSalesReturn/deleteBatch",data:s},{joinParamsToUrl:!0}).then(()=>{u()})})},W=(s,u)=>{let d=u?"/evSalesReturn/evSalesReturn/edit":"/evSalesReturn/evSalesReturn/add";return y.post({url:d,params:s},{isTransformResponse:!1})},Z=V({__name:"EvSalesReturnForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(s,{expose:u,emit:d}){const S=s,R=x(),T=K.useForm,C=d,a=z({id:"",remark:"",salesSlipId:"",returnReason:"",status:"",returnStatus:"",returnType:""}),{createMessage:n}=E(),b=x({xs:{span:24},sm:{span:5}}),F=x({xs:{span:24},sm:{span:16}}),k=x(!1),O={},{resetFields:j,validate:I,validateInfos:v}=T(a,O,{immediate:!0}),m=H(()=>S.formBpm===!0?S.formData.disabled!==!1:S.formDisabled);function D(){w({})}function w(g){Y(()=>{j(),Object.assign(a,g)})}function P(){return B(this,null,function*(){yield I(),k.value=!0;const g=x(!1);let t=a;t.id&&(g.value=!0);for(let o in t)t[o]instanceof Array&&$(R.value.getProps,o)==="string"&&(t[o]=t[o].join(","));yield W(t,g.value).then(o=>{o.success?(n.success(o.message),C("ok")):n.warning(o.message)}).finally(()=>{k.value=!1})})}return u({add:D,edit:w,submitForm:P}),(g,t)=>{const o=p("a-input"),i=p("a-form-item"),f=p("a-col"),M=p("a-textarea"),h=p("a-row"),X=p("a-form"),J=p("a-spin");return L(),N(J,{spinning:k.value},{default:l(()=>[e(X,{ref_key:"formRef",ref:R,class:"antd-modal-form",labelCol:b.value,wrapperCol:F.value},{default:l(()=>[e(h,null,{default:l(()=>[e(f,{span:12},{default:l(()=>[e(i,c({label:"备注"},_(v).remark),{default:l(()=>[e(o,{value:a.remark,"onUpdate:value":t[0]||(t[0]=r=>a.remark=r),placeholder:"请输入备注",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(f,{span:12},{default:l(()=>[e(i,c({label:"销售单号"},_(v).salesSlipId),{default:l(()=>[e(G,{value:a.salesSlipId,"onUpdate:value":t[1]||(t[1]=r=>a.salesSlipId=r),dict:"",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(f,{span:12},{default:l(()=>[e(i,c({label:"退货原因"},_(v).returnReason),{default:l(()=>[e(M,{value:a.returnReason,"onUpdate:value":t[2]||(t[2]=r=>a.returnReason=r),rows:4,placeholder:"请输入退货原因",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(f,{span:12},{default:l(()=>[e(i,c({label:"退货单状态"},_(v).status),{default:l(()=>[e(U,{value:a.status,"onUpdate:value":t[3]||(t[3]=r=>a.status=r),dictCode:"",placeholder:"请选择退货单状态",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(f,{span:12},{default:l(()=>[e(i,c({label:"退货状态"},_(v).returnStatus),{default:l(()=>[e(U,{value:a.returnStatus,"onUpdate:value":t[4]||(t[4]=r=>a.returnStatus=r),dictCode:"",placeholder:"请选择退货状态",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(f,{span:12},{default:l(()=>[e(i,c({label:"退货类型"},_(v).returnType),{default:l(()=>[e(U,{value:a.returnType,"onUpdate:value":t[5]||(t[5]=r=>a.returnType=r),dictCode:"",placeholder:"请选择退货类型",disabled:m.value},null,8,["value","disabled"])]),_:1},16)]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const A=q(Z,[["__scopeId","data-v-7e8d4b3a"]]),pe=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as E,oe as a,ie as b,pe as c,de as d,ne as g,ue as l};
