var ce=Object.defineProperty,de=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var F=(r,o,i)=>o in r?ce(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i,M=(r,o)=>{for(var i in o||(o={}))me.call(o,i)&&F(r,i,o[i]);if(K)for(var i of K(o))ue.call(o,i)&&F(r,i,o[i]);return r},N=(r,o)=>de(r,pe(o));var m=(r,o,i)=>new Promise((T,s)=>{var L=f=>{try{C(i.next(f))}catch(y){s(y)}},k=f=>{try{C(i.throw(f))}catch(y){s(y)}},C=f=>f.done?T(f.value):Promise.resolve(f.value).then(L,k);C((i=i.apply(r,o)).next())});import{d as V,f as I,r as E,Y as u,a6 as P,a7 as fe,ac as R,k as l,a9 as a,E as w,a8 as _e,u as d,ab as he,Z as ge,a4 as be,a5 as ye}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import{useListPage as ve}from"./useListPage-66651993.js";import{l as we,g as Ce,a as xe,d as Se,b as Ie,c as ke,e as Q}from"./EvCategoryForm-7153bbad.js";import De from"./EvCategoryModal-dfb14a42.js";import{J as Ee}from"./componentMap-e2e33057.js";import{Q as Re}from"./index-2ad3f236.js";import Te from"./BasicTable-400bb95b.js";import{_ as Le}from"./jeecg-online-vendor-f57c6456.js";import"./index-37448b2d.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./injectionKey-69710956.js";const Be=[{title:"分类名称",align:"left",dataIndex:"name"}];const Ae={remark:{title:"备注",order:0,view:"text",type:"string"},name:{title:"分类名称",order:2,view:"text",type:"string"},code:{title:"商品分类编码",order:3,view:"text",type:"string"}},Ke=r=>(be("data-v-eed41f11"),r=r(),ye(),r),Fe={class:"p-2"},Me={class:"jeecg-basic-table-form-container"},Ne=Ke(()=>R("span",{title:"分类名称"},"分类名称",-1)),Pe={style:{float:"left",overflow:"hidden"},class:"table-page-search-submitButtons"},Qe=V({name:"evCategory-evCategory"}),Ve=V(N(M({},Qe),{setup(r){const o=I([]),i=I({}),T=I(!1),s=I(),{prefixCls:L,tableContext:k,onExportXls:C,onImportXls:f}=ve({tableProps:{title:"商品分类表",api:we,columns:Be,canResize:!1,useSearchForm:!1,isTreeTable:!0,actionColumn:{width:120,fixed:"right"},beforeFetch:e=>Object.assign(e,i.value)},exportConfig:{name:"商品分类表",url:Ce},importConfig:{url:xe,success:D}}),[y,{reload:b,collapseAll:je,updateTableDataRecord:B,findTableDataRecord:j,getDataSource:J},{rowSelection:O,selectedRowKeys:x}]=k,U=E({xs:24,sm:4,xl:6,xxl:4}),q=E({xs:24,sm:20}),Je=E(Ae);function Oe(e){Object.keys(e).map(t=>{i[t]=e[t]}),b()}function X(){s.value.disableSubmit=!1,s.value.add()}function z(e){return m(this,null,function*(){s.value.disableSubmit=!1,s.value.edit(e)})}function H(e){return m(this,null,function*(){s.value.disableSubmit=!0,s.value.edit(e)})}function Y(e){return m(this,null,function*(){yield Se({id:e.id},D)})}function Z(){return m(this,null,function*(){const e=x.value.filter(t=>!t.includes("loading"));yield Ie({id:e},D)})}function D(){(x.value=[])&&b()}function $(e){s.value.disableSubmit=!1,s.value.add(e)}function G(h){return m(this,arguments,function*({isUpdate:e,values:t,expandedArr:n,changeParent:_}){if(e)_?b():B(t.id,t);else if(!t.id||!t.pid)b();else{o.value=[];for(let p of d(n))yield oe(p)}})}function W(e){S(e.items)&&ee()}function ee(){return m(this,null,function*(){if(d(o).length>0){const e=yield ke({parentIds:d(o).join(",")});if(e.success&&e.result.records.length>0){let t=e.result.records;const n=new Map;for(let p of t){let c=p.pid;if(d(o).includes(c)){let g=n.get(c);g==null&&(g=[]),g.push(p),n.set(c,g)}}let _=n,h=p=>{p&&p.forEach(c=>{d(o).includes(c.id)&&(c.children=S(_.get(c.id)),h(c.children))})};h(J())}}})}function S(e){if(e&&e.length>0)return e.map(t=>{if(t.hasChild=="1"){let n={id:t.id+"_loadChild",name:"loading...",isLoading:!0};t.children=[n]}return t})}function te(e,t){return m(this,null,function*(){if(e){if(o.value.push(t.id),t.children.length>0&&t.children[0].isLoading){let n=yield Q({pid:t.id});n=n.records?n.records:n,n&&n.length>0?t.children=S(n):(t.children=null,t.hasChild="0")}}else{let n=o.value.indexOf(t.id);n>=0&&o.value.splice(n,1)}})}function oe(e){return m(this,null,function*(){let t=j(e);o.value.push(e);let n=yield Q({pid:e});n&&n.length>0?t.children=S(n):(t.children=null,t.hasChild="0"),B(e,t)})}function ne(e){return[{label:"编辑",onClick:z.bind(null,e)}]}function ie(e){return[{label:"详情",onClick:H.bind(null,e)},{label:"添加下级",onClick:$.bind(null,{pid:e.id})},{label:"删除",popConfirm:{title:"确定删除吗?",confirm:Y.bind(null,e),placement:"topLeft"}}]}function A(){b()}function le(){i.value={},x.value=[],b()}return(e,t)=>{const n=u("a-form-item"),_=u("a-col"),h=u("a-button"),p=u("a-row"),c=u("a-form"),g=u("Icon"),ae=u("a-menu-item"),re=u("a-menu"),se=u("a-dropdown");return P(),fe("div",Fe,[R("div",Me,[l(c,{onKeyup:_e(A,["enter","native"]),model:i.value,"label-col":U,"wrapper-col":q},{default:a(()=>[l(p,{gutter:24},{default:a(()=>[l(_,{lg:6},{default:a(()=>[l(n,{name:"name"},{label:a(()=>[Ne]),default:a(()=>[l(Ee,{placeholder:"请输入分类名称",value:i.value.name,"onUpdate:value":t[0]||(t[0]=v=>i.value.name=v)},null,8,["value"])]),_:1})]),_:1}),l(_,{xl:6,lg:7,md:8,sm:24},{default:a(()=>[R("span",Pe,[l(_,{lg:6},{default:a(()=>[l(h,{type:"primary",preIcon:"ant-design:search-outlined",onClick:A},{default:a(()=>[w("查询")]),_:1}),l(h,{type:"primary",preIcon:"ant-design:reload-outlined",onClick:le,style:{"margin-left":"8px"}},{default:a(()=>[w("重置")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),l(d(Te),{onRegister:d(y),rowSelection:d(O),expandedRowKeys:o.value,onExpand:te,onFetchSuccess:W},{tableTitle:a(()=>[l(h,{type:"primary",onClick:X,preIcon:"ant-design:plus-outlined"},{default:a(()=>[w(" 新增")]),_:1}),d(x).length>0?(P(),he(se,{key:0},{overlay:a(()=>[l(re,null,{default:a(()=>[l(ae,{key:"1",onClick:Z},{default:a(()=>[l(g,{icon:"ant-design:delete-outlined"}),w(" 删除 ")]),_:1})]),_:1})]),default:a(()=>[l(h,null,{default:a(()=>[w("批量操作 "),l(g,{icon:"ant-design:down-outlined"})]),_:1})]),_:1})):ge("",!0)]),action:a(({record:v})=>[l(d(Re),{actions:ne(v),dropDownActions:ie(v)},null,8,["actions","dropDownActions"])]),bodyCell:a(({column:v,record:Ue,index:qe,text:Xe})=>[]),_:1},8,["onRegister","rowSelection","expandedRowKeys"]),l(De,{ref_key:"registerModal",ref:s,onSuccess:G},null,512)])}}}));const eo=Le(Ve,[["__scopeId","data-v-eed41f11"]]);export{eo as default};
