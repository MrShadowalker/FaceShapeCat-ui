var $=Object.defineProperty,G=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))K.call(t,o)&&S(e,o,t[o]);if(F)for(var o of F(t))Y.call(t,o)&&S(e,o,t[o]);return e},j=(e,t)=>G(e,U(t));var k=(e,t,o)=>new Promise((c,s)=>{var p=n=>{try{u(o.next(n))}catch(m){s(m)}},l=n=>{try{u(o.throw(n))}catch(m){s(m)}},u=n=>n.done?c(n.value):Promise.resolve(n.value).then(p,l);u((o=o.apply(e,t)).next())});import{d as H,f as y,e as T,u as L,o as Q,n as E,Y as f,a6 as q,ab as z,a9 as g,k as v,ah as W,ai as X,ac as x,J,ae as Z,aj as N,q as ee,A as te}from"./tinymce-vendor-3c2b3d6e.js";import{a4 as oe,k as ae,aA as h}from"./index-37448b2d.js";import{L as le}from"./useTableSync-774c3774-38b18ab1.js";import{_ as ne,az as ie,C as re,bs as se}from"./jeecg-online-vendor-f57c6456.js";import"./index-09260ce4.js";import{M as pe,S as ue,j as de,v as ce}from"./antd-vue-vendor-05bfa84d.js";import{B as me,u as fe}from"./useForm-df7d93c5.js";import"./cgform.data-cbdd88c3-c388dc24.js";import"./vxe-table-vendor-26792376.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-2ad3f236.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";const ve=H({name:"JPrompt",components:{Modal:pe,Spin:ue,Input:de,BasicForm:me,ConfigProvider:ce},emits:["register"],setup(e,{emit:t}){const o=y(),{getAntdLocale:c}=oe(),s=y(!1),p=y(!1),l=y({}),u=T(()=>{var d;return(d=l.value.placeholder)!=null?d:"请输入内容"}),[n,{clearValidate:m,setFieldsValue:i,validate:a,updateSchema:r}]=fe({compact:!0,wrapperCol:{span:24},schemas:[{label:"",field:"input",component:"Input",slot:"customInput"}],showActionButtonGroup:!1}),C=T(()=>{var O,I;let d=l.value,b={width:(O=d.width)!=null?O:500,title:(I=d.title)!=null?I:"prompt",open:L(s),confirmLoading:L(p)};return j(P(P(P({},b),e),d),{onOk:M,onCancel(){typeof l.value.onCancel=="function"&&l.value.onCancel(),V()}})});Q(()=>{t("register",{openModal:w,setLoading:R,getVisible:s})});function w(d){return k(this,null,function*(){var b,_;document.body.focus(),l.value=d,s.value=!0,yield E(),yield r({field:"input",required:l.value.required,rules:l.value.rules,dynamicRules:l.value.dynamicRules}),yield i({input:(b=l.value.defaultValue)!=null?b:""}),yield m(),(_=o.value)==null||_.focus()})}function V(){s.value=!1}function D(){a()}function M(){return k(this,null,function*(){try{const{onOk:d}=l.value;let b=yield a();R(!0),typeof d=="function"?(yield d(b.input))!==!1&&V():V()}finally{R(!1)}})}function R(d){p.value=d}return{inputRef:o,getProps:C,loading:p,options:l,placeholder:u,getAntdLocale:c,onChange:D,onSubmit:M,registerForm:n}}}),ge={style:{padding:"20px"}},be=["innerHTML"];function he(e,t,o,c,s,p){const l=f("Input"),u=f("BasicForm"),n=f("Spin"),m=f("Modal"),i=f("ConfigProvider");return q(),z(i,{locale:e.getAntdLocale},{default:g(()=>[v(m,W(X(e.getProps)),{default:g(()=>[v(n,{spinning:e.loading},{default:g(()=>[x("div",ge,[x("div",{innerHTML:e.options.content,style:{"margin-bottom":"8px"}},null,8,be),v(u,{onRegister:e.registerForm},{customInput:g(({model:a,field:r})=>[v(l,{ref:"inputRef",value:a[r],"onUpdate:value":C=>a[r]=C,placeholder:e.placeholder,onPressEnter:e.onSubmit,onInput:e.onChange},null,8,["value","onUpdate:value","placeholder","onPressEnter","onInput"])]),_:1},8,["onRegister"])])]),_:1},8,["spinning"])]),_:1},16)]),_:1},8,["locale"])}const ye=ne(ve,[["render",he]]);function Ce(){function e(t){let o=null;const c=document.createElement("div"),s=v(ye,{onRegister(i){return k(this,null,function*(){o=i,yield E(),i.openModal(t)})},afterClose(){J(null,c),document.body.removeChild(c)}});J(s,c),document.body.appendChild(c);function p(){return o==null&&ie("useJPrompt instance is undefined!"),o}function l(i){var a;(a=p())==null||a.updateModal(i)}function u(){var i;(i=p())==null||i.closeModal()}function n(i){var a;(a=p())==null||a.setLoading(i)}return{closeModal:u,updateModal:l,setLoading:n}}return{createJPrompt:e}}var we=Object.defineProperty,_e=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,B=(e,t,o)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Ve=(e,t)=>{for(var o in t||(t={}))ke.call(t,o)&&B(e,o,t[o]);if(A)for(var o of A(t))xe.call(t,o)&&B(e,o,t[o]);return e},Re=(e,t)=>_e(e,Pe(t));const Te=H({name:"CheckDictTable",components:{VNodes:(e,{attrs:t})=>t.vnodes},setup(){const{prefixCls:e}=ae("cgform-check-dict-table"),{createMessage:t}=re(),o=y([{title:"字段名称",key:"dbFieldName",width:100},{title:"字段备注",key:"dbFieldTxt",width:100},{title:"字段Href",key:"fieldHref",width:130,type:h.input,defaultValue:""},{title:"验证规则",key:"fieldValidType",width:170,type:h.slot,slotName:"fieldValidType",allowInput:!0,defaultValue:"",placeholder:"空"},{title:"校验必填",key:"fieldMustInput",width:80,type:h.checkbox,align:"center",customValue:["1","0"],defaultChecked:!1},{title:"字典Table",key:"dictTable",width:280,type:h.textarea,defaultValue:""},{title:"字典Code",key:"dictField",width:280,type:h.input,defaultValue:""},{title:"字典Text",key:"dictText",width:280,type:h.input,defaultValue:""}]),c=le(o),s=y([{label:"空",value:""},{label:"唯一校验",value:"only"},{label:"6到16位数字",value:"n6-16"},{label:"6到18位字母",value:"s6-18"},{label:"6到16位任意字符",value:"*6-16"},{label:"网址",value:"url"},{label:"电子邮件",value:"e"},{label:"手机号码",value:"m"},{label:"邮政编码",value:"p"},{label:"字母",value:"s"},{label:"数字",value:"n"},{label:"整数",value:"z"},{label:"非空",value:"*"},{label:"金额",value:"money"}]),p=T(()=>s.value.map(a=>a.value)),{createJPrompt:l}=Ce();function u(a){return a!=null&&!p.value.includes(a)}function n(a){l({title:"自定义正则表达式",placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:i}],onOk:r=>{a.triggerChange(r),t.success("添加成功")}})}function m(a){l({title:"修改自定义正则表达式",defaultValue:a.value,placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:i}],onOk:r=>{a.triggerChange(r),r!==a.value&&t.success("修改成功")}})}function i(a,r){return u(r)?Promise.resolve():Promise.reject("当前校验已存在")}return Re(Ve({},c),{prefixCls:e,columns:o,isCustomRegexp:u,validTypeOptions:s,validTypeValues:p,onAddCustomRegexp:n,onChangeCustomRegexp:m})}}),Me={class:"custom-option-list rc-virtual-list-holder-inner",style:{"border-top":"1px solid #dfdfdf"}},Oe=["onClick"];function Ie(e,t,o,c,s,p){const l=f("VNodes"),u=f("a-select"),n=f("a-col"),m=f("a-button"),i=f("a-row"),a=f("JVxeTable");return q(),z(a,Z({ref:"tableRef",rowNumber:"",keyboardEdit:"",class:[e.prefixCls],maxHeight:e.tableHeight.noToolbar,loading:e.loading,columns:e.columns,dataSource:e.dataSource,disabledRows:{dbFieldName:["id","has_child"]}},e.tableProps),{fieldValidType:g(r=>[v(i,{type:"flex",class:N(["row-valid-type",{full:!e.isCustomRegexp(r.value)}])},{default:g(()=>[v(n,{class:N(["left"])},{default:g(()=>[v(u,{value:r.value,options:e.validTypeOptions,placeholder:"空",style:{width:"100%"},onChange:r.triggerChange},{dropdownRender:g(({menuNode:C})=>[v(l,{vnodes:C},null,8,["vnodes"]),ee(x("div",Me,[x("div",{class:"ant-select-item ant-select-item-option",title:"使用自定义正则表达式作为校验规则",onClick:w=>e.onAddCustomRegexp(r),onMousedown:t[0]||(t[0]=w=>w.preventDefault())}," 正则表达式 ",40,Oe)],512),[[te,!e.isCustomRegexp(r.value)]])]),_:2},1032,["value","options","onChange"])]),_:2},1024),v(n,{class:"right",title:"修改自定义正则表达式"},{default:g(()=>[v(m,{preIcon:"ant-design:edit",onClick:()=>e.onChangeCustomRegexp(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:1},16,["class","maxHeight","loading","columns","dataSource"])}const Lt=se(Te,[["render",Ie],["__scopeId","data-v-592747d8"]]);export{Lt as default};
