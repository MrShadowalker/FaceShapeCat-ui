var Je=Object.defineProperty,Ke=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Re=(e,a,i)=>a in e?Je(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,B=(e,a)=>{for(var i in a||(a={}))Ze.call(a,i)&&Re(e,i,a[i]);if(ke)for(var i of ke(a))Qe.call(a,i)&&Re(e,i,a[i]);return e},De=(e,a)=>Ke(e,Xe(a));var T=(e,a,i)=>new Promise((f,R)=>{var I=m=>{try{l(i.next(m))}catch(d){R(d)}},t=m=>{try{l(i.throw(m))}catch(d){R(d)}},l=m=>m.done?f(m.value):Promise.resolve(m.value).then(I,t);l((i=i.apply(e,a)).next())});import{e as $,u as n,d as Oe,H as et,q as tt,A as nt,k as V,i as ot,E as ie,ae as J,Y as H,a6 as G,ab as Q,ah as ce,a9 as _,ac as st,ao as at,Q as U,ad as pe,Z as le,w as oe,I as Ve,h as rt,n as Pe,r as Le,f as Y,o as lt,a8 as it,ai as he,a7 as ct,F as ut,aa as be,aq as Me,b as dt}from"./tinymce-vendor-3c2b3d6e.js";import{a7 as de,d as we,u as ft,X as mt,a5 as Ie,e as Fe,s as pt,aF as ht,a6 as bt}from"./antd-vue-vendor-05bfa84d.js";import{c as $e,b as ye}from"./componentMap-e2e33057.js";import{F as yt,G as gt,z as xe,c as At,u as vt,H as wt,I as Ft,p as k,J as Ct,b as We,A as Ce,k as Bt}from"./index-37448b2d.js";import{B as Se,as as se,aO as ee,aq as je,v as x,at as ne,ax as Ot,_ as _e,w as fe,i as ue,aY as Pt,az as Be,a6 as qe,aM as ze,aZ as It,a_ as St,a$ as jt,ay as Ee,aR as Tt}from"./jeecg-online-vendor-f57c6456.js";import{h as He}from"./formUtils-09c7de86.js";import"./index-64ecc8b2.js";import{u as kt}from"./BasicModal-9d388b71.js";const{t:ge}=Se();function Ne(e){return e.includes("Input")||e.includes("Complete")?ge("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?ge("common.chooseText"):""}const Rt=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Dt(){return[...Rt,"RangePicker"]}function Vt(e,a,i){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(a)?e.type=i?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(a)?e.type="array":["InputNumber"].includes(a)&&(e.type="number")}function Lt(e,a){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&a&&je(a)?`${a}`:a}function Mt(e,a){return e&&["InputNumber"].includes(e)&&typeof a=="string"?Number(a):a}const Ue=Dt();function $t(e,a){return $(()=>{const i=n(e),{labelCol:f={},wrapperCol:R={}}=i.itemProps||{},{labelWidth:I,disabledLabelWidth:t}=i,{labelWidth:l,labelCol:m,wrapperCol:d,layout:S}=n(a);if(t)return{labelCol:f,wrapperCol:R};if(!l&&!I&&!m)return f.style={textAlign:"left"},{labelCol:f,wrapperCol:R};let y=I||l;const O=B(B({},m),f),N=B(B({},d),R);return y&&(y=je(y)?`${y}px`:y),{labelCol:B({style:{width:y||"100%"}},O),wrapperCol:B({style:{width:S==="vertical"?"100%":`calc(100% - ${y})`}},N)}})}function Ae(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ot(e)}const xt=Oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},validateFields:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:a}){const{t:i}=Se(),{schema:f,formProps:R}=et(e),I=$t(f,R),t=$(()=>{const{allDefaultValues:c,formModel:r,schema:b}=e,{mergeDynamicData:P}=e.formProps;return{field:b.field,model:r,values:B(B(B({},P),c),r),schema:b}}),l=$(()=>{var A;const{schema:c,tableAction:r,formModel:b,formActionType:P}=e;let{componentProps:p={}}=c;return x(p)&&(p=(A=p({schema:c,tableAction:r,formModel:b,formActionType:P}))!=null?A:{}),c.component==="Divider"&&(p=Object.assign({type:"horizontal",orientation:"left",plain:!0},p)),p}),m=$(()=>{const{disabled:c}=e.formProps,{dynamicDisabled:r}=e.schema,{disabled:b=!1}=n(l);let P=!!c||b;return ne(r)&&(P=r),x(r)&&(P=r(n(t))),P});function d(){const{show:c,ifShow:r}=e.schema,{showAdvancedButton:b}=e.formProps,P=b&&ne(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let p=!0,A=!0;return ne(c)&&(p=c),ne(r)&&(A=r),x(c)&&(p=c(n(t))),x(r)&&(A=r(n(t))),p=p&&P,{isShow:p,isIfShow:A}}function S(){var M;const{rules:c=[],component:r,rulesMessageJoinLabel:b,label:P,dynamicRules:p,required:A}=e.schema;if(x(p))return p(n(t));let v=we(c);const{rulesMessageJoinLabel:D}=e.formProps,o=Reflect.has(e.schema,"rulesMessageJoinLabel")?b:D,s=Ne(r)+`${o?P:""}`;function h(w,F){const E=w.message||s;return F===void 0||Ot(F)||Array.isArray(F)&&F.length===0||typeof F=="string"&&F.trim()===""||typeof F=="object"&&Reflect.has(F,"checked")&&Reflect.has(F,"halfChecked")&&Array.isArray(F.checked)&&Array.isArray(F.halfChecked)&&F.checked.length===0&&F.halfChecked.length===0?Promise.reject(E):Promise.resolve()}const u=x(A)?A(n(t)):A;(!v||v.length===0)&&u&&(v=[{required:u,validator:h}]);const j=v.findIndex(w=>Reflect.has(w,"required")&&!Reflect.has(w,"validator"));if(j!==-1){const w=v[j],{isShow:F}=d();if(F||(w.required=!1),r){Reflect.has(w,"type")||(w.type=r==="InputNumber"?"number":"string"),w.message=w.message||s,(r.includes("Input")||r.includes("Textarea"))&&(w.whitespace=!0);const E=(M=n(l))==null?void 0:M.valueFormat;Vt(w,r,E)}}const g=v.findIndex(w=>w.max);return g!==-1&&!v[g].validator&&(v[g].message=v[g].message||i("component.form.maxTip",[v[g].max])),v.forEach(w=>{if(typeof w.pattern=="string")try{const F=new Function("item",`return ${w.pattern}`)(w);Object.prototype.toString.call(F)==="[object RegExp]"?w.pattern=F:w.pattern=new RegExp(w.pattern)}catch(F){w.pattern=new RegExp(w.pattern)}}),v}function y(){var ae;const{renderComponentContent:c,component:r,field:b,changeEvent:P="change",valueField:p,componentProps:A}=e.schema,v=r&&["Switch","Checkbox"].includes(r);let D=!1;r==="Input"&&A&&A.trim&&(D=!0);const o=`on${ft(P)}`,s={[o]:(...q)=>{const[te]=q;g[o]&&g[o](...q);const K=te?te.target:null;let z;K?v?z=K.checked:z=D?K.value.trim():K.value:z=te,e.setFormModel(b,z)}},h=$e.get(r),{autoSetPlaceHolder:u,size:j}=e.formProps,g=De(B({allowClear:!0,getPopupContainer:q=>q==null?void 0:q.parentNode,size:j},n(l)),{disabled:n(m)});!g.disabled&&u&&r!=="RangePicker"&&r&&(g.placeholder=((ae=n(l))==null?void 0:ae.placeholder)||Ne(r)+e.schema.label),g.codeField=b,g.formValues=n(t);const w={[p||(v?"checked":"value")]:e.formModel[b]},F=B(B(B({},g),s),w);if(!c)return V(h,F,null);const E=x(c)?B({},c(n(t))):{default:()=>c};return V(h,F,Ae(E)?E:{default:()=>[E]})}function O(){const{label:c,helpMessage:r,helpComponentProps:b,subLabel:P,labelLength:p}=e.schema;let A=c+"";p&&A.length>4&&(A=A.substr(0,p));const D=P?V("span",null,[c,ie(" "),V("span",{class:"text-secondary"},[P])]):p?V("label",{title:c},[A]):c,o=x(r)?r(n(t)):r;return!o||Array.isArray(o)&&o.length===0?D:V("span",null,[D,V(gt,J({placement:"top",class:"mx-1",text:o},b),null)])}function N(){const{itemProps:c,slot:r,render:b,field:P,suffix:p,component:A}=e.schema,{labelCol:v,wrapperCol:D}=n(I),{colon:o}=e.formProps;if(A==="Divider"){let s;return V(de,{span:24},{default:()=>[V(mt,n(l),Ae(s=O())?s:{default:()=>[s]})]})}else{const s=()=>r?xe(a,r,n(t)):b?b(n(t)):y(),h=!!p,u=x(p)?p(n(t)):p;return V(Ie.Item,J({name:P,colon:o,class:{"suffix-item":h}},c,{label:O(),rules:S(),labelCol:v,wrapperCol:D}),{default:()=>[V("div",{style:"display:flex"},[V("div",{style:"flex:1; width: 100%;"},[s()]),h&&V("span",{class:"suffix"},[u])])]})}}return()=>{let c;const{colProps:r={},colSlot:b,renderColContent:P,component:p}=e.schema;if(!$e.has(p))return null;const{baseColProps:A={}}=e.formProps,{getIsMobile:v}=yt();let D;D=B(B({},A),r),r.span&&!n(v)&&["xs","sm","md","lg","xl","xxl"].forEach(j=>delete D[j]);const{isIfShow:o,isShow:s}=d(),h=n(t);return o&&tt(V(de,D,Ae(c=(()=>b?xe(a,b,h):P?P(h):N())())?c:{default:()=>[c]}),[[nt,s]])}}}),Ye=Symbol();function Et(e){return At(e,Ye)}function Nt(){return vt(Ye)}const Wt=Oe({name:"BasicFormAction",components:{FormItem:Ie.Item,Button:wt,BasicArrow:Ft,[de.name]:de},props:{showActionButtonGroup:k.bool.def(!0),showResetButton:k.bool.def(!0),showSubmitButton:k.bool.def(!0),showAdvancedButton:k.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:k.number.def(6),isAdvanced:k.bool,hideAdvanceBtn:k.bool,layout:k.oneOf(["horizontal","vertical","inline"]).def("horizontal")},emits:["toggle-advanced"],setup(e,{emit:a}){const{t:i}=Se(),f=$(()=>{const{showAdvancedButton:l,actionSpan:m,actionColOptions:d}=e,S=24-m,y=l?{span:S<6?24:S}:{},O=e.layout=="inline"?{}:{span:l?6:4};return B(B(B({style:{textAlign:"right"}},O),y),d)}),R=$(()=>Object.assign({text:i("common.resetText"),preIcon:"ic:baseline-restart-alt"},e.resetButtonOptions)),I=$(()=>Object.assign({},{text:i("common.queryText"),preIcon:"ant-design:search-outlined"},e.submitButtonOptions));function t(){a("toggle-advanced")}return B({t:i,actionColOpt:f,getResetBtnOptions:R,getSubmitBtnOptions:I,toggleAdvanced:t},Nt())}});function _t(e,a,i,f,R,I){const t=H("Button"),l=H("BasicArrow"),m=H("FormItem"),d=H("a-col");return e.showActionButtonGroup?(G(),Q(d,ce(J({key:0},e.actionColOpt)),{default:_(()=>[st("div",{style:at([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[V(m,null,{default:_(()=>[U(e.$slots,"submitBefore"),e.showSubmitButton?(G(),Q(t,J({key:0,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:_(()=>[ie(pe(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):le("",!0),U(e.$slots,"resetBefore"),e.showResetButton?(G(),Q(t,J({key:1,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:_(()=>[ie(pe(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):le("",!0),U(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(G(),Q(t,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:_(()=>[ie(pe(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),V(l,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):le("",!0),U(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):le("",!0)}const qt=_e(Wt,[["render",_t]]);function zt({defaultValueRef:e,getSchema:a,formModel:i,getProps:f}){function R(t){if(!se(t))return{};const l={};for(const m of Object.entries(t)){let[,d]=m;const[S]=m;if(!S||fe(d)&&d.length===0||x(d))continue;const y=n(f).transformDateFunc;se(d)&&(d=y==null?void 0:y(d)),fe(d)&&Fe.isDayjs(d[0])&&Fe.isDayjs(d[1])&&(d=d.map(O=>y==null?void 0:y(O))),ue(d)&&(d=d.trim()),pt(l,S,d)}return He(f,l)}function I(){const t=n(a),l={};t.forEach(m=>{const{defaultValue:d}=m;Pt(d)||(l[m.field]=d,i[m.field]=d)}),e.value=l}return{handleFormValues:R,initDefault:I}}const Z=24;function Ht({advanceState:e,emit:a,getProps:i,getSchema:f,formModel:R,defaultValueRef:I}){const{realWidthRef:t,screenEnum:l,screenRef:m}=Ct(),d=$(()=>{if(!e.isAdvanced)return 0;const c=n(i).emptySpan||0;if(je(c))return c;if(se(c)){const{span:r=0}=c,b=n(m);return c[b.toLowerCase()]||r||0}return 0}),S=We(O,30);oe([()=>n(f),()=>e.isAdvanced,()=>n(t)],()=>{const{showAdvancedButton:c}=n(i);c&&S()},{immediate:!0});function y(c,r=0,b=!1,P=0){var h;const p=n(t),A=parseInt(c.md)||parseInt(c.xs)||parseInt(c.sm)||c.span||Z,v=parseInt(c.lg)||A,D=parseInt(c.xl)||v,o=parseInt(c.xxl)||D;p<=l.LG?r+=A:p<l.XL?r+=v:p<l.XXL?r+=D:r+=o;let s=(h=n(i).autoAdvancedCol)!=null?h:3;return b?(e.hideAdvanceBtn=n(f).length<=s,r>Z*2&&r<=Z*(n(i).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced,n(f).length>s&&(e.hideAdvanceBtn=!1,e.isAdvanced=!1)),{isAdvanced:e.isAdvanced,itemColSum:r}):r>Z*(n(i).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:r}:!e.isAdvanced&&P+1>s?{isAdvanced:!1,itemColSum:r}:{isAdvanced:!0,itemColSum:r}}function O(){let c=0,r=0;const{baseColProps:b={}}=n(i),P=n(f);for(let p=0;p<P.length;p++){const A=P[p],{show:v,colProps:D}=A;let o=!0;if(ne(v)&&(o=v),x(v)&&(o=v({schema:A,model:R,field:A.field,values:B(B({},n(I)),R)})),o&&(D||b)){const{itemColSum:s,isAdvanced:h}=y(B(B({},b),D),c,!1,p);c=s||0,h&&(r=c),A.isAdvanced=h}}e.actionSpan=r%Z+n(d),y(n(i).actionColOptions||{span:Z},c,!0),a("advanced-change")}function N(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:N}}function Ut({emit:e,getProps:a,formModel:i,getSchema:f,defaultValueRef:R,formElRef:I,schemaRef:t,handleFormValues:l}){function m(){return T(this,null,function*(){const{resetFunc:o,submitOnReset:s}=n(a);o&&x(o)&&(yield o()),n(I)&&(Object.keys(i).forEach(u=>{i[u]=R.value[u]}),A(),e("reset",Ve(i)),s&&D())})}function d(o){return T(this,null,function*(){const s=n(f).map(u=>u.field).filter(Boolean),h=[];Object.keys(o).forEach(u=>{const j=n(f).find(w=>w.field===u);let g=o[u];if(!(o instanceof Object))return;const M=Reflect.has(o,u);if(g=Lt(j==null?void 0:j.component,g),g=Mt(j==null?void 0:j.component,g),M&&s.includes(u)){if(b(u))if(Array.isArray(g)){const w=[];for(const F of g)w.push(F?ee(F):null);i[u]=w}else{const{componentProps:w}=j||{};let F=w;typeof w=="function"&&(F=F({formModel:i})),i[u]=g?F!=null&&F.valueFormat?g:ee(g):null}else i[u]=g;h.push(u)}}),P(h).catch(u=>{})})}function S(o){return T(this,null,function*(){const s=we(n(f));if(!o)return;let h=ue(o)?[o]:o;ue(o)&&(h=[o]);for(const u of h)y(u,s);t.value=s})}function y(o,s){if(ue(o)){const h=s.findIndex(u=>u.field===o);h!==-1&&(delete i[o],s.splice(h,1))}}function O(o,s,h=!1){return T(this,null,function*(){const u=we(n(f)),j=u.findIndex(M=>M.field===s);if(u.some(M=>M.field===s||o.field)){if(!s||j===-1||h){h?u.unshift(o):u.push(o),t.value=u;return}j!==-1&&u.splice(j+1,0,o),t.value=u}})}function N(o){return T(this,null,function*(){let s=[];if(se(o)&&s.push(o),fe(o)&&(s=[...o]),!s.every(u=>u.component==="Divider"||Reflect.has(u,"field")&&u.field)){Be("All children of the form Schema array that need to be updated must contain the `field` field");return}t.value=s})}function c(o){return T(this,null,function*(){let s=[];if(se(o)&&s.push(o),fe(o)&&(s=[...o]),!s.every(j=>j.component==="Divider"||Reflect.has(j,"field")&&j.field)){Be("All children of the form Schema array that need to be updated must contain the `field` field");return}const u=[];s.forEach(j=>{n(f).forEach(g=>{if(g.field===j.field){const M=qe(g,j);u.push(M)}else u.push(g)})}),t.value=ht(u,"field")})}function r(){return n(I)?l(Ve(n(i))):{}}function b(o){return n(f).some(s=>s.field===o?Ue.includes(s.component):!1)}function P(o,s){return T(this,null,function*(){var h;return(h=n(I))==null?void 0:h.validateFields(o,s)})}function p(o){return T(this,null,function*(){var s;return yield(s=n(I))==null?void 0:s.validate(o)})}function A(o){return T(this,null,function*(){var s;yield(s=n(I))==null?void 0:s.clearValidate(o)})}function v(o,s){return T(this,null,function*(){var h;yield(h=n(I))==null?void 0:h.scrollToField(o,s)})}function D(o){return T(this,null,function*(){o&&o.preventDefault();const{submitFunc:s}=n(a);if(s&&x(s)){yield s();return}if(n(I))try{const u=yield p();for(let g in u)u[g]instanceof Array&&ze(a,g)==="string"&&(u[g]=u[g].join(","));const j=l(u);e("submit",j)}catch(u){e("submit",{})}})}return{handleSubmit:D,clearValidate:A,validate:p,validateFields:P,getFieldsValue:r,updateSchema:c,resetSchema:N,appendSchemaByField:O,removeSchemaByFiled:S,resetFields:m,setFieldsValue:d,scrollToField:v}}function Yt(R){return T(this,arguments,function*({getSchema:e,getProps:a,formElRef:i,isInitedDefault:f}){rt(()=>T(this,null,function*(){if(n(f)||!n(a).autoFocusFirstItem)return;yield Pe();const I=n(e),t=n(i),l=t==null?void 0:t.$el;if(!t||!l||!I||I.length===0||!I[0].component.includes("Input"))return;const d=l.querySelector(".ant-row:first-child input");d&&(d==null||d.focus())}))})}const{form:ve}=Ce,Gt={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},fieldMapToNumber:{type:Array,default:()=>[]},compact:k.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:k.bool.def(!0),autoSubmitOnEnter:k.bool.def(!1),submitOnReset:k.bool,size:k.oneOf(["default","small","large"]).def("default"),disabled:k.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:k.bool,transformDateFunc:{type:Function,default:e=>Fe.isDayjs(e)?e==null?void 0:e.format("YYYY-MM-DD HH:mm:ss"):e},rulesMessageJoinLabel:k.bool.def(!0),autoAdvancedCol:k.number.def(3),autoAdvancedLine:k.number.def(3),alwaysShowLines:k.number.def(1),showActionButtonGroup:k.bool.def(!0),actionColOptions:Object,showResetButton:k.bool.def(!0),autoFocusFirstItem:k.bool,resetButtonOptions:Object,showSubmitButton:k.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:k.bool,labelCol:{type:Object,default:ve.labelCol},layout:k.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:{type:Object,default:ve.wrapperCol},colon:k.bool.def(ve.colon),labelAlign:k.string,rowProps:Object,autoSearch:k.bool.def(!1)},Jt=Oe({name:"BasicForm",components:{FormItem:xt,Form:Ie,Row:bt,FormAction:qt},props:Gt,emits:["advanced-change","reset","submit","register"],setup(e,{emit:a,attrs:i}){const f=Le({}),R=kt(),I=Le({isAdvanced:!1,hideAdvanceBtn:!0,isLoad:!1,actionSpan:6}),t=Y({}),l=Y(!1),m=Y({}),d=Y(null),S=Y(null),{prefixCls:y}=Bt("basic-form"),O=$(()=>{let C=B(B({},e),n(m));return C.labelWidth&&(C.labelCol=void 0),C.layout==="inline"&&(C.labelCol===Ce.form.labelCol&&(C.labelCol=void 0),C.wrapperCol===Ce.form.wrapperCol&&(C.wrapperCol=void 0)),C}),N=$(()=>[y,{[`${y}--compact`]:n(O).compact}]),c=$(()=>{const{baseRowStyle:C={},rowProps:L}=n(O);return B({style:C},L)}),r=$(()=>B(B(B({},i),e),n(O))),b=$(()=>{const C=n(d)||n(O).schemas;for(const L of C){const{defaultValue:W,component:Ge,componentProps:re}=L;if(W&&Ue.includes(Ge)){let X="";if(re&&(X=re==null?void 0:re.valueFormat),!Array.isArray(W))X?L.defaultValue=ee(W).format(X):L.defaultValue=ee(W);else{const me=[];W.forEach(Te=>{X?me.push(ee(Te).format(X)):me.push(ee(Te))}),L.defaultValue=me}}}return n(O).showAdvancedButton?C.filter(L=>L.component!=="Divider"):C}),{handleToggleAdvanced:P}=Ht({advanceState:I,emit:a,getProps:O,getSchema:b,formModel:f,defaultValueRef:t}),{handleFormValues:p,initDefault:A}=zt({getProps:O,defaultValueRef:t,getSchema:b,formModel:f});Yt({getSchema:b,getProps:O,isInitedDefault:l,formElRef:S});const{handleSubmit:v,setFieldsValue:D,clearValidate:o,validate:s,validateFields:h,getFieldsValue:u,updateSchema:j,resetSchema:g,appendSchemaByField:M,removeSchemaByFiled:w,resetFields:F,scrollToField:E}=Ut({emit:a,getProps:O,formModel:f,getSchema:b,defaultValueRef:t,formElRef:S,schemaRef:d,handleFormValues:p});Et({resetAction:F,submitAction:v}),oe(()=>n(O).model,()=>{const{model:C}=n(O);C&&D(C)},{immediate:!0}),oe(()=>n(O).schemas,C=>{g(C!=null?C:[])}),oe(()=>b.value,C=>{Pe(()=>{var L;(L=R==null?void 0:R.redoModalHeight)==null||L.call(R)}),!n(l)&&C!=null&&C.length&&(A(),l.value=!0)});function ae(C){return T(this,null,function*(){m.value=qe(n(m)||{},C)})}const q=We(v,300);function te(C,L){f[C]=L,e.autoSearch===!0&&q()}function K(C){const{autoSubmitOnEnter:L}=n(O);if(L&&C.key==="Enter"&&C.target&&C.target instanceof HTMLElement){const W=C.target;W&&W.tagName&&W.tagName.toUpperCase()=="INPUT"&&v()}}const z={getFieldsValue:u,setFieldsValue:D,resetFields:F,updateSchema:j,resetSchema:g,setProps:ae,getProps:O,removeSchemaByFiled:w,appendSchemaByField:M,clearValidate:o,validateFields:h,validate:s,submit:v,scrollToField:E};return lt(()=>{A(),a("register",z)}),B({getBindValue:r,handleToggleAdvanced:P,handleEnterPress:K,formModel:f,defaultValueRef:t,advanceState:I,getRow:c,getProps:O,formElRef:S,getSchema:b,formActionType:z,setFormModel:te,getFormClass:N,getFormActionBindProps:$(()=>B(B({},O.value),I))},z)}});function Kt(e,a,i,f,R,I){const t=H("FormItem"),l=H("FormAction"),m=H("Row"),d=H("Form");return G(),Q(d,J(e.getBindValue,{class:e.getFormClass,ref:"formElRef",model:e.formModel,onKeypress:it(e.handleEnterPress,["enter"])}),{default:_(()=>[V(m,ce(he(e.getRow)),{default:_(()=>[U(e.$slots,"formHeader"),(G(!0),ct(ut,null,be(e.getSchema,S=>(G(),Q(t,{key:S.field,tableAction:e.tableAction,formActionType:e.formActionType,schema:S,formProps:e.getProps,allDefaultValues:e.defaultValueRef,formModel:e.formModel,setFormModel:e.setFormModel,validateFields:e.validateFields},Me({_:2},[be(Object.keys(e.$slots),y=>({name:y,fn:_(O=>[U(e.$slots,y,ce(he(O||{})))])}))]),1032,["tableAction","formActionType","schema","formProps","allDefaultValues","formModel","setFormModel","validateFields"]))),128)),V(l,J(e.getFormActionBindProps,{onToggleAdvanced:e.handleToggleAdvanced}),Me({_:2},[be(["resetBefore","submitBefore","advanceBefore","advanceAfter"],S=>({name:S,fn:_(y=>[U(e.$slots,S,ce(he(y||{})))])}))]),1040,["onToggleAdvanced"]),U(e.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model","onKeypress"])}const rn=_e(Jt,[["render",Kt]]);function ln(e){const a=Y(null),i=Y(!1);ye("OnlineSelectCascade",It),ye("LinkTableCard",St),ye("LinkTableSelect",jt);function f(){return T(this,null,function*(){const t=n(a);return t||Be("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield Pe(),t})}function R(t){Ee()&&dt(()=>{a.value=null,i.value=null}),!(n(i)&&Ee()&&t===n(a))&&(a.value=t,i.value=!0,oe(()=>e,()=>{e&&t.setProps(Tt(e))},{immediate:!0,deep:!0}))}return[R,{scrollToField:(t,l)=>T(this,null,function*(){(yield f()).scrollToField(t,l)}),setProps:t=>T(this,null,function*(){(yield f()).setProps(t)}),updateSchema:t=>T(this,null,function*(){(yield f()).updateSchema(t)}),resetSchema:t=>T(this,null,function*(){(yield f()).resetSchema(t)}),clearValidate:t=>T(this,null,function*(){(yield f()).clearValidate(t)}),resetFields:()=>T(this,null,function*(){f().then(t=>T(this,null,function*(){yield t.resetFields()}))}),removeSchemaByFiled:t=>T(this,null,function*(){var l;(l=n(a))==null||l.removeSchemaByFiled(t)}),getFieldsValue:()=>{var l;let t=(l=n(a))==null?void 0:l.getFieldsValue();return t&&Object.keys(t).map(m=>{t[m]instanceof Array&&(typeof(t[m][0]||"")=="object"||(t[m]=t[m].join(",")))}),t},setFieldsValue:t=>T(this,null,function*(){(yield f()).setFieldsValue(t)}),appendSchemaByField:(t,l,m)=>T(this,null,function*(){(yield f()).appendSchemaByField(t,l,m)}),submit:()=>T(this,null,function*(){return(yield f()).submit()}),validate:t=>T(this,null,function*(){const l=yield f();let m=e||l.getProps;return l.validate(t).then(S=>{for(let y in S)S[y]instanceof Array&&ze(m,y)==="string"&&(S[y]=S[y].join(","));return He(m,S)})}),validateFields:(t,l)=>T(this,null,function*(){return(yield f()).validateFields(t,l)})}]}export{rn as B,ln as u};
