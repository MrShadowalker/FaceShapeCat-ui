import D from"./LeftRole-8b8dfe21-168bf9f6.js";import w from"./LeftDepart-fa85523d-c0788916.js";import K from"./LeftUser-dc24ef2f-a4210f56.js";import O from"./AuthFieldTree-69864163-2054794c.js";import P from"./AuthButtonTree-3aa0ed49-be5a6736.js";import x from"./AuthDataTree-94e026e3-91de5d78.js";import{d as F,f as m,e as U,n as _,Y as p,a6 as M,ab as j,a9 as l,k as r,a7 as L,F as E,Z as N}from"./tinymce-vendor-3c2b3d6e.js";import{B as V}from"./index-64ecc8b2.js";import{bs as $}from"./jeecg-online-vendor-f57c6456.js";import"./index-0f0d0317.js";import"./useListPage-66651993.js";import{C as Z}from"./index-37448b2d.js";import"./auth.api-d3a6c4b3-afe9bb9e.js";import"./antd-vue-vendor-05bfa84d.js";import"./auth.data-8be5c9e3-b21bdf87.js";import"./BasicTable-400bb95b.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-2ad3f236.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";import"./injectionKey-69710956.js";var X=Object.defineProperty,Y=Object.defineProperties,q=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,I=(e,t,o)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,H=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&I(e,o,t[o]);if(A)for(var o of A(t))G.call(t,o)&&I(e,o,t[o]);return e},J=(e,t)=>Y(e,q(t)),B=(e,t,o)=>new Promise((d,n)=>{var a=u=>{try{i(o.next(u))}catch(s){n(s)}},f=u=>{try{i(o.throw(u))}catch(s){n(s)}},i=u=>u.done?d(u.value):Promise.resolve(u.value).then(a,f);i((o=o.apply(e,t)).next())});const Q=F({name:"AuthSetterModal",components:{BasicModal:V,LeftRole:D,LeftDepart:w,LeftUser:K,AuthFieldTree:O,AuthButtonTree:P,AuthDataTree:x},props:{tableType:{type:Number,default:1}},setup(e){const t=m(""),o=m(!1),d=m("field"),n=m("role"),a={fieldRef:m(),buttonRef:m(),dataRef:m(),roleRef:m(),userRef:m(),departRef:m()},f=m(""),i=U(()=>e.tableType==1||e.tableType==2),[u,{closeModal:s}]=Z(c=>{d.value="field",t.value=c.cgformId,y()});function v(c=d.value){var k;return(k=a[c+"Ref"])==null?void 0:k.value}function y(){return B(this,null,function*(){yield _(),b(),v().clear()})}function S(c){f.value=c,h(d.value),R()}function C(c){f.value=c,h(d.value),R()}function T(c){f.value=c,h(d.value),R()}function R(){n.value=="role"?(a.departRef.value.clearSelected(),a.userRef.value.clearSelected()):n.value=="depart"?(a.roleRef.value.clearSelected(),a.userRef.value.clearSelected()):n.value=="user"&&(a.departRef.value.clearSelected(),a.roleRef.value.clearSelected())}function b(){n.value=="role"?a.roleRef.value.clearSelected():n.value=="depart"?a.departRef.value.clearSelected():n.value=="user"&&a.userRef.value.clearSelected(),v().clearChecked(),f.value=""}function h(c){return B(this,null,function*(){yield _(),f.value&&v(c).loadChecked(f.value,n.value)})}function g(){b()}return J(H({},a),{cgformId:t,loading:o,activeKey:d,hasDataAuth:i,authMode:n,onAuthModeChange:g,onAuthTypeChange:h,closeModal:s,onSelectRole:S,onSelectDepart:C,onSelectUser:T,registerModal:u})}});function W(e,t,o,d,n,a){const f=p("LeftRole"),i=p("a-tab-pane"),u=p("LeftDepart"),s=p("LeftUser"),v=p("a-tabs"),y=p("a-col"),S=p("AuthFieldTree"),C=p("AuthButtonTree"),T=p("AuthDataTree"),R=p("a-row"),b=p("a-spin"),h=p("BasicModal");return M(),j(h,{title:"Online权限授权",width:900,maskClosable:!1,defaultFullscreen:"",okButtonProps:{style:{display:"none"}},cancelText:"关闭",onCancel:e.closeModal,onRegister:e.registerModal},{default:l(()=>[r(b,{wrapperClassName:"authsetting-container",spinning:e.loading},{default:l(()=>[r(R,null,{default:l(()=>[r(y,{span:12},{default:l(()=>[r(v,{activeKey:e.authMode,"onUpdate:activeKey":t[0]||(t[0]=g=>e.authMode=g),onChange:e.onAuthModeChange},{default:l(()=>[r(i,{tab:"角色授权",key:"role",forceRender:""},{default:l(()=>[r(f,{ref:"roleRef",onSelect:e.onSelectRole},null,8,["onSelect"])]),_:1}),r(i,{tab:"部门授权",key:"depart",forceRender:""},{default:l(()=>[r(u,{ref:"departRef",onSelect:e.onSelectDepart},null,8,["onSelect"])]),_:1}),r(i,{tab:"人员授权",key:"user",forceRender:""},{default:l(()=>[r(s,{ref:"userRef",onSelect:e.onSelectUser},null,8,["onSelect"])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1}),r(y,{span:1}),r(y,{span:11},{default:l(()=>[r(v,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=g=>e.activeKey=g),onChange:e.onAuthTypeChange},{default:l(()=>[r(i,{tab:"字段权限",key:"field",forceRender:""},{default:l(()=>[r(S,{class:"authFieldTree",ref:"fieldRef",cgformId:e.cgformId},null,8,["cgformId"])]),_:1}),e.hasDataAuth?(M(),L(E,{key:0},[r(i,{tab:"按钮权限",key:"button",forceRender:""},{default:l(()=>[r(C,{class:"authButtonTree",ref:"buttonRef",cgformId:e.cgformId},null,8,["cgformId"])]),_:1}),r(i,{tab:"数据权限",key:"data",forceRender:""},{default:l(()=>[r(T,{class:"authDataTree",ref:"dataRef",cgformId:e.cgformId},null,8,["cgformId"])]),_:1})],64)):N("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["onCancel","onRegister"])}const ft=$(Q,[["render",W],["__scopeId","data-v-aee70da5"]]);export{ft as default};
