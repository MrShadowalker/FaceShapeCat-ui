var E=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var S=(o,t,e)=>t in o?E(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,k=(o,t)=>{for(var e in t||(t={}))D.call(t,e)&&S(o,e,t[e]);if(w)for(var e of w(t))G.call(t,e)&&S(o,e,t[e]);return o},b=(o,t)=>N(o,O(t));import{d as z,f as d,r as A,o as j,b as H,Y as h,a6 as P,a7 as U,k as c,a9 as u,ac as C,u as x}from"./tinymce-vendor-3c2b3d6e.js";import{u as Y}from"./index-0f0d0317.js";import{ap as _,C as q}from"./jeecg-online-vendor-f57c6456.js";import{e as F}from"./antd-vue-vendor-05bfa84d.js";import{useECharts as M}from"./useECharts-218e4a8d.js";import J from"./BasicTable-400bb95b.js";import"./index-2ad3f236.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./index-37448b2d.js";import"./vxe-table-vendor-26792376.js";import"./useWindowSizeFn-e63bb4b0.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./echarts-676384e9.js";import"./echarts-vendor-0b842a89.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";import"./injectionKey-69710956.js";const L=()=>_.get({url:"/sys/actuator/redis/keysSize"},{isTransformResponse:!1}),Q=()=>_.get({url:"/sys/actuator/redis/memoryInfo"},{isTransformResponse:!1}),T=()=>_.get({url:"/sys/actuator/redis/info"}),W=()=>Promise.all([L(),Q()]),X=[{title:"Key",dataIndex:"key",width:100},{title:"Description",dataIndex:"description",width:80},{title:"Value",dataIndex:"value",width:80}],Z={class:"p-4"},$=z({name:"monitor-redis"}),fe=z(b(k({},$),{setup(o){const t=d([]),e=d(null),g=d(null),{setOptions:I,echarts:tt}=M(e),{setOptions:v,echarts:et}=M(g),ot=d(!1);let f=null;const{createMessage:rt}=q(),s=A({title:{text:"Redis Key 实时数量（个）"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",areaStyle:{color:"#ff6987"},lineStyle:{color:"#dc143c",width:10,type:"solid"}}]}),n=A({title:{text:"Redis 内存实时占用情况（KB）"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",areaStyle:{color:"#74bcff"},lineStyle:{color:"#1890ff",width:10,type:"solid"}}]}),[K,{reload:it}]=Y({columns:X,showIndexColumn:!1,pagination:!1,bordered:!0});function st(a,l){let r=null,i=null;return a.forEach(p=>{let m=Number.parseInt(p[l]);(r==null||m>r)&&(r=m),(i==null||m<i)&&(i=m)}),[r,i]}function at(){T().then(a=>{t.value=a.result})}function V(){I(n),v(s)}function B(){y(),R(),f=setInterval(()=>{y()},5e3)}function R(){f&&clearInterval(f)}function y(){W().then(a=>{let l=F().format("hh:mm:ss"),[{dbSize:r},i]=a,p=i.used_memory/1e3;s.xAxis.data.push(l),s.series[0].data.push(r),n.xAxis.data.push(l),n.series[0].data.push(p),s.series[0].data.length>6&&(s.xAxis.data.splice(0,1),s.series[0].data.splice(0,1),n.xAxis.data.splice(0,1),n.series[0].data.splice(0,1)),I(n,!1),v(s,!1)}).catch(a=>{})}return j(()=>{V(),B(),setTimeout(()=>{y()},1e3)}),H(()=>{R()}),(a,l)=>{const r=h("a-col"),i=h("a-row"),p=h("a-card");return P(),U("div",Z,[c(p,null,{default:u(()=>[c(i,{gutter:8},{default:u(()=>[c(r,{sm:24,xl:12},{default:u(()=>[C("div",{ref_key:"chartRef",ref:e,style:{width:"100%",height:"300px"}},null,512)]),_:1}),c(r,{sm:24,xl:12},{default:u(()=>[C("div",{ref_key:"chartRef2",ref:g,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),c(x(J),{onRegister:x(K),api:x(T)},null,8,["onRegister","api"])])}}}));export{fe as default};
