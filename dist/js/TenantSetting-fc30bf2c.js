var fe=Object.defineProperty,ve=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var H=(u,r,l)=>r in u?fe(u,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[r]=l,K=(u,r)=>{for(var l in r||(r={}))ge.call(r,l)&&H(u,l,r[l]);if(G)for(var l of G(r))he.call(r,l)&&H(u,l,r[l]);return u},Q=(u,r)=>ve(u,me(r));var B=(u,r,l)=>new Promise((z,p)=>{var A=i=>{try{U(l.next(i))}catch(k){p(k)}},N=i=>{try{U(l.throw(i))}catch(k){p(k)}},U=i=>i.done?z(i.value):Promise.resolve(i.value).then(A,N);U((l=l.apply(u,r)).next())});import{d as ne,f as _,o as xe,Y as x,a6 as d,a7 as v,ac as e,E as y,ad as m,Z as ye,F,aa as W,z as $,k as o,ab as E,q as ke,A as we,aj as Ce,u as g,a9 as a,a4 as Te,a5 as Ie}from"./tinymce-vendor-3c2b3d6e.js";import{d as Ue,e as be,f as ze,c as Se,h as Ne}from"./UserSetting.api-24e5eb9b.js";import{u as Oe,C as Pe,I as X,_ as $e}from"./jeecg-online-vendor-f57c6456.js";import{k as Me,aM as ee}from"./index-37448b2d.js";import{M as te}from"./antd-vue-vendor-05bfa84d.js";import{U as Ve}from"./index-aba90786.js";import"./vxe-table-vendor-26792376.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";const c=u=>(Te("data-v-ef630031"),u=u(),Ie(),u),De={class:"my-tenant"},Be=c(()=>e("span",{style:{flex:"1"}},"我的租户",-1)),Ee={key:0,class:"approved-count"},Ae={key:0,class:"tenant-list"},Le=["onClick"],Re={class:"tenant-title"},je={class:"item-left"},Fe={class:"item-name"},qe={class:"vip-message"},Je=["onClick"],Ye={class:"item-right"},Ze={key:0},Ge=c(()=>e("span",{class:"pointer examine"},"待审核",-1)),He=["onClick"],Ke={key:1},Qe=["onClick"],We=["onClick"],Xe={key:2,style:{width:"75px"}},et={style:{"margin-left":"24px"}},tt={class:"item-content"},nt={class:"content-box"},st=c(()=>e("div",{class:"content-name"}," 组织名片 ",-1)),ot={class:"content-desc"},at={class:"flex-flow"},lt=c(()=>e("div",{class:"content-des-text"},"姓名",-1)),it={style:{"font-size":"13px",color:"#000000"}},ct={class:"flex-flow"},dt=c(()=>e("div",{class:"content-des-text"},"部门",-1)),ut={style:{"font-size":"13px"}},rt={class:"flex-flow"},pt=c(()=>e("div",{class:"content-des-text"},"职业",-1)),_t={style:{"font-size":"13px"}},ft={class:"footer-box"},vt=["onClick"],mt=c(()=>e("span",null,"查看租户名片",-1)),gt={key:1,class:"font-color9e flex-center margin-right40 font-size13"},ht=c(()=>e("span",null,"查看租户名片",-1)),xt=["onClick"],yt=c(()=>e("span",null,"退出租户",-1)),kt={key:3,class:"font-color9e flex-center margin-right40 font-size13"},wt=c(()=>e("span",null,"退出租户",-1)),Ct=c(()=>e("div",{style:{"font-size":"17px","font-weight":"700"}},"查看名片",-1)),Tt=c(()=>e("div",{style:{color:"#9e9e9e","margin-top":"10px","font-size":"13px"}}," 名片是您在该组织下的个人信息，只在本组织中展示。 ",-1)),It={style:{"margin-top":"24px","font-size":"13px",padding:"0 24px"}},Ut=c(()=>e("div",{class:"font-color75"},"姓名",-1)),bt={class:"margin-top6 margin-bottom-16"},zt=c(()=>e("div",null,"部门",-1)),St={class:"margin-top6 margin-bottom-16"},Nt=c(()=>e("div",null,"职位",-1)),Ot={class:"margin-top6 margin-bottom-16"},Pt=c(()=>e("div",null,"工作地点",-1)),$t={class:"margin-top6 margin-bottom-16"},Mt=c(()=>e("div",null,"工号",-1)),Vt={class:"margin-top6 margin-bottom-16"},Dt={class:"cancellation"},Bt={style:{padding:"20px"}},Et=c(()=>e("div",{class:"change-owen"}," 只有变更拥有着之后,才能退出 ",-1)),At=["onClick"],Lt=["onClick"],Rt=c(()=>e("div",{style:{height:"20px"}},null,-1)),jt=ne({name:"tenant-setting"}),Ft=ne(Q(K({},jt),{setup(u){const{prefixCls:r}=Me("j-user-tenant-setting-container"),l=_([]),z=Oe(),{createMessage:p}=Pe(),A=_([]),N=_(!1),U=_([]),i=_({realname:z.getUserInfo.realname,workNo:z.getUserInfo.workNo,orgCodeTxt:z.getUserInfo.orgCodeTxt,postText:z.getUserInfo.postText});function k(){return B(this,null,function*(){Ue({userTenantStatus:"1,3,5"}).then(n=>{if(n.success)if(n.result&&n.result.length>0){let t=n.result,f=[],P=[];for(let h=0;h<t.length;h++)t[h].userTenantStatus==="5"&&P.push(t[h]),f.push(t[h]);l.value=f,R.value=P,V.value=P.length}else q();else q()})})}function q(){l.value=[],R.value=[],V.value=0}function se(n){const t=document.createElement("input");t.setAttribute("value",n),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),p.success("复制成功")}function oe(n){te.confirm({title:"取消申请",content:"是否取消申请",okText:"确认",cancelText:"取消",onOk:()=>{be({tenantId:n}).then(t=>{t.success?(p.success("取消申请成功"),k()):p.warning(t.message)}).catch(t=>{p.warning(t.message)})}})}function ae(n){n.show?n.show=!1:n.show=!0}function qt(n){let t=A.value.filter(f=>{f.value==n});return t&&t.length>0?t[0].label:"未填写"}function J(n,t){U.value=t,n==="editTenant"?N.value=!0:n==="exitTenant"&&(w.value={loginPassword:"",tenantName:""},O.value=!0,b.value=!0,T.value=t)}const b=_(!1),w=_({}),T=_({}),O=_(!0),M=_(""),L=_(!1);function le(){let n=g(T).name,t=g(w).tenantName;n===t?O.value=!1:O.value=!0}function ie(){return B(this,null,function*(){if(!g(w).loginPassword){p.warning("请输入登录密码");return}yield ze({id:g(T).tenantUserId,loginPassword:g(w).loginPassword}).then(n=>{if(n.success)p.success(n.message),b.value=!1,k(),ee(g(T).tenantUserId);else if(n.message==="assignedOwen")L.value=!0,b.value=!1;else if(n.message==="cancelTenant"){b.value=!1;let t=X.currentRoute.value.fullPath;te.confirm({title:"您是该组织的拥有者",content:"该组织下没有其他成员，需要您前往注销",okText:"前往注销",okType:"danger",cancelText:"取消",onOk:()=>{t!=="/system/usersetting"&&X.push("/myapps/settings/organization/organMessage/"+g(T).tenantUserId)}})}else p.warning(n.message)}).catch(n=>{p.warning(n.message)})})}function ce(){b.value=!1,O.value=!0}function de(){if(!g(M)){p.warning("请选择变更拥有者");return}Se({userId:g(M),tenantId:g(T).tenantUserId}).then(n=>{n.success?(p.success(n.message),k(),ee(g(T).tenantUserId)):p.warning(n.message)})}const V=_(0),R=_([]),j=_(!1);function ue(){j.value=!0}function D(n,t){return B(this,null,function*(){yield Ne({tenantId:Number.parseInt(n),status:t}),k()})}return xe(()=>{k()}),(n,t)=>{const f=x("Icon"),P=x("a-empty"),h=x("a-modal"),C=x("a-col"),re=x("a-input"),S=x("a-row"),Y=x("a-form-item"),pe=x("a-input-password"),_e=x("a-form"),Z=x("a-button");return d(),v(F,null,[e("div",{class:Ce(["tenant-padding",[`${g(r)}`]])},[e("div",De,[Be,e("span",{class:"invited",onClick:ue},[y("我的受邀信息"),V.value>0?(d(),v("span",Ee,m(V.value),1)):ye("",!0)])]),l.value.length>0?(d(),v("div",Ae,[(d(!0),v(F,null,W(l.value,s=>(d(),v("div",{class:"tenant-list-item",onClick:I=>ae(s)},[e("div",Re,[e("div",je,[e("div",Fe,m(s.name),1),e("div",qe,[e("div",{class:"item-house",onClick:$(I=>se(s.houseNumber),["stop"])},[e("span",null,[y(" 组织门牌号："+m(s.houseNumber)+" ",1),o(f,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])],8,Je)])]),e("div",Ye,[s.userTenantStatus==="3"?(d(),v("span",Ze,[Ge,e("span",{class:"pointer cancel-apply",onClick:$(I=>oe(s.tenantUserId),["stop"])},"取消申请",8,He)])):s.userTenantStatus==="5"?(d(),v("span",Ke,[e("span",{class:"pointer examine",onClick:I=>D(s.tenantUserId,"1")},"加入",8,Qe),e("span",{class:"pointer cancel-apply",onClick:$(I=>D(s.tenantUserId,"4"),["stop"])},"拒绝",8,We)])):(d(),v("div",Xe)),e("span",et,[s.show?(d(),E(f,{key:0,icon:"ant-design:down-outlined",style:{"font-size":"13px",color:"#707070"}})):(d(),E(f,{key:1,icon:"ant-design:right-outlined",style:{"font-size":"13px",color:"#707070"}}))])])]),ke(e("div",tt,[e("div",nt,[st,e("div",ot,[e("div",at,[lt,e("div",it,m(i.value.realname),1)]),e("div",ct,[dt,e("div",ut,m(i.value.orgCodeTxt?i.value.orgCodeTxt:"未填写"),1)]),e("div",rt,[pt,e("div",_t,m(i.value.postText?i.value.postText:"未填写"),1)])])]),e("div",ft,[s.userTenantStatus!=="3"?(d(),v("span",{key:0,onClick:$(I=>J("editTenant",s),["stop"]),class:"font-color333 flex-center margin-right40 font-size13 pointer"},[o(f,{icon:"ant-design:edit-outlined",class:"footer-icon"}),mt],8,vt)):(d(),v("span",gt,[o(f,{icon:"ant-design:edit-outlined",class:"footer-icon"}),ht])),s.userTenantStatus!=="3"?(d(),v("span",{key:2,onClick:$(I=>J("exitTenant",s),["stop"]),class:"font-color333 flex-center margin-right40 font-size13 pointer"},[o(f,{icon:"ant-design:export-outlined",class:"footer-icon"}),yt],8,xt)):(d(),v("span",kt,[o(f,{icon:"ant-design:export-outlined",class:"footer-icon"}),wt]))])],512),[[we,s.show]])],8,Le))),256))])):(d(),E(P,{key:1,description:"暂无数据",style:{position:"relative",top:"50px"}}))],2),o(h,{open:N.value,"onUpdate:open":t[0]||(t[0]=s=>N.value=s),width:"400px",wrapClassName:"edit-tenant-setting"},{title:a(()=>[Ct,Tt]),default:a(()=>[e("div",It,[Ut,e("div",bt,m(i.value.realname),1),zt,e("div",St,m(i.value.orgCodeTxt?i.value.orgCodeTxt:"未填写"),1),Nt,e("div",Ot,m(i.value.postText?i.value.postText:"未填写"),1),Pt,e("div",$t,m(U.value.workPlace?U.value.workPlace:"未填写"),1),Mt,e("div",Vt,m(i.value.workNo?i.value.workNo:"未填写"),1)])]),_:1},8,["open"]),o(h,{open:b.value,"onUpdate:open":t[3]||(t[3]=s=>b.value=s),width:"800","destroy-on-close":""},{title:a(()=>[e("div",Dt,[o(f,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),y(" 退出租户 "+m(T.value.name),1)])]),footer:a(()=>[o(Z,{type:"primary",onClick:ie,disabled:O.value},{default:a(()=>[y("确定")]),_:1},8,["disabled"]),o(Z,{onClick:ce},{default:a(()=>[y("取消")]),_:1})]),default:a(()=>[o(_e,{model:w.value,ref:"cancelTenantRef"},{default:a(()=>[o(Y,{name:"tenantName"},{default:a(()=>[o(S,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[y(" 请输入租户名称 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(re,{value:w.value.tenantName,"onUpdate:value":t[1]||(t[1]=s=>w.value.tenantName=s),onChange:le},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(Y,{name:"loginPassword"},{default:a(()=>[o(S,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[y(" 请输入您的登录密码 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(pe,{value:w.value.loginPassword,"onUpdate:value":t[2]||(t[2]=s=>w.value.loginPassword=s)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),o(h,{title:"变更拥有者",open:L.value,"onUpdate:open":t[5]||(t[5]=s=>L.value=s),width:"800","destroy-on-close":"",cancelButtonProps:{display:"none"},onOk:de},{default:a(()=>[e("div",Bt,[o(S,{span:24},{default:a(()=>[Et]),_:1}),o(S,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(Ve,{value:M.value,"onUpdate:value":t[4]||(t[4]=s=>M.value=s),izExcludeMy:""},null,8,["value"])]),_:1})])]),_:1},8,["open"]),o(h,{title:"我的受邀信息",open:j.value,"onUpdate:open":t[6]||(t[6]=s=>j.value=s),footer:null},{default:a(()=>[o(S,{span:24,class:"invited-row"},{default:a(()=>[o(C,{span:16},{default:a(()=>[y(" 组织 ")]),_:1}),o(C,{span:8},{default:a(()=>[y(" 操作 ")]),_:1})]),_:1}),(d(!0),v(F,null,W(R.value,s=>(d(),E(S,{span:24,class:"invited-row-list"},{default:a(()=>[o(C,{span:16},{default:a(()=>[y(m(s.name),1)]),_:2},1024),o(C,{span:8},{default:a(()=>[e("span",{class:"common",onClick:I=>D(s.tenantUserId,"1")},"加入",8,At),e("span",{class:"common refuse",onClick:I=>D(s.tenantUserId,"4")},"拒绝",8,Lt)]),_:2},1024)]),_:2},1024))),256)),Rt]),_:1},8,["open"])],64)}}}));const nn=$e(Ft,[["__scopeId","data-v-ef630031"]]);export{nn as default};
