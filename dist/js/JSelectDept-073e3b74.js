var X=Object.defineProperty,Z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))x.call(t,n)&&w(e,n,t[n]);if(R)for(var n of R(t))ee.call(t,n)&&w(e,n,t[n]);return e},A=(e,t)=>Z(e,W(t));import{d as F,f as m,u as h,Y as r,a6 as B,a7 as H,k as i,ae as D,a9 as u,ab as N,E as _,Z as I,r as te,p as T,h as ae,w as E,I as K}from"./tinymce-vendor-3c2b3d6e.js";import{B as ne}from"./index-64ecc8b2.js";import{p,C as le,X as oe,Y as se,E as ue}from"./index-37448b2d.js";import{ar as J,_ as j}from"./jeecg-online-vendor-f57c6456.js";import{t as ie}from"./props-ea47501e.js";import{_ as re}from"./index-d4a67b72.js";import{u as ce}from"./useTreeBiz-a3326efb.js";import{o as de}from"./antd-vue-vendor-05bfa84d.js";import{J as me}from"./JSelectBiz-b887fca6.js";import{useRuleFormItem as pe}from"./useFormItem-613b6d5d.js";const fe=F({name:"DeptSelectModal",components:{BasicModal:ne,BasicTree:re},props:A(L({},ie),{modalTitle:{type:String,default:"部门选择"},maxHeight:{type:Number,default:500},value:p.oneOfType([p.string,p.array])}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:n}){const[y,{closeModal:v}]=le(),k=J(),o=m(null);let a=e.value===""?[]:e.value,l=Object.assign({},h(e),h(k),{value:a},{disabled:!1});const d=de(l,"multiple"),f=Q(),[{visibleChange:g,checkedKeys:C,getCheckStrictly:c,getSelectTreeData:O,onCheck:$,onLoadData:V,treeData:s,checkALL:S,expandAll:q,onSelect:z}]=ce(o,f,d,e),U=m(e.params),G=m([]),P={key:e.rowKey};function Y(){O((b,M)=>{t("getSelectResult",b,M),v()})}function Q(){let b=e.sync?oe:se;return M=>b(Object.assign({},M,{primaryKey:e.rowKey}))}return{tree:G,handleOk:Y,searchInfo:U,treeRef:o,treeData:s,onCheck:$,onSelect:z,checkALL:S,expandAll:q,fieldNames:P,checkedKeys:C,register:y,getBindValue:d,getCheckStrictly:c,visibleChange:g,onLoadData:V}}});function ge(e,t,n,y,v,k){const o=r("BasicTree"),a=r("a-menu-item"),l=r("a-menu"),d=r("Icon"),f=r("a-button"),g=r("a-dropdown"),C=r("BasicModal");return B(),H("div",null,[i(C,D(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:"500px",maxHeight:e.maxHeight,onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{insertFooter:u(()=>[i(g,{placement:"top"},{overlay:u(()=>[i(l,null,{default:u(()=>[e.multiple?(B(),N(a,{key:"1",onClick:t[0]||(t[0]=c=>e.checkALL(!0))},{default:u(()=>[_("全部勾选")]),_:1})):I("",!0),e.multiple?(B(),N(a,{key:"2",onClick:t[1]||(t[1]=c=>e.checkALL(!1))},{default:u(()=>[_("取消全选")]),_:1})):I("",!0),i(a,{key:"3",onClick:t[2]||(t[2]=c=>e.expandAll(!0))},{default:u(()=>[_("展开全部")]),_:1}),i(a,{key:"4",onClick:t[3]||(t[3]=c=>e.expandAll(!1))},{default:u(()=>[_("折叠全部")]),_:1})]),_:1})]),default:u(()=>[i(f,{style:{float:"left"}},{default:u(()=>[_(" 树操作 "),i(d,{icon:"ant-design:up-outlined"})]),_:1})]),_:1})]),default:u(()=>[i(o,D({ref:"treeRef",treeData:e.treeData,"load-data":e.sync==!1?null:e.onLoadData},e.getBindValue,{onSelect:e.onSelect,onCheck:e.onCheck,fieldNames:e.fieldNames,checkedKeys:e.checkedKeys,multiple:e.multiple,checkStrictly:e.getCheckStrictly}),null,16,["treeData","load-data","onSelect","onCheck","fieldNames","checkedKeys","multiple","checkStrictly"])]),_:1},16,["onRegister","title","maxHeight","onOk","onVisibleChange"])])}const he=j(fe,[["render",ge]]),ye=F({name:"JSelectDept",components:{DeptSelectModal:he,JSelectBiz:me},inheritAttrs:!1,props:{value:p.oneOfType([p.string,p.array]),multiple:p.bool.def(!0)},emits:["options-change","change","select","update:value"],setup(e,{emit:t,refs:n}){const y=m(),[v,{openModal:k}]=ue(),[o]=pe(e,"value","change",y),a=m([]);let l=te({value:[]});const d=m(!1);T("selectOptions",a),T("selectValues",l),T("loadingEcho",d);const f=m(!1),g=J();ae(()=>{e.value&&c()}),E(()=>e.value,()=>{c()}),E(l,()=>{l&&(o.value=l.value)}),E(a,()=>{a&&t("select",K(h(a)),K(h(l)))});function C(){f.value=!0,k(!0,{isUpdate:!1})}function c(){let s=e.value?e.value:[];s&&typeof s=="string"?(o.value=s.split(","),l.value=s.split(",")):l.value=s}function O(s,S){a.value=s,o.value=S,l.value=S,t("update:value",S.join(","))}const $=Object.assign({},h(e),h(g));function V(s){t("update:value",s)}return{state:o,attrs:g,selectOptions:a,selectValues:l,loadingEcho:d,getBindValue:$,tag:f,regModal:v,setValue:O,handleOpen:C,handleChange:V}}});function ve(e,t,n,y,v,k){const o=r("JSelectBiz"),a=r("DeptSelectModal");return B(),H("div",null,[i(o,D({onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs,{onChange:e.handleChange}),null,16,["onHandleOpen","loading","onChange"]),i(a,D({onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue,{multiple:e.multiple}),null,16,["onRegister","onGetSelectResult","multiple"])])}const Te=j(ye,[["render",ve],["__scopeId","data-v-a8d1e27c"]]);export{Te as i};
