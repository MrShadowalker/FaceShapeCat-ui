import{d as De,f as Me,w as Ee,Y as F,a6 as n,a7 as f,k as s,u as e,Z as c,ab as a,aj as Pe,a9 as i,E as d,F as L,aa as Fe,ad as R,q as Le,A as Ne,ac as T,ae as Oe,af as Ae,ag as Qe,ah as ze,ai as He}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import{C as Je}from"./jeecg-online-vendor-f57c6456.js";import Ve from"./OnlineCustomModal-518ad33c-1d54cb82.js";import je from"./OnlineTabAutoModal-6f636ee2-03e6e2be.js";import N from"./OnlineTabDetailModal-7356d3a8-3f022561.js";import{e as qe}from"./JImportModal-15f7db6a.js";import{p as Ke,d as $e}from"./useListButton-cdbab702-1beaee8c.js";import{B as Ue,d as We,D as Ye,N as Ze}from"./useExtendComponent-325fe3f1-007b9393.js";import Ge from"./OnlineQueryForm-1bfc8320-01818773.js";import Xe from"./SuperQuery-5d1ca957-03ae60ef.js";import{u as eo}from"./useOnlinePopEvent-687070b7-3b2e3730.js";import{e as oo}from"./constant-754f1a9d-eadfd1e1.js";import"./index-64ecc8b2.js";import"./OnlineForm-1fa2d893-7d37908f.js";import"./index-09260ce4.js";import"./antd-vue-vendor-05bfa84d.js";import"./index-37448b2d.js";import"./useCustomHook-acb00837-32b1f38e.js";import"./OnlineTabForm-512d3951-86104182.js";import"./CommentPanel-62548135.js";import"./OnlineTabFormDetail-5a70219d-c1b039bf.js";import"./DetailForm-424638eb-a0926224.js";import"./index-76418551.js";import"./index-2d7d6454.js";import"./OnlineSubFormDetail-f0d2c016-93cac491.js";import"./cgformState-d9f8ec42-a08af090.js";import"./componentMap-e2e33057.js";import"./index-8e09cdad.js";import"./user.api-367a7bce.js";import"./customExpression-b2f1ff9b.js";import"./useListPage-66651993.js";import"./LinkTableListPiece-8499a318-01ebb291.js";import"./OnlineSelectCascade-4265c95d-4cbe6ffe.js";import"./JModalTip-33c7dc44-1741a3e9.js";import"./SuperQueryValComponent.vue_vue_type_script_lang-e9196096-fd4361e6.js";import to from"./BasicTable-400bb95b.js";import{Q as no}from"./index-2ad3f236.js";import"./vxe-table-vendor-26792376.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./data-9be677e2.js";import"./JUpload-70acb676.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./injectionKey-69710956.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";var B=(D,I,r)=>new Promise((p,S)=>{var y=l=>{try{C(r.next(l))}catch(h){S(h)}},m=l=>{try{C(r.throw(l))}catch(h){S(h)}},C=l=>l.done?p(l.value):Promise.resolve(l.value).then(y,m);C((r=r.apply(D,I)).next())});const io={class:"p-2"},ro={key:0,style:{"font-size":"12px","font-style":"italic"}},ao={key:0,style:{"font-size":"12px","font-style":"italic"}},lo=["src","onClick"],so=["innerHTML"],po=["title"],Ht=De({__name:"OnlCgformTabList",setup(D){const{createMessage:I}=Je(),{ID:r,onlineTableContext:p,onlineQueryFormOuter:S,loading:y,reload:m,dataSource:C,pagination:l,handleSpecialConfig:h,getColumnList:O,handleChangeInTable:A,loadData:Q,superQueryButtonRef:v,superQueryStatus:z,handleSuperQuery:H,onlineExtConfigJson:M,handleFormConfig:J,registerCustomModal:V,tableReloading:j}=Ke();if(!r.value)throw I.warning("地址错误, 配置ID不存在!"),new Error("地址错误, 配置ID不存在!");let{initCgEnhanceJs:q}=Ue(p);const{buttonSwitch:k,cgTopButtonList:x,importUrl:K,registerModal:$,handleAdd:U,handleBatchDelete:W,registerImportModal:Y,onImportExcel:Z,onExportExcel:G,cgButtonJsHandler:X,cgButtonActionHandler:ee,getDropDownActions:oe,getActions:te,initButtonList:ne,initButtonSwitch:ie,registerDetailModal:re,registerBpmModal:mo}=$e(p,M),_=Me(!1);function ae(){return B(this,null,function*(){try{_.value=!0,yield G()}finally{setTimeout(()=>_.value=!1,1500)}})}const{columns:le,actionColumn:se,selectedKeys:pe,rowSelection:me,enableScrollBar:ce,tableScroll:ue,downloadRowFile:de,getImgView:ge,getPcaText:E,getFormatDate:fe,handleColumnResult:ye,hrefComponent:b,viewOnlineCellImage:Ce,hrefMainTableId:he,registerOnlineHrefModal:ke,registerPopModal:Se,openPopModal:be,onlinePopModalRef:we,popTableId:P}=We(p,M);Ee(r,()=>{Re()},{immediate:!0});function Re(){return B(this,null,function*(){y.value=!0;let t=yield O(oo);Ie(t),yield Q(),y.value=!1,p.execButtonEnhance("setup")})}function Ie(t){let g=q(t.enhanceJs);p.EnhanceJS=g,ne(t.cgButtonList),ie(t.hideColumns),ye(t),h(t)}function ve(t){p.queryParam=t,m({mode:"search"})}function xe(t){return B(this,null,function*(){yield Ye(v),v.value.init(t)})}function _e(t){P.value=t.id;let g={title:t.describe};t.record&&t.record.id&&(g.record=t.record,g.isUpdate=!0),be(!0,g)}return eo(_e),(t,g)=>{const u=F("a-button"),Te=F("a-modal");return n(),f("div",io,[s(Ge,{ref_key:"onlineQueryFormOuter",ref:S,id:e(r),onSearch:ve,onLoaded:xe},null,8,["id"]),e(j)?c("",!0):(n(),a(e(to),{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e(y),columns:e(le),dataSource:e(C),pagination:e(l),rowSelection:e(me),actionColumn:e(se),showTableSetting:!0,clickToRowSelect:!1,scroll:e(ue),onTableRedo:e(m),class:Pe({"j-table-force-nowrap":e(ce)}),onChange:e(A)},{tableTitle:i(()=>[e(k).add?(n(),a(u,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e(U)},{default:i(()=>[d("新增")]),_:1},8,["onClick"])):c("",!0),e(k).import?(n(),a(u,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e(Z)},{default:i(()=>[d("导入")]),_:1},8,["onClick"])):c("",!0),e(k).export?(n(),a(u,{key:2,preIcon:"ant-design:export-outlined",type:"primary",loading:_.value,onClick:ae},{default:i(()=>[d(" 导出")]),_:1},8,["loading"])):c("",!0),e(x)&&e(x).length>0?(n(!0),f(L,{key:3},Fe(e(x),(o,w)=>(n(),f(L,null,[o.optType=="js"?(n(),a(u,{key:"cgbtn"+w,onClick:Be=>e(X)(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[d(R(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):o.optType=="action"?(n(),a(u,{key:"cgbtn"+w,onClick:Be=>e(ee)(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[d(R(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):c("",!0)],64))),256)):c("",!0),e(k).batch_delete?Le((n(),a(u,{key:4,preIcon:"ant-design:delete-outlined",onClick:e(W)},{default:i(()=>[d(" 批量删除")]),_:1},8,["onClick"])),[[Ne,e(pe).length>0]]):c("",!0),e(k).super_query?(n(),a(Xe,{key:5,ref_key:"superQueryButtonRef",ref:v,online:"",status:e(z),onSearch:e(H)},null,8,["status","onSearch"])):c("",!0)]),fileSlot:i(({text:o})=>[o?(n(),a(u,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:w=>e(de)(o)},{default:i(()=>[d(" 下载 ")]),_:2},1032,["onClick"])):(n(),f("span",ro,"无文件"))]),imgSlot:i(({text:o})=>[o?(n(),f("img",{key:1,src:e(ge)(o),alt:"图片不存在",class:"online-cell-image",onClick:w=>e(Ce)(o)},null,8,lo)):(n(),f("span",ao,"无图片"))]),htmlSlot:i(({text:o})=>[T("div",{innerHTML:o},null,8,so)]),pcaSlot:i(({text:o})=>[T("div",{title:e(E)(o)},R(e(E)(o)),9,po)]),dateSlot:i(({text:o})=>[T("span",null,R(e(fe)(o)),1)]),action:i(({record:o})=>[s(e(no),{actions:e(te)(o),dropDownActions:e(oe)(o)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),s(je,{id:e(r),onRegister:e($),onSuccess:e(m),onFormConfig:e(J)},null,8,["id","onRegister","onSuccess","onFormConfig"]),s(N,{id:e(r),onRegister:e(re)},null,8,["id","onRegister"]),s(qe,{onRegister:e(Y),url:e(K)(),onOk:e(m),online:""},null,8,["onRegister","url","onOk"]),s(Te,Oe(e(b).model,Ae(e(b).on)),{default:i(()=>[(n(),a(Qe(e(b).is),ze(He(e(b).params)),null,16))]),_:1},16),s(Ve,{onRegister:e(V),onSuccess:e(m)},null,8,["onRegister","onSuccess"]),s(N,{id:e(he),onRegister:e(ke),defaultFullscreen:!1},null,8,["id","onRegister"]),s(Ze,{ref_key:"onlinePopModalRef",ref:we,id:e(P),onRegister:e(Se),onSuccess:e(m),request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}}});export{Ht as default};
