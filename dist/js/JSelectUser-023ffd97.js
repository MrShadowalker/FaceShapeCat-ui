import{d as M,f as s,r as C,p as u,h as E,w as h,u as y,Y as _,a6 as J,a7 as L,k as S,ae as U}from"./tinymce-vendor-3c2b3d6e.js";import K from"./UserSelectModal-e7ea3e82.js";import R from"./JSelectBiz-f6a2b32b.js";import"./index-64ecc8b2.js";import{p as i,E as $}from"./index-37448b2d.js";import{useRuleFormItem as b}from"./useFormItem-613b6d5d.js";import{ar as j,_ as k}from"./jeecg-online-vendor-f57c6456.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./antd-vue-vendor-05bfa84d.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";const z=M({name:"JSelectUser",components:{UserSelectModal:K,JSelectBiz:R},inheritAttrs:!1,props:{value:i.oneOfType([i.string,i.array]),labelKey:{type:String,default:"realname"},rowKey:{type:String,default:"username"},params:{type:Object,default:()=>{}},excludeUserIdList:{type:Array,default:()=>[]}},emits:["options-change","change","update:value"],setup(e,{emit:o}){const c=s(),[d,{openModal:p}]=$(),[l]=b(e,"value","change",c),n=s([]);let a=C({value:[],change:!1});const f=s(!1);u("selectOptions",n),u("selectValues",a),u("loadingEcho",f);const m=s(!1),g=j();E(()=>{e.value&&I(),e.value||(a.value=[])}),h(a,()=>{a&&(l.value=a.value)});const v=s([]);h(()=>e.excludeUserIdList,t=>{v.value=t},{immediate:!0});function O(){m.value=!0,p(!0,{isUpdate:!1})}function I(){let t=e.value?e.value:[];t&&typeof t=="string"&&t!="null"&&t!="undefined"?(l.value=t.split(","),a.value=t.split(",")):a.value=t}function V(t,r){n.value=t,l.value=r,a.value=r,o("update:value",r.join(","))}const w=Object.assign({},y(e),y(g));function B(t){o("update:value",t)}return{state:l,attrs:g,selectOptions:n,getBindValue:w,selectValues:a,loadingEcho:f,tag:m,regModal:d,setValue:V,handleOpen:O,excludeUserIdList:v,handleChange:B}}});function A(e,o,c,d,p,l){const n=_("JSelectBiz"),a=_("UserSelectModal");return J(),L("div",null,[S(n,U({onChange:e.handleChange,onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs),null,16,["onChange","onHandleOpen","loading"]),S(a,U({rowKey:e.rowKey,onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue,{excludeUserIdList:e.excludeUserIdList}),null,16,["rowKey","onRegister","onGetSelectResult","excludeUserIdList"])])}const Z=k(z,[["render",A],["__scopeId","data-v-f63116c6"]]);export{Z as default};
