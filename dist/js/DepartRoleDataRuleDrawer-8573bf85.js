var R=(y,u,n)=>new Promise((c,l)=>{var i=t=>{try{p(n.next(t))}catch(_){l(_)}},s=t=>{try{p(n.throw(t))}catch(_){l(_)}},p=t=>t.done?c(t.value):Promise.resolve(t.value).then(i,s);p((n=n.apply(y,u)).next())});import{d as q,f as d,Y as a,a6 as f,ab as k,a9 as e,k as r,a7 as z,aa as A,E as K,ad as S,F as T,ac as b,u as v}from"./tinymce-vendor-3c2b3d6e.js";import{u as U,B as Y}from"./index-563223fc.js";import{d as G,e as H}from"./depart.user.api-f634a469.js";import"./jeecg-online-vendor-f57c6456.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./index-37448b2d.js";const J={style:{width:"100%","margin-top":"15px"}},M=b("span",null,"点击保存",-1),ae=q({__name:"DepartRoleDataRuleDrawer",emits:["register"],setup(y){const u=d(!1),n=d(""),c=d(""),l=d(""),i=d([]),s=d([]),[p,{closeDrawer:t}]=U(o=>{l.value=v(o.roleId),n.value=v(o.departId),c.value=v(o.functionId),_()});function _(){return R(this,null,function*(){try{u.value=!0;const{datarule:o,drChecked:m}=yield G(c,n,l);i.value=o,m&&(s.value=m.split(","))}finally{u.value=!1}})}function h(){let o={permissionId:c.value,roleId:l.value,dataRuleIds:s.value.join(",")};H(o)}function w(){I()}function I(){c.value="",l.value="",i.value=[],s.value=[]}return(o,m)=>{const x=a("a-checkbox"),D=a("a-col"),C=a("a-button"),B=a("a-row"),N=a("a-checkbox-group"),F=a("a-empty"),V=a("a-tab-pane"),E=a("a-tabs"),L=a("a-spin");return f(),k(v(Y),{title:"数据规则/按钮权限配置",width:365,onClose:w,onRegister:v(p)},{default:e(()=>[r(L,{spinning:u.value},{default:e(()=>[r(E,{defaultActiveKey:"1"},{default:e(()=>[r(V,{tab:"数据规则",key:"1"},{default:e(()=>[i.value.length>0?(f(),k(N,{key:0,value:s.value,"onUpdate:value":m[0]||(m[0]=g=>s.value=g)},{default:e(()=>[r(B,null,{default:e(()=>[(f(!0),z(T,null,A(i.value,(g,j)=>(f(),k(D,{span:24,key:"dr"+j},{default:e(()=>[r(x,{value:g.id},{default:e(()=>[K(S(g.ruleName),1)]),_:2},1032,["value"])]),_:2},1024))),128)),r(D,{span:24},{default:e(()=>[b("div",J,[r(C,{type:"primary",loading:u.value,size:"small",preIcon:"ant-design:save-filled",onClick:h},{default:e(()=>[M]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["value"])):(f(),k(F,{key:1,description:"无配置信息"}))]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["onRegister"])}}});export{ae as default};
