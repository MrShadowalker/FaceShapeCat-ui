var te=Object.defineProperty,oe=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var O=(n,l,e)=>l in n?te(n,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[l]=e,U=(n,l)=>{for(var e in l||(l={}))le.call(l,e)&&O(n,e,l[e]);if(N)for(var e of N(l))ae.call(l,e)&&O(n,e,l[e]);return n},F=(n,l)=>oe(n,ne(l));var T=(n,l,e)=>new Promise((s,p)=>{var R=m=>{try{b(e.next(m))}catch(y){p(y)}},M=m=>{try{b(e.throw(m))}catch(y){p(y)}},b=m=>m.done?s(m.value):Promise.resolve(m.value).then(R,M);b((e=e.apply(n,l)).next())});import{d as A,f as k,r as w,Y as d,a6 as P,a7 as ie,ac as _,k as t,a9 as o,u,ab as B,Z as H,E as f,ad as re,a8 as pe,a4 as se,a5 as de}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import{useListPage as me}from"./useListPage-66651993.js";import{l as ce,g as ue,a as fe,d as _e,b as be}from"./EvPurchaseOrderForm-03206bfa.js";import ye from"./EvPurchaseOrderModal-f5c895cb.js";import{u as ve,_ as ge}from"./jeecg-online-vendor-f57c6456.js";import{l as L}from"./JDictSelectTag-f0227cc5.js";import"./index-09260ce4.js";import{J as Q}from"./componentMap-e2e33057.js";import{Q as he}from"./index-2ad3f236.js";import Ie from"./BasicTable-400bb95b.js";import"./index-37448b2d.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./useFormItem-613b6d5d.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./injectionKey-69710956.js";const we=[{title:"供应商",align:"center",dataIndex:"supplier"},{title:"采购单号",align:"center",dataIndex:"code"},{title:"付款方式",align:"center",dataIndex:"payType",customRender:({text:n,record:l,index:e,column:s})=>{if(n=="0")return"微信";if(n=="1")return"支付宝";if(n=="2")return"现金"}},{title:"供应商联系人",align:"center",dataIndex:"contact"},{title:"采购时间",align:"center",dataIndex:"buyTime"},{title:"付款状态",align:"center",dataIndex:"payStatus",customRender:({text:n,record:l,index:e,column:s})=>{if(n=="0")return"已支付";if(n=="1")return"未支付"}},{title:"实际金额",align:"center",dataIndex:"payMoney"}];const xe={remark:{title:"备注",order:0,view:"text",type:"string"},supplierId:{title:"供应商",order:1,view:"text",type:"string"},code:{title:"采购单号",order:2,view:"text",type:"string"},paymentType:{title:"付款方式",order:3,view:"text",type:"string"},supplierName:{title:"供应商联系人",order:4,view:"text",type:"string"},supplierPhone:{title:"供应商联系电话",order:5,view:"text",type:"string"},purchaseTime:{title:"采购时间",order:6,view:"datetime",type:"string"},paymentTime:{title:"付款时间",order:7,view:"datetime",type:"string"},paymentStatus:{title:"付款状态",order:8,view:"text",type:"string"},status:{title:"采购状态",order:9,view:"text",type:"string"},reviewStatus:{title:"审核状态",order:10,view:"text",type:"string"}},D=n=>(se("data-v-9c83d314"),n=n(),de(),n),Se={class:"p-2"},Ce={class:"jeecg-basic-table-form-container"},Te=D(()=>_("span",{title:"供应商"},"供应商",-1)),ke=D(()=>_("span",{title:"采购单号"},"采购单号",-1)),Pe=D(()=>_("span",{title:"付款方式"},"付款方式",-1)),De={style:{float:"left",overflow:"hidden"},class:"table-page-search-submitButtons"},Re=A({name:"evPurchaseOrder-evPurchaseOrder"}),Me=A(F(U({},Re),{setup(n){const l=k(),e=w({}),s=k(!1),p=k(),R=ve(),{prefixCls:M,tableContext:b,onExportXls:m,onImportXls:y}=me({tableProps:{api:ce,columns:we,canResize:!1,showTableSetting:!1,useSearchForm:!1,showIndexColumn:!0,actionColumn:{width:150,fixed:"right"},beforeFetch:a=>Object.assign(a,e)},exportConfig:{name:"采购订单表",url:ue,params:e},importConfig:{url:fe,success:g}}),[J,{reload:x,collapseAll:Ye,updateTableDataRecord:Ee,findTableDataRecord:Ne,getDataSource:Oe},{rowSelection:Ue,selectedRowKeys:v}]=b,K=w({xs:24,sm:6}),V=w({xs:24,sm:16}),Fe=w(xe);function Be(a){Object.keys(a).map(i=>{e[i]=a[i]}),S()}function j(){p.value.disableSubmit=!1,p.value.add()}function He(a){p.value.disableSubmit=!1,p.value.edit(a)}function Y(a){p.value.disableSubmit=!0,p.value.edit(a)}function E(a){return T(this,null,function*(){yield _e({id:a.id},g)})}function X(){return T(this,null,function*(){yield be({ids:v.value},g)})}function g(){(v.value=[])&&x()}function $(a){return[{label:"详情",onClick:Y.bind(null,a)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:E.bind(null,a),placement:"topLeft"}}]}function Le(a){return[{label:"详情",onClick:Y.bind(null,a)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:E.bind(null,a),placement:"topLeft"}}]}function S(){x()}function q(){l.value.resetFields(),v.value=[],x()}return(a,i)=>{const h=d("a-form-item"),c=d("a-col"),I=d("a-button"),C=d("Icon"),z=d("a-row"),Z=d("a-form"),G=d("a-menu-item"),W=d("a-menu"),ee=d("a-dropdown");return P(),ie("div",Se,[_("div",Ce,[t(Z,{ref_key:"formRef",ref:l,onKeyup:pe(S,["enter","native"]),model:e,"label-col":K,"wrapper-col":V},{default:o(()=>[t(z,{gutter:24},{default:o(()=>[t(c,{lg:6},{default:o(()=>[t(h,{label:"采购店铺"},{default:o(()=>[t(L,{type:"select",value:e.shopId,"onUpdate:value":i[0]||(i[0]=r=>e.shopId=r),dictCode:"sys_depart,depart_name,id,parent_id!=''",placeholder:"请选择采购店铺",disabled:a.disabled},null,8,["value","disabled"])]),_:1})]),_:1}),t(c,{lg:6},{default:o(()=>[t(h,{name:"supplier"},{label:o(()=>[Te]),default:o(()=>[t(u(Q),{placeholder:"请输入供应商",value:e.supplier,"onUpdate:value":i[1]||(i[1]=r=>e.supplier=r)},null,8,["value"])]),_:1})]),_:1}),t(c,{lg:6},{default:o(()=>[t(h,{name:"code"},{label:o(()=>[ke]),default:o(()=>[t(u(Q),{placeholder:"请输入采购单号",value:e.code,"onUpdate:value":i[2]||(i[2]=r=>e.code=r)},null,8,["value"])]),_:1})]),_:1}),s.value?(P(),B(c,{key:0,lg:6},{default:o(()=>[t(h,{name:"payType"},{label:o(()=>[Pe]),default:o(()=>[t(L,{type:"select",value:e.payType,"onUpdate:value":i[3]||(i[3]=r=>e.payType=r),dictCode:"ev_pay_type",placeholder:"请选择付款方式"},null,8,["value"])]),_:1})]),_:1})):H("",!0),t(c,{xl:6,lg:6,md:8,sm:24},{default:o(()=>[_("span",De,[t(c,{lg:6},{default:o(()=>[t(I,{type:"primary",preIcon:"ant-design:search-outlined",onClick:S},{default:o(()=>[f("查询")]),_:1}),t(I,{type:"primary",preIcon:"ant-design:reload-outlined",onClick:q,style:{"margin-left":"8px"}},{default:o(()=>[f("重置")]),_:1}),_("a",{onClick:i[4]||(i[4]=r=>s.value=!s.value),style:{"margin-left":"8px"}},[f(re(s.value?"收起":"展开")+" ",1),t(C,{icon:s.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),t(u(Ie),{onRegister:u(J)},{tableTitle:o(()=>[t(I,{type:"primary",onClick:j,preIcon:"ant-design:plus-outlined"},{default:o(()=>[f(" 新增")]),_:1}),u(v).length>0?(P(),B(ee,{key:0},{overlay:o(()=>[t(W,null,{default:o(()=>[t(G,{key:"1",onClick:X},{default:o(()=>[t(C,{icon:"ant-design:delete-outlined"}),f(" 删除 ")]),_:1})]),_:1})]),default:o(()=>[t(I,null,{default:o(()=>[f("批量操作 "),t(C,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):H("",!0)]),action:o(({record:r})=>[t(u(he),{actions:$(r)},null,8,["actions"])]),bodyCell:o(({column:r,record:Qe,index:Ae,text:Je})=>[]),_:1},8,["onRegister"]),t(ye,{ref_key:"registerModal",ref:p,onSuccess:g},null,512)])}}}));const Zt=ge(Me,[["__scopeId","data-v-9c83d314"]]);export{Zt as default};
