var h=(C,v,n)=>new Promise((c,_)=>{var m=i=>{try{r(n.next(i))}catch(p){_(p)}},o=i=>{try{r(n.throw(i))}catch(p){_(p)}},r=i=>i.done?c(i.value):Promise.resolve(i.value).then(m,o);r((n=n.apply(C,v)).next())});import{d as A,f as y,e as Y,o as j,Y as x,a6 as b,a7 as D,ac as t,k as d,u as f,ad as l,a9 as F,E as R,aj as V,F as H}from"./tinymce-vendor-3c2b3d6e.js";import{a as O}from"./index-97c46925.js";import{aB as $,u as P,C as q}from"./jeecg-online-vendor-f57c6456.js";import{h as G}from"./header-55b09394.js";import{a as J}from"./upload-a76cbda7.js";import{k as K,E as L,g as Q}from"./index-37448b2d.js";import{e as W,d as X}from"./antd-vue-vendor-05bfa84d.js";import{a as Z,g as tt}from"./UserSetting.api-24e5eb9b.js";import{_ as et}from"./UserAccountModal-9cfeeadf.js";import"./index-64ecc8b2.js";import"./base64Conver-fa2fe1af.js";import"./vxe-table-vendor-26792376.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-2ad3f236.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./download-2caf3e60.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";import"./validator-a0d2ebc7.js";import"./user.api-367a7bce.js";const ot={class:"user-setting-top"},at={class:"account-avatar"},st={class:"account-right"},it={key:0},nt={class:"font-size-17 account-name"},rt={key:1},lt={class:"use-day"},ct={class:"account-data"},mt={class:"account-detail"},pt=t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"详细资料",-1),ut={class:"margin-bottom-10 font-size-13"},dt=t("span",{class:"gray-75 item-label"},"生日",-1),_t={class:"gray-3"},ft={class:"margin-bottom-10 font-size-13"},vt=t("span",{class:"gray-75 item-label"},"性别",-1),gt={class:"gray-3"},ht=t("span",{class:"item-label"},null,-1),yt={class:"account-info"},xt=t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"联系信息",-1),bt={class:"margin-bottom-10 font-size-13"},Dt=t("span",{class:"gray-75 item-label"},"邮箱",-1),Ct={class:"gray-3"},It={class:"margin-bottom-10 font-size-13"},Mt=t("span",{class:"gray-75 item-label"},"手机",-1),kt={class:"gray-3"},Ae=A({__name:"BaseSetting",setup(C){const v=$("sex")||[{text:"男",value:"1"},{text:"女",value:"2"}],{createMessage:n}=q(),c=P(),{prefixCls:_}=K("j-base-setting-container"),m=y(!1),o=y({}),r=y(),[i,{openModal:p}]=L(),k=Y(()=>Q(o.value.avatar)||G);function z(e,a){const s=c.getUserInfo;s.avatar=a,c.setUserInfo(s),a&&I({avatar:a,id:s.id})}function I(e){Z(e).then(a=>{a.success||n.warn(a.message)})}function B(){m.value=!0,setTimeout(()=>{r.value.focus()},100)}function T(){o.value.realname?(I({realname:o.value.realname,id:o.value.id}),c.setUserInfo(o.value)):n.warn("请输入姓名"),m.value=!1}function U(e){return e?W(e).format("YYYY-MM-DD"):"未填写"}function E(e){let a=v.find(u=>parseInt(u.value)===e),s="未填写";return a&&(s=a.text),s}function w(){let e=X(o.value);p(!0,{record:e})}function M(){tt().then(e=>h(this,null,function*(){e.success&&(e.result?(e.result.sexText=E(e.result.sex),e.result.birthday=U(e.result.birthday),e.result.createTimeText=S(e.result.createTime),o.value=e.result):o.value={})}))}function S(e){let a,s,u=Date.parse(e),g=new Date().getTime();return s=Math.abs(g-u),a=Math.floor(s/(1e3*3600*24)),a+" 天"}return j(()=>h(this,null,function*(){M()})),(e,a)=>{const s=x("Icon"),u=x("a-tooltip"),g=x("a-input");return b(),D(H,null,[t("div",{class:V(["account-padding",[`${f(_)}`]])},[t("div",ot,[t("div",at,[d(f(O),{uploadApi:f(J),showBtn:!1,value:k.value,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:z,width:"80"},null,8,["uploadApi","value"]),t("div",st,[m.value?(b(),D("div",rt,[d(g,{ref_key:"accountNameEdit",ref:r,maxlength:100,value:o.value.realname,"onUpdate:value":a[0]||(a[0]=N=>o.value.realname=N),onBlur:T},null,8,["value"])])):(b(),D("div",it,[t("span",nt,l(o.value.realname),1),d(u,{content:"编辑姓名"},{default:F(()=>[d(s,{class:"pointer font-size-17 gray-bd account-icon",icon:"ant-design:edit-outlined",onClick:B})]),_:1})])),t("div",lt,[R(" 使用："),t("span",null,l(o.value.createTimeText),1)])])])]),t("div",ct,[t("div",mt,[pt,t("div",ut,[dt,t("span",_t,l(o.value.birthday),1)]),t("div",ft,[vt,t("span",gt,l(o.value.sexText),1)]),t("div",{class:"font-size-13"},[ht,t("span",{class:"item-label pointer",style:{color:"#1e88e5"},onClick:w},"编辑")])]),t("div",yt,[xt,t("div",bt,[Dt,t("span",Ct,l(o.value.email?o.value.email:"未填写"),1)]),t("div",It,[Mt,t("span",kt,l(o.value.phone?o.value.phone:"未填写"),1)])])])],2),d(et,{onRegister:f(i),onSuccess:M},null,8,["onRegister"])],64)}}});export{Ae as default};
