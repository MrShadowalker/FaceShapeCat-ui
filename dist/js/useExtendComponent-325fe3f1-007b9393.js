var mn=Object.defineProperty;var gn=(n,e,t)=>e in n?mn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ct=(n,e,t)=>(gn(n,typeof e!="symbol"?e+"":e,t),t);import{b as bn}from"./componentMap-e2e33057.js";import{ae as vt,E as De,C as Ct,g as Ve,p as se,b as yn}from"./index-37448b2d.js";import{f as F,r as Ce,w as he,I as be,n as Ae,e as de,u as ke,Y as ie,a6 as G,ab as Oe,a7 as ue,k as ae,d as wt,l as _e,ae as St,a9 as oe,E as Fe,ad as Te,Z as ve,h as vn,c as Cn,o as wn,j as Sn,ac as pe,F as Ee,aa as Ke,a0 as xn,a3 as Fn,aj as pt}from"./tinymce-vendor-3c2b3d6e.js";import{p as Le,br as Tn,bs as On,ar as kn,B as qe,aI as Ze,aY as Pn,aN as Dn}from"./antd-vue-vendor-05bfa84d.js";import{B as xt}from"./index-64ecc8b2.js";import{bt as In,u as Rn,bu as Xe,ap as me,H as Mn,C as et,bs as Re,ao as _n,bv as $n,aL as Ft,e as An,bw as jn}from"./jeecg-online-vendor-f57c6456.js";import"./index-09260ce4.js";import{o as Vn}from"./constant-754f1a9d-eadfd1e1.js";import"./index-8e09cdad.js";import{d as Bn}from"./user.api-367a7bce.js";import{F as Tt}from"./customExpression-b2f1ff9b.js";import"./index-0f0d0317.js";import{useListPage as En}from"./useListPage-66651993.js";import{R as Ln}from"./data-9be677e2.js";import{c as Nn}from"./index-76418551.js";import Jn from"./LinkTableListPiece-8499a318-01ebb291.js";import Hn from"./OnlineSelectCascade-4265c95d-4cbe6ffe.js";import Un from"./JModalTip-33c7dc44-1741a3e9.js";import{U as qn}from"./JUpload-70acb676.js";import{B as Ot,u as kt}from"./useForm-df7d93c5.js";import Wn from"./BasicTable-400bb95b.js";import{Q as Yn}from"./index-2ad3f236.js";class zn{constructor(e){ct(this,"all");e||(e=Ln);let t=[];const i=e[86];Object.keys(i).map(c=>{t.push({id:c,text:i[c],pid:"86",index:1});const a=e[c];Object.keys(a).map(h=>{t.push({id:h,text:a[h],pid:c,index:2});const b=e[h];b&&Object.keys(b).map(g=>{t.push({id:g,text:b[g],pid:h,index:3})})})}),this.all=t}get pca(){return this.all}getCode(e){if(!e||e.length==0)return"";for(let t of this.all)if(t.text===e)return t.id}getText(e,t=3){if(!e||e.length==0)return"";let i=[];return this.getAreaBycode(e,i,t),i.join("/")}getRealCode(e){let t=[];return this.getPcode(e,t,3),t}getPcode(e,t,i){for(let c of this.all)c.id===e&&c.index==i&&(t.unshift(e),c.pid!="86"&&this.getPcode(c.pid,t,--i))}getAreaBycode(e,t,i){for(let c of this.all)c.id===e&&c.index==i&&(t.unshift(c.text),c.pid!="86"&&this.getAreaBycode(c.pid,t,--i))}}const Kn=new zn,Qn=function(n){let e=3;return n&&n.includes(",")&&(e=n.split(",").length,n=n.substr(n.lastIndexOf(",")+1)),Kn.getText(n,e)};var Gn=Object.defineProperty,Zn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,ei=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,ht=(n,e,t)=>e in n?Gn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ge=(n,e)=>{for(var t in e||(e={}))ei.call(e,t)&&ht(n,t,e[t]);if(ft)for(var t of ft(e))ti.call(e,t)&&ht(n,t,e[t]);return n},Pt=(n,e)=>Zn(n,Xn(e)),Y=(n,e,t)=>new Promise((i,c)=>{var a=g=>{try{b(t.next(g))}catch(M){c(M)}},h=g=>{try{b(t.throw(g))}catch(M){c(M)}},b=g=>g.done?i(g.value):Promise.resolve(g.value).then(a,h);b((t=t.apply(n,e)).next())});const Dt="jeecg_submit_form_and_flow",ni="flow_submit_id",It="online_form_table_name",Ie="validate-failed",ii="setup",li="EnhanceJS",oi={password:"text",file:"text",image:"text",textarea:"text",umeditor:"text",markdown:"text",checkbox:"list_multi",radio:"list"},si=".jeecg-online-modal .ant-modal-content",ri="online_";class K{constructor(e,t){this._data=t,this.field=e,this.label=t.title,this.hidden=!1,this.order=t.order||999,this.required=!1,this.onlyValidator="",this.setFieldsValue="",this.hasChange=!0,e.indexOf("@")>0?this.pre=e.substring(0,e.indexOf("@")+1):this.pre="",this.schemaProp={},this.searchForm=!1,this.disabled=!1,this.popContainer="",this.handleWidgetAttr(t),this.inPopover=!1,this.labelLength=Vn,this.initLabelLength()}getFormItemSchema(){let e=this.getItem();return this.addDefaultChangeEvent(e),e}getItem(){let e={field:this.field,label:this.label,labelLength:this.labelLength,component:"Input",itemProps:{labelCol:{class:"online-form-label"}}},t=this.getRule();return t.length>0&&this.onlyValidator&&(e.rules=t),this.hidden===!0&&(e.show=!1),e}setFormRef(e){this.formRef=e}isHidden(){return this.hidden=!0,this}isRequired(e){return e&&e.length>0&&e.indexOf(this.field)>=0&&(this.required=!0),this}initLabelLength(){let e=this.getExtendData();e&&e.labelLength&&(this.labelLength=e.labelLength)}getExtendData(){let e={},{fieldExtendJson:t}=this._data;if(t&&typeof t=="string")try{let i=JSON.parse(t);e=ge({},i)}catch(i){}return e}getRelatedHideFields(){return[]}getPlaceholder(){return"请输入"+this.label}setOnlyValidateFun(e){e&&(this.onlyValidator=(t,i)=>Y(this,null,function*(){let c=yield e(t,i);return c?Promise.reject(c):Promise.resolve()}))}getRule(){let e=[];const{view:t,errorInfo:i,pattern:c,type:a}=this._data;if(this.required===!0){let h=this.getPlaceholder();i&&(h=i),t=="sel_depart"||t=="sel_user"?this.schemaProp.required=!0:e.push({required:!0,message:h})}if(t=="sel_user"&&c==="only"&&this.onlyValidator&&e.push({validator:this.onlyValidator}),t==="list"||t==="radio"||t==="markdown"||t==="pca"||t.indexOf("sel")>=0||t==="time"||t.indexOf("upload")>=0||t.indexOf("file")>=0||t.indexOf("image")>=0)return e;if(c)if(c==="only")this.onlyValidator&&e.push({validator:this.onlyValidator});else if(c==="z")a=="number"||a=="integer"||e.push({pattern:/^-?\d+$/,message:"请输入整数"});else{let h=i||"正则校验失败",b;try{b=new RegExp(c),b||(b=c)}catch(g){b=c}e.push({pattern:b,message:h})}return e}addDefaultChangeEvent(e){this.hasChange&&(e.componentProps||(e.componentProps={}),this.disabled==!0&&(e.componentProps.disabled=!0),e.componentProps.hasOwnProperty("onChange")||(e.componentProps.onChange=(t,i)=>{t instanceof Event&&(t=t.target.value),t instanceof Array&&(t=t.join(",")),!this.formRef||!this.formRef.value||!this.formRef.value.$formValueChange||this.formRef.value.$formValueChange(this.field,t,i)})),Object.keys(this.schemaProp).map(t=>{e[t]=this.schemaProp[t]})}noChange(){this.hasChange=!1}updateField(e){this.field=e}setFunctionForFieldValue(e){e&&(this.setFieldsValue=e)}asSearchForm(){this.searchForm=!0}getModalAsContainer(){let e=this.getPopContainer();if(e!="body"){const t=document.querySelectorAll(e);if(t&&t.length>1){const i=[];if(t.forEach(c=>{c.offsetWidth==0&&c.offsetHeight==0||i.push(c)}),i.length===1)return i[0]}}return document.querySelector(e)}getPopContainer(){return this.searchForm===!0?"body":this.inPopover===!0?`.${this.popContainer}`:this.popContainer?`.${this.popContainer} .ant-modal-content`:si}handleWidgetAttr(e){e.ui&&e.ui.widgetattrs&&e.ui.widgetattrs.disabled==!0&&(this.disabled=!0)}setCustomPopContainer(e){this.popContainer=e}getLinkFieldInfo(){return""}setOtherInfo(e){}isInPopover(){this.inPopover=!0}}class mt extends K{getItem(){let e=super.getItem();return this.hidden===!0&&(e.show=!1),e}}var Rt=(n=>(n.datetime="YYYY-MM-DD HH:mm:ss",n.date="YYYY-MM-DD",n))(Rt||{});class ai extends K{constructor(e,t){super(e,t),this.format=Rt[t.view],this.showTime=t.view!="date"}getItem(){let e=super.getItem();return Object.assign({},e,{component:"DatePicker",componentProps:{placeholder:`请选择${this.label}`,showTime:this.showTime,valueFormat:this.format,style:{width:"100%"},getPopupContainer:t=>this.getModalAsContainer()}})}}class ui extends K{constructor(e,t){super(e,t),this.options=this.getOptions(t.enum,t.type),this.dictTable=t.dictTable,this.dictText=t.dictText,this.dictCode=t.dictCode,this.multi=t.multi||!1}getItem(){let e=super.getItem(),t=this.getFormComponent(),i=this.getComponentProps();return Object.assign({},e,{component:t,componentProps:i})}getFormComponent(){return this.options.length>0?"Select":"JDictSelectTag"}getComponentProps(){let e={allowClear:!0,mode:this.multi===!0?"multiple":"combobox",style:{width:"100%"},getPopupContainer:t=>this.getModalAsContainer()};if(this.options.length>0)e.options=this.options;else if(!this.dictTable)e.dictCode=this.dictCode;else{let t=`${this.dictTable},${this.dictText},${this.dictCode}`;e.dictCode=encodeURI(t)}return e}getOptions(e,t){if(!e||e.length==0)return[];let i=t=="number",c=[];for(let a of e){let h=a.value;i&&(h=parseInt(h)),c.push({value:h,label:a.title})}return c}}class di extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"InputPassword"})}}class ci extends K{getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JUpload",componentProps:t})}getComponentProps(){let e=this.getExtendData();return e&&e.uploadnum?{maxCount:Number(e.uploadnum)}:{}}}class pi extends K{getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JUpload",componentProps:t})}getComponentProps(){let e={fileType:qn.image},t=this.getExtendData();return t&&t.uploadnum&&(e.maxCount=Number(t.uploadnum)),e}}class fi extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"InputTextArea",componentProps:{autoSize:{minRows:4,maxRows:10}}})}}class hi extends K{constructor(e,t){super(e,t),this.dictTable=t.dictTable,this.dictText=t.dictText,this.dictCode=t.dictCode}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JSelectMultiple",componentProps:t})}getComponentProps(){if(!this.dictTable&&!this.dictCode)return{};{let e={};if(!this.dictTable)e.dictCode=this.dictCode;else{let t=`${this.dictTable},${this.dictText},${this.dictCode}`;e.dictCode=encodeURI(t)}return e.triggerChange=!0,e.popContainer=this.getPopContainer(),e}}}class mi extends K{constructor(e,t){super(e,t),this.dict=encodeURI(`${t.dictTable},${t.dictText},${t.dictCode}`)}getItem(){let e=super.getItem(),t=this.getPopContainer();return Object.assign({},e,{component:"JSearchSelect",componentProps:{dict:this.dict,pageSize:10,async:!0,popContainer:t}})}}class gi extends K{constructor(e,t){super(e,t),this.code=t.code,this.multi=t.popupMulti,this.fieldConfig=this.getFieldConfig(t)}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JPopup",componentProps:t})}getComponentProps(){let e={code:this.code,multi:this.multi,fieldConfig:this.fieldConfig};return this.formRef?e.formElRef=this.formRef:e.setFieldsValue=this.setFieldsValue,this.inPopover===!0&&(e.getContainer=()=>this.getModalAsContainer()),e}getFieldConfig(e){let{destFields:t,orgFields:i}=e;if(!t||t.length==0)return[];let c=t.split(","),a=i.split(","),h=[];const b=this.pre;for(let g=0;g<c.length;g++)h.push({target:b+c[g],source:a[g]});return h}}class bi extends K{constructor(e,t){super(e,t),this.multi=!1,this.pid=t.pidValue,this.pcode=t.pcode,this.textField=t.textField}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{componentProps:t,component:"JCategorySelect"})}getComponentProps(){let e={placeholder:"请选择"+this.label};if(this.pcode)e.pcode=this.pcode;else{let t=this.pid||"EMPTY_PID";e.pid=t}return this.textField?Pt(ge({loadTriggleChange:!0,multiple:this.multi},e),{back:this.textField,onChange:(t,i)=>{this.formRef&&(this.formRef.value.setFieldsValue(i),this.formRef.value.$formValueChange(this.field,t))}}):ge({multiple:this.multi},e)}getRelatedHideFields(){let e=[];return this.textField&&e.push(this.textField),e}}class yi extends K{getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JSelectDept",componentProps:t})}getComponentProps(){let e=this.getExtendData(),t={checkStrictly:!0,showButton:!1};return e.text&&(t.labelKey=e.text),e.store&&(t.rowKey=e.store),e.multiSelect===!1&&(t.multiple=!1),e.multiSelect===!0&&(t.multiple=!0),this.inPopover===!0&&(t.getContainer=()=>this.getModalAsContainer()),t}}class vi extends K{constructor(e,t){super(e,t),this.showButton=t.showButton!==!1}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JSelectUser",componentProps:t})}getComponentProps(){let e=this.getExtendData(),t={showSelected:!1,allowClear:!0,isRadioSelection:!1,showButton:this.showButton};return e.text&&(t.labelKey=e.text),e.store&&(t.rowKey=e.store),e.multiSelect===!1&&(t.isRadioSelection=!0),this.inPopover===!0&&(t.getContainer=()=>this.getModalAsContainer()),t}}class Ci extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"JEditor",componentProps:{options:{auto_focus:!1}}})}}class wi extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"JMarkdownEditor",componentProps:{}})}}class Si extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"JAreaSelect"})}}class xi extends K{constructor(e,t){super(e,t),this.dict=t.dict,this.pidField=t.pidField,this.pidValue=t.pidValue}getItem(){let e=super.getItem();return Object.assign({},e,{component:"JTreeSelect",componentProps:{dict:this.dict,pidField:this.pidField,pidValue:this.pidValue}})}}class Fi extends K{constructor(e,t){super(e,t),this.dictTable=t.dictTable,this.dictText=t.dictText,this.dictCode=t.dictCode}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JDictSelectTag",componentProps:t})}getComponentProps(){if(!this.dictTable&&!this.dictCode)return{};if(this.dictTable){let e=`${this.dictTable},${this.dictText},${this.dictCode}`;return{dictCode:encodeURI(e),type:"radio"}}else return{dictCode:this.dictCode,type:"radio"}}}class Ti extends K{constructor(e,t){super(e,t),this.options=this.getOptions(t.enum)}getItem(){let e=super.getItem();return Object.assign({},e,{component:"JCheckbox",componentProps:{options:this.options,triggerChange:!0}})}getOptions(e){if(!e||e.length==0)return[];let t=[];for(let i of e)t.push({value:i.value,label:i.title});return t}}class Oi extends K{constructor(e,t){super(e,t),this.hasChange=!1}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"JSwitch",componentProps:t})}getComponentProps(){let{fieldExtendJson:e}=this._data,t=["Y","N"];if(e&&typeof e=="string"){let i=JSON.parse(e);i.length==2&&(t=i)}return{options:t}}}class ki extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"TimePicker",componentProps:{placeholder:`请选择${this.label}`,valueFormat:"HH:mm:ss",getPopupContainer:t=>this.getModalAsContainer(),style:{width:"100%"}}})}}class Pi extends K{constructor(e,t){super(e,t);const{dictTable:i,dictText:c,dictCode:a,pidField:h,idField:b,origin:g,condition:M}=t;this.table=i,this.txt=c,this.store=a,this.idField=b,this.pidField=h,this.origin=g,this.condition=M,this.options=[],this.next=t.next||"",this.type=t.type}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"OnlineSelectCascade",componentProps:t})}getComponentProps(){let e={table:this.table,txt:this.txt,store:this.store,pidField:this.pidField,idField:this.idField,origin:this.origin,pidValue:"-1",style:{width:"100%"},onChange:t=>{this.valueChange(t)},onNext:t=>{this.nextOptionsChange(t)}};return this._data.origin===!0&&(e.condition=this.condition),e}nextOptionsChange(e){return Y(this,null,function*(){!this.formRef||!this.next||(yield this.formRef.value.updateSchema({field:this.next,componentProps:{pidValue:e}}))})}valueChange(e){return Y(this,null,function*(){if(!this.formRef||!this.next)return;let t=this.formRef.value;t.$formValueChange(this.field,e),yield t.setFieldsValue({[this.next]:""})})}}class gt extends K{constructor(e,t){super(e,t),this.slot=""}getItem(){let e=super.getItem(),t=this.slot;return Object.assign({},e,{slot:t})}groupDate(){return this.slot="groupDate",this}groupDatetime(){return this.slot="groupDatetime",this}groupNumber(){return this.slot="groupNumber",this}}class Di extends K{constructor(e,t){super(e,t),this.dbPointLength=t.dbPointLength}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"InputNumber",componentProps:t})}getComponentProps(){const e={style:{width:"100%"}};return this.dbPointLength>=0&&(e.precision=this.dbPointLength),e}}class Ii extends K{constructor(e,t){super(e,t),this.dictTable=t.dictTable,this.dictText=t.dictText,this.dictCode=t.dictCode,this.view=t.view,this.componentString="",this.linkFields=[]}getItem(){let e=super.getItem();const t=this.getComponentProps();return Object.assign({},e,{component:this.componentString,componentProps:t})}getComponentProps(){let e={textField:this.dictText,tableName:this.dictTable,valueField:this.dictCode},t=this.getExtendData();if(t.multiSelect?e.multi=!0:e.multi=!1,t.imageField?e.imageField=t.imageField:e.imageField="",t.showType=="select"){this.componentString="LinkTableSelect";let i=this.getPopContainer();e.popContainer=i}else this.componentString="LinkTableCard";return this.linkFields.length>0&&(e.linkFields=this.linkFields),e}setOtherInfo(e){this.linkFields=e}}class Ri extends K{constructor(e,t){super(e,t),this.dictTable=t.dictTable,this.dictText=t.dictText}getItem(){let e=super.getItem();return Object.assign({},e,{componentProps:{readOnly:!0,allowClear:!1,disabled:!0,style:{background:"none",color:"rgba(0, 0, 0, 0.85)",border:"none"}}})}getLinkFieldInfo(){return[this.dictTable,`${this.field},${this.dictText}`]}}class Mi extends K{constructor(e,t){super(e,t),this.code=t.code,this.titleField=t.titleField,this.multi=t.multi||!1}getItem(){let e=super.getItem();return Object.assign({},e,{component:"LinkTableForQuery",componentProps:{code:this.code,multi:this.multi,field:this.titleField,style:{width:"100%"}}})}}class _i extends K{getItem(){let e=super.getItem();return Object.assign({},e,{component:"CascaderPcaForQuery",componentProps:{style:{width:"100%"}}})}}class $i extends K{constructor(e,t){super(e,t),this.multi=t.multi===!0,this.store=t.store||"",this.query=t.query||!1}getItem(){let e=super.getItem(),t=this.getComponentProps();return Object.assign({},e,{component:"UserSelect",componentProps:t})}getComponentProps(){let e={multi:this.multi,store:this.store,query:this.query};return this.inPopover===!0&&(e.getContainer=()=>this.getModalAsContainer()),e}}class Ai extends K{constructor(e,t){super(e,t);let i=t.view;this.format=t.format,this.datetime=!1,i==="rangeNumber"?this.componentType="JRangeNumber":i==="rangeTime"?this.componentType="RangeTime":(this.componentType="RangeDate",t.datetime===!0&&(this.datetime=!0))}getItem(){let e=super.getItem();return Object.assign({},e,{component:this.componentType,componentProps:{datetime:this.datetime,format:this.format,getPopupContainer:t=>this.getModalAsContainer()}})}}class Be{static createFormSchema(e,t){switch(t.view){case"password":return new di(e,t);case"list":return new ui(e,t);case"radio":return new Fi(e,t);case"checkbox":return new Ti(e,t);case"date":case"datetime":return new ai(e,t);case"time":return new ki(e,t);case"file":return new ci(e,t);case"image":return new pi(e,t);case"textarea":return new fi(e,t);case"list_multi":return new hi(e,t);case"sel_search":return new mi(e,t);case"popup":return new gi(e,t);case"cat_tree":return new bi(e,t);case"sel_depart":return new yi(e,t);case"sel_user":return new vi(e,t);case"umeditor":return new Ci(e,t);case"markdown":return new wi(e,t);case"pca":return new Si(e,t);case"link_down":return new Pi(e,t);case"sel_tree":return new xi(e,t);case"switch":return new Oi(e,t);case"link_table":return new Ii(e,t);case"link_table_field":return new Ri(e,t);case"slot":return new gt(e,t);case"LinkTableForQuery":return new Mi(e,t);case"CascaderPcaForQuery":return new _i(e,t);case"select_user2":return new $i(e,t);case"rangeDate":case"rangeTime":case"rangeNumber":return new Ai(e,t);case"hidden":return new mt(e,t).isHidden();default:return t.type=="number"?new Di(e,t):new mt(e,t)}}static createSlotFormSchema(e,t){let i=new gt(e,t),c=t.view;if(c=="date")i.groupDate();else if(c=="datetime")i.groupDatetime();else{let a=t.type;(a=="number"||a=="integer")&&i.groupNumber()}return i}static createIdField(){return{label:"",field:"id",component:"Input",show:!1}}}var ji=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Vi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mt={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(ji,function(){var t=1e3,i=6e4,c=36e5,a="millisecond",h="second",b="minute",g="hour",M="day",_="week",y="month",C="quarter",O="year",A="date",B="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var l=["th","st","nd","rd"],o=u%100;return"["+u+(l[(o-20)%10]||l[o]||l[0])+"]"}},k=function(u,l,o){var s=String(u);return!s||s.length>=l?u:""+Array(l+1-s.length).join(o)+u},U={s:k,z:function(u){var l=-u.utcOffset(),o=Math.abs(l),s=Math.floor(o/60),d=o%60;return(l<=0?"+":"-")+k(s,2,"0")+":"+k(d,2,"0")},m:function u(l,o){if(l.date()<o.date())return-u(o,l);var s=12*(o.year()-l.year())+(o.month()-l.month()),d=l.clone().add(s,y),S=o-d<0,P=l.clone().add(s+(S?-1:1),y);return+(-(s+(o-d)/(S?d-P:P-d))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:y,y:O,w:_,d:M,D:A,h:g,m:b,s:h,ms:a,Q:C}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},J="en",N={};N[J]=$;var q="$isDayjsObject",w=function(u){return u instanceof r||!(!u||!u[q])},I=function u(l,o,s){var d;if(!l)return J;if(typeof l=="string"){var S=l.toLowerCase();N[S]&&(d=S),o&&(N[S]=o,d=S);var P=l.split("-");if(!d&&P.length>1)return u(P[0])}else{var T=l.name;N[T]=l,d=T}return!s&&d&&(J=d),d||!s&&J},v=function(u,l){if(w(u))return u.clone();var o=typeof l=="object"?l:{};return o.date=u,o.args=arguments,new r(o)},x=U;x.l=I,x.i=w,x.w=function(u,l){return v(u,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var r=function(){function u(o){this.$L=I(o.locale,null,!0),this.parse(o),this.$x=this.$x||o.x||{},this[q]=!0}var l=u.prototype;return l.parse=function(o){this.$d=function(s){var d=s.date,S=s.utc;if(d===null)return new Date(NaN);if(x.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var P=d.match(j);if(P){var T=P[2]-1||0,E=(P[7]||"0").substring(0,3);return S?new Date(Date.UTC(P[1],T,P[3]||1,P[4]||0,P[5]||0,P[6]||0,E)):new Date(P[1],T,P[3]||1,P[4]||0,P[5]||0,P[6]||0,E)}}return new Date(d)}(o),this.init()},l.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},l.$utils=function(){return x},l.isValid=function(){return this.$d.toString()!==B},l.isSame=function(o,s){var d=v(o);return this.startOf(s)<=d&&d<=this.endOf(s)},l.isAfter=function(o,s){return v(o)<this.startOf(s)},l.isBefore=function(o,s){return this.endOf(s)<v(o)},l.$g=function(o,s,d){return x.u(o)?this[s]:this.set(d,o)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(o,s){var d=this,S=!!x.u(s)||s,P=x.p(o),T=function(Z,X){var ee=x.w(d.$u?Date.UTC(d.$y,X,Z):new Date(d.$y,X,Z),d);return S?ee:ee.endOf(M)},E=function(Z,X){return x.w(d.toDate()[Z].apply(d.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(X)),d)},W=this.$W,Q=this.$M,z=this.$D,te="set"+(this.$u?"UTC":"");switch(P){case O:return S?T(1,0):T(31,11);case y:return S?T(1,Q):T(0,Q+1);case _:var ce=this.$locale().weekStart||0,H=(W<ce?W+7:W)-ce;return T(S?z-H:z+(6-H),Q);case M:case A:return E(te+"Hours",0);case g:return E(te+"Minutes",1);case b:return E(te+"Seconds",2);case h:return E(te+"Milliseconds",3);default:return this.clone()}},l.endOf=function(o){return this.startOf(o,!1)},l.$set=function(o,s){var d,S=x.p(o),P="set"+(this.$u?"UTC":""),T=(d={},d[M]=P+"Date",d[A]=P+"Date",d[y]=P+"Month",d[O]=P+"FullYear",d[g]=P+"Hours",d[b]=P+"Minutes",d[h]=P+"Seconds",d[a]=P+"Milliseconds",d)[S],E=S===M?this.$D+(s-this.$W):s;if(S===y||S===O){var W=this.clone().set(A,1);W.$d[T](E),W.init(),this.$d=W.set(A,Math.min(this.$D,W.daysInMonth())).$d}else T&&this.$d[T](E);return this.init(),this},l.set=function(o,s){return this.clone().$set(o,s)},l.get=function(o){return this[x.p(o)]()},l.add=function(o,s){var d,S=this;o=Number(o);var P=x.p(s),T=function(Q){var z=v(S);return x.w(z.date(z.date()+Math.round(Q*o)),S)};if(P===y)return this.set(y,this.$M+o);if(P===O)return this.set(O,this.$y+o);if(P===M)return T(1);if(P===_)return T(7);var E=(d={},d[b]=i,d[g]=c,d[h]=t,d)[P]||1,W=this.$d.getTime()+o*E;return x.w(W,this)},l.subtract=function(o,s){return this.add(-1*o,s)},l.format=function(o){var s=this,d=this.$locale();if(!this.isValid())return d.invalidDate||B;var S=o||"YYYY-MM-DDTHH:mm:ssZ",P=x.z(this),T=this.$H,E=this.$m,W=this.$M,Q=d.weekdays,z=d.months,te=d.meridiem,ce=function(X,ee,ne,L){return X&&(X[ee]||X(s,S))||ne[ee].slice(0,L)},H=function(X){return x.s(T%12||12,X,"0")},Z=te||function(X,ee,ne){var L=X<12?"AM":"PM";return ne?L.toLowerCase():L};return S.replace(R,function(X,ee){return ee||function(ne){switch(ne){case"YY":return String(s.$y).slice(-2);case"YYYY":return x.s(s.$y,4,"0");case"M":return W+1;case"MM":return x.s(W+1,2,"0");case"MMM":return ce(d.monthsShort,W,z,3);case"MMMM":return ce(z,W);case"D":return s.$D;case"DD":return x.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return ce(d.weekdaysMin,s.$W,Q,2);case"ddd":return ce(d.weekdaysShort,s.$W,Q,3);case"dddd":return Q[s.$W];case"H":return String(T);case"HH":return x.s(T,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return Z(T,E,!0);case"A":return Z(T,E,!1);case"m":return String(E);case"mm":return x.s(E,2,"0");case"s":return String(s.$s);case"ss":return x.s(s.$s,2,"0");case"SSS":return x.s(s.$ms,3,"0");case"Z":return P}return null}(X)||P.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(o,s,d){var S,P=this,T=x.p(s),E=v(o),W=(E.utcOffset()-this.utcOffset())*i,Q=this-E,z=function(){return x.m(P,E)};switch(T){case O:S=z()/12;break;case y:S=z();break;case C:S=z()/3;break;case _:S=(Q-W)/6048e5;break;case M:S=(Q-W)/864e5;break;case g:S=Q/c;break;case b:S=Q/i;break;case h:S=Q/t;break;default:S=Q}return d?S:x.a(S)},l.daysInMonth=function(){return this.endOf(y).$D},l.$locale=function(){return N[this.$L]},l.locale=function(o,s){if(!o)return this.$L;var d=this.clone(),S=I(o,s,!0);return S&&(d.$L=S),d},l.clone=function(){return x.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},u}(),m=r.prototype;return v.prototype=m,[["$ms",a],["$s",h],["$m",b],["$H",g],["$W",M],["$M",y],["$y",O],["$D",A]].forEach(function(u){m[u[1]]=function(l){return this.$g(l,u[0],u[1])}}),v.extend=function(u,l){return u.$i||(u(l,r,v),u.$i=!0),v},v.locale=I,v.isDayjs=w,v.unix=function(u){return v(1e3*u)},v.en=N[J],v.Ls=N,v.p={},v})})(Mt);var Bi=Mt.exports;const We=Vi(Bi),_t=Object.keys(Tt),Ei=_t.join(","),Li=_t.map(n=>Tt[n]),$t=/#{([^}]+)?}/g,At=/{{([^}]+)?}}/g,Qe=/\${([^}]+)?}/g,$e={ADD:"add",EDIT:"edit",DETAIL:"detail",RELOAD:"reload"};function Ni(n,e,t){tt(e.defVal)&&t.push({field:n,type:e.type,value:e.defVal})}function Ji(n,e){tt(n.fieldDefaultValue)&&e.push({field:n.key,type:n.type,value:n.fieldDefaultValue})}function Ne(n,e,t){return Y(this,null,function*(){if(Array.isArray(n)&&n.length>0){let i={};for(let c of n){let{value:a,type:h,field:b}=c;a=yield jt(a,$e.ADD,t||{}),h==="number"&&a&&(a=Number.parseFloat(a)),i[b]=a}e(i)}})}function Hi(n,e,t){return Y(this,null,function*(){let{defVal:i,type:c}=e;if(tt(i)){let a=yield jt(i,$e.ADD,{});c==="number"&&a&&(a=Number.parseFloat(a)),t[n]=a}})}function tt(n){return!!(n||n===0)}function jt(n,e,t){return Y(this,null,function*(){if(n!=null&&Ui(n)){let i=yield Wi(n,e,t);if(i!=null)return i}return n})}function Ui(n){let e=0,t=0,i=0;if(n.replace(Qe,()=>i++),i>1)return!1;n.replace($t,()=>e++),n.replace(At,()=>t++);let c=e+t;return!(i>0&&c>0)}function qi(n,e){let t=new Map;return n.replace(e,function(i,c){return t.set(i,c.trim()),i}),t}function Wi(n,e,t){return Y(this,null,function*(){return(e===$e.ADD||e===$e.RELOAD)&&Qe.test(n)?yield Ye(n,Qe,Qi,[t]):e===$e.ADD?(n=yield Ye(n,$t,Yi),n=yield Ye(n,At,Ki),n):null})}function Ye(n,e,t){return Y(this,arguments,function*(i,c,a,h=[]){let b=qi(i,c);for(let g of b.keys()){let M=b.get(g),_=yield a.apply(null,[M,g,...h]);if(g===i)return _;i=In(i,g,_)}return i})}function Yi(n,e){return Y(this,null,function*(){switch(n){case"date":return We().format("YYYY-MM-DD");case"time":return We().format("HH:mm:ss");case"datetime":return We().format("YYYY-MM-DD HH:mm:ss");default:let t=zi(n);return t!=null?t:e}})}function zi(n){let e=Rn().getUserInfo;if(e)switch(n){case"sysUserId":return e.id;case"sysUserCode":case"sys_user_code":return e.username;case"sysUserName":return e.realname;case"sysOrgCode":case"sys_org_code":return e.orgCode}return null}function Ki(n,e){return Y(this,null,function*(){let t=Xe(`(function (${Ei}){ return ${n} })`);try{return t.apply(null,Li)}catch(i){return e}})}function Qi(n,e,t){return Y(this,null,function*(){let i=`/sys/fillRule/executeRuleByCode/${n}`,c={};typeof t=="function"?c=t():t&&(c=ge({},t));let{success:a,message:h,result:b}=yield me.put({url:i,params:c},{isTransformResponse:!1});return a?b:e})}const Je="link_down",Gi="link_table_field",Zi="link_table";function nt(n,e){zt();const t=n.modalClass,i=F([]),c=F(""),a=F({}),h=Ce({}),b=F(!1),g=F([]),M=F({}),_={},y=F([]),C=Ce({}),O=F("");O.value={sm:24,xs:24,md:12,lg:12,xl:12,xxl:12};function A(k,U,J){var N;Xi(C),C[c.value]=[];let q=[],w=[],I=[],v={},x={};Object.keys(k).map(m=>{const u=k[m];if(u.view=="tab"){b.value=!0,C[m]=[];let l={key:m,foreignKey:u.foreignKey,describe:u.describe,relationType:u.relationType,requiredFields:u.required||[],order:u.order,id:u.id};u.relationType==1?(_[m]=F(null),l.properties=u.properties):(B(u),_[m]=F(),l.columns=u.columns,v[m]=[]),q.push(l),tl(m,u)}else if(Ni(m,u,C[c.value]),u.view===Je){let l=Et(u,m);for(let o of l){h[o.key]=!0,h[o.key+"_load"]=!0;let s=Be.createFormSchema(o.key,o);J&&s.setOnlyValidateFun(J),s.isRequired(U),s.setFormRef(e),s.handleWidgetAttr(u);let d=Ge(w,o.key);d==-1?w.push(s):w[d]=s}}else if(h[m]=!0,h[m+"_load"]=!0,Ge(w,m)==-1){let l=Be.createFormSchema(m,u);if(J&&l.setOnlyValidateFun(J),l.isRequired(U),l.setFormRef(e),w.push(l),I.push(...l.getRelatedHideFields()),u.view===Gi){let o=l.getLinkFieldInfo();o&&(x[o[0]]?x[o[0]].push(o[1]):x[o[0]]=[o[1]])}}}),w.sort(function(m,u){return m.order-u.order});let r=[];r.push(Be.createIdField());for(let m of w){m.view&&m.view==Zi&&x[m.field]&&m.setOtherInfo(x[m.field]),I.indexOf(m.field)>=0&&m.isHidden(),t&&m.setCustomPopContainer(t);const u=m.getFormItemSchema();u.component==="JDictSelectTag"&&((N=m==null?void 0:m._data)==null?void 0:N.type)==="number"&&(u.componentProps.stringToNumber=!0),r.push(u)}i.value=r,q.sort(function(m,u){return m.order-u.order}),q.forEach(m=>{const u=m.columns;m.columns&&u.forEach(l=>{l.type==="popup"&&l.fieldExtendJson&&JSON.parse(l.fieldExtendJson).popupMulti&&(l.props?Object.assign(l.props,{multi:!0}):l.props={multi:!0})})}),g.value=q,M.value=v}he(h,k=>{let U=e.value,J=[],N=be(k);Object.keys(N).map(q=>{if(!q.endsWith("_load")){let w={field:q,show:N[q]},I=q+"_load";N.hasOwnProperty(I)&&(w.ifShow=N[I]),J.push(w)}}),U&&U.updateSchema(J)},{immediate:!1});function B(k){Vt(k,U=>{Ji(U,C[k.key])})}he(()=>n.formTemplate,()=>{O.value=j()},{immediate:!0});function j(){let k=n.formTemplate;return k==2?{sm:24,xs:24,md:12,lg:12,xl:12,xxl:12}:k==3?{sm:24,xs:24,md:8,lg:8,xl:8,xxl:8}:k==4?{sm:24,xs:24,md:6,lg:6,xl:6,xxl:6}:{sm:24,xs:24,md:24,lg:24,xl:24,xxl:24}}function R(k,U){return new Promise(J=>{U||J("");let N={tableName:c.value.replace(/\$\d+/,""),fieldName:k.field,fieldVal:U},q=a.value;q.id&&(N.dataId=q.id),Bn(N).then(w=>{w.success?J(""):J(w.message)}).catch(w=>{J(w)})})}function $(k){return Object.keys(k).map(U=>{k[U]&&k[U]instanceof Array&&(k[U]=k[U].join(","))}),k}return{formSchemas:i,defaultValueFields:C,tableName:c,dbData:a,checkOnlyFieldValue:R,createFormSchemas:A,fieldDisplayStatus:h,subTabInfo:g,hasSubTable:b,subDataSource:M,baseColProps:O,changeDataIfArray2String:$,linkDownList:y,refMap:_}}function Vt(n,e){const t={inputNumber:"input-number",sel_depart:"depart-select",sel_user:"user-select",list_multi:"select-multiple",input_pop:"textarea",sel_search:"select-search","select-dict-search":"selectDictSearch"};n.columns.forEach(a=>{a.type==="radio"?a.type="select":t[a.type]?a.type=t[a.type]:a.type==="popup"&&i(a),a.type==="depart-select"&&(a.checkStrictly=!0),a.type==="user-select"&&c(a),a.type==="pca"&&(a.width="230px"),(a.width==120||a.width=="120px")&&(a.type=="image"||a.type=="file")&&(a.width="130px"),a.width||(a.width="200px"),e&&e(a)});function i(a){let{destFields:h,orgFields:b}=a,g=[];if(!(!h||h.length==0)){let M=h.split(","),_=b.split(",");for(let y=0;y<M.length;y++)g.push({target:M[y],source:_[y]})}a.fieldConfig=g}function c(a){let h=a.fieldExtendJson,b=!1;if(h)try{JSON.parse(h).multiSelect===!1&&(b=!0)}catch(g){}a.isRadioSelection=b}}function Bt(){let n={};const e={addSubRows:"<m> 一对多子表，新增自定义行",changeOptions:"<m> 改变下拉框选项",clearSubRows:"<m> 清空一对多子表行",clearThenAddRows:"<m> 清空一对多子表行，然后新增自定义行",executeMainFillRule:"<m> 刷新主表的增值规制值",executeSubFillRule:"<m> 刷新子表的增值规制值",getFieldsValue:"<m> 获取表单控件的值",getSubTableInstance:"<m> 获取子表实例",isUpdate:"<p> 判断是否为编辑模式",loading:"<p> 页面加载状态",onlineFormRef:"<p> 当前表单ref对象",refMap:"<p> 子表ref对象map",setFieldsValue:"<m> 设置表单控件的值",sh:"<p> 表单控件的显示隐藏状态",subActiveKey:"<p> 子表激活tab，对应子表表名",subFormHeight:"<p> 一对一子表表单高度",submitFlowFlag:"<p> 是否提交流程状态",subTableHeight:"<p> 一对多子表表格高度",tableName:"<p> 当前表名",triggleChangeValues:"<m> 修改多个表单值",triggleChangeValue:"<m> 修改表单值",updateSchema:"<m> 修改表单控件配置"},t=new Proxy(e,{get(a,h){return Reflect.get(n,h)}});function i(a,h){n[a]=h}function c(a){Object.keys(a).map(h=>{n[h]=a[h]})}return i("$nextTick",Ae),i("addObject2Context",i),{onlineFormContext:t,addObject2Context:i,resetContext:c}}function Et(n,e){const{config:{table:t,key:i,txt:c,linkField:a,idField:h,pidField:b,condition:g},others:M,order:_,title:y}=n;let C={dictTable:t,dictText:c,dictCode:i,pidField:b,idField:h,view:Je,type:n.type},O=[],A=ge({key:e,title:y,order:_,condition:g,origin:!0},C);if(a&&a.length>0){let B=a.split(",");A.next=B[0];for(let j=0;j<B.length;j++)for(let R of M)if(R.field==B[j]){let $=ge({key:R.field,title:R.title,order:R.order,origin:!1},C);j+1<B.length&&($.next=B[j+1]),O.push($)}}return O.push(A),O}function Ge(n,e){let t=-1;for(let i=0;i<n.length;i++)if(n[i].field===e){t=i;break}return t}function Pe(n){return new Promise(e=>{(function t(){let i=n.value;i?e(i):setTimeout(()=>{t()},100)})()})}function Xi(n){Object.keys(n).map(e=>{delete n[e]})}const el=Mn();function tl(n,e){let t=e.hideButtons,i=ri+n+":";t||(t=[]),el.setOnlineSubTableAuth(i,t)}function nl(n){const e=F([]),t={},i=Ce({}),c=F(!1),a=F([]),h=F({}),b=de(()=>{let C=n.formTemplate;return C=="2"?12:C=="3"?8:C=="4"?6:24});function g(C){let O=[],A=[],B={};Object.keys(C).map(j=>{const R=C[j];if(R.view=="tab"){c.value=!0;let $={key:j,foreignKey:R.foreignKey,describe:R.describe,relationType:R.relationType,requiredFields:R.required||[],order:R.order};R.relationType==1?(t[j]=F(null),$.properties=R.properties):(M(R),t[j]=F(),$.columns=R.columns,B[j]=[],i[j]=!1),O.push($)}else if(R.view===Je){let $=y(R,j);for(let k of $){let U=_(A,k.key),J={field:k.key,label:k.title,view:k.view,order:k.order,dictTable:k.dictTable,linkField:k.linkField||""};U==-1?A.push(J):A[U]=J}}else if(R.view!="hidden"&&_(A,j)==-1){let $=Object.assign({field:j,label:R.title},Le(R,["view","order","fieldExtendJson","dictTable","dictText","dictCode","dict"]));if(R.view=="file"&&($.span=24,$.isFile=!0),R.view=="image"&&($.span=24,$.isImage=!0),R.view=="link_table"&&R.fieldExtendJson)try{let k=JSON.parse(R.fieldExtendJson);k.showType!="select"&&($.isCard=!0),k.multiSelect==!0&&($.multi=!0)}catch(k){}(R.view=="umeditor"||R.view=="markdown")&&($.isHtml=!0,$.span=24),A.push($)}}),A.sort(function(j,R){return j.order-R.order}),O.sort(function(j,R){return j.order-R.order}),a.value=O;for(let j=0;j<A.length;j++){let R=A[j];if((R.isFile===!0||R.isImage===!0||R.isHtml===!0)&&j>0){let $=A[j-1],k=$.span||b.value;$.span=k}}e.value=A,h.value=B}function M(C){Vt(C)}function _(C,O){let A=-1;for(let B=0;B<C.length;B++)if(C[B].field===O){A=B;break}return A}function y(C,O){let A=[];const{config:{table:B,key:j,txt:R,linkField:$},order:k,title:U,others:J}=C;let N={view:"link_down",order:k,title:U,dictTable:JSON.stringify({table:B,key:j,txt:R})};if(A.push(Object.assign({},{linkField:$,key:O},N)),$){let q=$.split(",");for(let w of q){let I="";for(let v of J)v.field==w&&(I=v.title);A.push(Object.assign({},{key:w},N,{title:I}))}}return A}return{detailFormSchemas:e,hasSubTable:c,subTabInfo:a,refMap:t,showStatus:i,createFormSchemas:g,formSpan:b,subDataSource:h}}function Lt(n,e=!0){let t=Ce({});const i=(y,C)=>me.get({url:y,params:C},{isTransformResponse:!1}),c=(y,C)=>me.post({url:y,params:C},{isTransformResponse:!1}),a=(y,C)=>me.put({url:y,params:C},{isTransformResponse:!1}),h=(y,C)=>me.delete({url:y,params:C},{isTransformResponse:!1});e===!0?(n._getAction=i,n._postAction=c,n._putAction=a,n._deleteAction=h):(n.addObject2Context("_getAction",i),n.addObject2Context("_postAction",c),n.addObject2Context("_putAction",a),n.addObject2Context("_deleteAction",h));function b(y){if(y){const C=Xe(y);return new C(i,c,h)}else return{}}function g(y,C){t&&t[C]&&t[C](y)}function M(y,C){return t&&t.beforeSubmit?t.beforeSubmit(y,C):Promise.resolve()}function _(y,C){return t&&t.beforeDelete?t.beforeDelete(y,C):Promise.resolve()}return e===!0&&n&&(n.beforeDelete=y=>{const C=n.EnhanceJS;return C&&C.beforeDelete?C.beforeDelete(n,y):Promise.resolve()},n.beforeEdit=y=>{const C=n.EnhanceJS;return C&&C.beforeEdit?C.beforeEdit(n,y):Promise.resolve()}),{EnhanceJS:t,initCgEnhanceJs:b,customBeforeSubmit:M,beforeDelete:_,triggerJsFun:g}}const il="/online/cgform/api/subform",ll={name:"OnlineSubForm",components:{BasicForm:Ot,Loading:vt},props:{properties:{type:Object,required:!0},mainId:{type:String,default:""},table:{type:String,default:""},formTemplate:{type:Number,default:1},requiredFields:{type:Array,default:[]},isUpdate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["formChange"],setup(n,{emit:e}){const t=F(null),i=F(!1);et();const{formSchemas:c,defaultValueFields:a,changeDataIfArray2String:h,tableName:b,dbData:g,checkOnlyFieldValue:M,fieldDisplayStatus:_,createFormSchemas:y,baseColProps:C}=nt(n,t),[O,{setProps:A,validate:B,resetFields:j,setFieldsValue:R,getFieldsValue:$}]=kt({schemas:c,showActionButtonGroup:!1,baseColProps:C});he(()=>n.table,()=>{b.value=n.table},{immediate:!0}),he(()=>n.properties,r=>{i.value=!1,k(),y(n.properties,n.requiredFields,M),i.value=!0},{deep:!0,immediate:!0}),he(()=>n.mainId,r=>{setTimeout(()=>{J()},100)},{immediate:!0}),he(()=>n.disabled,r=>{A({disabled:r})});function k(){return Y(this,null,function*(){let r=yield Pe(t);r.$formValueChange=(m,u)=>{let l={[m]:u};e("formChange",l)}})}function U(){if(ke(n.isUpdate)===!1){let r=be(a[b.value]);Ne(r,m=>{R(m)})}}function J(){return Y(this,null,function*(){yield Pe(i),yield j(),U();const{table:r,mainId:m}=n;if(!r||!m)return;let u=yield N(r,m);g.value=u,yield R(u)})}function N(r,m){let u=`${il}/${r}/${m}`;return new Promise((l,o)=>{me.get({url:u},{isTransformResponse:!1}).then(s=>{s.success?l(s.result):o()})}).finally(()=>{g.value=""})}function q(){return new Promise((r,m)=>{B().then(()=>{let u=$();u=h(u),r(u)}).catch(u=>{m(u)})})}function w(){let r=$();return r.id||(r.id="sub-change-temp-id"),{row:r,target:x}}function I(r){R(r)}function v(){let r=$(),m=be(a[b.value]);Ne(m,u=>{R(u)},r)}const x={onlineFormRef:t,baseColProps:C,formSchemas:c,registerForm:O,setFieldsValue:R,getFieldsValue:$,getFormEvent:w,setValues:I,getAll:q,executeFillRule:v,sh:_};return x}};function ol(n,e,t,i,c,a){const h=ie("BasicForm");return G(),Oe(h,{ref:"onlineFormRef",onRegister:n.registerForm},null,8,["onRegister"])}const it=Re(ll,[["render",ol]]),sl=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"})),ze={optPre:"/online/cgform/api/form/",urlButtonAction:"/online/cgform/api/doButton"},rl={name:"OnlinePopForm",components:{BasicForm:Ot,Loading:vt,OnlineSubForm:it,PrinterOutlined:Tn,DiffOutlined:On,FormOutlined:kn},props:{id:{type:String,default:""},formTemplate:{type:Number,default:1},disabled:{type:Boolean,default:!1},isTree:{type:Boolean,default:!1},pidField:{type:String,default:""},submitTip:{type:Boolean,default:!0},modalClass:{type:String,default:""},request:{type:Boolean,default:!0},isVxeTableData:{type:Boolean,default:!1}},emits:["success","rendered","dataChange"],setup(n,{emit:e}){const{createMessage:t}=et(),[i,{openModal:c}]=De(),a=F(""),h=F(null),b=F(!0),g=F(!1),M=F(1),_=F(!1),y=F(!1),C=Ce({reportPrintShow:0,reportPrintUrl:"",joinQuery:0,modelFullscreen:0,modalMinWidth:""}),{onlineFormContext:O,resetContext:A}=Bt(),{formSchemas:B,defaultValueFields:j,changeDataIfArray2String:R,tableName:$,dbData:k,checkOnlyFieldValue:U,hasSubTable:J,subTabInfo:N,refMap:q,subDataSource:w,baseColProps:I,createFormSchemas:v,fieldDisplayStatus:x}=nt(n,h);let{EnhanceJS:r,initCgEnhanceJs:m}=Lt(O,!1);const[u,{setProps:l,validate:o,resetFields:s,setFieldsValue:d,updateSchema:S,getFieldsValue:P,scrollToField:T}]=kt({schemas:B,showActionButtonGroup:!1,baseColProps:I}),E=F(!1);function W(){let p=n.disabled;E.value=p,l({disabled:p})}function Q(p,f,D){return Y(this,null,function*(){yield s(),k.value="";let V=ke(p);y.value=V,V&&(yield te(f)),yield Ae(()=>{!V&&D&&d(D),z(),Ue("js","loaded"),W()})})}function z(){if(ke(y)===!1){let p=be(j[$.value]);Ne(p,f=>{d(f)})}}function te(p){return Y(this,null,function*(){let f=yield H(p.id);(!f||Object.keys(f).length==0)&&(f=ge({},be(p))),k.value=Object.assign({},f);let D=ce.value,V=Le(f,...D);n.isVxeTableData===!0&&(V=Object.assign({},V,p)),yield d(V)})}let ce=de(()=>{let p=B.value,f=[];for(let D of p)f.push(D.field);return f});function H(p){let f=`${ze.optPre}${n.id}/${p}`;return new Promise((D,V)=>{me.get({url:f},{isTransformResponse:!1}).then(le=>{le.success?D(le.result):(V(),t.warning(le.message))}).catch(()=>{V()})})}function Z(p){return Y(this,null,function*(){M.value=p.head.tableType,$.value=p.head.tableName,b.value=p.head.tableType==1,X(p.head.extConfigJson),v(p.schema.properties,p.schema.required,U),r=m(p.enhanceJs),e("rendered",C);let f=yield Pe(h);f.$formValueChange=(D,V,le)=>{nn(D,V),le&&d(le)}})}function X(p){let f={reportPrintShow:0,reportPrintUrl:"",joinQuery:0,modelFullscreen:1,modalMinWidth:""};p&&(f=JSON.parse(p)),Object.keys(f).map(D=>{C[D]=f[D]})}function ee(){b.value===!0?fe():ne()}function ne(){L().then(p=>{we(p)})}function L(){let p={};return new Promise((f,D)=>{o().then(V=>f(V),({errorFields:V})=>{V&&V.length>0&&T(V[0][0]),D(Ie)})}).then(f=>(Object.assign(p,R(f)),ye())).then(f=>(Object.assign(p,f),Promise.resolve(p))).catch(f=>((f===Ie||(f==null?void 0:f.code)===Ie)&&(t.warning("校验未通过"),f.key&&re(f.key)),Promise.reject(null)))}function re(p){let f=N.value;for(let D=0;D<f.length;D++)if(p==f[D].key){He.value=D+"";break}}function ye(){return new Promise((p,f)=>Y(this,null,function*(){let D={};try{let V=N.value;for(let le=0;le<V.length;le++){let Se=V[le].key,xe=q[Se].value;if(xe instanceof Array&&(xe=xe[0]),V[le].relationType==1)try{let dt=yield xe.getAll();D[Se]=[],D[Se].push(dt)}catch(dt){throw{code:Ie,key:Se}}else{if(yield xe.fullValidateTable())throw{code:Ie,key:Se};D[Se]=xe.getTableData()}}}catch(V){f(V)}p(D)}))}function fe(){return Y(this,null,function*(){try{let p=yield o();p=Object.assign({},k.value,p),p=R(p),g.value=!0,we(p)}finally{g.value=!1}})}function we(p){sn(ut,p).then(()=>{fn(p)}).catch(f=>{t.warning(f)})}function Me(p,f,D){f&&D?D.setValues?D.setValues(p):D.setValues([{rowKey:f,values:p}]):d(p)}function Kt(p,f){let D={};D[p]=f,d(D)}const He=F("0"),ot=F(300),st=F(340);function Qt(p){if(y.value===!0){let f=k.value;return Gt(f,p)}return""}function Gt(p,f){if(p){let D=p[f];return!D&&D!==0&&(D=p[f.toLowerCase()],!D&&D!==0&&(D=p[f.toUpperCase()])),D}return""}function Zt(p,f){if(r&&r[f+"_onlChange"]){let D=r[f+"_onlChange"](),V=Object.keys(p)[0];if(D[V]){let le=q[f].value;le instanceof Array&&(le=le[0]);let Se=le.getFormEvent(),xe=ge({column:{key:V},value:p[V]},Se);D[V].call(O,O,xe)}}}function Xt(p,f){if(r&&r[f+"_onlChange"]){let D=r[f+"_onlChange"](O);D[p.column.key]&&D[p.column.key].call(O,O,p)}}function en(p,f){}function tn(p){return"online_"+p+":"}function nn(p,f){return Y(this,null,function*(){if(k.value[p]!=f&&e("dataChange",p),!r||!r.onlChange||!p)return!1;let D=r.onlChange();if(D[p]){let V={row:yield P(),column:{key:p},value:f};D[p].call(O,O,V)}})}function Ue(p,f){if(p=="js")r&&r[f]&&r[f].call(O,O);else if(p=="action"){let D=k.value,V={formId:n.id,buttonCode:f,dataId:D.id,uiFormData:Object.assign({},D)};me.post({url:`${ze.urlButtonAction}`,params:V},{isTransformResponse:!1}).then(le=>{le.success?t.success("处理完成!"):t.warning("处理失败!")})}}function rt(p){let f=q[p].value,D=[...f.getNewDataWithId(),...w.value[p]];if(!D||D.length==0)return!1;let V=[];for(let le of D)V.push(le.id);f.removeRowsById(V)}function at(p,f){if(!f)return!1;let D=q[p].value;typeof f=="object"?D.addRows(f,!0):t.error("添加子表数据,参数不识别!")}function ln(p,f){rt(p),at(p,f)}function on(p,f){!f&&f.length<=0&&(f=[]),f.map(D=>{D.hasOwnProperty("label")||(D.label=D.text)}),S({field:p,componentProps:{options:f}})}function sn(p,f){return r&&r.beforeSubmit?r.beforeSubmit(p,f):Promise.resolve()}function rn(p,f){let D=be(x);p&&p.length>0?Object.keys(D).map(V=>{!V.endsWith("_load")&&p.indexOf(V)<0&&(x[V]=!1)}):f&&f.length>0&&Object.keys(D).map(V=>{f.indexOf(V)>=0&&(x[V]=!1)})}function an(p){return Y(this,null,function*(){yield s(),k.value="",y.value=!0,yield te(p),yield Ae(()=>{Ue("js","loaded")})})}function un(p){let f=q[p].value;return f instanceof Array&&(f=f[0]),f}function dn(){let p=C.reportPrintUrl,f=k.value.id,D=_n();$n(p,f,D)}function cn(p){a.value=p.id,c(!0)}function pn(p){}function fn(p){if(Object.keys(p).map(f=>{Array.isArray(p[f])&&p[f].length==0&&(p[f]="")}),n.request==!1)e("success",p);else{let f=`${ze.optPre}${n.id}?tabletype=${M.value}`;_.value===!0&&(p[Dt]=1);let D=y.value===!0?"put":"post";me.request({url:f,method:D,params:p},{isTransformResponse:!1}).then(V=>{V.success?(V.result&&(p.id||(p.id=V.result)),e("success",p),k.value=p,y.value=!0,t.success("操作成功!")):t.warning(V.message)}).finally(()=>{g.value=!1})}}function hn(){return Y(this,null,function*(){let p=k.value,f=ce.value,D=Le(p,...f);if(p)yield d(D);else{let V={};for(let le of f)V[le]="";yield d(V)}})}let ut={tableName:$,loading:g,subActiveKey:He,onlineFormRef:h,getFieldsValue:P,setFieldsValue:d,submitFlowFlag:_,subFormHeight:ot,subTableHeight:st,refMap:q,triggleChangeValues:Me,triggleChangeValue:Kt,sh:x,clearSubRows:rt,addSubRows:at,clearThenAddRows:ln,changeOptions:on,isUpdate:y,getSubTableInstance:un};return A(ut),{tableName:$,onlineFormRef:h,registerForm:u,loading:g,subActiveKey:He,hasSubTable:J,subTabInfo:N,refMap:q,subFormHeight:ot,getSubTableForeignKeyValue:Qt,isUpdate:y,handleSubFormChange:Zt,subTableHeight:st,onlineFormDisabled:E,subDataSource:w,getSubTableAuthPre:tn,handleAdded:en,handleValueChange:Xt,openSubFormModalForAdd:cn,openSubFormModalForEdit:pn,registerVxeFormModal:i,vxeTableId:a,show:Q,createRootProperties:Z,handleSubmit:ee,sh:x,handleCgButtonClick:Ue,handleCustomFormSh:rn,handleCustomFormEdit:an,dbData:k,onOpenReportPrint:dn,onlineExtConfigJson:C,recoverFormData:hn}}},al=["id"];function ul(n,e,t,i,c,a){const h=ie("BasicForm");return G(),ue("div",{id:i.tableName+"_form"},[ae(h,{ref:"onlineFormRef",onRegister:i.registerForm},null,8,["onRegister"])],8,al)}const Nt=Re(rl,[["render",ul]]),dl=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));function Jt(n,{emit:e}={},t){const i=F(null),c=F(!1),a=F(1),h=F([]),b=F(!1),g=F(0),M=F(!1),_=F(""),y=F(!1),C=F(!1),O=F(!0),A=Ce({}),B=F(!0),j=F(""),R=F(!0),$=F(!1),{popModalFixedWidth:k,resetBodyStyle:U,popBodyStyle:J}=Ht(),N=F(!1),q=F(""),w={handleOpenModal:L=>{}},I=F(""),v=F(""),x=F(!1);let r={};const m=de(()=>j.value||(ke(c)===!0?"详情":ke(C)===!0?"编辑":"新增")),[u,{setModalProps:l,closeModal:o}]=Ct(L=>Y(this,null,function*(){j.value="",$.value=!1,n===!0?yield w.handleOpenModal(L):yield S(L),U(),t&&t()})),s=F(!1);function d(){return Y(this,null,function*(){return yield Pe(s),N.value})}function S(L){return Y(this,null,function*(){l({confirmLoading:!1}),C.value=L.isUpdate,c.value=L.disableSubmit||!1,(L==null?void 0:L.hideSub)===!0&&(B.value=!1),L!=null&&L.title&&(j.value=L.title),L!=null&&L.record?v.value=L.record.id:v.value="",yield Ae(()=>Y(this,null,function*(){yield Pe(b),T(),yield i.value.show(L==null?void 0:L.isUpdate,L==null?void 0:L.record,L==null?void 0:L.param)}))})}function P(L){b.value=!0,g.value=L.modalMinWidth,L.modelFullscreen==1?l({defaultFullscreen:!0}):l({defaultFullscreen:!1}),r=L}function T(){let L=v.value;r.commentStatus==1&&L?(x.value=!0,l({defaultFullscreen:!0})):x.value=!1}const E=800,W=1100,Q=de(()=>{let L=200*(a.value-1),re=(ke(O)?E:W)+L;re=z(re);let ye=g.value;return ye&&re<ye&&(re=ye),re});function z(L){let re=A.modalMinWidth;if(re!=null&&re!=="")try{if(re=Number.parseInt(re),L<re)return re}catch(ye){}return L}function te(L,re){i.value.handleCgButtonClick(L,re)}function ce(){y.value=!0,setTimeout(()=>{y.value=!1},1500),i.value.handleSubmit()}function H(){o()}function Z(L,re={}){let ye=`/online/cgform/api/getFormItem/${L}`;return new Promise((fe,we)=>{me.get({url:ye,params:re},{isTransformResponse:!1}).then(Me=>{Me.success?fe(Me.result):we(Me.message)}).catch(()=>{we()})})}function X(L,re,ye){return Y(this,null,function*(){let fe=yield Z(L,re),we=fe.head.formTemplate;a.value=we?Number(we):1,h.value=fe.cgButtonList,M.value=fe.head.isTree==="Y",_.value=fe.head.treeParentIdField||"",I.value=fe.head.tableName,q.value=fe.head.themeTemplate,fe.form_disable_update===!0?N.value=!0:N.value=!1,s.value=!0,e&&e("formConfig",fe),ye&&ye(fe),yield Ae(()=>Y(this,null,function*(){yield(yield Pe(i)).createRootProperties(fe)}))})}function ee(L){L[It]=I.value,e("success",L),R.value==!0&&o(),$.value=!1,R.value=!0}function ne(){i.value&&i.value.onCloseModal()}return{title:m,modalWidth:Q,registerModal:u,closeModal:o,modalObject:w,onCloseEvent:ne,cgButtonList:h,handleCgButtonClick:te,disableSubmit:c,handleSubmit:ce,submitLoading:y,handleCancel:H,successThenClose:R,handleSuccess:ee,topTipVisible:$,handleFormConfig:X,onlineFormCompRef:i,formTemplate:a,isTreeForm:M,pidFieldName:_,renderSuccess:P,formRendered:b,isUpdate:C,showSub:B,themeTemplate:q,tableName:I,formDataId:v,enableComment:x,popBodyStyle:J,popModalFixedWidth:k,getFormStatus:d}}function Ht(){const n=F(800);let e=window.innerWidth-300;e<800&&(e=800),n.value=e;const t=F({});function i(){let c=window.innerHeight-210;t.value={height:c+"px",overflowY:"auto"}}return{popModalFixedWidth:n,popBodyStyle:t,resetBodyStyle:i}}const cl=wt({name:"OnlinePopModal",props:{id:{type:String,default:""},showFields:{type:Array,default:()=>[]},hideFields:{type:Array,default:()=>[]},topTip:{type:Boolean,default:!1},request:{type:Boolean,default:!0},saveClose:{type:Boolean,default:!1},isVxeTableData:{type:Boolean,default:!1},formTableType:{type:String,default:""}},components:{BasicModal:xt,OnlinePopForm:Nt,JModalTip:Un,Button:qe},emits:["success","register","formConfig"],setup(n,{emit:e}){const{title:t,registerModal:i,cgButtonList:c,handleCgButtonClick:a,disableSubmit:h,handleSubmit:b,submitLoading:g,handleCancel:M,handleFormConfig:_,onlineFormCompRef:y,formTemplate:C,isTreeForm:O,pidFieldName:A,renderSuccess:B,formRendered:j,handleSuccess:R,topTipVisible:$,successThenClose:k,isUpdate:U,popBodyStyle:J,popModalFixedWidth:N,getFormStatus:q}=Jt(!1,{emit:e});he(()=>n.id,w,{immediate:!0});function w(){return Y(this,null,function*(){if(j.value=!1,!n.id)return;let u={};n.formTableType&&(u.tabletype=n.formTableType),yield _(n.id,u)})}function I(){n.saveClose===!1&&(k.value=!1),b()}function v(){$.value=!1,y.value.recoverFormData()}function x(){$.value=!0}const r=de(()=>U.value?n.topTip:!1),m=de(()=>{if(U.value==!0)return null;{let u=g.value;return[_e(qe,{type:"primary",loading:u,onClick:b},()=>"确定"),_e(qe,{onClick:M},()=>"关闭")]}});return{title:t,topTipVisible:$,handleSaveData:I,handleRecover:v,onlineFormCompRef:y,renderSuccess:B,registerModal:i,handleSubmit:b,handleSuccess:R,handleCancel:M,formTemplate:C,disableSubmit:h,cgButtonList:c,handleCgButtonClick:a,isTreeForm:O,pidFieldName:A,submitLoading:g,handleDataChange:x,isUpdate:U,showTopTip:r,modalFooter:m,popBodyStyle:J,popModalFixedWidth:N,getFormStatus:q}}});function pl(n,e,t,i,c,a){const h=ie("j-modal-tip"),b=ie("online-pop-form"),g=ie("BasicModal");return G(),Oe(g,St({width:n.popModalFixedWidth,dialogStyle:{top:"70px"},bodyStyle:n.popBodyStyle},n.$attrs,{footer:n.modalFooter,cancelText:"关闭",onRegister:n.registerModal,wrapClassName:"jeecg-online-pop-modal",onOk:n.handleSubmit}),{title:oe(()=>[Fe(Te(n.title)+" ",1),n.showTopTip?(G(),Oe(h,{key:0,visible:n.topTipVisible,onSave:n.handleSaveData,onCancel:n.handleRecover},null,8,["visible","onSave","onCancel"])):ve("",!0)]),default:oe(()=>[ae(b,{ref:"onlineFormCompRef",id:n.id,disabled:n.disableSubmit,"form-template":n.formTemplate,isTree:n.isTreeForm,pidField:n.pidFieldName,request:n.request,isVxeTableData:n.isVxeTableData,onRendered:n.renderSuccess,onSuccess:n.handleSuccess,onDataChange:n.handleDataChange,"modal-class":"jeecg-online-pop-modal"},null,8,["id","disabled","form-template","isTree","pidField","request","isVxeTableData","onRendered","onSuccess","onDataChange"])]),_:1},16,["width","bodyStyle","footer","onRegister","onOk"])}const je=Re(cl,[["render",pl]]),fl=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"}));function bt(n,e){const t="/online/cgform/api/getData/"+n;return me.get({url:t,params:e})}function hl(n,e){const t="/online/cgform/api/getColumns/"+n;return me.get({url:t,params:e})}function Ut(n){const e=F("1"),t=F({}),i=F({}),c=F(""),a=Ce({add:!0,update:!0}),h=de(()=>n.textField?n.textField.split(","):[]),b=F([]),g=de(()=>{let w=b.value;return n.multi==!0?w.slice(0,3):w.slice(0,6)});vn(()=>Y(this,null,function*(){if(n.tableName){let w=n.valueField||"",I=n.textField||"",v=[];if(w&&v.push(w),I){let r=I.split(",");c.value=r[0];for(let m of r)v.push(m)}let x=n.imageField||"";x&&v.push(x),t.value={linkTableSelectFields:v.join(",")},yield O(),yield A()}}));const M=de(()=>{let w=n.textField||"",I=[],v="";if(w){let x=w.split(",");v=x[0];for(let r=0;r<x.length;r++)r>0&&I.push(x[r])}return{others:I,labelField:v}}),_=F([]),y=F([]),C=F({});function O(){return Y(this,null,function*(){let w=t.value;const I=yield hl(n.tableName,w);if(y.value=I.columns,I.columns){let v=n.imageField,x=I.columns.filter(r=>r.dataIndex!=c.value&&r.dataIndex!=v);b.value=x}if(C.value=I.dictOptions,I.hideColumns){let v=I.hideColumns;v.indexOf("add")>=0?a.add=!1:a.add=!0,v.indexOf("update")>=0?a.update=!1:a.update=!0}})}function A(){return Y(this,null,function*(){let w=j(),I=(yield bt(n.tableName,w)).records,v=[],{others:x,labelField:r}=M.value,m=n.imageField;if(I&&I.length>0)for(let u of I){let l=ge({},u);B(l);let o=Object.assign({},Le(l,x),{id:l.id,label:l[r],value:l[n.valueField]});m&&(o[m]=l[m]),v.push(o)}v.push({}),_.value=v})}function B(w){let I=y.value,v=C.value;for(let x of I){const{dataIndex:r,customRender:m}=x;(w[r]||w[r]===0)&&m&&m==r&&v[m]&&(w[r]=Ft(v[m],w[r]))}}function j(){return Object.assign({pageSize:10,pageNo:e.value},t.value,i.value)}function R(w){if(!w)i.value={};else{let I=h.value,v=[],x=[];for(let r=0;r<I.length;r++)r<=1&&(x.push(I[r]),v.push({field:I[r],rule:"like",val:w}));v.superQueryMatchType="or",v.superQueryParams=encodeURI(JSON.stringify(v)),i.value=v}}function $(w){return Y(this,null,function*(){if(!w)return[];let I=n.valueField,v=Pt(ge({},t.value),{pageSize:10,pageNo:e.value});v.superQueryMatchType="and";let x=[{field:I,rule:"in",val:w}];v.superQueryParams=encodeURI(JSON.stringify(x));let r=(yield bt(n.tableName,v)).records,m=[];if(r&&r.length>0)for(let u of r){let l=ge({},u);B(l),m.push(l)}return m})}function k(w,I){if(!w||w.length==0)return!1;let v=I.split(",");if(v.length!=w.length)return!1;let x=!0;for(let r of w){let m=r[n.valueField];v.indexOf(m)<0&&(x=!1)}return x}function U(w){Object.keys(w).map(I=>{w[I]instanceof Array&&(w[I]=w[I].join(","))})}function J(w,I,v){if(v||(v={}),I&&I.length>0)for(let x of I){let r=x.split(","),m=r[0],u=r[1];if(w[m])w[m].push(v[u]);else{let l=v[u]||"";w[m]=[l]}}}function N(w){if(n.imageField){let I=w[n.imageField];return Ve(I)}return""}const q=de(()=>!!n.imageField);return{pageNo:e,otherColumns:b,realShowColumns:g,selectOptions:_,reloadTableLinkOptions:A,textFieldArray:h,addQueryParams:R,tableColumns:y,transData:B,mainContentField:c,loadOne:$,compareData:k,formatData:U,initFormData:J,getImageSrc:N,showImage:q,auths:a}}const ml={name:"LinkTableSelect",components:{PlusOutlined:Ze,EditOutlined:Pn,OnlinePopModal:je},props:{valueField:se.string.def(""),textField:se.string.def(""),tableName:se.string.def(""),multi:se.bool.def(!1),value:se.oneOfType([se.string,se.number,se.array]),linkFields:se.array.def([]),imageField:se.string.def("")},emits:["change","update:value"],setup(n,{emit:e}){const t=Cn("tableId",F(null)),i=F(),c=F([]),{auths:a,mainContentField:h,textFieldArray:b,selectOptions:g,reloadTableLinkOptions:M,addQueryParams:_,formatData:y,initFormData:C,getImageSrc:O,showImage:A}=Ut(n),[B,{openModal:j}]=De(),R=de(()=>n.tableName),$=de(()=>n.multi===!0?{mode:"multiple"}:{});function k(r){r==null||r.stopPropagation(),r==null||r.preventDefault(),j(!0,{})}function U(r,m){r==null||r.stopPropagation(),r==null||r.preventDefault(),a.update!=!1&&j(!0,{isUpdate:!0,record:m})}const J="custom:online:reload";wn(()=>{i.value&&i.value.addEventListener(J,N)}),Sn(()=>{i.value&&i.value.removeEventListener(J,N)});function N(){M()}function q(r){return Y(this,null,function*(){try{const u=document.querySelectorAll(`.online-list-${t.value} .jeecg-basic-table-form-container.online-query-form .link-table-select-box`);u&&u.length>0&&u.forEach(l=>l.dispatchEvent(new Event(J)))}catch(u){}yield M();let m=r[n.valueField];n.multi===!0?c.value=[m]:c.value=m,I(c.value)})}function w(r){_(r),M()}function I(r){v(r),r||(_(),M())}function v(r){let m={},u=n.linkFields,l=[];if(!r)C(m,u);else{let o=be(g.value),s=be(r);s instanceof Array?l=[...s]:n.multi==!0?l=s.split(","):l=[s];let d=o.filter(S=>l.indexOf(S[n.valueField])>=0);if(d&&d.length>0){let S=ge({},d[0]);if(d.length>1)for(let T=1;T<d.length;T++)S=x(S,d[T]);let P=h.value;S[P]=S.label,C(m,u,S)}}y(m),e("change",l.join(",")||"",m),e("update:value",l.join(",")||"")}function x(r,m){let u={};return Object.keys(r).map(l=>{u[l]=(r[l]||"")+","+(m[l]||"")}),u}return he(()=>n.value,r=>Y(this,null,function*(){r?(n.multi==!0?c.value=r.split(","):c.value=r,n.linkFields&&n.linkFields.length>0&&v(r)):c.value=[]}),{immediate:!0}),he(()=>g.value,r=>{r&&r.length>0&&n.linkFields&&n.linkFields.length>0&&c.value&&c.value.length>0&&v(c.value)}),{boxRef:i,selectValue:c,selectOptions:g,registerPopModal:B,popTableName:R,textFieldArray:b,handleClickAdd:k,handleClickEdit:U,getFormData:q,handleSearch:yn(w,800),handleChange:I,bindValue:$,showImage:A,getImageSrc:O,auths:a}}},gl={class:"link-table-select-box",ref:"boxRef"},bl={key:1,class:"online-select-item"},yl={key:0,class:"left-avatar"},vl=["src"],Cl={class:"right-content"},wl={class:"label"},Sl={class:"others"},xl={class:"other-item ellipsis"};function Fl(n,e,t,i,c,a){const h=ie("PlusOutlined"),b=ie("EditOutlined"),g=ie("a-select"),M=ie("online-pop-modal");return G(),ue("div",gl,[ae(g,St({value:i.selectValue,"onUpdate:value":e[1]||(e[1]=_=>i.selectValue=_),style:{width:"100%"},placeholder:"请选择","option-label-prop":"label",popupClassName:"table-link-select",allowClear:"","show-search":""},i.bindValue,{options:i.selectOptions,"filter-option":!1,"not-found-content":null,onSearch:i.handleSearch,onChange:i.handleChange}),{option:oe(_=>[!_.value&&i.auths.add?(G(),ue("div",{key:0,class:"opt-add",onClick:e[0]||(e[0]=(...y)=>i.handleClickAdd&&i.handleClickAdd(...y))},[ae(h),Fe(" 记录 ")])):(G(),ue("div",bl,[i.showImage?(G(),ue("div",yl,[i.getImageSrc(_)?(G(),ue("img",{key:0,src:i.getImageSrc(_),alt:""},null,8,vl)):ve("",!0)])):ve("",!0),pe("div",Cl,[pe("div",wl,[i.auths.update?(G(),Oe(b,{key:0,onClick:y=>i.handleClickEdit(y,_)},null,8,["onClick"])):ve("",!0),Fe(" "+Te(_.label),1)]),pe("div",Sl,[(G(!0),ue(Ee,null,Ke(i.textFieldArray,y=>(G(),ue("div",xl,Te(_[y]),1))),256))])])]))]),_:1},16,["value","options","onSearch","onChange"]),ae(M,{id:i.popTableName,onRegister:i.registerPopModal,onSuccess:i.getFormData,topTip:""},null,8,["id","onRegister","onSuccess"])],512)}const qt=Re(ml,[["render",Fl],["__scopeId","data-v-4d29cbcc"]]),Tl=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));function Wt(n,e){let t=An();const i=F([]),c=F({}),a=F([]),h=F(null);let b=F(!0),g=de(()=>{if(b.value!=!0)return{x:!1}});const[M,{openModal:_}]=De(),y=F(""),[C,{openModal:O}]=De(),A=F("");function B(l,o="checkbox"){c.value=l.dictOptions,l.checkboxFlag=="Y"?h.value={selectedRowKeys:a,onChange:j,type:o}:h.value=null,b.value=l.scrollFlag==1;let s=l.columns;s.forEach(T=>{T.fieldExtendJson&&JSON.parse(T.fieldExtendJson).isFixed&&(T.fixed="left"),Object.keys(T).map(E=>{T[E]==null&&delete T[E]})});let d=l.fieldHrefSlots;const S={};d.forEach(T=>S[T.slotName]=T);let P=[];if(P=R(s,S),q(P),n.isTree()===!0){let T=l.textField,E=-1;for(let W=0;W<P.length;W++)if(P[W].dataIndex==T){E=W;break}if(E>0){let W=P.splice(E,1);P.unshift(W[0])}P.length>0&&(P[0].align="left")}i.value=P,n.reloadTable()}function j(l,o){a.value=l,n.selectedRows=be(o),n.selectedRowKeys=be(l)}function R(l,o){for(let s of l){let{customRender:d,hrefSlotName:S,fieldType:P}=s;if(P=="date"||P=="Date")s.customRender=({text:T})=>T?T.length>10?T.substring(0,10):T:"";else if(P=="link_table")s.customRender=({text:T,record:E})=>{if(!T)return"";if(n.isPopList===!0)return E[s.dataIndex+"_dictText"];{let W=(T+"").split(","),Q=[];E[s.dataIndex+"_dictText"]&&(Q=E[s.dataIndex+"_dictText"].split(","));let z=[];for(let te=0;te<W.length;te++){let ce=_e(Jn,{id:W[te],text:Q[te],onTab:H=>u(H,S)});z.push(ce)}return z.length==0?"":_e("div",{style:{overflow:"hidden"}},z)}};else{if(!S&&s.scopedSlots&&s.scopedSlots.customRender&&o.hasOwnProperty(s.scopedSlots.customRender)&&(S=s.scopedSlots.customRender),d||S){let T=d,E="_replace_text_";s.ellipsis=!0,s.customRender=({text:W,record:Q})=>{let z=W;if(T)if(T.startsWith(E)){let te=T.replace(E,"");z=Q[te]}else z=Ft(ke(c)[T],W+"");if(s.showLength&&z&&z.length>s.showLength&&(z=z.substr(0,s.showLength)+"..."),S){let te=o[S];if(te)return _e("a",{onClick:()=>$(te,Q)},z)}return z}}if(s.scopedSlots){s.ellipsis=!0;let T=s.scopedSlots;s.slots=T,delete s.scopedSlots}}}return l}function $(l,o){let s=l.href,d=/(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?/,S=/\.vue(\?.*)?$/,P=/{{([^}]+)}}/g;if(typeof s=="string")if(s.startsWith("ONLINE:")){let T=s.split(":");y.value=T[1];let E=T[2];_(!0,{isUpdate:!0,disableSubmit:!0,hideSub:!0,record:{id:o[E]}})}else s=s.trim().replace(/\${([^}]+)?}/g,(T,E)=>o[E]),P.test(s)&&(s=s.replace(P,function(T,E){try{return Xe(E)}catch(W){return T}})),d.test(s)?window.open(s,"_blank"):S.test(s)?U(s):t.push(s)}const k=Ce({model:{title:"",okText:"关闭",width:"100%",open:!1,destroyOnClose:!0,style:{top:0,left:0,height:"100%",margin:0,padding:0},bodyStyle:{padding:"8px",height:"calc(100vh - 108px)",overflow:"auto",overflowX:"hidden"},cancelButtonProps:{style:{display:"none"}}},on:{ok:()=>k.model.open=!1,cancel:()=>k.model.open=!1},is:null,params:{}});function U(l){let o=l.indexOf("?"),s=l;if(o!==-1){s=l.substring(0,o);let d=l.substring(o+1,l.length).split("&"),S={};d.forEach(P=>{let T=P.split("=");S[T[0]]=T[1]}),k.params=S}else k.params={};k.model.open=!0,k.model.title="操作",k.is=xn(Fn(()=>jn(s)))}let J="left";n.isTree()&&(J="right");const N=Ce({title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:J,align:"center",width:150});he(()=>e==null?void 0:e.value,()=>{var l,o;((l=e==null?void 0:e.value)==null?void 0:l.tableFixedAction)===1&&(N.fixed=((o=e==null?void 0:e.value)==null?void 0:o.tableFixedActionType)||"right",n.isTree()&&(N.fixed="right"))});function q(l){let o=!1;for(let s=0;s<l.length;s++)if(l[s].dataIndex.toLowerCase()=="bpm_status"){o=!0;break}return n.hasBpmStatus=o,o}function w(l){if(!l)return;l.indexOf(",")>0&&(l=l.substring(0,l.indexOf(",")));let o=Ve(l);window.open(o)}function I(l){return l&&l.indexOf(",")>0&&(l=l.substring(0,l.indexOf(","))),Ve(l)}function v(l){return l?Qn(l):""}function x(l){if(!l)return"";let o=l;return o.length>10&&(o=o.substring(0,10)),o}he(a,()=>{n.selectedRowKeys=be(a.value)}),n.clearSelectedRow=()=>{a.value=[],n.selectedRows=[],n.selectedRowKeys=[]};function r(l){if(l){let o=[],s=l.split(",");for(let d of s)d&&o.push(Ve(d));Nn({imageList:o})}}const m=F();function u(l,o){return Y(this,null,function*(){A.value=o,(yield m.value.getFormStatus())==!0?(y.value=o,_(!0,{isUpdate:!0,disableSubmit:!0,hideSub:!0,record:{id:l}})):O(!0,{isUpdate:!0,record:{id:l}})})}return{columns:i,actionColumn:N,selectedKeys:a,rowSelection:h,enableScrollBar:b,tableScroll:g,downloadRowFile:w,getImgView:I,getPcaText:v,getFormatDate:x,handleColumnResult:B,onSelectChange:j,hrefComponent:k,viewOnlineCellImage:r,hrefMainTableId:y,registerOnlineHrefModal:M,registerPopModal:C,openPopModal:O,openOnlineHrefModal:_,onlinePopModalRef:m,popTableId:A}}const Ol=wt({name:"OnlinePopListModal",props:{id:{type:String,default:""},multi:{type:Boolean,default:!1},addAuth:{type:Boolean,default:!0}},components:{BasicModal:xt,BasicTable:Wn,TableAction:Yn,PlusOutlined:Ze,OnlinePopModal:je},emits:["success","register"],setup(n,{emit:e}){const{createMessage:t}=et(),{popModalFixedWidth:i,resetBodyStyle:c,popBodyStyle:a}=Ht(),h=F(""),b=F(800),[g,{closeModal:M}]=Ct(()=>{h.value="",S.value=[],P.value=[],s({current:1}),o(),c()}),[_,{openModal:y}]=De();function C(){M()}const O=de(()=>{const H=S.value;return!(H&&H.length>0)}),A=F(!1);function B(){A.value=!0;let H=be(P.value);H&&H.length>0&&(e("success",H),M()),setTimeout(()=>{A.value=!1},200)}function j(H){const Z="/online/cgform/api/getData/"+n.id;return me.get({url:Z,params:H})}function R(H){return H.column="id",new Promise((Z,X)=>Y(this,null,function*(){const ee=yield j(H);Z(ee)}))}const $={isPopList:!0,reloadTable(){},isTree(){return!1}},k=F({}),{columns:U,downloadRowFile:J,getImgView:N,getPcaText:q,getFormatDate:w,handleColumnResult:I,hrefComponent:v,viewOnlineCellImage:x}=Wt($,k);function r(){const H="/online/cgform/api/getColumns/"+n.id;return new Promise((Z,X)=>{me.get({url:H},{isTransformResponse:!1}).then(ee=>{ee.success?Z(ee.result):(t.warning(ee.message),X())})})}const m=F("");he(()=>n.id,()=>Y(this,null,function*(){let H=yield r();I(H),m.value=H.description}),{immediate:!0});const{tableContext:u}=En({designScope:"process-design",pagination:!0,tableProps:{title:"",api:R,clickToRowSelect:!0,columns:U,showTableSetting:!1,immediate:!1,canResize:!1,showActionColumn:!1,actionColumn:{dataIndex:"action",slots:{customRender:"action"}},useSearchForm:!1,beforeFetch:H=>z(H)}}),[l,{reload:o,setPagination:s},{rowSelection:d,selectedRowKeys:S,selectedRows:P}]=u;he(()=>n.multi,H=>{H==!0?d.type="checkbox":d.type="radio"},{immediate:!0});function T(H){return[{label:"编辑",onClick:E.bind(null,H)}]}function E(H){}function W(){o()}const Q=["int","double","Date","Datetime","BigDecimal"];function z(H){let Z=h.value;if(!Z)return H.superQueryMatchType="or",H.superQueryParams="",H;let X=U.value,ee=[];if(X&&X.length>0)for(let ne of X)ne.dbType&&(ne.dbType=="string"?ee.push({field:ne.dataIndex,type:ne.dbType.toLowerCase(),rule:"like",val:Z}):ne.dbType=="Date"?Z.length==10&&ee.push({field:ne.dataIndex,type:ne.dbType.toLowerCase(),rule:"eq",val:Z}):ne.dbType=="Datetime"?Z.length==19&&ee.push({field:ne.dataIndex,type:ne.dbType.toLowerCase(),rule:"eq",val:Z}):Q.indexOf(ne.dbType)&&ee.push({field:ne.dataIndex,type:ne.dbType.toLowerCase(),rule:"eq",val:Z}));return H.superQueryMatchType="or",H.superQueryParams=encodeURI(JSON.stringify(ee)),H}function te(){y(!0,{})}function ce(H){e("success",[H]),M()}return{registerModal:g,modalWidth:b,handleCancel:C,submitDisabled:O,submitLoading:A,handleSubmit:B,registerTable:l,getTableAction:T,searchText:h,onSearch:W,downloadRowFile:J,getImgView:N,getPcaText:q,getFormatDate:w,hrefComponent:v,viewOnlineCellImage:x,rowSelection:d,modalTitle:m,registerPopModal:_,handleAdd:te,reload:o,popModalFixedWidth:i,popBodyStyle:a,handleDataSave:ce}}}),kl={style:{display:"inline-block",width:"calc(100% - 140px)","text-align":"left"}},Pl={key:0,style:{"font-size":"12px","font-style":"italic"}},Dl={key:0,style:{"font-size":"12px","font-style":"italic"}},Il=["src","onClick"],Rl=["innerHTML"],Ml=["title"];function _l(n,e,t,i,c,a){const h=ie("PlusOutlined"),b=ie("a-button"),g=ie("a-input-search"),M=ie("TableAction"),_=ie("BasicTable"),y=ie("BasicModal"),C=ie("online-pop-modal");return G(),ue(Ee,null,[ae(y,{onRegister:n.registerModal,width:n.popModalFixedWidth,dialogStyle:{top:"70px"},bodyStyle:n.popBodyStyle,title:n.modalTitle,wrapClassName:"jeecg-online-pop-list-modal"},{footer:oe(()=>[pe("div",kl,[n.addAuth?(G(),Oe(b,{key:0,style:{"border-radius":"50px"},type:"primary",onClick:n.handleAdd},{default:oe(()=>[ae(h),Fe("新增记录")]),_:1},8,["onClick"])):ve("",!0)]),ae(b,{key:"back",onClick:n.handleCancel},{default:oe(()=>[Fe("关闭")]),_:1},8,["onClick"]),ae(b,{disabled:n.submitDisabled,key:"submit",type:"primary",onClick:n.handleSubmit,loading:n.submitLoading},{default:oe(()=>[Fe("确定")]),_:1},8,["disabled","onClick","loading"])]),default:oe(()=>[ae(_,{onRegister:n.registerTable,rowSelection:n.rowSelection},{tableTitle:oe(()=>[ae(g,{value:n.searchText,"onUpdate:value":e[0]||(e[0]=O=>n.searchText=O),onSearch:n.onSearch,placeholder:"请输入关键词，按回车搜索",style:{width:"240px"}},null,8,["value","onSearch"])]),action:oe(({record:O})=>[ae(M,{actions:n.getTableAction(O)},null,8,["actions"])]),fileSlot:oe(({text:O})=>[O?(G(),Oe(b,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:A=>n.downloadRowFile(O)},{default:oe(()=>[Fe(" 下载 ")]),_:2},1032,["onClick"])):(G(),ue("span",Pl,"无文件"))]),imgSlot:oe(({text:O})=>[O?(G(),ue("img",{key:1,src:n.getImgView(O),alt:"图片不存在",class:"online-cell-image",onClick:A=>n.viewOnlineCellImage(O)},null,8,Il)):(G(),ue("span",Dl,"无图片"))]),htmlSlot:oe(({text:O})=>[pe("div",{innerHTML:O},null,8,Rl)]),pcaSlot:oe(({text:O})=>[pe("div",{title:n.getPcaText(O)},Te(n.getPcaText(O)),9,Ml)]),dateSlot:oe(({text:O})=>[pe("span",null,Te(n.getFormatDate(O)),1)]),_:1},8,["onRegister","rowSelection"])]),_:1},8,["onRegister","width","bodyStyle","title"]),ae(C,{id:n.id,onRegister:n.registerPopModal,onSuccess:n.handleDataSave,topTip:""},null,8,["id","onRegister","onSuccess"])],64)}const Yt=Re(Ol,[["render",_l]]),$l=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),Al={name:"LinkTableCard",props:{valueField:se.string.def(""),textField:se.string.def(""),tableName:se.string.def(""),multi:se.bool.def(!1),value:se.oneOfType([se.string,se.number]),linkFields:se.array.def([]),disabled:se.bool.def(!1),detail:se.bool.def(!1),imageField:se.string.def("")},components:{PlusOutlined:Ze,MinusCircleFilled:Dn,OnlinePopListModal:Yt,OnlinePopModal:je},emits:["change","update:value"],setup(n,{emit:e}){const t=de(()=>n.tableName),[i,{openModal:c}]=De(),[a,{openModal:h}]=De(),b=F([]),g=F([]),M=de(()=>!(n.disabled==!0||n.multi===!1&&g.value.length>0)),{auths:_,otherColumns:y,realShowColumns:C,tableColumns:O,textFieldArray:A,transData:B,loadOne:j,compareData:R,formatData:$,initFormData:k,getImageSrc:U,showImage:J}=Ut(n),N=de(()=>n.multi===!0?12:24),q=de(()=>n.multi===!0?24:12);function w(o){if(o&&A.value.length>0){let s=A.value[0];return o[s]}}function I(o){o==null||o.stopPropagation(),o==null||o.preventDefault()}function v(o,s){I(o),_.update!=!1&&n.disabled==!1&&h(!0,{isUpdate:!0,record:s})}function x(o){c(!0,{})}function r(o){let s=g.value;for(let d of o){let S=ge({},d);B(S),s.push(S)}g.value=s,l()}function m(o){let s=g.value;for(let d=0;d<s.length;d++)if(s[d].id===o.id){let S=ge({},o);B(S),s.splice(d,1,S)}g.value=s,l()}function u(o,s){I(o);let d=g.value;d&&d.length>s&&(d.splice(s,1),g.value=d),l()}function l(){let o=g.value,s=[],d={},S=n.linkFields;if(o.length>0)for(let T=0;T<o.length;T++)s.push(o[T][n.valueField]),k(d,S,o[T]);else k(d,S);let P=s.join(",");$(d),e("change",P,d),e("update:value",P)}return he(()=>n.value,o=>Y(this,null,function*(){if(o){if(R(g.value,o)===!1){let s=yield j(o);g.value=s}n.linkFields&&n.linkFields.length>0&&l()}else g.value=[]}),{immediate:!0}),{popTableName:t,selectRecords:g,otherColumns:y,realShowColumns:C,showButton:M,selectValue:b,handleAddRecord:x,handleDeleteRecord:u,getMainContent:w,itemSpan:N,columnSpan:q,tableColumns:O,addCard:r,registerListModal:i,registerFormModal:a,handleClickEdit:v,updateCardData:m,getImageSrc:U,showImage:J,auths:_}}},jl={class:"table-link-card"},Vl={style:{width:"100%",height:"100%"}},Bl={key:0,class:"card-button"},El=["onClick"],Ll={key:0,class:"card-delete"},Nl={class:"card-inner"},Jl={class:"card-main-content"},Hl={class:"other-content"},Ul={class:"label ellipsis"},ql={class:"text ellipsis"},Wl={key:0,class:"card-item-image"},Yl=["src"];function zl(n,e,t,i,c,a){const h=ie("PlusOutlined"),b=ie("a-button"),g=ie("minus-circle-filled"),M=ie("a-col"),_=ie("a-row"),y=ie("online-pop-list-modal"),C=ie("online-pop-modal");return G(),ue("div",null,[pe("div",jl,[pe("div",Vl,[i.showButton?(G(),ue("div",Bl,[ae(b,{onClick:i.handleAddRecord},{default:oe(()=>[ae(h),Fe("记 录")]),_:1},8,["onClick"])])):ve("",!0),ae(_,null,{default:oe(()=>[(G(!0),ue(Ee,null,Ke(i.selectRecords,(O,A)=>(G(),Oe(M,{span:i.itemSpan},{default:oe(()=>[pe("div",{class:pt(["card-item",{"disabled-chunk":t.detail==!0}]),onClick:B=>i.handleClickEdit(B,O)},[pe("div",{class:pt(["card-item-left",{"show-right-image":i.showImage}])},[t.disabled==!1?(G(),ue("span",Ll,[ae(g,{onClick:B=>i.handleDeleteRecord(B,A)},null,8,["onClick"])])):ve("",!0),pe("div",Nl,[pe("div",Jl,Te(i.getMainContent(O)),1),pe("div",Hl,[ae(_,null,{default:oe(()=>[(G(!0),ue(Ee,null,Ke(i.realShowColumns,B=>(G(),Oe(M,{span:i.columnSpan},{default:oe(()=>[pe("span",Ul,Te(B.title),1),pe("span",ql,Te(O[B.dataIndex]),1)]),_:2},1032,["span"]))),256))]),_:2},1024)])])],2),i.showImage?(G(),ue("div",Wl,[i.getImageSrc(O)?(G(),ue("img",{key:0,src:i.getImageSrc(O),alt:""},null,8,Yl)):ve("",!0)])):ve("",!0)],10,El)]),_:2},1032,["span"]))),256))]),_:1})])]),ae(y,{onRegister:i.registerListModal,multi:t.multi,id:i.popTableName,addAuth:i.auths.add,onSuccess:i.addCard},null,8,["onRegister","multi","id","addAuth","onSuccess"]),ae(C,{id:i.popTableName,onRegister:i.registerFormModal,onSuccess:i.updateCardData,topTip:""},null,8,["id","onRegister","onSuccess"])])}const lt=Re(Al,[["render",zl],["__scopeId","data-v-447ec75a"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),yt={};function zt(){n("OnlineSelectCascade",Hn),n("LinkTableSelect",qt),n("LinkTableCard",lt);function n(t,i){yt[t]||(bn(t,i),yt[t]=1)}function e(t){t.component=="LinkTableCard"&&(t.component="LinkTableSelect",t.componentProps.popContainer="body")}return{addComponent:n,linkTableCard2Select:e}}const Co=Object.freeze(Object.defineProperty({__proto__:null,E:li,F:Be,L:Je,O:je,S:Dt,V:Ie,a:Wt,b:Jt,c:it,d:Bt,e:nt,f:ni,g:Pe,h:It,i:nl,j:zt,k:oi,l:Ne,m:Hi,n:Et,o:Ge,p:ii,q:lt,r:sl,s:dl,t:fl,u:Lt,v:Tl,w:$l,x:Kl},Symbol.toStringTag,{value:"Module"}));export{it as $,Et as A,Lt as B,Pe as D,Be as H,zt as M,je as N,Ie as R,It as U,Dt as W,Ne as Z,nt as a,lt as b,Ge as c,Wt as d,li as e,oi as f,Qn as g,ii as h,Co as i,Bt as j,Hi as m,Je as n,nl as p,ni as u,Jt as z};
