var v=Object.defineProperty;var b=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var y=(s,e,t)=>e in s?v(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,L=(s,e)=>{for(var t in e||(e={}))_.call(e,t)&&y(s,t,e[t]);if(b)for(var t of b(e))w.call(e,t)&&y(s,t,e[t]);return s};var f=(s,e,t)=>new Promise((a,c)=>{var m=o=>{try{n(t.next(o))}catch(i){c(i)}},d=o=>{try{n(t.throw(o))}catch(i){c(i)}},n=o=>o.done?a(o.value):Promise.resolve(o.value).then(m,d);n((t=t.apply(s,e)).next())});import{d as B,f as I,e as M,u as r,a6 as S,ab as O,a9 as F,k as T,ae as U}from"./tinymce-vendor-3c2b3d6e.js";import{B as k}from"./index-64ecc8b2.js";import"./index-09260ce4.js";import{ap as u}from"./jeecg-online-vendor-f57c6456.js";import{M as N}from"./antd-vue-vendor-05bfa84d.js";import{u as P,B as R}from"./useForm-df7d93c5.js";import{C as j}from"./index-37448b2d.js";const h=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],K=[{title:"允许的表名",dataIndex:"tableName"},{title:"允许的字段名",dataIndex:"fieldName"},{title:"状态",dataIndex:"status",customRender({text:s}){const e=h.find(t=>t.value===s);return(e==null?void 0:e.label)||"未知"}},{title:"创建时间",dataIndex:"createTime"}],Q=[{label:"允许的表名",field:"tableName",component:"Input"},{label:"允许的字段名",field:"fieldName",component:"Input"},{label:"状态",field:"status",component:"Select",componentProps:{options:h}}],C=[{label:"",field:"id",component:"Input",show:!1},{label:"允许的表名",field:"tableName",component:"Input",required:!0},{label:"允许的字段名",field:"fieldName",component:"Input",required:!0,helpMessage:"多个用逗号分割"},{label:"状态",field:"status",component:"Select",defaultValue:"1",componentProps:{options:h}}];const Y="/sys/tableWhiteList/exportXls",Z="/sys/tableWhiteList/importExcel",A=s=>u.get({url:"/sys/tableWhiteList/list",params:s}),ee=(s,e)=>u.delete({url:"/sys/tableWhiteList/delete",params:s},{joinParamsToUrl:!0}).then(()=>{e()}),te=(s,e)=>{N.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>u.delete({url:"/sys/tableWhiteList/deleteBatch",data:s},{joinParamsToUrl:!0}).then(()=>{e()})})},E=(s,e)=>{let t=e?"/sys/tableWhiteList/edit":"/sys/tableWhiteList/add";return u.post({url:t,params:s})},V=B({__name:"SysTableWhiteListModal",emits:["register","success"],setup(s,{emit:e}){const t=e,a=I(!0),[c,{resetFields:m,setFieldsValue:d,validate:n}]=P({labelWidth:150,schemas:C,showActionButtonGroup:!1}),[o,{setModalProps:i,closeModal:g}]=j(l=>f(this,null,function*(){yield m(),i({confirmLoading:!1,showCancelBtn:l==null?void 0:l.showFooter,showOkBtn:l==null?void 0:l.showFooter}),a.value=!!(l!=null&&l.isUpdate),r(a)&&(yield d(L({},l.record)))})),W=M(()=>r(a)?"编辑":"新增");function x(l){return f(this,null,function*(){try{let p=yield n();i({confirmLoading:!0}),yield E(p,a.value),g(),t("success",{isUpdate:a.value,values:p})}finally{i({confirmLoading:!1})}})}return(l,p)=>(S(),O(r(k),U({onRegister:r(o),title:W.value,width:"40%"},l.$attrs,{onOk:x}),{default:F(()=>[T(r(R),{onRegister:r(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}}),se=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{se as S,V as _,Z as a,te as b,K as c,ee as d,Y as g,A as l,Q as s};
