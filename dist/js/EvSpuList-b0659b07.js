var ae=Object.defineProperty,le=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var M=(n,a,e)=>a in n?ae(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,N=(n,a)=>{for(var e in a||(a={}))re.call(a,e)&&M(n,e,a[e]);if(K)for(var e of K(a))se.call(a,e)&&M(n,e,a[e]);return n},O=(n,a)=>le(n,ie(a));var I=(n,a,e)=>new Promise((s,p)=>{var B=c=>{try{g(e.next(c))}catch(b){p(b)}},P=c=>{try{g(e.throw(c))}catch(b){p(b)}},g=c=>c.done?s(c.value):Promise.resolve(c.value).then(B,P);g((e=e.apply(n,a)).next())});import{d as V,f as J,r as x,Y as d,a6 as S,a7 as pe,ac as m,k as t,a9 as o,ab as T,Z as E,E as _,ad as ce,a8 as de,u as w,a4 as me,a5 as ue}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import{useListPage as fe}from"./useListPage-66651993.js";import{u as _e,C as ge,_ as be}from"./jeecg-online-vendor-f57c6456.js";import{render as ve}from"./renderUtils-59564de6.js";import{l as he,g as ye,a as Ie,s as xe,d as Se,b as we}from"./EvSpu.api-376e662f.js";import Ce from"./EvSpuModal-37df16e3.js";import{J as C}from"./componentMap-e2e33057.js";import{l as ke}from"./JDictSelectTag-f0227cc5.js";import{Q as Pe}from"./index-2ad3f236.js";import De from"./BasicTable-400bb95b.js";import"./index-37448b2d.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./CompTypeEnum-5c91fd88.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./injectionKey-69710956.js";import"./EvSpuForm-84c91a6a.js";import"./validator-a0d2ebc7.js";import"./user.api-367a7bce.js";const Re=[{title:"序号",dataIndex:"batch",align:"center",width:50,customRender:function({text:n,record:a,index:e,column:s}){return e+1}},{title:"商品图片",align:"center",width:80,dataIndex:"img",customRender:ve.renderImage},{title:"商品名称",align:"center",width:180,dataIndex:"name"},{title:"商品编码",align:"center",width:120,dataIndex:"code"},{title:"商品分类",align:"center",width:100,dataIndex:"type"},{title:"规格型号",align:"center",width:180,dataIndex:"spec"},{title:"厂家",align:"center",width:180,dataIndex:"supplier"},{title:"进货价",align:"center",width:80,dataIndex:"costPrice",customRender:function({text:n,record:a,index:e,column:s}){return n+"元"}},{title:"零售价",align:"center",width:80,dataIndex:"price",customRender:function({text:n,record:a,index:e,column:s}){return n+"元"}},{title:"商品状态",align:"center",width:120,dataIndex:"status"}];const Ue={remark:{title:"备注",order:0,view:"textarea",type:"string"},name:{title:"商品名称",order:1,view:"text",type:"string"},code:{title:"商品编码",order:2,view:"text",type:"string"},imgPath:{title:"商品图片",order:3,view:"image",type:"string"},description:{title:"简述",order:6,view:"umeditor",type:"string"},categoryIds:{title:"商品分类",order:8,view:"text",type:"string"}},k=n=>(me("data-v-3a8e7a47"),n=n(),ue(),n),Je={class:"p-2"},Te={class:"jeecg-basic-table-form-container"},Ee=k(()=>m("span",{title:"商品名称"},"商品名称",-1)),Be=k(()=>m("span",{title:"商品编码"},"商品编码",-1)),Ae=k(()=>m("span",{title:"商品种类"},"商品种类",-1)),Le=k(()=>m("span",{title:"厂家名称"},"厂家名称",-1)),Qe={style:{float:"left",overflow:"hidden"},class:"table-page-search-submitButtons"},Fe=V({name:"evSpu-evSpu"}),Ke=V(O(N({},Fe),{setup(n){const a=J(),e=x({}),s=J(!1),p=J(),B=_e(),{createMessage:P}=ge(),{prefixCls:g,tableContext:c,onExportXls:b,onImportXls:Me}=fe({tableProps:{title:"SPU标准化产品单元表",api:he,columns:Re,canResize:!1,useSearchForm:!1,showTableSetting:!1,actionColumn:{width:160,fixed:"right"},beforeFetch:l=>Object.assign(l,e)},exportConfig:{name:"SPU标准化产品单元表",url:ye,params:e},importConfig:{url:Ie,success:h}}),[j,{reload:D,collapseAll:Ne,updateTableDataRecord:Oe,findTableDataRecord:Ve,getDataSource:je},{rowSelection:$e,selectedRowKeys:v}]=c,$=x({xs:24,sm:6}),X=x({xs:24,sm:16}),Xe=x(Ue);function qe(l){Object.keys(l).map(i=>{e[i]=l[i]}),y()}function q(){p.value.disableSubmit=!1,p.value.add()}function z(l){p.value.disableSubmit=!1,p.value.edit(l)}function H(l){return I(this,null,function*(){const i=l;yield xe(i,!0).then(u=>{u.success&&P.success(i.status==="0"?"商品已上架!":"商品已下架!")}).finally(()=>{y()})})}function A(l){p.value.disableSubmit=!0,p.value.edit(l)}function L(l){return I(this,null,function*(){yield Se({id:l.id},h)})}function Y(){return I(this,null,function*(){yield we({ids:v.value},h)})}function h(){(v.value=[])&&D()}function Z(l){return[{label:"编辑",onClick:z.bind(null,l)},{label:"详情",onClick:A.bind(null,l)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:L.bind(null,l),placement:"topLeft"}}]}function ze(l){return[{label:"详情",onClick:A.bind(null,l)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:L.bind(null,l),placement:"topLeft"}}]}function y(){D()}function G(){a.value.resetFields(),v.value=[],D()}return(l,i)=>{const u=d("a-form-item"),f=d("a-col"),R=d("a-button"),Q=d("Icon"),W=d("a-row"),ee=d("a-form"),te=d("a-menu-item"),oe=d("a-menu"),ne=d("a-dropdown");return S(),pe("div",Je,[m("div",Te,[t(ee,{ref_key:"formRef",ref:a,onKeyup:de(y,["enter","native"]),model:e,"label-col":$,"wrapper-col":X},{default:o(()=>[t(W,{gutter:24},{default:o(()=>[t(f,{lg:6},{default:o(()=>[t(u,{name:"name"},{label:o(()=>[Ee]),default:o(()=>[t(C,{placeholder:"请输入商品名称",value:e.name,"onUpdate:value":i[0]||(i[0]=r=>e.name=r)},null,8,["value"])]),_:1})]),_:1}),t(f,{lg:6},{default:o(()=>[t(u,{name:"code"},{label:o(()=>[Be]),default:o(()=>[t(C,{placeholder:"请输入商品编码",value:e.code,"onUpdate:value":i[1]||(i[1]=r=>e.code=r)},null,8,["value"])]),_:1})]),_:1}),t(f,{lg:6},{default:o(()=>[t(u,{name:"code"},{label:o(()=>[Ae]),default:o(()=>[t(C,{placeholder:"请输入商品种类",value:e.type,"onUpdate:value":i[2]||(i[2]=r=>e.type=r)},null,8,["value"])]),_:1})]),_:1}),s.value?(S(),T(f,{key:0,lg:6},{default:o(()=>[t(u,{name:"code"},{label:o(()=>[Le]),default:o(()=>[t(C,{placeholder:"请输入厂家名称",value:e.supplier,"onUpdate:value":i[3]||(i[3]=r=>e.supplier=r)},null,8,["value"])]),_:1})]),_:1})):E("",!0),t(f,{xl:4,lg:4,md:8,sm:24},{default:o(()=>[m("span",Qe,[t(f,{lg:5},{default:o(()=>[t(R,{type:"primary",preIcon:"ant-design:search-outlined",onClick:y},{default:o(()=>[_("查询")]),_:1}),t(R,{type:"primary",preIcon:"ant-design:reload-outlined",onClick:G,style:{"margin-left":"8px"}},{default:o(()=>[_("重置")]),_:1}),m("a",{onClick:i[4]||(i[4]=r=>s.value=!s.value),style:{"margin-left":"8px"}},[_(ce(s.value?"收起":"展开")+" ",1),t(Q,{icon:s.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),t(w(De),{onRegister:w(j)},{tableTitle:o(()=>[t(R,{type:"primary",onClick:q,preIcon:"ant-design:plus-outlined"},{default:o(()=>[_(" 新增")]),_:1}),w(v).length>0?(S(),T(ne,{key:0},{overlay:o(()=>[t(oe,null,{default:o(()=>[t(te,{key:"1",onClick:Y},{default:o(()=>[t(Q,{icon:"ant-design:delete-outlined"}),_(" 删除 ")]),_:1})]),_:1})]),_:1})):E("",!0)]),action:o(({record:r})=>[t(w(Pe),{actions:Z(r)},null,8,["actions"])]),bodyCell:o(({column:r,record:U,index:He,text:Ye})=>[r.dataIndex==="status"?(S(),T(ke,{key:0,value:U.status,"onUpdate:value":F=>U.status=F,type:"radioButton","dict-code":"ev_goods_status",onChange:F=>H(U)},null,8,["value","onUpdate:value","onChange"])):E("",!0)]),_:1},8,["onRegister"]),t(Ce,{ref_key:"registerModal",ref:p,onSuccess:h},null,512)])}}}));const so=be(Ke,[["__scopeId","data-v-3a8e7a47"]]);export{so as default};
