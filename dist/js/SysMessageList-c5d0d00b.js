import{bi as H,au as B,bj as E,bk as I,bl as O,bm as R,bn as w}from"./antd-vue-vendor-05bfa84d.js";import{a as N,u as V}from"./useSysMessage-e75c3f9d.js";import{a4 as X,a5 as $,Y as l,a6 as o,ab as d,a9 as e,a7 as c,k as s,E as F,Z as z,ac as m,ad as D,F as f}from"./tinymce-vendor-3c2b3d6e.js";import{_ as A}from"./jeecg-online-vendor-f57c6456.js";import"./index-37448b2d.js";import"./vxe-table-vendor-26792376.js";const K={name:"SysMessageList",components:{FilterOutlined:H,CloseOutlined:B,BellFilled:E,ExclamationOutlined:I,MailOutlined:O,InteractionOutlined:R,AlertOutlined:w},props:{star:{type:Boolean,default:!1}},emits:["close","detail"],setup(S,{emit:k}){const{messageList:L,loadEndStatus:t,loadingMoreStatus:C,onLoadMore:T,noRead:b,getMsgCategory:x,searchParams:r,reset:g,loadData:i,updateStarMessage:_}=N();function u(n){let{fromUser:M,rangeDateKey:a,rangeDate:v}=n;r.fromUser=M||"",r.rangeDateKey=a||"",r.rangeDate=v||[],S.star===!0?r.starFlag="1":r.starFlag="",g(),i()}function p(n){_(n),n.starFlag=="1"?n.starFlag="0":n.starFlag="1"}const{goPage:y}=V(k);function h(n){n.readFlag="1",y(n),k("close",n.id)}return{messageList:L,loadEndStatus:t,loadingMoreStatus:C,onLoadMore:T,noRead:b,getMsgCategory:x,reload:u,clickStar:p,showMessageDetail:h}}};const P={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},U={key:1,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},j={style:{position:"relative"}},Y=["innerHTML"],Z=["innerHTML"],q=["onClick"];function G(S,k,L,t,C,T){const b=l("a-button"),x=l("a-rate"),r=l("a-tooltip"),g=l("mail-outlined"),i=l("a-avatar"),_=l("a-badge"),u=l("interaction-outlined"),p=l("alert-outlined"),y=l("bell-filled"),h=l("a-list-item-meta"),n=l("a-list-item"),M=l("a-list");return o(),d(M,{"item-layout":"horizontal","data-source":t.messageList},{loadMore:e(()=>[t.messageList&&t.messageList.length>0&&!t.loadEndStatus&&!t.loadingMoreStatus?(o(),c("div",P,[s(b,{onClick:t.onLoadMore},{default:e(()=>[F("加载更多")]),_:1},8,["onClick"])])):z("",!0),t.messageList&&t.messageList.length>0&&t.loadEndStatus?(o(),c("div",U," 没有更多了 ")):z("",!0)]),renderItem:e(({item:a})=>[s(n,null,{actions:e(()=>[s(x,{value:a.starFlag=="1"?1:0,count:1,onClick:v=>t.clickStar(a),style:{cursor:"pointer"},disabled:""},null,8,["value","onClick"])]),default:e(()=>[s(h,{description:a.createTime},{title:e(()=>[m("div",j,[m("span",null,D(t.getMsgCategory(a)),1),a.busType=="bpm"?(o(),c("span",{key:0,class:"bpm-cuiban-content",innerHTML:a.msgContent},null,8,Y)):(o(),d(r,{key:1},{title:e(()=>[m("div",{innerHTML:a.msgContent},null,8,Z)]),default:e(()=>[F(" "+D(a.titile),1)]),_:2},1024)),m("a",{onClick:v=>t.showMessageDetail(a),style:{"margin-left":"16px"}},"查看详情",8,q)])]),avatar:e(()=>[a.busType=="email"?(o(),c(f,{key:0},[t.noRead(a)?(o(),d(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),d(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm_task"?(o(),c(f,{key:1},[t.noRead(a)?(o(),d(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),d(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm"?(o(),c(f,{key:2},[t.noRead(a)?(o(),d(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),d(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"}})]),_:1}))],64)):(o(),c(f,{key:3},[t.noRead(a)?(o(),d(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),d(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"}})]),_:1}))],64))]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])}const oe=A(K,[["render",G],["__scopeId","data-v-4aeeddc2"]]);export{oe as default};
