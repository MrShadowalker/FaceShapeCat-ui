import{d as B,f as c,e as M,w as S,Y as v,a6 as f,a7 as x,ab as g,F as _,ac as z,k as h,a9 as I,E as C}from"./tinymce-vendor-3c2b3d6e.js";import{C as T,bs as V}from"./jeecg-online-vendor-f57c6456.js";import{d as q,A,C as F}from"./auth.api-d3a6c4b3-afe9bb9e.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";var y=(e,d,t)=>new Promise((u,s)=>{var i=a=>{try{o(t.next(a))}catch(r){s(r)}},n=a=>{try{o(t.throw(a))}catch(r){s(r)}},o=a=>a.done?u(a.value):Promise.resolve(a.value).then(i,n);o((t=t.apply(e,d)).next())});const J=B({name:"AuthDataTree",props:{cgformId:{type:String,required:!0}},setup(e){const{createMessage:d}=T(),t=c(""),u=c(3),s=c(!0),i=c([]),n=c([]),o=c([]),a=c(""),r=M(()=>!t.value);S(()=>e.cgformId,m,{immediate:!0});function m(){return y(this,null,function*(){if(!e.cgformId)return;let l=yield q(e.cgformId,u.value);o.value=l.map(p=>({key:p.id,title:p.ruleName}))})}function k(l,p){return y(this,null,function*(){t.value=l,a.value=p,n.value=[],yield m();let w=yield A({roleId:l,cgformId:e.cgformId,type:u.value,authMode:p});n.value=w.map(N=>N.authId)})}function K(){t.value="",m()}function b(){m(),k(t.value,a.value)}function E(){return y(this,null,function*(){yield F(t.value,e.cgformId,{authId:JSON.stringify(n.value),authMode:a.value}),d.success("保存成功")})}function D(l){i.value=l,s.value=!1}function P(){t.value="",n.value=[]}return{loadChecked:k,clear:P,expandedKeys:i,autoExpandParent:s,checkedKeys:n,treeData:o,disabled:r,onSave:E,onExpand:D,onRefresh:b,clearChecked:K}}}),R={class:"onl-auth-tree-btns"};function $(e,d,t,u,s,i){const n=v("a-empty"),o=v("a-button"),a=v("a-tree");return f(),x("div",null,[e.disabled?(f(),g(n,{key:0,description:"请先选中左侧角色/部门/用户"})):e.treeData.length===0?(f(),g(n,{key:1,description:"无权限信息"})):(f(),x(_,{key:2},[z("div",R,[h(o,{onClick:e.onRefresh,size:"small",type:"primary",preIcon:"ant-design:redo",ghost:""},{default:I(()=>[C("刷新")]),_:1},8,["onClick"]),h(o,{onClick:e.onSave,size:"small",type:"primary",preIcon:"ant-design:save",ghost:""},{default:I(()=>[C("保存")]),_:1},8,["onClick"])]),h(a,{checkable:"",checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":d[0]||(d[0]=r=>e.checkedKeys=r),expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData,onExpand:e.onExpand},null,8,["checkedKeys","expandedKeys","autoExpandParent","treeData","onExpand"])],64))])}const G=V(J,[["render",$],["__scopeId","data-v-c6be2157"]]);export{G as default};
