var U=Object.defineProperty,V=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var w=(t,e,r)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I=(t,e)=>{for(var r in e||(e={}))k.call(e,r)&&w(t,r,e[r]);if(T)for(var r of T(e))z.call(e,r)&&w(t,r,e[r]);return t},O=(t,e)=>V(t,B(e));import{K as l,L as J,l as g,d as $,f as X,o as Z,Y as Q,a6 as W,a7 as tt,k as P,a9 as et,ac as j,E as rt,ad as nt,u as E}from"./tinymce-vendor-3c2b3d6e.js";import{u as ot}from"./index-0f0d0317.js";import{ap as at,C as it}from"./jeecg-online-vendor-f57c6456.js";import{e as st,Z as y}from"./antd-vue-vendor-05bfa84d.js";import ct from"./BasicTable-400bb95b.js";import"./index-2ad3f236.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./index-37448b2d.js";import"./vxe-table-vendor-26792376.js";import"./useWindowSizeFn-e63bb4b0.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";import"./injectionKey-69710956.js";const pt=()=>at.get({url:"/actuator/httptrace"},{isTransformResponse:!1});var ut="Expected a function",M="__lodash_hash_undefined__",F=1/0,ft="[object Function]",lt="[object GeneratorFunction]",dt="[object Symbol]",mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/,_t=/^\./,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/[\\^$.*+?()[\]{}|]/g,bt=/\\(\\)?/g,vt=/^\[object .+?Constructor\]$/,Ct=typeof l=="object"&&l&&l.Object===Object&&l,xt=typeof self=="object"&&self&&self.Object===Object&&self,v=Ct||xt||Function("return this")();function St(t,e){return t==null?void 0:t[e]}function Tt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(r){}return e}var wt=Array.prototype,It=Function.prototype,G=Object.prototype,b=v["__core-js_shared__"],D=function(){var t=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),L=It.toString,C=G.hasOwnProperty,K=G.toString,Ot=RegExp("^"+L.call(C).replace(yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=v.Symbol,Pt=wt.splice,jt=A(v,"Map"),f=A(Object,"create"),N=R?R.prototype:void 0,H=N?N.toString:void 0;function a(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Et(){this.__data__=f?f(null):{}}function Dt(t){return this.has(t)&&delete this.__data__[t]}function Rt(t){var e=this.__data__;if(f){var r=e[t];return r===M?void 0:r}return C.call(e,t)?e[t]:void 0}function Nt(t){var e=this.__data__;return f?e[t]!==void 0:C.call(e,t)}function Ht(t,e){var r=this.__data__;return r[t]=f&&e===void 0?M:e,this}a.prototype.clear=Et;a.prototype.delete=Dt;a.prototype.get=Rt;a.prototype.has=Nt;a.prototype.set=Ht;function c(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(){this.__data__=[]}function Mt(t){var e=this.__data__,r=m(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Pt.call(e,r,1),!0}function Ft(t){var e=this.__data__,r=m(e,t);return r<0?void 0:e[r][1]}function Gt(t){return m(this.__data__,t)>-1}function Lt(t,e){var r=this.__data__,n=m(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}c.prototype.clear=$t;c.prototype.delete=Mt;c.prototype.get=Ft;c.prototype.has=Gt;c.prototype.set=Lt;function i(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Kt(){this.__data__={hash:new a,map:new(jt||c),string:new a}}function At(t){return h(this,t).delete(t)}function Yt(t){return h(this,t).get(t)}function qt(t){return h(this,t).has(t)}function Ut(t,e){return h(this,t).set(t,e),this}i.prototype.clear=Kt;i.prototype.delete=At;i.prototype.get=Yt;i.prototype.has=qt;i.prototype.set=Ut;function m(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Vt(t,e){e=Jt(e,t)?[e]:zt(e);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Wt(e[r++])];return r&&r==n?t:void 0}function Bt(t){if(!q(t)||Zt(t))return!1;var e=re(t)||Tt(t)?Ot:vt;return e.test(te(t))}function kt(t){if(typeof t=="string")return t;if(S(t))return H?H.call(t):"";var e=t+"";return e=="0"&&1/t==-F?"-0":e}function zt(t){return Y(t)?t:Qt(t)}function h(t,e){var r=t.__data__;return Xt(e)?r[typeof e=="string"?"string":"hash"]:r.map}function A(t,e){var r=St(t,e);return Bt(r)?r:void 0}function Jt(t,e){if(Y(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||S(t)?!0:ht.test(t)||!mt.test(t)||e!=null&&t in Object(e)}function Xt(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Zt(t){return!!D&&D in t}var Qt=x(function(t){t=oe(t);var e=[];return _t.test(t)&&e.push(""),t.replace(gt,function(r,n,s,o){e.push(s?o.replace(bt,"$1"):n||r)}),e});function Wt(t){if(typeof t=="string"||S(t))return t;var e=t+"";return e=="0"&&1/t==-F?"-0":e}function te(t){if(t!=null){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function x(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(ut);var r=function(){var n=arguments,s=e?e.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var p=t.apply(this,n);return r.cache=o.set(s,p),p};return r.cache=new(x.Cache||i),r}x.Cache=i;function ee(t,e){return t===e||t!==t&&e!==e}var Y=Array.isArray;function re(t){var e=q(t)?K.call(t):"";return e==ft||e==lt}function q(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ne(t){return!!t&&typeof t=="object"}function S(t){return typeof t=="symbol"||ne(t)&&K.call(t)==dt}function oe(t){return t==null?"":kt(t)}function ae(t,e,r){var n=t==null?void 0:Vt(t,e);return n===void 0?r:n}var ie=ae;const d=J(ie),se=[{title:"请求时间",dataIndex:"timestamp",width:50,customRender({text:t}){return st(t).format("YYYY-MM-DD HH:mm:ss")}},{title:"请求方法",dataIndex:"request.method",width:20,customRender({record:t,column:e}){let r=d(t,e.dataIndex),n="";return r==="GET"&&(n="#87d068"),r==="POST"&&(n="#2db7f5"),r==="PUT"&&(n="#ffba5a"),r==="DELETE"&&(n="#ff5500"),g(y,{color:n},()=>r)}},{title:"请求URL",dataIndex:"request.uri",width:200,customRender({record:t,column:e}){return d(t,e.dataIndex)}},{title:"响应状态",dataIndex:"response.status",width:50,customRender({record:t,column:e}){let r=d(t,e.dataIndex),n="";return r<200?n="pink":r<201?n="green":r<399?n="cyan":r<403?n="orange":r<501&&(n="red"),g(y,{color:n},()=>r)}},{title:"请求耗时",dataIndex:"timeTaken",width:50,customRender({record:t,column:e}){let r=d(t,e.dataIndex),n="red";return r<500?n="green":r<1e3?n="cyan":r<1500&&(n="orange"),g(y,{color:n},()=>`${r} ms`)}}],ce={class:"p-4"},pe={slot:"message"},ue=$({name:"monitor-trace"}),hr=$(O(I({},ue),{setup(t){const e=X([]),{createMessage:r}=it(),[n,{reload:s}]=ot({columns:se,showIndexColumn:!1,bordered:!0,rowKey:"id"});function o(){pt().then(p=>{let _=[];for(let u of p.traces)u.request.method!=="OPTIONS"&&u.request.uri.indexOf("httptrace")===-1&&_.push(u);e.value=_})}return Z(()=>{o()}),(p,_)=>{const u=Q("a-divider");return W(),tt("div",ce,[P(E(ct),{onRegister:E(n),dataSource:e.value},{tableTitle:et(()=>[j("div",pe,[rt(" 共追踪到 "+nt(e.value.length)+" 条近期HTTP请求记录 ",1),P(u,{type:"vertical"}),j("a",{onClick:o},"立即刷新")])]),_:1},8,["onRegister","dataSource"])])}}}));export{hr as default};
