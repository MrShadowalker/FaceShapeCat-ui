import{d as x,f as n,Y as r,a6 as S,ab as R,a9 as C,ac as y,k}from"./tinymce-vendor-3c2b3d6e.js";import{ap as V,C as E}from"./jeecg-online-vendor-f57c6456.js";import{aA as e}from"./index-37448b2d.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";const B={style:{"margin-bottom":"8px"}},D=y("span",null,"启用数据变动特效：",-1);const z=x({__name:"SocketReload",setup(N){const{createMessage:p}=E(),u=n(),c=n(!0),s=n(!1),f=n([]),_=n([{key:"num",title:"序号",width:80},{key:"enabled",title:"启用",width:80,type:e.checkbox},{key:"ship_name",title:"船名",width:180,type:e.input},{key:"call",title:"呼叫",width:80,type:e.input},{key:"len",title:"长",width:80,type:e.input},{key:"ton",title:"吨",width:120,type:e.input},{key:"payer",title:"付款方",width:120,type:e.input},{key:"count",title:"数",width:40},{key:"company",title:"公司",minWidth:180,type:e.input},{key:"trend",title:"动向",width:120,type:e.input}]);w();function w(){s.value=!0,V.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:200}}).then(t=>{f.value=t.records}).finally(()=>{s.value=!1})}function g(t){switch(t.type){case e.radio:case e.checkbox:m(t);break}}function v(t){m(t)}function m(t){let{$table:a,row:o,column:l}=t,i=l.property;a.isUpdateByRow(o,i)&&a.validate(o).then(d=>{if(!d){let b=p.loading(`正在保存"${l.title}"`,0);setTimeout(()=>{var h;b(),p.success(`"${l.title}"保存成功！`),a.reloadRow(o,null,i),(h=u.value)==null||h.socketSendUpdateRow(o)},555)}})}return(t,a)=>{const o=r("a-switch"),l=r("JVxeTable"),i=r("a-card");return S(),R(i,{title:"无痕刷新示例",bordered:!1},{default:C(()=>[y("div",B,[D,k(o,{checked:c.value,"onUpdate:checked":a[0]||(a[0]=d=>c.value=d)},null,8,["checked"])]),k(l,{ref_key:"tableRef",ref:u,rowNumber:"",rowSelection:"",keepSource:"",socketReload:"",socketKey:"demo-socket-reload",reloadEffect:c.value,height:340,loading:s.value,columns:_.value,dataSource:f.value,onValueChange:g,onEditClosed:v},null,8,["reloadEffect","loading","columns","dataSource"])]),_:1})}}});export{z as default};
