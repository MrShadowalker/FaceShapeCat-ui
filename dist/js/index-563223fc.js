var fe=Object.defineProperty,ge=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var Z=(e,s,o)=>s in e?fe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,D=(e,s)=>{for(var o in s||(s={}))he.call(s,o)&&Z(e,o,s[o]);if(U)for(var o of U(s))ye.call(s,o)&&Z(e,o,s[o]);return e},R=(e,s)=>ge(e,we(s));var G=(e,s,o)=>new Promise((c,l)=>{var d=i=>{try{r(o.next(i))}catch(p){l(p)}},t=i=>{try{r(o.throw(i))}catch(p){l(p)}},r=i=>i.done?c(i.value):Promise.resolve(i.value).then(d,t);r((o=o.apply(e,s)).next())});import{B as x,_ as I,ar as me,a6 as J,aq as De,v as ee,ay as q,az as te,y as Ce}from"./jeecg-online-vendor-f57c6456.js";import{d as z,e as f,Y as C,a6 as g,a7 as b,aj as $,ao as oe,F as ke,Q as w,ab as O,ae as _,a9 as h,E as A,ad as F,Z as P,ac as K,k as E,f as k,g as H,I as B,u as a,w as j,n as se,v as $e,aq as W,q as ve,aa as Be,ah as be,ai as Pe,r as ne,h as Se}from"./tinymce-vendor-3c2b3d6e.js";import{a_ as Oe,Y as Te,aj as _e}from"./antd-vue-vendor-05bfa84d.js";import{k as M,B as Fe,p as N,w as He,e as re}from"./index-37448b2d.js";const{t:X}=x(),ae={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:X("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:X("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},Le=D({class:{type:[String,Object,Array]},isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},open:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},ae),Ve=z({name:"BasicDrawerFooter",props:R(D({},ae),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:s}){const{prefixCls:o}=M("basic-drawer-footer"),c=f(()=>{const t=`${e.height}`;return{height:t,lineHeight:t}});function l(){s("ok")}function d(){s("close")}return{handleOk:l,prefixCls:o,handleClose:d,getStyle:c}}});function Re(e,s,o,c,l,d){const t=C("a-button");return e.showFooter||e.$slots.footer?(g(),b("div",{key:0,class:$(e.prefixCls),style:oe(e.getStyle)},[e.$slots.footer?w(e.$slots,"footer",{key:1}):(g(),b(ke,{key:0},[w(e.$slots,"insertFooter"),e.showCancelBtn?(g(),O(t,_({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:h(()=>[A(F(e.cancelText),1)]),_:1},16,["onClick"])):P("",!0),w(e.$slots,"centerFooter"),e.showOkBtn?(g(),O(t,_({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:h(()=>[A(F(e.okText),1)]),_:1},16,["type","onClick","loading"])):P("",!0),w(e.$slots,"appendFooter")],64))],6)):P("",!0)}const je=I(Ve,[["render",Re]]),Ne=z({name:"BasicDrawerHeader",components:{BasicTitle:Fe,ArrowLeftOutlined:Oe},props:{isDetail:N.bool,showDetailBack:N.bool,title:N.string},emits:["close"],setup(e,{emit:s}){const{prefixCls:o}=M("basic-drawer-header");function c(){s("close")}return{prefixCls:o,handleClose:c}}});const qe={key:1};function Ae(e,s,o,c,l,d){const t=C("BasicTitle"),r=C("ArrowLeftOutlined");return e.isDetail?(g(),b("div",{key:1,class:$([e.prefixCls,`${e.prefixCls}--detail`])},[K("span",{class:$(`${e.prefixCls}__twrap`)},[e.showDetailBack?(g(),b("span",{key:0,onClick:s[0]||(s[0]=(...i)=>e.handleClose&&e.handleClose(...i))},[E(r,{class:$(`${e.prefixCls}__back`)},null,8,["class"])])):P("",!0),e.title?(g(),b("span",qe,F(e.title),1)):P("",!0)],2),K("span",{class:$(`${e.prefixCls}__toolbar`)},[w(e.$slots,"titleToolbar")],2)],2)):(g(),O(t,{key:0,class:$([e.prefixCls,"is-drawer"])},{default:h(()=>[w(e.$slots,"title"),A(" "+F(e.$slots.title?"":e.title),1)]),_:3},8,["class"]))}const Ee=I(Ne,[["render",Ae]]),Ie=z({components:{Drawer:Te,ScrollContainer:He,DrawerFooter:je,DrawerHeader:Ee},inheritAttrs:!1,props:Le,emits:["visible-change","open-change","ok","close","register"],setup(e,{emit:s}){const o=k(!1),c=me(),l=k(null),{t:d}=x(),{prefixVar:t,prefixCls:r}=M("basic-drawer"),i={setDrawerProps:ue,emitVisible:void 0},p=H();p&&s("register",i,p.uid);const m=f(()=>J(B(e),a(l))),y=f(()=>{const n=R(D(D({placement:"right"},a(c)),a(m)),{open:a(o)});n.title=void 0;let{isDetail:u,width:V,wrapClassName:T,getContainer:de}=n;if(u){V||(n.width="100%");const Q=`${r}__detail`;T=n.class?n.class:T,n.class=T?`${T} ${Q}`:Q,de||(n.getContainer=`.${t}-layout-content`)}return n}),L=f(()=>D(D({},c),a(y))),Y=f(()=>{const{footerHeight:n,showFooter:u}=a(y);return u&&n?De(n)?`${n}px`:`${n.replace("px","")}px`:"0px"}),le=f(()=>({position:"relative",height:`calc(100% - ${a(Y)})`})),ie=f(()=>{var n;return!!((n=a(y))!=null&&n.loading)});j(()=>e.visible,(n,u)=>{n!==u&&(o.value=n)},{deep:!0}),j(()=>e.open,(n,u)=>{n!==u&&(o.value=n)},{deep:!0}),j(()=>o.value,n=>{se(()=>{var u;s("visible-change",n),s("open-change",n),p&&((u=i.emitVisible)==null||u.call(i,n,p.uid))})});function ce(n){return G(this,null,function*(){const{closeFunc:u}=a(y);if(s("close",n),u&&ee(u)){const V=yield u();o.value=!V;return}o.value=!1})}function ue(n){l.value=J(a(l)||{},n),Reflect.has(n,"visible")&&(o.value=!!n.visible),Reflect.has(n,"open")&&(o.value=!!n.open)}function pe(){s("ok")}return{onClose:ce,t:d,prefixCls:r,getMergeProps:m,getScrollContentStyle:le,getProps:y,getLoading:ie,getBindValues:L,getFooterHeight:Y,handleOk:pe}}});function ze(e,s,o,c,l,d){const t=C("DrawerHeader"),r=C("ScrollContainer"),i=C("DrawerFooter"),p=C("Drawer"),m=$e("loading");return g(),O(p,_({class:e.prefixCls,onClose:e.onClose},e.getBindValues),W({default:h(()=>[ve((g(),O(r,{style:oe(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:h(()=>[w(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[m,e.getLoading]]),E(i,_(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),W({_:2},[Be(Object.keys(e.$slots),y=>({name:y,fn:h(L=>[w(e.$slots,y,be(Pe(L||{})))])}))]),1040,["onClose","onOk","height"])]),_:2},[e.$slots.title?{name:"title",fn:h(()=>[w(e.$slots,"title")]),key:"1"}:{name:"title",fn:h(()=>[E(t,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:h(()=>[w(e.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack","onClose"])]),key:"0"}]),1040,["class","onClose"])}const Me=I(Ie,[["render",ze]]),v=ne({}),S=ne({});function Je(){if(!H())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=k(null),s=k(!1),o=k("");function c(t,r){q()&&re(()=>{e.value=null,s.value=null,v[a(o)]=null}),!(a(s)&&q()&&t===a(e))&&(o.value=r,e.value=t,s.value=!0,t.emitVisible=(i,p)=>{S[p]=i})}const l=()=>{const t=a(e);return t||te("useDrawer instance is undefined!"),t},d={setDrawerProps:t=>{var r;(r=l())==null||r.setDrawerProps(t)},getVisible:f(()=>S[~~a(o)]),getOpen:f(()=>S[~~a(o)]),openDrawer:(t=!0,r,i=!0)=>{var m;if((m=l())==null||m.setDrawerProps({open:t}),!r)return;if(i){v[a(o)]=null,v[a(o)]=B(r);return}_e(B(v[a(o)]),B(r))||(v[a(o)]=B(r))},closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({open:!1})}};return[c,d]}const Ke=e=>{const s=k(null),o=H(),c=k("");if(!H())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const t=a(s);if(!t){te("useDrawerInner instance is undefined!");return}return t},d=(t,r)=>{q()&&re(()=>{s.value=null}),c.value=r,s.value=t,o==null||o.emit("register",t,r)};return Se(()=>{const t=v[a(c)];t&&(!e||!ee(e)||se(()=>{e(t)}))}),[d,{changeLoading:(t=!0)=>{var r;(r=l())==null||r.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var r;(r=l())==null||r.setDrawerProps({confirmLoading:t})},getVisible:f(()=>S[~~a(c)]),getOpen:f(()=>S[~~a(c)]),closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({open:!1})},setDrawerProps:t=>{var r;(r=l())==null||r.setDrawerProps(t)}}]},We=Ce(Me);export{We as B,Je as a,Ke as u};
