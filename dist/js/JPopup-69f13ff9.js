import y from"./JPopupOnlReportModal-e1cfaee8.js";import{d as O,f as _,e as R,o as $,w as E,a4 as Z,a5 as z,Y as f,a6 as P,a7 as J,k as c,ae as V,a9 as j,Z as B}from"./tinymce-vendor-3c2b3d6e.js";import"./index-64ecc8b2.js";import{p as o,E as F}from"./index-37448b2d.js";import{ar as T,C as A,_ as S}from"./jeecg-online-vendor-f57c6456.js";import"./BasicModal-9d388b71.js";import"./antd-vue-vendor-05bfa84d.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";const U=O({name:"JPopup",components:{JPopupOnlReportModal:y},inheritAttrs:!1,props:{code:o.string.def(""),value:o.string.def(""),sorter:o.string.def(""),width:o.number.def(1200),placeholder:o.string.def("请选择"),multi:o.bool.def(!1),param:o.object.def({}),spliter:o.string.def(","),groupId:o.string.def(""),formElRef:o.object,setFieldsValue:o.func,getContainer:o.func,fieldConfig:{type:Array,default:()=>[]}},emits:["update:value","register","popUpChange","focus"],setup(e,{emit:t,refs:v}){const{createMessage:m}=A(),g=T(),l=_(!0),a=_(""),[d,{openModal:i}]=F();let{code:p,fieldConfig:h}=e;const I=R(()=>e.groupId?`${e.groupId}_${p}_${h[0].source}_${h[0].target}`:"");$(()=>{e.fieldConfig.length==0&&(m.error("popup参数未正确配置!"),l.value=!1)}),E(()=>e.value,n=>{a.value=n&&n.length>0?n.split(e.spliter).join(","):""},{immediate:!0});function k(){t("focus"),!e.disabled&&i(!0)}function M(){a.value=""}function b(n){let{fieldConfig:w}=e,s={};for(let C of w){let r=n.map(u=>u[C.source]);r=r.length==1?r[0]:r.join(","),C.target.split(",").forEach(u=>{s[u]=r})}e.formElRef&&e.formElRef.setFieldsValue(s),e.setFieldsValue&&e.setFieldsValue(s),t("popUpChange",s)}return{showText:a,avalid:l,uniqGroupId:I,attrs:g,regModal:d,handleOpen:k,handleEmpty:M,callBack:b}}});const q={key:0,class:"components-input-demo-presuffix"};function G(e,t,v,m,g,l){const a=f("Icon"),d=f("a-input"),i=f("JPopupOnlReportModal");return e.avalid?(P(),J("div",q,[c(d,V({onClick:e.handleOpen,value:e.showText,"onUpdate:value":t[0]||(t[0]=p=>e.showText=p),placeholder:e.placeholder,readOnly:""},e.attrs),{prefix:j(()=>[c(a,{icon:"ant-design:cluster-outlined"})]),_:1},16,["onClick","value","placeholder"]),c(i,{onRegister:e.regModal,code:e.code,multi:e.multi,sorter:e.sorter,groupId:e.uniqGroupId,param:e.param,onOk:e.callBack,getContainer:e.getContainer},null,8,["onRegister","code","multi","sorter","groupId","param","onOk","getContainer"])])):B("",!0)}const x=S(U,[["render",G],["__scopeId","data-v-70bd53a1"]]);export{x as default};
