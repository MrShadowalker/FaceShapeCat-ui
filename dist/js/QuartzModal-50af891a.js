var x=Object.defineProperty;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&y(e,r,t[r]);if(f)for(var r of f(t))I.call(t,r)&&y(e,r,t[r]);return e};var b=(e,t,r)=>new Promise((l,d)=>{var m=o=>{try{i(r.next(o))}catch(a){d(a)}},p=o=>{try{i(r.throw(o))}catch(a){d(a)}},i=o=>o.done?l(o.value):Promise.resolve(o.value).then(m,p);i((r=r.apply(e,t)).next())});import{d as T,f as _,e as C,u,a6 as v,ab as B,a9 as S,k as j,ae as M}from"./tinymce-vendor-3c2b3d6e.js";import{B as P}from"./index-64ecc8b2.js";import"./index-09260ce4.js";import{render as z}from"./renderUtils-59564de6.js";import{e as U}from"./componentMap-e2e33057.js";import{ap as n,b1 as Q}from"./jeecg-online-vendor-f57c6456.js";import{M as E}from"./antd-vue-vendor-05bfa84d.js";import{u as N,B as O}from"./useForm-df7d93c5.js";import{C as k}from"./index-37448b2d.js";const ee=[{title:"任务类名",dataIndex:"jobClassName",width:200,align:"left"},{title:"Cron表达式",dataIndex:"cronExpression",width:200},{title:"参数",dataIndex:"parameter",width:200},{title:"描述",dataIndex:"description",width:200},{title:"状态",dataIndex:"status",width:100,customRender:({text:e})=>{const t=e=="0"?"green":e=="-1"?"red":"gray";return z.renderTag(z.renderDict(e,"quartz_status"),t)}}],te=[{field:"jobClassName",label:"任务类名",component:"Input",colProps:{span:8}},{field:"status",label:"任务状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",stringToNumber:!0},colProps:{span:8}}],F=[{field:"id",label:"id",component:"Input",show:!1},{field:"jobClassName",label:"任务类名",component:"Input",required:!0},{field:"cronExpression",label:"Cron表达式",component:"JEasyCron",defaultValue:"* * * * * ? *",rules:[{required:!0,message:"请输入Cron表达式"},{validator:U}]},{field:"paramterType",label:"参数类型",component:"Select",defaultValue:"string",componentProps:{options:[{label:"字符串",value:"string"},{label:"JSON对象",value:"json"}]}},{field:"parameter",label:"参数",component:"InputTextArea",ifShow:({values:e})=>e.paramterType=="string"},{field:"parameter",label:"参数",component:"JAddInput",helpMessage:"键值对形式填写",ifShow:({values:e})=>e.paramterType=="json"},{field:"status",label:"状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",type:"radioButton",stringToNumber:!0,dropdownStyle:{maxHeight:"6vh"}}},{field:"description",label:"描述",component:"InputTextArea"}];const re="/sys/quartzJob/exportXls",se="/sys/quartzJob/importExcel",oe=e=>n.get({url:"/sys/quartzJob/list",params:e}),R=(e,t)=>{let r=t?"/sys/quartzJob/edit":"/sys/quartzJob/add";return n.post({url:r,params:e})};const ae=(e,t)=>n.delete({url:"/sys/quartzJob/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),ne=(e,t)=>n.get({url:"/sys/quartzJob/resume",params:e}).then(()=>{t()}),le=(e,t)=>n.get({url:"/sys/quartzJob/pause",params:e}).then(()=>{t()}),ue=(e,t)=>n.get({url:"/sys/quartzJob/execute",params:e}).then(()=>{t()}),ie=(e,t)=>{E.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>n.delete({url:"/sys/quartzJob/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},V=T({__name:"QuartzModal",emits:["register","success"],setup(e,{emit:t}){const r=t,l=_(!0),[d,{resetFields:m,setFieldsValue:p,validate:i}]=N({schemas:F,showActionButtonGroup:!1,labelWidth:100,labelCol:null,wrapperCol:null}),[o,{setModalProps:a,closeModal:h}]=k(s=>b(this,null,function*(){var c;if(yield m(),a({confirmLoading:!1}),l.value=!!(s!=null&&s.isUpdate),u(l)){try{s.record.paramterType=Q((c=s==null?void 0:s.record)==null?void 0:c.parameter)?"json":"string"}catch(D){}yield p(g({},s.record))}})),J=C(()=>u(l)?"编辑任务":"新增任务");function q(s){return b(this,null,function*(){try{let c=yield i();a({confirmLoading:!0}),yield R(c,l.value),h(),r("success")}finally{a({confirmLoading:!1})}})}return(s,c)=>(v(),B(u(P),M(s.$attrs,{onRegister:u(o),title:J.value,onOk:q,width:"40%"}),{default:S(()=>[j(u(O),{onRegister:u(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}}),ce=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{ce as Q,V as _,re as a,se as b,ee as c,ae as d,ue as e,ie as f,oe as g,le as p,ne as r,te as s};
