var A=(t,a,c)=>new Promise((l,p)=>{var F=n=>{try{r(c.next(n))}catch(e){p(e)}},E=n=>{try{r(c.throw(n))}catch(e){p(e)}},r=n=>n.done?l(n.value):Promise.resolve(n.value).then(F,E);r((c=c.apply(t,a)).next())});import{d as P,e as v,Y as d,v as h,a6 as i,ab as m,a9 as u,k as o,ac as k,E as s,ad as g,a7 as b,F as M,Z as _,q as C}from"./tinymce-vendor-3c2b3d6e.js";import{A as S,X as w}from"./antd-vue-vendor-05bfa84d.js";import x from"./CurrentPermissionMode-75376aed.js";import{q as T}from"./index-37448b2d.js";import{A as $}from"./index-03bbb4ef.js";import{H as N,h as V,u as W,F as q,_ as I}from"./jeecg-online-vendor-f57c6456.js";import{P as U}from"./index-31a6ff64.js";import"./vxe-table-vendor-26792376.js";import"./useContentHeight-bfd1eb89.js";import"./useWindowSizeFn-e63bb4b0.js";import"./useContentViewHeight-6be29838.js";import"./usePageContext-b7687fba.js";import"./injectionKey-69710956.js";const j=P({components:{Alert:S,PageWrapper:U,CurrentPermissionMode:x,Divider:w,Authority:$},setup(){const{hasPermission:t}=T(),a=N(),c=V(),l=W(),p=v(()=>c.getProjectConfig.permissionMode===q.BACK);function F(E){return A(this,null,function*(){const r="fakeToken"+E;l.setToken(r),l.getUserInfoAction(),a.changePermissionCode()})}return{hasPermission:t,permissionStore:a,switchToken:F,isBackPremissionMode:p}}});function H(t,a,c,l,p,F){const E=d("CurrentPermissionMode"),r=d("Divider"),n=d("Alert"),e=d("a-button"),f=d("Authority"),y=d("PageWrapper"),B=h("auth");return i(),m(y,{contentBackground:"",title:"按钮权限控制",contentClass:"p-4"},{default:u(()=>[o(E),k("p",null,[s(" 当前拥有的code列表: "),k("a",null,g(t.permissionStore.getPermCodeList),1)]),o(r),o(n,{class:"mt-4",type:"info",message:"点击后请查看按钮变化(必须处于后台权限模式才可测试此页面所展示的功能)","show-icon":""}),o(r),o(e,{type:"primary",class:"mr-2",onClick:a[0]||(a[0]=D=>t.switchToken(2)),disabled:!t.isBackPremissionMode},{default:u(()=>[s(" 点击切换按钮权限(用户id为2) ")]),_:1},8,["disabled"]),o(e,{type:"primary",onClick:a[1]||(a[1]=D=>t.switchToken(1)),disabled:!t.isBackPremissionMode},{default:u(()=>[s(" 点击切换按钮权限(用户id为1,默认) ")]),_:1},8,["disabled"]),t.isBackPremissionMode?(i(),b(M,{key:0},[o(r,null,{default:u(()=>[s("组件方式判断权限")]),_:1}),o(f,{value:"1000"},{default:u(()=>[o(e,{type:"primary",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000']权限可见 ")]),_:1})]),_:1}),o(f,{value:"2000"},{default:u(()=>[o(e,{color:"success",class:"mx-4"},{default:u(()=>[s(" 拥有code ['2000']权限可见 ")]),_:1})]),_:1}),o(f,{value:["1000","2000"]},{default:u(()=>[o(e,{color:"error",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})]),_:1}),o(r,null,{default:u(()=>[s("函数方式方式判断权限")]),_:1}),t.hasPermission("1000")?(i(),m(e,{key:0,type:"primary",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000']权限可见 ")]),_:1})):_("",!0),t.hasPermission("2000")?(i(),m(e,{key:1,color:"success",class:"mx-4"},{default:u(()=>[s(" 拥有code ['2000']权限可见 ")]),_:1})):_("",!0),t.hasPermission(["1000","2000"])?(i(),m(e,{key:2,color:"error",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})):_("",!0),o(r,null,{default:u(()=>[s("指令方式方式判断权限(该方式不能动态修改权限.)")]),_:1}),C((i(),m(e,{type:"primary",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000']权限可见 ")]),_:1})),[[B,"1000"]]),C((i(),m(e,{color:"success",class:"mx-4"},{default:u(()=>[s(" 拥有code ['2000']权限可见 ")]),_:1})),[[B,"2000"]]),C((i(),m(e,{color:"error",class:"mx-4"},{default:u(()=>[s(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})),[[B,["1000","2000"]]])],64)):_("",!0)]),_:1})}const su=I(j,[["render",H],["__scopeId","data-v-eeb8ba51"]]);export{su as default};
