var C=Object.defineProperty;var m=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var f=(e,t,a)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))A.call(t,a)&&f(e,a,t[a]);if(m)for(var a of m(t))S.call(t,a)&&f(e,a,t[a]);return e};var g=(e,t,a)=>new Promise((o,r)=>{var c=n=>{try{i(a.next(n))}catch(s){r(s)}},u=n=>{try{i(a.throw(n))}catch(s){r(s)}},i=n=>n.done?o(n.value):Promise.resolve(n.value).then(c,u);i((a=a.apply(e,t)).next())});import{d as $,f as p,e as k,u as h,w as v,o as w,Y as _,a6 as F,ab as L,ae as O,aq as T,aa as b,a9 as y,Q as B,ah as P,ai as j,k as D}from"./tinymce-vendor-3c2b3d6e.js";import{V,ag as q,ax as x}from"./antd-vue-vendor-05bfa84d.js";import{v as z,w as I,_ as M}from"./jeecg-online-vendor-f57c6456.js";import{p as N}from"./index-37448b2d.js";import"./vxe-table-vendor-26792376.js";const Q=$({name:"ApiTreeSelect",components:{ATreeSelect:V,LoadingOutlined:q},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:N.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:a}){const o=p([]),r=p(!1),c=p(!1),u=k(()=>d(d({},e.api?{treeData:h(o)}:{}),t));function i(...s){a("change",...s)}v(()=>e.params,()=>{!h(r)&&n()},{deep:!0}),v(()=>e.immediate,s=>{s&&!r.value&&n()}),w(()=>{e.immediate&&n()});function n(){return g(this,null,function*(){const{api:s}=e;if(!s||!z(s))return;c.value=!0,o.value=[];let l;try{l=yield s(e.params)}catch(Y){}c.value=!1,l&&(I(l)||(l=x(l,e.resultField)),o.value=l||[],r.value=!0,a("options-change",o.value))})}return{getAttrs:u,loading:c,handleChange:i}}});function R(e,t,a,o,r,c){const u=_("LoadingOutlined"),i=_("a-tree-select");return F(),L(i,O(e.getAttrs,{onChange:e.handleChange}),T({_:2},[b(Object.keys(e.$slots),n=>({name:n,fn:y(s=>[B(e.$slots,n,P(j(s||{})))])})),e.loading?{name:"suffixIcon",fn:y(()=>[D(u,{spin:""})]),key:"0"}:void 0]),1040,["onChange"])}const W=M(Q,[["render",R]]);export{W as default};
