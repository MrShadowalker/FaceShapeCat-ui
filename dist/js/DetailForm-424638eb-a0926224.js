import{f as te,e as ie,w as le,d as ne,Y as k,a6 as m,a7 as c,aj as N,k as x,a9 as H,F as V,aa as $,ab as U,ac as u,ad as E}from"./tinymce-vendor-3c2b3d6e.js";import{T as ae,X as re,W as oe,g as se,p as I}from"./index-37448b2d.js";import{C as de,aL as D,aB as pe,aw as B,ap as ue,av as me,bs as ce}from"./jeecg-online-vendor-f57c6456.js";import{g as fe,b as ge}from"./useExtendComponent-325fe3f1-007b9393.js";import{c as ye}from"./index-76418551.js";import{bz as he,bA as ve,bB as be}from"./antd-vue-vendor-05bfa84d.js";import{a as we}from"./index-2d7d6454.js";import"./componentMap-e2e33057.js";import"./index-64ecc8b2.js";import"./index-09260ce4.js";import"./constant-754f1a9d-eadfd1e1.js";import"./index-8e09cdad.js";import"./user.api-367a7bce.js";import"./customExpression-b2f1ff9b.js";import"./index-0f0d0317.js";import"./useListPage-66651993.js";import"./LinkTableListPiece-8499a318-01ebb291.js";import"./OnlineSelectCascade-4265c95d-4cbe6ffe.js";import"./JModalTip-33c7dc44-1741a3e9.js";import"./vxe-table-vendor-26792376.js";import"./data-9be677e2.js";import"./JUpload-70acb676.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./BasicTable-400bb95b.js";import"./injectionKey-69710956.js";import"./index-2ad3f236.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";var Ce=Object.defineProperty,W=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,A=(a,r,d)=>r in a?Ce(a,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[r]=d,xe=(a,r)=>{for(var d in r||(r={}))ke.call(r,d)&&A(a,d,r[d]);if(W)for(var d of W(r))Fe.call(r,d)&&A(a,d,r[d]);return a},g=(a,r,d)=>new Promise((b,w)=>{var F=p=>{try{v(d.next(p))}catch(y){w(y)}},C=p=>{try{v(d.throw(p))}catch(y){w(y)}},v=p=>p.done?b(p.value):Promise.resolve(p.value).then(F,C);v((d=d.apply(a,r)).next())});function De(a){const r={},d=[],b=te({}),{createMessage:w}=de(),F=ie(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");le(()=>a.data,e=>g(this,null,function*(){if(e){let n=a.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield C(i)}catch(o){}}b.value=l}}),{deep:!0,immediate:!0});function C(e){return g(this,null,function*(){let n=a.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield v(e,n);else if(t=="sel_search")i=yield y(e,n);else if(t=="cat_tree")i=yield L(e,n);else if(t=="link_table")i=yield Q(e,n);else if(t=="sel_depart")i=yield T(e,n);else if(t=="sel_user")i=yield j(e,n);else if(t=="pca")i=fe(l);else if(t=="link_down")i=yield _(e,n);else if(t=="sel_tree")i=yield h(e,n);else if(t=="switch")i=yield O(e,n);else if(t=="image"||t=="file")i=Y(e,n);else if(d.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(i=D(o,l))}return i}return""})}function v(e,n){return g(this,null,function*(){let l=p(e),i=n[e.field];if(!l)return i;let t=pe(l);if(t&&t.length>0)return D(t,i);{let o=[];if(r[l]?o=r[l]:o=(yield B(l))||[],o&&o.length>0)return r[l]=o,D(o,i)}return""})}function p(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function y(e,n){return g(this,null,function*(){let l=p(e),i=n[e.field];if(!i)return"";let t=[];return r[l+i]?t=r[l+i]:t=(yield ue.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(r[l+i]=t,t.join(",")):""})}function L(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield ae({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function T(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=s(e).store||"id",t=(yield re({ids:l,primaryKey:i}))||[];if(t&&t.length>0){let o=[];for(let f of t)o.push(f.title);return o.join(",")}return""})}function j(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=s(e),t={[i.store||"username"]:l},o=((yield oe(t))||{}).records||[];if(o&&o.length>0){let f=[],S=i.text||"realname";for(let M of o)f.push(M[S]);return f.join(",")}return""})}function s(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=xe({},i)}catch(i){}return n}function _(e,n){return g(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(r[i])t=r[i];else if(l){let o=JSON.parse(l);if(o){let{table:f,txt:S,key:M,linkField:J}=o,Z=`${f},${S},${M}`;if(t=[...(yield B(Z))||[]],t&&t.length>0&&(r[i]=t,J)){let ee=J.split(",");for(let P of ee)r[P]=t,d.push(P)}}}if(t&&t.length>0){let o=n[i];return D(t,o)}return""})}function h(e,n){return g(this,null,function*(){let{dict:l,field:i}=e,t=[];if(r[i]?t=r[i]:l&&(t=yield B(l)),t&&t.length>0){let o=n[i];return D(t,o)}return""})}function O(e,n){return g(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"是"},{value:t[1],text:"否"},{value:t[0]+"",text:"是"},{value:t[1]+"",text:"否"}],f=n[i];return me(o,f)})}function z(e){return e.span?e.span:a.span}function Y(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let f=se(o)||"";f&&t.push(f)}return t}function q(e){e&&window.open(e)}function K(e){let n=b.value[e];if(!n||n.length==0){w.warning("无图片!");return}ye({imageList:n})}function R(e){return e?e.substring(e.lastIndexOf("/")+1):""}const G=["file","image","markdown","umeditor"];function X(e){return G.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function Q(e,n){return g(this,null,function*(){let l=n[e.field];return s(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:F,detailFormData:b,getItemSpan:z,handleDownloadFile:q,handleViewImage:K,getFilename:R,getLabelWidthClass:X}}const Oe=ne({name:"DetailForm",components:{DownloadOutlined:he,EyeOutlined:ve,PaperClipOutlined:be,LinkTableCard:ge,MarkdownViewer:we},props:{span:I.number.def(24),schemas:I.array.def([]),data:I.object.def({}),containerClass:I.string.def("")},setup(a){const{formContainerClass:r,detailFormData:d,getItemSpan:b,handleDownloadFile:w,handleViewImage:F,getFilename:C,getLabelWidthClass:v}=De(a);return{formContainerClass:r,detailFormData:d,getItemSpan:b,handleDownloadFile:w,handleViewImage:F,getFilename:C,getLabelWidthClass:v,filterLable:p=>{if(p.fieldExtendJson){const y=JSON.parse(p.fieldExtendJson);if(y.labelLength&&p.label.length>4)return p.label.substr(0,y.labelLength)}return p.label}}}}),Ie={class:"detail-item"},Le=["title"],Te={key:0,class:"item-content"},je=["innerHTML"],_e={key:2,class:"item-content",style:{display:"block","padding-top":"10px"}},Se={key:0},Me={key:3,class:"item-content"},Ne={class:"ant-upload-list ant-upload-list-picture-card"},Ve={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},$e={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Ee={class:"ant-upload-list-item-info"},Be=["src"],Je={class:"ant-upload-list-item-actions"},Pe={key:4,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Ue={class:""},We={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Ae={class:"ant-upload-list-item-info"},ze={class:"ant-upload-span"},Ye={class:"ant-upload-text-icon"},qe=["href"],Ke={class:"ant-upload-list-item-card-actions"},Re={key:5,class:"item-content"};function Ge(a,r,d,b,w,F){const C=k("MarkdownViewer"),v=k("link-table-card"),p=k("download-outlined"),y=k("eye-outlined"),L=k("paper-clip-outlined"),T=k("a-col"),j=k("a-row");return m(),c("div",{class:N(a.formContainerClass)},[x(j,null,{default:H(()=>[(m(!0),c(V,null,$(a.schemas,(s,_)=>(m(),U(T,{key:_,span:a.getItemSpan(s)},{default:H(()=>[u("div",Ie,[u("div",{class:N(["item-title",a.getLabelWidthClass(s)]),title:s.label},E(a.filterLable(s))+"： ",11,Le),s.view==="markdown"?(m(),c("div",Te,[x(C,{value:a.detailFormData[s.field],"onUpdate:value":h=>a.detailFormData[s.field]=h,placeholder:""},null,8,["value","onUpdate:value"])])):s.isHtml?(m(),c("div",{key:1,class:N(["item-content",s.view]),innerHTML:a.detailFormData[s.field]},null,10,je)):s.isCard?(m(),c("div",_e,[a.detailFormData[s.field]?(m(),U(v,{key:1,disabled:"",detail:"",value:a.detailFormData[s.field],valueField:s.dictCode,textField:s.dictText,tableName:s.dictTable,multi:s.multi},null,8,["value","valueField","textField","tableName","multi"])):(m(),c("span",Se))])):s.isImage?(m(),c("div",Me,[u("div",Ne,[(m(!0),c(V,null,$(a.detailFormData[s.field],h=>(m(),c("div",Ve,[u("span",null,[u("div",$e,[u("div",Ee,[u("img",{src:h,alt:"图片不存在",class:"ant-upload-list-item-image"},null,8,Be)]),u("span",Je,[x(p,{onClick:O=>a.handleDownloadFile(h)},null,8,["onClick"]),x(y,{onClick:O=>a.handleViewImage(s.field)},null,8,["onClick"])])])])]))),256))])])):s.isFile?(m(),c("div",Pe,[u("div",He,[(m(!0),c(V,null,$(a.detailFormData[s.field],h=>(m(),c("div",Ue,[u("span",null,[u("div",We,[u("div",Ae,[u("span",ze,[u("div",Ye,[x(L)]),u("a",{href:h,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},E(a.getFilename(h)),9,qe),u("span",Ke,[x(p,{onClick:O=>a.handleDownloadFile(h)},null,8,["onClick"])])])])])])]))),256))])])):(m(),c("div",Re,E(a.detailFormData[s.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}const di=ce(Oe,[["render",Ge],["__scopeId","data-v-fce737d0"]]);export{di as default};
