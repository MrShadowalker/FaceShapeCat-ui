var T=(k,w,v)=>new Promise((_,c)=>{var D=n=>{try{a(v.next(n))}catch(b){c(b)}},C=n=>{try{a(v.throw(n))}catch(b){c(b)}},a=n=>n.done?_(n.value):Promise.resolve(n.value).then(D,C);a((v=v.apply(k,w)).next())});import{d as O,f as y,r as P,e as V,Y as p,a6 as L,ab as N,a9 as s,k as e,ae as m,u as f,n as q}from"./tinymce-vendor-3c2b3d6e.js";import{C as z,aM as G,_ as J}from"./jeecg-online-vendor-f57c6456.js";import{h as K}from"./depart.api-76b2f38a.js";import{a5 as Q}from"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";const S=O({__name:"EvDisburseForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(k,{expose:w,emit:v}){const _=k,c=y(),D=Q.useForm,C=v,a=P({id:"",delFlag:"",remark:"",goodsId:"",disburseTime:"",type:"",num:"",reason:"",status:""}),{createMessage:n}=z(),b=y({xs:{span:24},sm:{span:5}}),U=y({xs:{span:24},sm:{span:16}}),x=y(!1),B={},{resetFields:I,validate:M,validateInfos:d}=D(a,B,{immediate:!0}),r=V(()=>_.formBpm===!0?_.formData.disabled!==!1:_.formDisabled);function Y(){F({})}function F(g){q(()=>{I(),Object.assign(a,g)})}function j(){return T(this,null,function*(){yield M(),x.value=!0;const g=y(!1);let l=a;l.id&&(g.value=!0);for(let t in l)l[t]instanceof Array&&G(c.value.getProps,t)==="string"&&(l[t]=l[t].join(","));yield K(l,g.value).then(t=>{t.success?(n.success(t.message),C("ok")):n.warning(t.message)}).finally(()=>{x.value=!1})})}return w({add:Y,edit:F,submitForm:j}),(g,l)=>{const t=p("a-input"),u=p("a-form-item"),i=p("a-col"),E=p("a-date-picker"),R=p("a-row"),A=p("a-form"),H=p("a-spin");return L(),N(H,{spinning:x.value},{default:s(()=>[e(A,{ref_key:"formRef",ref:c,class:"antd-modal-form",labelCol:b.value,wrapperCol:U.value},{default:s(()=>[e(R,null,{default:s(()=>[e(i,{span:24},{default:s(()=>[e(u,m({label:"商品"},f(d).goodsId),{default:s(()=>[e(t,{value:a.goodsId,"onUpdate:value":l[0]||(l[0]=o=>a.goodsId=o),placeholder:"请输入商品",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"损耗时间"},f(d).disburseTime),{default:s(()=>[e(E,{placeholder:"请选择损耗时间",value:a.disburseTime,"onUpdate:value":l[1]||(l[1]=o=>a.disburseTime=o),showTime:"","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"},disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"损耗类型"},f(d).type),{default:s(()=>[e(t,{value:a.type,"onUpdate:value":l[2]||(l[2]=o=>a.type=o),placeholder:"请输入损耗类型",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"损耗数量"},f(d).num),{default:s(()=>[e(t,{value:a.num,"onUpdate:value":l[3]||(l[3]=o=>a.num=o),placeholder:"请输入损耗数量",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"损耗原因"},f(d).reason),{default:s(()=>[e(t,{value:a.reason,"onUpdate:value":l[4]||(l[4]=o=>a.reason=o),placeholder:"请输入损耗原因",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"损耗状态"},f(d).status),{default:s(()=>[e(t,{value:a.status,"onUpdate:value":l[5]||(l[5]=o=>a.status=o),placeholder:"请输入损耗状态",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(i,{span:24},{default:s(()=>[e(u,m({label:"备注"},f(d).remark),{default:s(()=>[e(t,{value:a.remark,"onUpdate:value":l[6]||(l[6]=o=>a.remark=o),placeholder:"请输入备注",disabled:r.value},null,8,["value","disabled"])]),_:1},16)]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const ae=J(S,[["__scopeId","data-v-f9919a9a"]]);export{ae as default};
