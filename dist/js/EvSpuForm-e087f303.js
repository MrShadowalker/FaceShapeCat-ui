var x=(n,v,c)=>new Promise((y,U)=>{var w=p=>{try{a(c.next(p))}catch(S){U(S)}},B=p=>{try{a(c.throw(p))}catch(S){U(S)}},a=p=>p.done?y(p.value):Promise.resolve(p.value).then(w,B);a((c=c.apply(n,v)).next())});import{d as L,f,r as Y,e as $,Y as m,a6 as K,ab as Q,a9 as t,k as e,ae as _,u as g,n as W}from"./tinymce-vendor-3c2b3d6e.js";import{C as q,ap as C,_ as Z}from"./jeecg-online-vendor-f57c6456.js";import{J as h}from"./JImageUpload-1b0b2e46.js";import{a5 as A}from"./antd-vue-vendor-05bfa84d.js";import{duplicateValidate as I}from"./validator-a0d2ebc7.js";const{createConfirm:ee}=q();const ce="/evSpu/evSpu/exportXls",me="/evSpu/evSpu/importExcel",fe=n=>C.get({url:"/evGoods/list",params:n}),ae=n=>C.get({url:"/evGoods/queryById",params:n}),be=(n,v)=>C.delete({url:"/evGoods/delete",params:n},{joinParamsToUrl:!0}).then(()=>{v()}),_e=(n,v)=>{ee({iconType:"warning",title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>C.delete({url:"/evSpu/evSpu/deleteBatch",data:n},{joinParamsToUrl:!0}).then(()=>{v()})})},le=(n,v)=>{let c=v?"/evGoods/editVo":"/evGoods/add";return C.post({url:c,params:n},{isTransformResponse:!1})},te=L({__name:"EvSpuForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(n,{expose:v,emit:c}){const y=n,U=f(),w=A.useForm,B=c,a=Y({id:"",remark:"",name:"",price:"",type:"",unit:"",spec:"",code:"",imgPath:"",brandId:"",supplierIds:"",description:"",status:"",categoryIds:"",specificationNames:[]}),{createMessage:p}=q(),S=f({xs:{span:24},sm:{span:6}}),G=f({xs:{span:24},sm:{span:3}}),D=f({xs:{span:24},sm:{span:16}}),E=f({xs:{span:24},sm:{span:21}}),k=f(!1),O={name:[{required:!0,message:"请输入商品名称!"},{validator:R}],code:[{required:!0,message:"请输入商品编码!"},{validator:V}],price:[{required:!0,message:"请输入零售价!"}],type:[{required:!0,message:"请输入种类!"}],unit:[{required:!0,message:"请输入计量单位!"}],spec:[{required:!0,message:"请输入规格型号!"}]},{resetFields:T,validate:N,validateInfos:b}=w(a,O,{immediate:!0}),d=$(()=>y.formBpm===!0?y.formData.disabled!==!1:y.formDisabled);function P(){F({status:"1"})}function F(i){W(()=>x(this,null,function*(){if(T(),i.id){const l=yield ae({id:i.id,pageSize:9999});i.specificationNames=l.records}Object.assign(a,i)}))}function oe(){d.value||a.specificationNames.push({name:""})}function de(i){a.specificationNames.splice(i,1)}function j(){return x(this,null,function*(){yield N(),k.value=!0;const i=f(!1);let l=a;l.id&&(i.value=!0),yield le(l,i.value).then(o=>{o.success?(p.success(o.message),B("ok")):p.warning(o.message)}).finally(()=>{k.value=!1})})}function R(i,l){return x(this,null,function*(){return I("ev_goods","name",l,a.id||"")})}function V(i,l){return x(this,null,function*(){return I("ev_goods","code",l,a.id||"")})}return v({add:P,edit:F,submitForm:j}),(i,l)=>{const o=m("a-input"),u=m("a-form-item"),r=m("a-col"),M=m("a-divider"),X=m("a-textarea"),z=m("a-row"),J=m("a-form"),H=m("a-spin");return K(),Q(H,{spinning:k.value},{default:t(()=>[e(J,{ref_key:"formRef",ref:U,class:"antd-modal-form",labelCol:S.value,wrapperCol:D.value},{default:t(()=>[e(z,null,{default:t(()=>[e(r,{span:12},{default:t(()=>[e(u,{label:"经销商"},{default:t(()=>[e(o,{value:a.supplier,"onUpdate:value":l[0]||(l[0]=s=>a.supplier=s),placeholder:"请输入经销商",disabled:d.value},null,8,["value","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(u,{label:"联系人"},{default:t(()=>[e(o,{value:a.contact,"onUpdate:value":l[1]||(l[1]=s=>a.contact=s),placeholder:"请输入联系人",disabled:d.value},null,8,["value","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(u,{label:"联系电话"},{default:t(()=>[e(o,{value:a.phone,"onUpdate:value":l[2]||(l[2]=s=>a.phone=s),placeholder:"请输入联系电话",disabled:d.value},null,8,["value","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(u,{label:"联系地址"},{default:t(()=>[e(o,{value:a.address,"onUpdate:value":l[3]||(l[3]=s=>a.address=s),placeholder:"请输入联系地址",disabled:d.value},null,8,["value","disabled"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(u,_({label:"零售价"},g(b).price),{default:t(()=>[e(o,{value:a.price,"onUpdate:value":l[4]||(l[4]=s=>a.price=s),placeholder:"请输入零售价",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:12},{default:t(()=>[e(u,{label:"进价"},{default:t(()=>[e(o,{value:a.costPrice,"onUpdate:value":l[5]||(l[5]=s=>a.costPrice=s),placeholder:"请输入进价",disabled:d.value},null,8,["value","disabled"])]),_:1})]),_:1}),e(M),e(r,{span:12},{default:t(()=>[e(u,_({label:"商品名称"},g(b).name),{default:t(()=>[e(o,{value:a.name,"onUpdate:value":l[6]||(l[6]=s=>a.name=s),placeholder:"请输入商品名称",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:12},{default:t(()=>[e(u,_({label:"商品编码"},g(b).code),{default:t(()=>[e(o,{value:a.code,"onUpdate:value":l[7]||(l[7]=s=>a.code=s),placeholder:"请输入商品编码",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:12},{default:t(()=>[e(u,_({label:"商品种类"},g(b).type),{default:t(()=>[e(o,{value:a.type,"onUpdate:value":l[8]||(l[8]=s=>a.type=s),placeholder:"请输入商品种类",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:12},{default:t(()=>[e(u,_({label:"计量单位"},g(b).unit),{default:t(()=>[e(o,{value:a.unit,"onUpdate:value":l[9]||(l[9]=s=>a.unit=s),placeholder:"请输入计量单位",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:12},{default:t(()=>[e(u,_({label:"规格型号"},g(b).spec),{default:t(()=>[e(o,{value:a.spec,"onUpdate:value":l[10]||(l[10]=s=>a.spec=s),placeholder:"请输入规格型号",disabled:d.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),e(r,{span:24},{default:t(()=>[e(u,{label:"商品图片",labelCol:G.value,wrapperCol:E.value},{default:t(()=>[e(h,{value:a.img,"onUpdate:value":l[11]||(l[11]=s=>a.img=s),disabled:d.value},null,8,["value","disabled"])]),_:1},8,["labelCol","wrapperCol"])]),_:1}),e(r,{span:24},{default:t(()=>[e(u,{label:"商品描述",labelCol:G.value,wrapperCol:E.value},{default:t(()=>[e(X,{value:a.description,"onUpdate:value":l[12]||(l[12]=s=>a.description=s),disabled:d.value,rows:4},null,8,["value","disabled"])]),_:1},8,["labelCol","wrapperCol"])]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const se=Z(te,[["__scopeId","data-v-806bc026"]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{se as E,me as a,_e as b,ge as c,be as d,ce as g,fe as l};
