var x=(b,i,u)=>new Promise((o,d)=>{var g=r=>{try{f(u.next(r))}catch(m){d(m)}},p=r=>{try{f(u.throw(r))}catch(m){d(m)}},f=r=>r.done?o(r.value):Promise.resolve(r.value).then(g,p);f((u=u.apply(b,i)).next())});import{d as _,f as k,r as z,e as B,u as e,a6 as P,a7 as M,k as a,a9 as n,E as y,ad as w,F as T,Z as U,I as L}from"./tinymce-vendor-3c2b3d6e.js";import N from"./LoginFormTitle-a753d4da.js";import{j as v,F as V,B as C,a5 as h}from"./antd-vue-vendor-05bfa84d.js";import{S as D}from"./index-ee632f67.js";import{C as G}from"./index-b5f97370.js";import{bc as j,bd as A,bi as Z,B as $,C as q,be as H,bk as J,b6 as K,bg as O}from"./jeecg-online-vendor-f57c6456.js";import"./index-37448b2d.js";import"./vxe-table-vendor-26792376.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";const ne=_({__name:"RegisterForm",setup(b){const i=h.Item,u=v.Password,{t:o}=$(),{handleBackLogin:d,getLoginState:g}=j(),{notification:p,createErrorModal:f}=q(),r=k(),m=k(!1),t=z({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:E}=A(t),{validForm:I}=H(r),R=B(()=>e(g)===Z.REGISTER);function S(){return x(this,null,function*(){const c=yield I();if(c)try{m.value=!0;const s=yield J(L({username:c.account,password:c.password,phone:c.mobile,smscode:c.sms}));s&&s.data.success?(p.success({description:s.data.message||o("sys.api.registerMsg"),duration:3}),d()):p.warning({message:o("sys.api.errorTip"),description:s.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(s){p.error({message:o("sys.api.errorTip"),description:s.message||o("sys.api.networkExceptionMsg"),duration:3})}finally{m.value=!1}})}function F(){return K({mobile:t.mobile,smsmode:O.REGISTER})}return(c,s)=>R.value?(P(),M(T,{key:0},[a(N,{class:"enter-x"}),a(e(h),{class:"p-4 enter-x",model:t,rules:e(E),ref_key:"formRef",ref:r},{default:n(()=>[a(e(i),{name:"account",class:"enter-x"},{default:n(()=>[a(e(v),{class:"fix-auto-fill",size:"large",value:t.account,"onUpdate:value":s[0]||(s[0]=l=>t.account=l),placeholder:e(o)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"mobile",class:"enter-x"},{default:n(()=>[a(e(v),{size:"large",value:t.mobile,"onUpdate:value":s[1]||(s[1]=l=>t.mobile=l),placeholder:e(o)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"sms",class:"enter-x"},{default:n(()=>[a(e(G),{size:"large",class:"fix-auto-fill",value:t.sms,"onUpdate:value":s[2]||(s[2]=l=>t.sms=l),placeholder:e(o)("sys.login.smsCode"),sendCodeApi:F},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password",class:"enter-x"},{default:n(()=>[a(e(D),{size:"large",value:t.password,"onUpdate:value":s[3]||(s[3]=l=>t.password=l),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"confirmPassword",class:"enter-x"},{default:n(()=>[a(e(u),{size:"large",visibilityToggle:"",value:t.confirmPassword,"onUpdate:value":s[4]||(s[4]=l=>t.confirmPassword=l),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),a(e(i),{class:"enter-x",name:"policy"},{default:n(()=>[a(e(V),{checked:t.policy,"onUpdate:checked":s[5]||(s[5]=l=>t.policy=l),size:"small"},{default:n(()=>[y(w(e(o)("sys.login.policy")),1)]),_:1},8,["checked"])]),_:1}),a(e(C),{type:"primary",class:"enter-x",size:"large",block:"",onClick:S,loading:m.value},{default:n(()=>[y(w(e(o)("sys.login.registerButton")),1)]),_:1},8,["loading"]),a(e(C),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(d)},{default:n(()=>[y(w(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):U("",!0)}});export{ne as default};
