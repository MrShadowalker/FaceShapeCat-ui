import{d as C,f as $,r as A,e as c,u as i,w as D,k as o,o as B,n as k,a4 as rt,a5 as st,Y as S,a6 as M,ab as P,a9 as f,E as W,ac as g,ad as E}from"./tinymce-vendor-3c2b3d6e.js";import{_ as I,y as L}from"./jeecg-online-vendor-f57c6456.js";import{z as q,f as z}from"./index-37448b2d.js";import{X as U}from"./antd-vue-vendor-05bfa84d.js";import{P as X}from"./index-31a6ff64.js";import"./vxe-table-vendor-26792376.js";import"./useContentHeight-bfd1eb89.js";import"./useWindowSizeFn-e63bb4b0.js";import"./useContentViewHeight-6be29838.js";import"./usePageContext-b7687fba.js";import"./injectionKey-69710956.js";const Y={height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String],bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},w="virtual-scroll";function a(t,s="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${s}`}const j=C({name:"VirtualScroll",props:Y,setup(t,{slots:s}){const u=$(null),r=A({first:0,last:0,scrollTop:0}),p=c(()=>parseInt(t.bench,10)),m=c(()=>parseInt(t.itemHeight,10)),d=c(()=>Math.max(0,r.first-i(p))),_=c(()=>Math.min((t.items||[]).length,r.last+i(p))),v=c(()=>({height:a((t.items||[]).length*i(m))})),h=c(()=>{const e={},n=a(t.height),l=a(t.minHeight),x=a(t.minWidth),H=a(t.maxHeight),N=a(t.maxWidth),F=a(t.width);return n&&(e.height=n),l&&(e.minHeight=l),x&&(e.minWidth=x),H&&(e.maxHeight=H),N&&(e.maxWidth=N),F&&(e.width=F),e});D([()=>t.itemHeight,()=>t.height],()=>{b()});function y(e){const n=i(u);if(!n)return 0;const l=parseInt(t.height||0,10)||n.clientHeight;return e+Math.ceil(l/i(m))}function V(){return Math.floor(r.scrollTop/i(m))}function b(){const e=i(u);e&&(r.scrollTop=e.scrollTop,r.first=V(),r.last=y(r.first))}function R(){const{items:e=[]}=t;return e.slice(i(d),i(_)).map(T)}function T(e,n){n+=i(d);const l=a(n*i(m));return o("div",{class:`${w}__item`,style:{top:l},key:n},[q(s,"default",{index:n,item:e})])}return B(()=>{r.last=y(0),k(()=>{const e=i(u);e&&z({el:e,name:"scroll",listener:b,wait:0})})}),()=>o("div",{class:w,style:i(h),ref:u},[o("div",{class:`${w}__container`,style:i(v)},[R()])])}});const G=I(j,[["__scopeId","data-v-33845336"]]),J=L(G),K=(()=>{const t=[];for(let s=1;s<2e4;s++)t.push({title:"列表项"+s});return t})(),O=C({components:{VScroll:J,Divider:U,PageWrapper:X},setup(){return{data:K}}});const Q={class:"virtual-scroll-demo-wrap"},Z={class:"virtual-scroll-demo__item"},tt={class:"virtual-scroll-demo-wrap"},et={class:"virtual-scroll-demo__item"};function it(t,s,u,r,p,m){const d=S("Divider"),_=S("VScroll"),v=S("PageWrapper");return M(),P(v,{class:"virtual-scroll-demo"},{default:f(()=>[o(d,null,{default:f(()=>[W("基础滚动示例")]),_:1}),g("div",Q,[o(_,{itemHeight:41,items:t.data,height:300,width:300},{default:f(({item:h})=>[g("div",Z,E(h.title),1)]),_:1},8,["items"])]),o(d,null,{default:f(()=>[W("即使不可见，也预先加载50条数据，防止空白")]),_:1}),g("div",tt,[o(_,{itemHeight:41,items:t.data,height:300,width:300,bench:50},{default:f(({item:h})=>[g("div",et,E(h.title),1)]),_:1},8,["items"])])]),_:1})}const gt=I(O,[["render",it],["__scopeId","data-v-caa40fb6"]]);export{gt as default};
