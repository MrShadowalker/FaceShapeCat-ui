import{d as D,f as u,Y as f,a6 as v,ab as g,a9 as m,k as C,ac as b,E as B,Z as R}from"./tinymce-vendor-3c2b3d6e.js";import{ap as y,bs as w}from"./jeecg-online-vendor-f57c6456.js";import{B as _}from"./index-64ecc8b2.js";import{C as x}from"./index-37448b2d.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";var p=(e,d,t)=>new Promise((n,o)=>{var i=a=>{try{l(t.next(a))}catch(r){o(r)}},c=a=>{try{l(t.throw(a))}catch(r){o(r)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,c);l((t=t.apply(e,d)).next())});const T=D({name:"FileSelectModal",components:{BasicModal:_},emits:["select","register"],setup(e,{emit:d}){const t=u(!0),n=u([]),o=u(""),i=u(!1),[c,{closeModal:l}]=x(()=>p(this,null,function*(){o.value="",n.value.length===0&&h()}));function a(){d("select",o.value),l()}function r(){l()}function h(){return p(this,null,function*(){t.value=!0,n.value=yield y.get({url:"/online/cgform/head/rootFile"}).finally(()=>{t.value=!1,i.value=!0})})}function S(s){return p(this,null,function*(){if(s.dataRef.children)return;let M={parentPath:s.dataRef.key};s.dataRef.children=yield y.get({url:"/online/cgform/head/fileTree",params:M}),n.value=[...n.value]})}function k(s){o.value=s[0]}return{loading:t,treeData:n,onLoadData:S,onSelect:k,onSubmit:a,onCancel:r,registerModal:c,hanldeRefresh:()=>{o.value="",i.value=!1,h()},directoryTreeShow:i}}}),V={class:"btnArea"};function N(e,d,t,n,o,i){const c=f("a-button"),l=f("a-directory-tree"),a=f("a-spin"),r=f("BasicModal");return v(),g(r,{onRegister:e.registerModal,title:"选择目录",width:500,onOk:e.onSubmit,onCancel:e.onCancel},{default:m(()=>[C(a,{spinning:e.loading},{default:m(()=>[b("div",V,[C(c,{onClick:e.hanldeRefresh},{default:m(()=>[B("刷新")]),_:1},8,["onClick"])]),e.directoryTreeShow?(v(),g(l,{key:0,treeData:e.treeData,loadData:e.onLoadData,onSelect:e.onSelect},null,8,["treeData","loadData","onSelect"])):R("",!0)]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}const H=w(T,[["render",N],["__scopeId","data-v-102e9e9f"]]);export{H as default};
