var g=(o,u,t)=>new Promise((n,d)=>{var p=e=>{try{r(t.next(e))}catch(i){d(i)}},s=e=>{try{r(t.throw(e))}catch(i){d(i)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(p,s);r((t=t.apply(o,u)).next())});import{U as l,_ as v}from"./JUpload-70acb676.js";import{d as k,f as M,r as _,e as w,a6 as B,ab as C,a9 as R,k as x,ae as h,u as f,n as O}from"./tinymce-vendor-3c2b3d6e.js";import{B as U}from"./index-64ecc8b2.js";import{C as b}from"./jeecg-online-vendor-f57c6456.js";import{p as c,C as V}from"./index-37448b2d.js";const N=k({__name:"JUploadModal",props:{value:c.oneOfType([c.string,c.array]),width:c.number.def(520)},emits:["change","update:value","register"],setup(o,{emit:u}){const{createMessage:t}=b(),n=u,d=o,p=M(),s=_({props:{}}),r=w(()=>{var a;return((a=s.props)==null?void 0:a.fileType)===l.image?"图片上传":"文件上传"}),[e,{closeModal:i}]=V(a=>g(this,null,function*(){var m;s.props=f(a)||{},[l.image,"img","picture"].includes((m=s.props)==null?void 0:m.fileType)?s.props.fileType=l.image:s.props.fileType=l.file,O(()=>p.value.addActionsListener())}));function y(){i()}function T(a){n("change",a),n("update:value",a)}return(a,m)=>(B(),C(f(U),h({onRegister:f(e),title:r.value,width:o.width,onOk:y},a.$attrs),{default:R(()=>[x(v,h({ref_key:"uploadRef",ref:p,value:o.value},s.props,{onChange:T}),null,16,["value"])]),_:1},16,["onRegister","title","width"]))}});export{N as _};
