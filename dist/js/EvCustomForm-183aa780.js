var B=(s,r,u)=>new Promise((i,c)=>{var w=n=>{try{e(u.next(n))}catch(f){c(f)}},T=n=>{try{e(u.throw(n))}catch(f){c(f)}},e=n=>n.done?i(n.value):Promise.resolve(n.value).then(w,T);e((u=u.apply(s,r)).next())});import{d as V,f as m,r as $,e as z,Y as p,a6 as H,ab as L,a9 as l,k as t,ae as x,u as y,n as N}from"./tinymce-vendor-3c2b3d6e.js";import{C as E,ap as U,aM as Y,_ as G}from"./jeecg-online-vendor-f57c6456.js";import{J as K}from"./JSearchSelect-4158b9a9.js";import{a5 as Q}from"./antd-vue-vendor-05bfa84d.js";const{createConfirm:W}=E();const ne="/evCustom/exportXls",re="/evCustom/importExcel",ue=s=>U.get({url:"/evCustom/list",params:s}),de=(s,r)=>U.delete({url:"/evCustom/delete",params:s},{joinParamsToUrl:!0}).then(()=>{r()}),me=(s,r)=>{W({iconType:"warning",title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>U.delete({url:"/evCustom/deleteBatch",data:s},{joinParamsToUrl:!0}).then(()=>{r()})})},Z=(s,r)=>{let u=r?"/evCustom/edit":"/evCustom/add";return U.post({url:u,params:s},{isTransformResponse:!1})},A=V({__name:"EvCustomForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(s,{expose:r,emit:u}){const i=s,c=m(),w=Q.useForm,T=u,e=$({id:"",name:"",phone:"",address:"",saleUserId:""}),{createMessage:n}=E(),f=m({xs:{span:24},sm:{span:6}}),F=m({xs:{span:24},sm:{span:16}}),I=m({xs:{span:24},sm:{span:3}}),O=m({xs:{span:24},sm:{span:20}}),h=m(!1),j={name:[{required:!0,message:"请输入客户姓名!"}],phone:[{required:!0,message:"请输入联系电话!"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号码!"}],saleUserId:[{required:!0,message:"请输入销售员!"}]},{resetFields:D,validate:P,validateInfos:C}=w(e,j,{immediate:!0}),b=z(()=>i.formBpm===!0?i.formData.disabled!==!1:i.formDisabled);function M(){k({})}function k(v){N(()=>{D(),Object.assign(e,v)})}function R(){return B(this,null,function*(){yield P(),h.value=!0;const v=m(!1);let a=e;a.id&&(v.value=!0);for(let o in a)a[o]instanceof Array&&Y(c.value.getProps,o)==="string"&&(a[o]=a[o].join(","));yield Z(a,v.value).then(o=>{o.success?(n.success(o.message),T("ok")):n.warning(o.message)}).finally(()=>{h.value=!1})})}return r({add:M,edit:k,submitForm:R}),(v,a)=>{const o=p("a-input"),_=p("a-form-item"),g=p("a-col"),S=p("a-textarea"),q=p("a-row"),X=p("a-form"),J=p("a-spin");return H(),L(J,{spinning:h.value},{default:l(()=>[t(X,{ref_key:"formRef",ref:c,class:"antd-modal-form",labelCol:f.value,wrapperCol:F.value},{default:l(()=>[t(q,null,{default:l(()=>[t(g,{span:12},{default:l(()=>[t(_,x({label:"客户姓名"},y(C).name),{default:l(()=>[t(o,{value:e.name,"onUpdate:value":a[0]||(a[0]=d=>e.name=d),placeholder:"请输入客户姓名",disabled:b.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),t(g,{span:12},{default:l(()=>[t(_,x({label:"联系电话"},y(C).phone),{default:l(()=>[t(o,{value:e.phone,"onUpdate:value":a[1]||(a[1]=d=>e.phone=d),placeholder:"请输入联系电话",disabled:b.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),t(g,{span:12},{default:l(()=>[t(_,x({label:"销售"},y(C).saleUserId),{default:l(()=>[t(K,{value:e.saleUserId,"onUpdate:value":a[2]||(a[2]=d=>e.saleUserId=d),dict:"sys_user,realname,id,del_flag=0 and username != 'admin'",disabled:b.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),t(g,{span:24},{default:l(()=>[t(_,x({label:"联系地址"},y(C).address,{labelCol:I.value,wrapperCol:O.value}),{default:l(()=>[t(S,{value:e.address,"onUpdate:value":a[3]||(a[3]=d=>e.address=d),rows:4,placeholder:"请输入联系地址",disabled:b.value},null,8,["value","disabled"])]),_:1},16,["labelCol","wrapperCol"])]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const ee=G(A,[["__scopeId","data-v-c6ae1a80"]]),pe=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{ee as E,re as a,me as b,pe as c,de as d,ne as g,ue as l};
