import k from"./OnlineForm-1fa2d893-7d37908f.js";import{d as T,f as p,w as x,n as N,Y as f,a6 as v,a7 as g,k as h,a9 as b,E as w,Z as C}from"./tinymce-vendor-3c2b3d6e.js";import{ap as L,bs as B}from"./jeecg-online-vendor-f57c6456.js";import{D as y}from"./useExtendComponent-325fe3f1-007b9393.js";import"./index-09260ce4.js";import"./antd-vue-vendor-05bfa84d.js";import"./index-37448b2d.js";import"./index-64ecc8b2.js";import"./useCustomHook-acb00837-32b1f38e.js";import"./constant-754f1a9d-eadfd1e1.js";import"./componentMap-e2e33057.js";import"./index-8e09cdad.js";import"./user.api-367a7bce.js";import"./customExpression-b2f1ff9b.js";import"./index-0f0d0317.js";import"./useListPage-66651993.js";import"./index-76418551.js";import"./LinkTableListPiece-8499a318-01ebb291.js";import"./OnlineSelectCascade-4265c95d-4cbe6ffe.js";import"./JModalTip-33c7dc44-1741a3e9.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./JUpload-70acb676.js";import"./BasicTable-400bb95b.js";import"./injectionKey-69710956.js";import"./index-2ad3f236.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";var u=(t,o,i)=>new Promise((l,a)=>{var s=e=>{try{m(i.next(e))}catch(n){a(n)}},r=e=>{try{m(i.throw(e))}catch(n){a(n)}},m=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,r);m((i=i.apply(t,o)).next())});const P=T({name:"ProcessOnlineForm",inheritAttrs:!1,components:{OnlineForm:k},props:{dataId:{type:String,default:""},tableName:{type:String,default:""},taskId:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(t){const o=p(),i=p(""),l=p(1),a=p(!1),s=p(""),r=p(!1);x(()=>t.tableName,c=>{c&&m()},{immediate:!0});function m(){return u(this,null,function*(){r.value=!0;const c=`/online/cgform/api/getFormItemBytbname/${t.tableName}`,I={taskId:t.taskId};try{let d=yield L.get({url:c,params:I});i.value=d.head.id,l.value=Number(d.head.formTemplate||1),a.value=d.head.isTree==="Y",s.value=d.head.treeParentIdField||"",yield N(()=>u(this,null,function*(){(yield y(o)).createRootProperties(d)}))}catch(d){}})}function e(){return u(this,null,function*(){let c=yield y(o);r.value=!1,c.show(!0,{id:t.dataId})})}const n=p(!1);function F(){return u(this,null,function*(){n.value=!0,o.value.handleSubmit()})}function S(){n.value=!1}return{onlineFormCompRef:o,formId:i,formTemplate:l,isTreeForm:a,pidFieldName:s,renderSuccess:e,handleSuccess:S,handleSubmit:F,buttonLoading:n,spinLoading:r}}}),R={class:"cust-onl-form"},_={key:0,style:{width:"100%","text-align":"center","margin-top":"5px"}};function O(t,o,i,l,a,s){const r=f("a-button"),m=f("online-form"),e=f("a-spin");return v(),g("div",R,[h(e,{spinning:t.spinLoading},{default:b(()=>[h(m,{ref:"onlineFormCompRef",id:t.formId,disabled:t.disabled,"form-template":t.formTemplate,isTree:t.isTreeForm,pidField:t.pidFieldName,onRendered:t.renderSuccess,onSuccess:t.handleSuccess},{bottom:b(()=>[!t.disabled&&!t.spinLoading?(v(),g("div",_,[h(r,{preIcon:"ant-design:check",style:{width:"126px"},type:"primary",onClick:t.handleSubmit,loading:t.buttonLoading},{default:b(()=>[w(" 提 交 ")]),_:1},8,["onClick","loading"])])):C("",!0)]),_:1},8,["id","disabled","form-template","isTree","pidField","onRendered","onSuccess"])]),_:1},8,["spinning"])])}const Mt=B(P,[["render",O],["__scopeId","data-v-530d8f91"]]);export{Mt as default};
