import{d as I,f,e as g,u as t,w as Q,a6 as w,a7 as y,k as o,ac as B,a9 as p,E as _,ad as v,F as b,Z as L}from"./tinymce-vendor-3c2b3d6e.js";import T from"./LoginFormTitle-a753d4da.js";import{X as q,B as E}from"./antd-vue-vendor-05bfa84d.js";import{Q as N}from"./index-35591d01.js";import{u as V,bc as D,bi as F,B as j,bl as U,bm as z}from"./jeecg-online-vendor-f57c6456.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./vxe-table-vendor-26792376.js";const O={class:"enter-x min-w-64 min-h-64"},M=I({__name:"QrCodeForm",setup(R){const c=f("");let a;const{t:n}=j(),k=V(),{handleBackLogin:C,getLoginState:h}=D(),s=f("0"),i=g(()=>t(h)===F.QR_CODE),x=g(()=>t(s)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){s.value="0",U().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){z({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(a)),r.success&&(s.value="2",clearInterval(a),setTimeout(()=>{k.qrCodeLogin(d)},500))})}function S(e){u(e),m(),a=setInterval(()=>{u(e)},1500)}function m(){a&&clearInterval(a)}return Q(i,e=>{e?l():m()}),(e,r)=>i.value?(w(),y(b,{key:0},[o(T,{class:"enter-x"}),B("div",O,[o(t(N),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),o(t(q),{class:"enter-x"},{default:p(()=>[_(v(x.value),1)]),_:1}),o(t(E),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:p(()=>[_(v(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):L("",!0)}});export{M as default};
