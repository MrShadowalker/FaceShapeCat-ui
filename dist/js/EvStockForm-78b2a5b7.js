var h=(s,r,c)=>new Promise((i,p)=>{var y=n=>{try{e(c.next(n))}catch(v){p(v)}},w=n=>{try{e(c.throw(n))}catch(v){p(v)}},e=n=>n.done?i(n.value):Promise.resolve(n.value).then(y,w);e((c=c.apply(s,r)).next())});import{d as J,f as _,r as V,e as z,Y as u,a6 as H,ab as L,a9 as l,k as o,ae as b,u as g,n as N}from"./tinymce-vendor-3c2b3d6e.js";import{C as B,ap as x,aM as Y,_ as $}from"./jeecg-online-vendor-f57c6456.js";import{J as U}from"./JSearchSelect-4158b9a9.js";import{a5 as q}from"./antd-vue-vendor-05bfa84d.js";const{createConfirm:G}=B();const ae="/evStock/evStock/exportXls",se="/evStock/evStock/importExcel",le=s=>x.get({url:"/evStock/evStock/list",params:s}),ne=(s,r)=>x.delete({url:"/evStock/evStock/delete",params:s},{joinParamsToUrl:!0}).then(()=>{r()}),re=(s,r)=>{G({iconType:"warning",title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>x.delete({url:"/evStock/evStock/deleteBatch",data:s},{joinParamsToUrl:!0}).then(()=>{r()})})},K=(s,r)=>{let c=r?"/evStock/evStock/edit":"/evStock/evStock/add";return x.post({url:c,params:s},{isTransformResponse:!1})},Q=J({__name:"EvStockForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(s,{expose:r,emit:c}){const i=s,p=_(),y=q.useForm,w=c,e=V({id:"",whId:"",skuId:"",count:void 0,cost:void 0}),{createMessage:n}=B(),v=_({xs:{span:24},sm:{span:5}}),E=_({xs:{span:24},sm:{span:16}}),I=_(!1),F={},{resetFields:O,validate:j,validateInfos:k}=y(e,F,{immediate:!0}),S=z(()=>i.formBpm===!0?i.formData.disabled!==!1:i.formDisabled);function D(){C({})}function C(f){N(()=>{O(),Object.assign(e,f)})}function P(){return h(this,null,function*(){yield j(),I.value=!0;const f=_(!1);let t=e;t.id&&(f.value=!0);for(let a in t)t[a]instanceof Array&&Y(p.value.getProps,a)==="string"&&(t[a]=t[a].join(","));yield K(t,f.value).then(a=>{a.success?(n.success(a.message),w("ok")):n.warning(a.message)}).finally(()=>{I.value=!1})})}return r({add:D,edit:C,submitForm:P}),(f,t)=>{const a=u("a-form-item"),m=u("a-col"),T=u("a-input-number"),M=u("a-row"),R=u("a-form"),X=u("a-spin");return H(),L(X,{spinning:I.value},{default:l(()=>[o(R,{ref_key:"formRef",ref:p,class:"antd-modal-form",labelCol:v.value,wrapperCol:E.value},{default:l(()=>[o(M,null,{default:l(()=>[o(m,{span:12},{default:l(()=>[o(a,b({label:"仓库"},g(k).whId),{default:l(()=>[o(U,{value:e.whId,"onUpdate:value":t[0]||(t[0]=d=>e.whId=d),dict:"",disabled:S.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),o(m,{span:12},{default:l(()=>[o(a,b({label:"skuID"},g(k).skuId),{default:l(()=>[o(U,{value:e.skuId,"onUpdate:value":t[1]||(t[1]=d=>e.skuId=d),dict:"",disabled:S.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),o(m,{span:12},{default:l(()=>[o(a,b({label:"数量"},g(k).count),{default:l(()=>[o(T,{value:e.count,"onUpdate:value":t[2]||(t[2]=d=>e.count=d),placeholder:"请输入数量",style:{width:"100%"},disabled:S.value},null,8,["value","disabled"])]),_:1},16)]),_:1}),o(m,{span:12},{default:l(()=>[o(a,b({label:"成本"},g(k).cost),{default:l(()=>[o(T,{value:e.cost,"onUpdate:value":t[3]||(t[3]=d=>e.cost=d),placeholder:"请输入成本",style:{width:"100%"},disabled:S.value},null,8,["value","disabled"])]),_:1},16)]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const W=$(Q,[["__scopeId","data-v-418cc2f8"]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as E,se as a,re as b,ce as c,ne as d,ae as g,le as l};
