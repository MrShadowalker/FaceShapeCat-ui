import{f as De,w as Re,Y as s,a6 as n,a7 as C,aj as P,k as c,Z as d,ab as p,a9 as r,E as g,F as Q,aa as ve,ad as M,q as Le,A as Ee,ac as E,ae as Fe,af as Oe,ag as Ae,ah as Pe,ai as Qe}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import{C as He,bs as _e}from"./jeecg-online-vendor-f57c6456.js";import Je from"./OnlineAutoModal-510991eb-fc2dc518.js";import qe from"./OnlineCustomModal-518ad33c-1d54cb82.js";import Ne from"./OnlineDetailModal-9675390d-a064b8ad.js";import{e as Ve}from"./JImportModal-15f7db6a.js";import{p as ze,d as Ke}from"./useListButton-cdbab702-1beaee8c.js";import{N as je,B as Ue,d as We,D as $e}from"./useExtendComponent-325fe3f1-007b9393.js";import Ye from"./OnlineQueryForm-1bfc8320-01818773.js";import Ze from"./SuperQuery-5d1ca957-03ae60ef.js";import{u as Ge}from"./useOnlinePopEvent-687070b7-3b2e3730.js";import{n as Xe}from"./constant-754f1a9d-eadfd1e1.js";import"./index-64ecc8b2.js";import"./OnlineForm-1fa2d893-7d37908f.js";import"./index-09260ce4.js";import"./antd-vue-vendor-05bfa84d.js";import"./index-37448b2d.js";import"./useCustomHook-acb00837-32b1f38e.js";import"./CommentPanel-62548135.js";import"./OnlineFormDetail-0e7294ca-faf7dffa.js";import"./DetailForm-424638eb-a0926224.js";import"./index-76418551.js";import"./index-2d7d6454.js";import"./OnlineSubFormDetail-f0d2c016-93cac491.js";import"./cgformState-d9f8ec42-a08af090.js";import"./componentMap-e2e33057.js";import"./index-8e09cdad.js";import"./user.api-367a7bce.js";import"./customExpression-b2f1ff9b.js";import"./useListPage-66651993.js";import"./LinkTableListPiece-8499a318-01ebb291.js";import"./OnlineSelectCascade-4265c95d-4cbe6ffe.js";import"./JModalTip-33c7dc44-1741a3e9.js";import"./SuperQueryValComponent.vue_vue_type_script_lang-e9196096-fd4361e6.js";import eo from"./BasicTable-400bb95b.js";import{Q as oo}from"./index-2ad3f236.js";import"./vxe-table-vendor-26792376.js";import"./data-9be677e2.js";import"./JUpload-70acb676.js";import"./useForm-df7d93c5.js";import"./formUtils-09c7de86.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./injectionKey-69710956.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";var F=(e,h,l)=>new Promise((k,m)=>{var b=a=>{try{i(l.next(a))}catch(u){m(u)}},S=a=>{try{i(l.throw(a))}catch(u){m(u)}},i=a=>a.done?k(a.value):Promise.resolve(a.value).then(b,S);i((l=l.apply(e,h)).next())});const to={name:"OnlineAutoList",components:{BasicTable:eo,TableAction:oo,OnlineAutoModal:Je,JImportModal:Ve,OnlineQueryForm:Ye,OnlineSuperQuery:Ze,OnlineCustomModal:qe,OnlineDetailModal:Ne,OnlinePopModal:je},setup(){const{createMessage:e}=He(),{ID:h,onlineTableContext:l,onlineQueryFormOuter:k,loading:m,reload:b,dataSource:S,pagination:i,handleSpecialConfig:a,getColumnList:u,handleChangeInTable:B,loadData:T,superQueryButtonRef:f,superQueryStatus:x,handleSuperQuery:D,onlineExtConfigJson:w,handleFormConfig:R,registerCustomModal:o,tableReloading:y}=ze();if(!h.value)throw e.warning("地址错误, 配置ID不存在!"),new Error("地址错误, 配置ID不存在!");let{initCgEnhanceJs:v}=Ue(l);const{buttonSwitch:H,cgLinkButtonList:_,cgTopButtonList:J,importUrl:q,registerModal:N,handleAdd:V,handleEdit:z,handleBatchDelete:K,registerImportModal:j,onImportExcel:U,onExportExcel:O,cgButtonJsHandler:W,cgButtonActionHandler:$,cgButtonLinkHandler:Y,handleSubmitFlow:Z,getDropDownActions:G,getActions:X,initButtonList:ee,initButtonSwitch:oe,registerDetailModal:te,registerBpmModal:ne}=Ke(l,w),L=De(!1);function re(){return F(this,null,function*(){try{L.value=!0,yield O()}finally{setTimeout(()=>L.value=!1,1500)}})}const{columns:ie,actionColumn:le,selectedKeys:ae,rowSelection:se,enableScrollBar:pe,tableScroll:ce,downloadRowFile:de,getImgView:me,getPcaText:ue,getFormatDate:ge,handleColumnResult:he,hrefComponent:fe,viewOnlineCellImage:ye,hrefMainTableId:Ce,registerOnlineHrefModal:be,registerPopModal:Se,openPopModal:we,onlinePopModalRef:Ie,popTableId:A}=We(l,w);Re(h,()=>{ke()},{immediate:!0});function ke(){return F(this,null,function*(){m.value=!0;let t=yield u(Xe);Me(t),yield T(),m.value=!1,l.execButtonEnhance("setup")})}function Me(t){let I=v(t.enhanceJs);l.EnhanceJS=I,ee(t.cgButtonList),oe(t.hideColumns),he(t),a(t)}function Be(t){l.queryParam=t,b({mode:"search"})}function Te(t){return F(this,null,function*(){yield $e(f),f.value.init(t)})}function xe(t){A.value=t.id;let I={title:t.describe};t.record&&t.record.id&&(I.record=t.record,I.isUpdate=!0),we(!0,I)}return Ge(xe),{ID:h,onlineQueryFormOuter:k,queryWithCondition:Be,onQueryFormLoaded:Te,reload:b,superQueryButtonRef:f,superQueryStatus:x,handleSuperQuery:D,loading:m,columns:ie,dataSource:S,pagination:i,actionColumn:le,rowSelection:se,selectedKeys:ae,tableScroll:ce,enableScrollBar:pe,handleChangeInTable:B,buttonSwitch:H,handleAdd:V,handleEdit:z,onImportExcel:U,onExportExcel:O,exportLoading:L,onExportExcelOverride:re,cgTopButtonList:J,cgLinkButtonList:_,cgButtonJsHandler:W,cgButtonActionHandler:$,cgButtonLinkHandler:Y,handleBatchDelete:K,downloadRowFile:de,getImgView:me,getPcaText:ue,getFormatDate:ge,getActions:X,getDropDownActions:G,registerModal:N,registerCustomModal:o,registerImportModal:j,registerDetailModal:te,importUrl:q,handleFormConfig:R,onlinePopModalRef:Ie,tableReloading:y,handleSubmitFlow:Z,hrefComponent:fe,viewOnlineCellImage:ye,hrefMainTableId:Ce,onlineExtConfigJson:w,registerOnlineHrefModal:be,registerPopModal:Se,popTableId:A,registerBpmModal:ne}}},no={key:0,style:{"font-size":"12px","font-style":"italic"}},ro={key:0,style:{"font-size":"12px","font-style":"italic"}},io=["src","onClick"],lo=["innerHTML"],ao=["title"];function so(e,h,l,k,m,b){const S=s("online-query-form"),i=s("a-button"),a=s("online-super-query"),u=s("TableAction"),B=s("BasicTable"),T=s("OnlineAutoModal"),f=s("online-detail-modal"),x=s("JImportModal"),D=s("a-modal"),w=s("online-custom-modal"),R=s("online-pop-modal");return n(),C("div",{class:P(["p-2",`online-list-${e.ID}`])},[c(S,{ref:"onlineQueryFormOuter",id:e.ID,onSearch:e.queryWithCondition,onLoaded:e.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),e.tableReloading?d("",!0):(n(),p(B,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e.loading,columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,actionColumn:e.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:e.tableScroll,onTableRedo:e.reload,class:P({"j-table-force-nowrap":e.enableScrollBar}),onChange:e.handleChangeInTable},{tableTitle:r(()=>[e.buttonSwitch.add?(n(),p(i,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e.handleAdd},{default:r(()=>[g("新增")]),_:1},8,["onClick"])):d("",!0),e.buttonSwitch.import?(n(),p(i,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e.onImportExcel},{default:r(()=>[g("导入")]),_:1},8,["onClick"])):d("",!0),e.buttonSwitch.export?(n(),p(i,{key:2,preIcon:"ant-design:export-outlined",type:"primary",loading:e.exportLoading,onClick:e.onExportExcelOverride},{default:r(()=>[g(" 导出")]),_:1},8,["loading","onClick"])):d("",!0),e.cgTopButtonList&&e.cgTopButtonList.length>0?(n(!0),C(Q,{key:3},ve(e.cgTopButtonList,(o,y)=>(n(),C(Q,null,[o.optType=="js"?(n(),p(i,{key:"cgbtn"+y,onClick:v=>e.cgButtonJsHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:r(()=>[g(M(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):o.optType=="action"?(n(),p(i,{key:"cgbtn"+y,onClick:v=>e.cgButtonActionHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:r(()=>[g(M(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):d("",!0)],64))),256)):d("",!0),e.buttonSwitch.batch_delete?Le((n(),p(i,{key:4,preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:r(()=>[g(" 批量删除")]),_:1},8,["onClick"])),[[Ee,e.selectedKeys.length>0]]):d("",!0),e.buttonSwitch.super_query?(n(),p(a,{key:5,ref:"superQueryButtonRef",online:"",status:e.superQueryStatus,onSearch:e.handleSuperQuery},null,8,["status","onSearch"])):d("",!0)]),fileSlot:r(({text:o})=>[o?(n(),p(i,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:y=>e.downloadRowFile(o)},{default:r(()=>[g(" 下载 ")]),_:2},1032,["onClick"])):(n(),C("span",no,"无文件"))]),imgSlot:r(({text:o})=>[o?(n(),C("img",{key:1,src:e.getImgView(o),alt:"图片不存在",class:"online-cell-image",onClick:y=>e.viewOnlineCellImage(o)},null,8,io)):(n(),C("span",ro,"无图片"))]),htmlSlot:r(({text:o})=>[E("div",{innerHTML:o},null,8,lo)]),pcaSlot:r(({text:o})=>[E("div",{title:e.getPcaText(o)},M(e.getPcaText(o)),9,ao)]),dateSlot:r(({text:o})=>[E("span",null,M(e.getFormatDate(o)),1)]),action:r(({record:o})=>[c(u,{actions:e.getActions(o),dropDownActions:e.getDropDownActions(o)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),c(T,{id:e.ID,onRegister:e.registerModal,onSuccess:e.reload,onFormConfig:e.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),c(f,{id:e.ID,onRegister:e.registerDetailModal},null,8,["id","onRegister"]),c(x,{onRegister:e.registerImportModal,url:e.importUrl(),onOk:e.reload,online:""},null,8,["onRegister","url","onOk"]),c(D,Fe(e.hrefComponent.model,Oe(e.hrefComponent.on)),{default:r(()=>[(n(),p(Ae(e.hrefComponent.is),Pe(Qe(e.hrefComponent.params)),null,16))]),_:1},16),c(w,{onRegister:e.registerCustomModal,onSuccess:e.reload},null,8,["onRegister","onSuccess"]),c(f,{id:e.hrefMainTableId,onRegister:e.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),c(R,{ref:"onlinePopModalRef",id:e.popTableId,onRegister:e.registerPopModal,onSuccess:e.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])],2)}const Ht=_e(to,[["render",so]]);export{Ht as default};
