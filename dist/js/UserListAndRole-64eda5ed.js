var h=(c,m,s)=>new Promise((e,i)=>{var d=t=>{try{o(s.next(t))}catch(n){i(n)}},f=t=>{try{o(s.throw(t))}catch(n){i(n)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(d,f);o((s=s.apply(c,m)).next())});import{f as y,w as k,e as B,Y as _,a6 as v,ab as w,a9 as S,k as L,ac as g,ao as I,ad as N,Z as K}from"./tinymce-vendor-3c2b3d6e.js";import{ap as D,_ as z}from"./jeecg-online-vendor-f57c6456.js";import C from"./UserList-9509c9fd.js";import{aM as H}from"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./index-37448b2d.js";const O={name:"RoleUserList",components:{UserList:C,UserOutlined:H},props:{searchText:{type:String,default:""},selectedIdList:{type:Array,default:()=>[]},excludeUserIdList:{type:Array,default:()=>[]},multi:{type:Boolean,default:!1}},emits:["selected","unSelect"],setup(c,{emit:m}){const s=y([]);function e(){return h(this,null,function*(){const a="/sys/role/listByTenant";let l={order:"desc",column:"createTime",pageSize:200},r=[];const u=yield D.get({url:a,params:l},{isTransformResponse:!1});if(u.success){const{records:R}=u.result;r=R.map(x=>({title:x.roleName,id:x.id,key:x.id}))}s.value=r})}e();const i=y([]),d=y("");function f(a,l){let r=l.node.dataRef;i.value=[r.key];let u=a[0];d.value=u,t()}const o=y([]);function t(){return h(this,null,function*(){const a="/sys/user/selectUserList";let l={pageNo:1,pageSize:10};c.searchText&&(l.keyword=c.searchText),d.value&&(l.roleId=d.value);const r=yield D.get({url:a,params:l},{isTransformResponse:!1});if(r.success){const{records:u}=r.result;o.value=u}})}k(()=>c.searchText,()=>{t()});function n(a){m("selected",a)}function U(a){m("unSelect",a)}const p=y(300);return p.value=window.innerHeight-300,{containerStyle:B(()=>({"overflow-y":"auto","max-height":p.value+"px"})),treeData:s,selectedKeys:i,onSelect:f,onSelectUser:n,unSelectUser:U,userDataList:o}}},V={style:{"margin-left":"5px"}};function A(c,m,s,e,i,d){const f=_("UserOutlined"),o=_("a-tree"),t=_("a-col"),n=_("user-list"),U=_("a-row");return v(),w(U,null,{default:S(()=>[L(t,{span:12},{default:S(()=>[g("div",{style:I(e.containerStyle)},[e.treeData.length>0?(v(),w(o,{key:0,showIcon:"",treeData:e.treeData,selectedKeys:e.selectedKeys,onSelect:e.onSelect},{title:S(({title:p,key:T})=>[L(f,{style:{color:"#9e9e9e"}}),g("span",V,N(p),1)]),_:1},8,["treeData","selectedKeys","onSelect"])):K("",!0)],4)]),_:1}),L(t,{span:12,style:{"padding-left":"10px"}},{default:S(()=>[g("div",{style:I(e.containerStyle)},[L(n,{multi:s.multi,excludeUserIdList:s.excludeUserIdList,dataList:e.userDataList,selectedIdList:s.selectedIdList,onSelected:e.onSelectUser,onUnSelect:e.unSelectUser},null,8,["multi","excludeUserIdList","dataList","selectedIdList","onSelected","onUnSelect"])],4)]),_:1})]),_:1})}const F=z(O,[["render",A]]);export{F as default};
