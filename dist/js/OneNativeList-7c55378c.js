var pe=Object.defineProperty;var K=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var U=(d,l,t)=>l in d?pe(d,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[l]=t,L=(d,l)=>{for(var t in l||(l={}))fe.call(l,t)&&U(d,t,l[t]);if(K)for(var t of K(l))ve.call(l,t)&&U(d,t,l[t]);return d};var J=(d,l,t)=>new Promise((P,y)=>{var k=f=>{try{c(t.next(f))}catch(h){y(h)}},r=f=>{try{c(t.throw(f))}catch(h){y(h)}},c=f=>f.done?P(f.value):Promise.resolve(f.value).then(k,r);c((t=t.apply(d,l)).next())});import{d as ge,f as i,r as _e,o as he,Y as g,a6 as p,ab as N,a9 as n,ac as m,k as o,E as _,u as b,Z as Y,ad as xe,a7 as x,F as O}from"./tinymce-vendor-3c2b3d6e.js";import{ao as ye,aL as j,aQ as ke,C as we,ap as R,aw as M}from"./jeecg-online-vendor-f57c6456.js";import be from"./OneNativeModal-93fe5ed6.js";import{q as Ce,M as Se}from"./antd-vue-vendor-05bfa84d.js";import{l as F,m as Z,g as Ie,aD as De}from"./index-37448b2d.js";import{downloadFile as Te}from"./renderUtils-59564de6.js";import"./vxe-table-vendor-26792376.js";import"./OneNativeForm-2779b3d2.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useFormItem-613b6d5d.js";import"./index-64ecc8b2.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JImageUpload-1b0b2e46.js";import"./JSearchSelect-4158b9a9.js";import"./JPopup-8248ac78.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JTreeSelect-73cfd2cd.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JSelectUser-6efbe652.js";const je={class:"table-operator"},Ee={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},ze=m("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),Ne={style:{"font-weight":"600"}},Oe={key:0,style:{"font-size":"12px","font-style":"italic"}},Re=["src","preview"],Me={key:0,style:{"font-size":"12px","font-style":"italic"}},Fe=["onClick"],Pe={class:"ant-dropdown-link"},Ve=["onClick"],Xe=m("a",null,"删除",-1),Rt=ge({__name:"OneNativeList",setup(d){const{handleExportXls:l,handleImportXls:t}=ke(),P=i(!1),y=i({}),k=i(!1),r=i([]),c=i(),f={"X-Access-Token":ye()},h=i([{title:"文本",align:"center",dataIndex:"name"},{title:"字典下拉",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?j(r.value.xiala,e):""},{title:"字典单选",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?j(r.value.danxuan,e):""},{title:"字典多选",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?j(r.value.duoxuan,e):""},{title:"开关",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?j(r.value.kaiguan,e):""},{title:"日期",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"年月日时分秒",align:"center",dataIndex:"nyrsfm"},{title:"时间",align:"center",dataIndex:"shijian"},{title:"文件",align:"center",dataIndex:"wenjian"},{title:"图片",align:"center",dataIndex:"tupian"},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147}]),w=_e({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),V=i([]),X=i(!1),v=i({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,a)=>a[0]+"-"+a[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0,total:0}),u=i([]),C=i([]),B=i({column:"createTime",order:"desc"}),Q=i({}),{createMessage:G}=we();function W(e,a){u.value=e,C.value=a}function ee({pagination:e,filters:a,sorter:s}){v.value=e,B.value=s,Q.value=L({},a)}function te(){c.value.disableSubmit=!1,c.value.add()}function ae(){u.value=[],C.value=[]}function ne(){Se.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>{R.delete({url:w.delete,data:{ids:u.value}},{joinParamsToUrl:!0}).then(()=>{I()})}})}function Be(e){let a=A();u.value&&u.value.length>0&&(a.selections=u.join(",")),l(e,w.exportXls,Z(a))}function Qe(e){t(e,w.importExcel,"").then(()=>{I()})}function A(){let e=Object.assign(y.value,B.value,Q.value);return e.field=oe(),e.pageNo=v.value.current,e.pageSize=v.value.pageSize,Z(e)}function oe(){let e="id,";return h.value.forEach(function(a){e+=","+a.dataIndex}),e}function S(e){e===1&&(v.value.current=1),k.value=!0;let a=A();R.get({url:w.list,params:a},{isTransformResponse:!1}).then(s=>{s.success?(V.value=s.result.records,s.result&&s.result.total?v.value.total=s.result.total:v.value.total=0):G.warning(s.message)}).finally(()=>{k.value=!1})}function Ae(){S(1),u.value=[],C.value=[]}function $e(){X.value=!X.value}function qe(){y.value={},S(1)}function le(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),Ie(e)}function ie(e){c.value.disableSubmit=!1,c.value.edit(e)}function se(e){c.value.disableSubmit=!0,c.value.edit(e)}function re(e){R.delete({url:w.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(a=>{I()})}function ce(){return J(this,null,function*(){r.value.flzds=yield De({code:"B01"}),r.value.xiala=yield M("sex"),r.value.danxuan=yield M("sex"),r.value.duoxuan=yield M("urgent_level")})}function I(){u.value=[],C.value=[],S(1)}return he(()=>{r.value.kaiguan=[{text:"是",value:"1"},{text:"否",value:"2"}],S(),ce()}),(e,a)=>{const s=g("a-button"),E=g("a-menu-item"),$=g("a-menu"),q=g("a-dropdown"),ue=g("a-divider"),de=g("a-table"),me=g("a-card");return p(),N(me,{bordered:!1},{default:n(()=>[m("div",je,[o(s,{onClick:te,type:"primary",preIcon:"ant-design:plus"},{default:n(()=>[_("新增")]),_:1}),u.value.length>0?(p(),N(q,{key:0},{overlay:n(()=>[o($,null,{default:n(()=>[o(E,{key:"1",onClick:ne},{default:n(()=>[o(b(F),{icon:"ant-design:delete-outlined"}),_(" 删除 ")]),_:1})]),_:1})]),default:n(()=>[o(s,null,{default:n(()=>[_("批量操作 "),o(b(F),{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Y("",!0)]),m("div",null,[m("div",Ee,[ze,_(" 已选择 "),m("a",Ne,xe(u.value.length),1),_("项 "),m("a",{style:{"margin-left":"24px"},onClick:ae},"清空")]),o(de,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:h.value,dataSource:V.value,pagination:v.value,loading:k.value,rowSelection:{selectedRowKeys:u.value,onChange:W},onChange:ee},{bodyCell:n(({column:z,text:D,record:T})=>[z.dataIndex==="tupian"?(p(),x(O,{key:0},[D?(p(),x("img",{key:1,src:le(D),preview:T.id,alt:"",class:"anty-img-wrap"},null,8,Re)):(p(),x("span",Oe,"无图片"))],64)):z.dataIndex==="wenjian"?(p(),x(O,{key:1},[D?(p(),N(s,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:H=>b(Te)(D)},{default:n(()=>[_(" 下载 ")]),_:2},1032,["onClick"])):(p(),x("span",Me,"无文件"))],64)):z.dataIndex==="action"?(p(),x(O,{key:2},[m("a",{onClick:H=>ie(T)},"编辑",8,Fe),o(ue,{type:"vertical"}),o(q,null,{overlay:n(()=>[o($,{class:"antd-more"},{default:n(()=>[o(E,null,{default:n(()=>[m("a",{onClick:H=>se(T)},"详情",8,Ve)]),_:2},1024),o(E,null,{default:n(()=>[o(b(Ce),{title:"确定删除吗?",onConfirm:()=>re(T.id)},{default:n(()=>[Xe]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[m("a",Pe,[_("更多 "),o(b(F),{icon:"mdi-light:chevron-down"})])]),_:2},1024)],64)):Y("",!0)]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(be,{ref_key:"oneProtogenesisModal",ref:c,onOk:I},null,512)]),_:1})}}});export{Rt as default};
