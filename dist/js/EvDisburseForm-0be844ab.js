var C=(r,u,p)=>new Promise((v,_)=>{var x=n=>{try{a(p.next(n))}catch(b){_(b)}},T=n=>{try{a(p.throw(n))}catch(b){_(b)}},a=n=>n.done?v(n.value):Promise.resolve(n.value).then(x,T);a((p=p.apply(r,u)).next())});import{d as S,f as D,r as V,e as h,Y as i,a6 as z,ab as L,a9 as s,k as e,ae as f,u as c,n as $}from"./tinymce-vendor-3c2b3d6e.js";import{C as B,ap as y,aM as G,_ as J}from"./jeecg-online-vendor-f57c6456.js";import{a5 as K}from"./antd-vue-vendor-05bfa84d.js";import{l as I}from"./JDictSelectTag-f0227cc5.js";const{createConfirm:Q}=B();const re="/evDisburse/exportXls",ne="/evDisburse/importExcel",ue=r=>y.get({url:"/evDisburse/list",params:r}),de=(r,u)=>y.delete({url:"/evDisburse/delete",params:r},{joinParamsToUrl:!0}).then(()=>{u()}),ie=(r,u)=>{Q({iconType:"warning",title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>y.delete({url:"/evDisburse/deleteBatch",data:r},{joinParamsToUrl:!0}).then(()=>{u()})})},W=(r,u)=>{let p=u?"/evDisburse/edit":"/evDisburse/add";return y.post({url:p,params:r},{isTransformResponse:!1})},Z=S({__name:"EvDisburseForm",props:{formDisabled:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},formBpm:{type:Boolean,default:!0}},emits:["register","ok"],setup(r,{expose:u,emit:p}){const v=r,_=D(),x=K.useForm,T=p,a=V({id:"",remark:"",goodsId:"",disburseTime:"",type:"",num:"",reason:"",status:"",departId:""}),{createMessage:n}=B(),b=D({xs:{span:24},sm:{span:5}}),E=D({xs:{span:24},sm:{span:16}}),k=D(!1),F={departId:[{required:!0,message:"请选择店铺!"}],goodsId:[{required:!0,message:"请选择商品!"}],disburseTime:[{required:!0,message:"请选择时间!"}],num:[{required:!0,message:"请选择数量!"}]},{resetFields:O,validate:j,validateInfos:m}=x(a,F,{immediate:!0}),ee=h(()=>v.formBpm===!0?v.formData.disabled!==!1:v.formDisabled);function M(){w({})}function w(g){$(()=>{O(),Object.assign(a,g)})}function P(){return C(this,null,function*(){yield j(),k.value=!0;const g=D(!1);let t=a;t.id&&(g.value=!0);for(let l in t)t[l]instanceof Array&&G(_.value.getProps,l)==="string"&&(t[l]=t[l].join(","));yield W(t,g.value).then(l=>{l.success?(n.success(l.message),T("ok")):n.warning(l.message)}).finally(()=>{k.value=!1})})}return u({add:M,edit:w,submitForm:P}),(g,t)=>{const l=i("a-form-item"),d=i("a-col"),Y=i("a-date-picker"),U=i("a-input"),q=i("a-input-number"),R=i("a-textarea"),H=i("a-row"),X=i("a-form"),N=i("a-spin");return z(),L(N,{spinning:k.value},{default:s(()=>[e(X,{ref_key:"formRef",ref:_,class:"antd-modal-form",labelCol:b.value,wrapperCol:E.value},{default:s(()=>[e(H,null,{default:s(()=>[e(d,{span:24},{default:s(()=>[e(l,f({label:"店铺"},c(m).departId),{default:s(()=>[e(I,{type:"select",value:a.departId,"onUpdate:value":t[0]||(t[0]=o=>a.departId=o),dictCode:"sys_depart,depart_name,id,parent_id!=''",placeholder:"请选择店铺"},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"商品"},c(m).goodsId),{default:s(()=>[e(I,{type:"select",value:a.goodsId,"onUpdate:value":t[1]||(t[1]=o=>a.goodsId=o),dictCode:"ev_goods,name,id,del_flag='0'",placeholder:"请选择商品"},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"支出时间"},c(m).disburseTime),{default:s(()=>[e(Y,{placeholder:"请选择支出时间",value:a.disburseTime,"onUpdate:value":t[2]||(t[2]=o=>a.disburseTime=o),showTime:"","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"支出类型"},c(m).type),{default:s(()=>[e(U,{value:a.type,"onUpdate:value":t[3]||(t[3]=o=>a.type=o),placeholder:"请输入支出类型"},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"损耗数量"},c(m).num),{default:s(()=>[e(q,{id:"inputNumber",value:a.num,"onUpdate:value":t[4]||(t[4]=o=>a.num=o),min:0},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"损耗原因"},c(m).reason),{default:s(()=>[e(U,{value:a.reason,"onUpdate:value":t[5]||(t[5]=o=>a.reason=o),placeholder:"请输入损耗原因"},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"损耗状态"},c(m).status),{default:s(()=>[e(U,{value:a.status,"onUpdate:value":t[6]||(t[6]=o=>a.status=o),placeholder:"请输入损耗状态"},null,8,["value"])]),_:1},16)]),_:1}),e(d,{span:24},{default:s(()=>[e(l,f({label:"备注"},c(m).remark),{default:s(()=>[e(R,{value:a.remark,"onUpdate:value":t[7]||(t[7]=o=>a.remark=o),rows:4},null,8,["value"])]),_:1},16)]),_:1})]),_:1})]),_:1},8,["labelCol","wrapperCol"])]),_:1},8,["spinning"])}}});const A=J(Z,[["__scopeId","data-v-986a889a"]]),pe=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as E,ne as a,ie as b,pe as c,de as d,re as g,ue as l};
