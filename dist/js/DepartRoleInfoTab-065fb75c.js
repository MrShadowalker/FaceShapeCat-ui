var Z=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var k=(r,e,o)=>e in r?Z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,v=(r,e)=>{for(var o in e||(e={}))J.call(e,o)&&k(r,o,e[o]);if(y)for(var o of y(e))X.call(e,o)&&k(r,o,e[o]);return r},M=(r,e)=>G(r,H(e));var w=(r,e,o)=>new Promise((m,s)=>{var _=i=>{try{c(o.next(i))}catch(u){s(u)}},g=i=>{try{c(o.throw(i))}catch(u){s(u)}},c=i=>i.done?m(i.value):Promise.resolve(i.value).then(_,g);c((o=o.apply(r,e)).next())});import{d as tt,c as ot,e as et,w as rt,o as it,Y as l,a6 as S,a7 as A,k as n,a9 as a,E as nt,u as p,F,Z as at,ac as I}from"./tinymce-vendor-3c2b3d6e.js";import"./index-0f0d0317.js";import"./index-64ecc8b2.js";import{a as pt}from"./index-563223fc.js";import{useListPage as lt}from"./useListPage-66651993.js";import mt from"./DepartRoleModal-1b798f28.js";import st from"./DepartRoleAuthDrawer-1d8231a4.js";import{f as ct,g as dt}from"./depart.user.api-f634a469.js";import{d as ut,a as ft}from"./depart.user.data-4127e90b.js";import{E as _t}from"./index-37448b2d.js";import{Q as gt}from"./index-2ad3f236.js";import bt from"./BasicTable-400bb95b.js";import"./antd-vue-vendor-05bfa84d.js";import"./jeecg-online-vendor-f57c6456.js";import"./vxe-table-vendor-26792376.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./index-09260ce4.js";import"./useForm-df7d93c5.js";import"./componentMap-e2e33057.js";import"./useFormItem-613b6d5d.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JImageUpload-1b0b2e46.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JPopup-8248ac78.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JTreeSelect-73cfd2cd.js";import"./JEllipsis-242e7bd0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./JSearchSelect-4158b9a9.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./injectionKey-69710956.js";import"./DepartRoleDataRuleDrawer-8573bf85.js";import"./user.api-367a7bce.js";const wt=I("span",null,"删除",-1),Ct=I("span",null,"批量操作 ",-1),To=tt({__name:"DepartRoleInfoTab",props:{data:{require:!0,type:Object}},emits:["register"],setup(r){const e=ot("prefixCls"),o=r,m=et(()=>{var t;return(t=o.data)==null?void 0:t.id}),s={xs:24,sm:24,md:24,lg:12,xl:12,xxl:8},{tableContext:_,createMessage:g}=lt({tableProps:{api:ct,columns:ut,canResize:!1,formConfig:{labelWidth:100,schemas:ft,baseColProps:s,labelAlign:"left",labelCol:{xs:24,sm:24,md:24,lg:9,xl:7,xxl:6},wrapperCol:{},actionColOptions:M(v({},s),{style:{textAlign:"left"}})},beforeFetch(t){t.deptId=m.value}}}),[c,{reload:i,setProps:u,setLoading:C,updateTableDataRecord:P},{rowSelection:T,selectedRowKeys:b}]=_,[B,R]=_t(),[j,N]=pt();rt(()=>o.data,()=>i()),it(()=>{i()});function V(){b.value=[]}function E(){R.openModal(!0,{isUpdate:!1,record:{}})}function L(t){R.openModal(!0,{isUpdate:!0,record:t})}function K(t){N.openDrawer(!0,{record:t})}function h(t,d){return w(this,null,function*(){if(!m.value)g.warning("请先选择一个部门");else{C(!0);let f=p(t).join(",");try{return yield dt({ids:f},d),i()}finally{C(!1)}}return Promise.reject()})}function O(){return w(this,null,function*(){try{yield h(b,!0),V()}catch(t){}})}function U({isUpdate:t,values:d}){t?P(d.id,d):i()}function $(t){return[{label:"编辑",onClick:L.bind(null,t)}]}function q(t){return[{label:"授权",onClick:K.bind(null,t)},{label:"删除",color:"error",popConfirm:{title:"确认要删除吗？",confirm:h.bind(null,[t.id],!1)}}]}return(t,d)=>{const f=l("a-button"),z=l("a-divider"),D=l("icon"),Q=l("a-menu-item"),W=l("a-menu"),Y=l("a-dropdown");return S(),A(F,null,[n(p(bt),{onRegister:p(c),rowSelection:p(T)},{tableTitle:a(()=>[n(f,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:E},{default:a(()=>[nt("添加部门角色")]),_:1}),p(b).length>0?(S(),A(F,{key:0},[n(z,{type:"vertical"}),n(Y,null,{overlay:a(()=>[n(W,null,{default:a(()=>[n(Q,{key:"1",onClick:O},{default:a(()=>[n(D,{icon:"ant-design:delete-outlined"}),wt]),_:1})]),_:1})]),default:a(()=>[n(f,null,{default:a(()=>[Ct,n(D,{icon:"akar-icons:chevron-down"})]),_:1})]),_:1})],64)):at("",!0)]),action:a(({record:x})=>[n(p(gt),{actions:$(x),dropDownActions:q(x)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),n(mt,{departId:m.value,onRegister:p(B),onSuccess:U},null,8,["departId","onRegister"]),n(st,{onRegister:p(j)},null,8,["onRegister"])],64)}}});export{To as default};
