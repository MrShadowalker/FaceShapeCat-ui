var S=(p,d,s)=>new Promise((a,_)=>{var v=o=>{try{c(s.next(o))}catch(i){_(i)}},l=o=>{try{c(s.throw(o))}catch(i){_(i)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(v,l);c((s=s.apply(p,d)).next())});import{B as D}from"./index-64ecc8b2.js";import{m as T,au as N}from"./antd-vue-vendor-05bfa84d.js";import P from"./SelectedUserItem-6a7f0563.js";import{ap as b,_ as F}from"./jeecg-online-vendor-f57c6456.js";import{f as B,e as x,w as R,I as V,a4 as ae,a5 as oe,Y as m,a6 as g,ab as L,a9 as w,ac as r,k as C,a7 as I,F as M,aa as U,ad as j}from"./tinymce-vendor-3c2b3d6e.js";import{C as z}from"./index-37448b2d.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";const E={name:"PositionSelectModal",components:{BasicModal:D,SearchOutlined:T,CloseOutlined:N,SelectedUserItem:P},props:{multi:{type:Boolean,default:!0},getContainer:{type:Function,default:null},title:{type:String,default:""},type:{type:String,default:"sys_position"},appId:{type:String,default:""}},emits:["selected","register"],setup(p,{emit:d}){const s=B(""),a=x(()=>{let e=o.value;return!e||e.length==0?[]:e.map(t=>t.id)});R(()=>p.appId,e=>S(this,null,function*(){e&&(yield k())}),{immediate:!0});const[_]=z(()=>{let e=l.value;!e||e.length==0;for(let t of e)t.checked=!1});function v(){let e=V(a.value);d("selected",e)}const l=B([]),c=x(()=>{let e=l.value;if(!e||e.length==0)return[];let t=s.value;return t?e.filter(u=>u.name.indexOf(t)>=0):e}),o=x(()=>{let e=l.value;return!e||e.length==0?[]:e.filter(t=>t.checked)});function i(e){let t=l.value;if(!t||t.length==0)return;let u=t.filter(h=>h.id==e);u[0].checked=!1}function k(){return S(this,null,function*(){let e={pageNo:1,pageSize:200,column:"createTime",order:"desc"};const t="/sys/position/list",u=yield b.get({url:t,params:e},{isTransformResponse:!1});if(u.success){const{records:h}=u.result;let O=[];if(h&&h.length>0)for(let y of h)O.push({id:y.id,name:y.name||y.roleName,selectType:p.type,checked:!1});l.value=O}})}function n(e,t){f(e),t.checked=!t.checked}function f(e){e.preventDefault(),e.stopPropagation()}return{register:_,showDataList:c,searchText:s,handleOk:v,selectedList:o,selectedIdList:a,unSelect:i,onSelect:n}}};const H={style:{position:"relative","min-height":"350px"}},Y={style:{width:"100%"}},q={class:"modal-select-list-container"},A={class:"scroll"},G={class:"content",style:{right:"-10px"}},J=["onClick"],K={class:"selected-users",style:{width:"100%","overflow-x":"hidden"}};function Q(p,d,s,a,_,v){const l=m("SearchOutlined"),c=m("a-input"),o=m("a-checkbox"),i=m("SelectedUserItem"),k=m("BasicModal");return g(),L(k,{onRegister:a.register,getContainer:s.getContainer,canFullscreen:!1,title:s.title,width:500,destroyOnClose:"",onOk:a.handleOk,wrapClassName:"j-user-select-modal2"},{default:w(()=>[r("div",H,[r("div",Y,[C(c,{value:a.searchText,"onUpdate:value":d[0]||(d[0]=n=>a.searchText=n),allowClear:"",style:{width:"100%"},placeholder:"搜索"},{prefix:w(()=>[C(l,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),r("div",q,[r("div",A,[r("div",G,[(g(!0),I(M,null,U(a.showDataList,n=>(g(),I("label",{class:"item",onClick:f=>a.onSelect(f,n)},[C(o,{checked:n.checked,"onUpdate:checked":f=>n.checked=f},{default:w(()=>[r("span",null,j(n.name),1)]),_:2},1032,["checked","onUpdate:checked"])],8,J))),256))])])]),r("div",K,[(g(!0),I(M,null,U(a.selectedList,n=>(g(),L(i,{info:n,onUnSelect:a.unSelect},null,8,["info","onUnSelect"]))),256))])])]),_:1},8,["onRegister","getContainer","title","onOk"])}const ie=F(E,[["render",Q],["__scopeId","data-v-92a90425"]]);export{ie as default};
