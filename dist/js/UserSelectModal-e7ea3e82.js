var $=Object.defineProperty,z=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var R=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))j.call(t,o)&&R(e,o,t[o]);if(_)for(var o of _(t))D.call(t,o)&&R(e,o,t[o]);return e},v=(e,t)=>z(e,K(t));import{aA as E,ar as N,X as J,_ as W}from"./jeecg-online-vendor-f57c6456.js";import{d as G,f as w,u as B,w as H,Y as r,a6 as X,a7 as Y,k as s,ae as C,a9 as n,ac as q}from"./tinymce-vendor-3c2b3d6e.js";import{B as Q}from"./index-64ecc8b2.js";import{C as Z,W as T}from"./index-37448b2d.js";import{u as ee}from"./useSelectBiz-b5c21498.js";import{s as te}from"./props-ea47501e.js";import"./antd-vue-vendor-05bfa84d.js";import"./vxe-table-vendor-26792376.js";import"./BasicModal-9d388b71.js";import"./useWindowSizeFn-e63bb4b0.js";const oe=G({name:"UserSelectModal",components:{BasicModal:Q,BasicTable:E(()=>J(()=>import("./BasicTable-400bb95b.js"),["js/BasicTable-400bb95b.js","js/tinymce-vendor-3c2b3d6e.js","js/antd-vue-vendor-05bfa84d.js","js/index-09260ce4.js","js/useForm-df7d93c5.js","js/componentMap-e2e33057.js","js/jeecg-online-vendor-f57c6456.js","js/vxe-table-vendor-26792376.js","assets/jeecg-online-vendor-13f1d32d.css","js/useFormItem-613b6d5d.js","js/index-37448b2d.js","assets/index-c9eb9973.css","js/index-2ad3f236.js","js/index-64ecc8b2.js","js/BasicModal-9d388b71.js","js/useWindowSizeFn-e63bb4b0.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/download-2caf3e60.js","js/base64Conver-fa2fe1af.js","assets/index-18609d1f.css","js/index-ee632f67.js","assets/index-59756ec7.css","js/index-b5f97370.js","js/useCountdown-d833a954.js","js/useFormItemSingle-4fd81116.js","assets/index-15cc10f8.css","js/JAddInput-a2153936.js","js/areaDataUtil-10873080.js","js/data-9be677e2.js","js/useSelectBiz-b5c21498.js","js/props-ea47501e.js","js/JSelectBiz-b887fca6.js","assets/JSelectBiz-ba37f0a8.css","js/index-2d7d6454.js","assets/index-ec16e2f2.css","js/htmlmixed-6ab39e30.js","js/codemirror-vendor-0a03fef5.js","js/vue-41a95ea0.js","assets/vue-8a3c1e84.css","js/anyword-hint-577f8e6e.js","assets/anyword-hint-77cb08a2.css","js/index-d4a67b72.js","js/bem-a6e46c9e.js","js/props-3977d3d5.js","js/useContextMenu-3e9e42e0.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","js/depart.api-76b2f38a.js","assets/JAddInput-c8b88b61.css","assets/idea-2e5fc283.css","js/JSelectUser-6efbe652.js","assets/JSelectUser-7fda8076.css","js/JImageUpload-1b0b2e46.js","assets/JImageUpload-d7ba7f20.css","js/JDictSelectTag-f0227cc5.js","js/CompTypeEnum-5c91fd88.js","js/JSelectDept-073e3b74.js","js/useTreeBiz-a3326efb.js","assets/JSelectDept-2ce3f5d2.css","js/JEditor-75d90eae.js","js/index-13e7f179.js","js/JPopup-8248ac78.js","assets/JPopup-2f2ed00d.css","js/cron-parser-vendor-a4cfb0b0.js","js/JTreeSelect-73cfd2cd.js","js/JEllipsis-242e7bd0.js","js/JUpload-70acb676.js","js/index-76418551.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/JSearchSelect-4158b9a9.js","js/index-3dc0c4fd.js","js/index-aba90786.js","assets/index-d42612fa.css","assets/componentMap-5d3b78c7.css","js/formUtils-09c7de86.js","assets/useForm-9101c3b7.css","js/injectionKey-69710956.js","assets/BasicTable-18d268be.css"]),{loading:!0})},props:v(g({},te),{modalTitle:{type:String,default:"选择用户"},excludeUserIdList:{type:Array,default:[]}}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:o}){const c=w({x:!1}),l=w(),[S,{closeModal:d}]=Z(()=>{window.innerWidth<900?c.value={x:900}:c.value={x:!1},setTimeout(()=>{l.value&&l.value.setSelectedRowKeys(b.value||[])},800)}),u=N(),p={canResize:!1,bordered:!0,size:"small"},m=Object.assign({},B(e),B(u),p),[{rowSelection:f,visibleChange:h,selectValues:b,indexColumnProps:y,getSelectResult:k,handleDeleteSelected:O,selectRows:P}]=ee(T,m),V=w(e.params);H(f.selectedRowKeys,a=>{l.value&&l.value.setSelectedRowKeys(a)});const M={baseColProps:{xs:24,sm:8,md:6,lg:8,xl:6,xxl:6},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},schemas:[{label:"账号",field:"username",component:"JInput"},{label:"姓名",field:"realname",component:"JInput"}]},A=[{title:"用户账号",dataIndex:"username",width:120,align:"left"},{title:"用户姓名",dataIndex:"realname",width:120},{title:"性别",dataIndex:"sex_dictText",width:50},{title:"手机号码",dataIndex:"phone",width:120},{title:"邮箱",dataIndex:"email"},{title:"状态",dataIndex:"status_dictText",width:80}],F={pagination:!1,showIndexColumn:!1,scroll:{y:390},size:"small",canResize:!1,bordered:!0,rowKey:"id",columns:[{title:"用户姓名",dataIndex:"realname",width:40},{title:"操作",dataIndex:"action",align:"center",width:40,slots:{customRender:"action"}}]};function L(){k((a,i)=>{t("getSelectResult",a,i),d()})}function U(a){let i=e.excludeUserIdList;if(!i)return a;let I=[];if(i.length>0&&a&&a.length>0){for(let x of a)i.indexOf(x.id)<0&&I.push(g({},x));return I}return a}return{handleOk:L,searchInfo:V,register:S,indexColumnProps:y,visibleChange:h,getBindValue:m,getUserList:T,formConfig:M,columns:A,rowSelection:f,selectRows:P,selectedTable:F,handleDeleteSelected:O,tableScroll:c,tableRef:l,afterFetch:U}}}),ae=["onClick"];function se(e,t,o,c,l,S){const d=r("BasicTable"),u=r("a-col"),p=r("Icon"),m=r("a-row"),f=r("BasicModal");return X(),Y("div",null,[s(f,C(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:e.showSelected?"1200px":"900px",wrapClassName:"j-user-select-modal",onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{default:n(()=>[s(m,null,{default:n(()=>[s(u,{span:e.showSelected?18:24},{default:n(()=>[s(d,C({ref:"tableRef",columns:e.columns,scroll:e.tableScroll},e.getBindValue,{useSearchForm:!0,formConfig:e.formConfig,api:e.getUserList,searchInfo:e.searchInfo,rowSelection:e.rowSelection,indexColumnProps:e.indexColumnProps,afterFetch:e.afterFetch}),{tableTitle:n(()=>[]),_:1},16,["columns","scroll","formConfig","api","searchInfo","rowSelection","indexColumnProps","afterFetch"])]),_:1},8,["span"]),s(u,{span:e.showSelected?6:0},{default:n(()=>[s(d,C(e.selectedTable,{dataSource:e.selectRows,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,baseRowStyle:{minHeight:"40px"}}}),{action:n(({record:h})=>[q("a",{href:"javascript:void(0)",onClick:b=>e.handleDeleteSelected(h)},[s(p,{icon:"ant-design:delete-outlined"})],8,ae)]),_:1},16,["dataSource"])]),_:1},8,["span"])]),_:1})]),_:1},16,["onRegister","title","width","onOk","onVisibleChange"])])}const ge=W(oe,[["render",se]]);export{ge as default};
