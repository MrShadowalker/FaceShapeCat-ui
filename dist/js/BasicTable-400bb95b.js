var Jt=Object.defineProperty,en=Object.defineProperties;var tn=Object.getOwnPropertyDescriptors;var gt=Object.getOwnPropertySymbols;var nn=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable;var mt=(e,t,o)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))nn.call(t,o)&&mt(e,o,t[o]);if(gt)for(var o of gt(t))on.call(t,o)&&mt(e,o,t[o]);return e},me=(e,t)=>en(e,tn(t));var re=(e,t,o)=>new Promise((c,s)=>{var a=f=>{try{i(o.next(f))}catch(l){s(l)}},r=f=>{try{i(o.throw(f))}catch(l){s(l)}},i=f=>f.done?c(f.value):Promise.resolve(f.value).then(a,r);i((o=o.apply(e,t)).next())});import{d as he,e as T,Y as A,a6 as K,a7 as ie,F as Ve,ab as Q,Q as $e,E as Ie,ad as ae,k as W,a9 as N,aj as le,Z as oe,f as j,w as Ae,u as n,l as je,h as Pe,n as ye,I as pe,v as ln,q as st,ac as ce,A as $t,ae as be,b as sn,r as it,o as an,H as rn,aa as at,c as cn,av as un,aq as pt,ah as Ne,ai as ht}from"./tinymce-vendor-3c2b3d6e.js";import{ar as Ft,as as dn,at as fn,j as gn,ac as mn,z as pn,K as hn,F as Ge,G as Cn,H as bn,P as Pt,au as yn,av as vn,S as Sn,o as Qe,p as wn,s as kn,aw as _n,R as Tn,d as He,W as rt,aj as Rn,ax as Ct,ay as In,T as Je,az as $n,X as Ot,aA as Fn,D as Pn,n as bt,aB as On,aC as En,aD as xn}from"./antd-vue-vendor-05bfa84d.js";import"./index-09260ce4.js";import{P as An}from"./injectionKey-69710956.js";import{_ as Dn,k as Le,n as Kn,p as Z,o as Et,q as Hn,r as yt,s as Ln,b as Bn,v as Mn,w as Nn,l as zn,x as Vn,y as jn,B as Wn,z as ze,f as Un}from"./index-37448b2d.js";import{_ as ve,B as Ee,at as ge,aq as ot,v as se,i as Ue,w as xe,aS as qn,C as xt,aT as vt,aU as Gn,aV as Xn,aW as Yn,I as Zn,aX as St,x as At,ak as Qn}from"./jeecg-online-vendor-f57c6456.js";import{P as Xe,a as Jn,u as Oe,R as _e,D as eo,I as We,A as Ye,F as Dt,b as to,c as no,d as oo,e as lo}from"./index-2ad3f236.js";import{A as so,a as ao}from"./componentMap-e2e33057.js";import{useWindowSizeFn as io}from"./useWindowSizeFn-e63bb4b0.js";import"./index-64ecc8b2.js";import{u as ro}from"./BasicModal-9d388b71.js";import{B as co,u as uo}from"./useForm-df7d93c5.js";import"./JAddInput-a2153936.js";import"./areaDataUtil-10873080.js";import"./data-9be677e2.js";import"./useFormItem-613b6d5d.js";import"./useSelectBiz-b5c21498.js";import"./props-ea47501e.js";import"./JSelectBiz-b887fca6.js";import"./index-2d7d6454.js";import"./htmlmixed-6ab39e30.js";import"./codemirror-vendor-0a03fef5.js";import"./vue-41a95ea0.js";/* empty css             */import"./anyword-hint-577f8e6e.js";import"./index-d4a67b72.js";import"./bem-a6e46c9e.js";import"./vxe-table-vendor-26792376.js";import"./props-3977d3d5.js";import"./useContextMenu-3e9e42e0.js";import"./depart.api-76b2f38a.js";import"./JSelectUser-6efbe652.js";import"./JSelectDept-073e3b74.js";import"./useTreeBiz-a3326efb.js";import"./JPopup-8248ac78.js";import"./JEllipsis-242e7bd0.js";import"./JDictSelectTag-f0227cc5.js";import"./CompTypeEnum-5c91fd88.js";import"./JTreeSelect-73cfd2cd.js";import"./JSearchSelect-4158b9a9.js";import"./JEditor-75d90eae.js";import"./index-13e7f179.js";import"./JImageUpload-1b0b2e46.js";import"./download-2caf3e60.js";import"./base64Conver-fa2fe1af.js";import"./index-ee632f67.js";import"./index-b5f97370.js";import"./useCountdown-d833a954.js";import"./useFormItemSingle-4fd81116.js";import"./cron-parser-vendor-a4cfb0b0.js";import"./JUpload-70acb676.js";import"./index-76418551.js";import"./index-3dc0c4fd.js";import"./index-aba90786.js";import"./formUtils-09c7de86.js";const fo={key:0},go={key:0},mo=he({__name:"CustomSelectHeader",props:{isRadio:{type:Boolean,required:!0},selectedLength:{type:Number,required:!0},pageSize:{type:Number,required:!0},hideSelectAll:{type:Boolean,default:!1},disabled:{type:Boolean,required:!0}},emits:["select-all"],setup(e,{emit:t}){const o=e,c=t,s=T(()=>o.isRadio?!1:o.selectedLength>0&&o.selectedLength>=o.pageSize),a=T(()=>o.isRadio?!1:o.selectedLength>0&&o.selectedLength<o.pageSize);function r(i){c("select-all",i)}return(i,f)=>{const l=A("a-checkbox");return e.isRadio?(K(),ie("span",fo)):(K(),ie(Ve,{key:1},[e.hideSelectAll?(K(),ie("span",go)):(K(),Q(l,{key:1,disabled:e.disabled,checked:s.value,indeterminate:a.value,"onUpdate:checked":r},null,8,["disabled","checked","indeterminate"]))],64))}}}),po=he({name:"EditTableHeaderIcon",components:{FormOutlined:Ft},props:{title:{type:String,default:""}}});function ho(e,t,o,c,s,a){const r=A("FormOutlined");return K(),ie("span",null,[$e(e.$slots,"default"),Ie(" "+ae(e.title)+" ",1),W(r)])}const Co=ve(po,[["render",ho]]),bo=he({name:"TableHeaderCell",components:{EditTableHeaderCell:Co,BasicHelp:Dn},props:{column:{type:Object,default:()=>({})}},setup(e){const{prefixCls:t}=Le("basic-table-header-cell"),o=T(()=>{var a;return!!((a=e.column)!=null&&a.edit)}),c=T(()=>{var r,i;const a=((r=e.column)==null?void 0:r.customTitle)||((i=e.column)==null?void 0:i.title);return typeof a=="string"?a:""}),s=T(()=>{var a;return(a=e.column)==null?void 0:a.helpMessage});return{prefixCls:t,getIsEdit:o,getTitle:c,getHelpMessage:s}}});const yo={key:1};function vo(e,t,o,c,s,a){const r=A("EditTableHeaderCell"),i=A("BasicHelp");return K(),ie(Ve,null,[e.getIsEdit?(K(),Q(r,{key:0},{default:N(()=>[Ie(ae(e.getTitle),1)]),_:1})):(K(),ie("span",yo,ae(e.getTitle),1)),e.getHelpMessage?(K(),Q(i,{key:2,text:e.getHelpMessage,class:le(`${e.prefixCls}__help`)},null,8,["text","class"])):oe("",!0)],64)}const So=ve(bo,[["render",vo]]);function wo({page:e,type:t,originalElement:o}){return t==="prev"?e===0?null:W(dn,null,null):t==="next"?e===1?null:W(fn,null,null):o}function ko(e){const{t}=Ee(),o=j({}),c=j(!0);Ae(()=>n(e).pagination,l=>{!ge(l)&&l&&(o.value=x(x({},n(o)),l!=null?l:{}))});const s=T(()=>{const{pagination:l}=n(e);return!n(c)||ge(l)&&!l?!1:x(x({current:1,pageSize:Xe,size:"small",defaultPageSize:Xe,showTotal:y=>t("component.table.total",{total:y}),showSizeChanger:!0,pageSizeOptions:Jn,itemRender:wo,showQuickJumper:!0},ge(l)?{}:l),n(o))});function a(l){const y=n(s);o.value=x(x({},ge(y)?{}:y),l)}function r(){return n(s)}function i(){return n(c)}function f(l){return re(this,null,function*(){c.value=l})}return{getPagination:r,getPaginationInfo:s,setShowPagination:f,getShowPagination:i,setPagination:a}}const Fe=new Map;Fe.set("Input",gn);Fe.set("InputNumber",mn);Fe.set("Select",pn);Fe.set("ApiSelect",so);Fe.set("ApiTreeSelect",ao);Fe.set("Switch",hn);Fe.set("Checkbox",Ge);Fe.set("DatePicker",Cn);Fe.set("TimePicker",bn);const _o=({component:e="Input",rule:t=!0,ruleMessage:o,popoverVisible:c,getPopupContainer:s},{attrs:a})=>{const r=Fe.get(e),i=je(r,a);return t?je(Pt,x({overlayClassName:"edit-cell-rule-popover",open:!!c},s?{getPopupContainer:s}:{}),{default:()=>i,content:()=>o}):i},{t:lt}=Ee();function wt(e){return e.includes("Input")?lt("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")||e.includes("DatePicker")||e.includes("TimePicker")?lt("common.chooseText"):""}const To=he({name:"EditableCell",components:{FormOutlined:Ft,CloseOutlined:yn,CheckOutlined:vn,CellComponent:_o,ASpin:Sn},directives:{clickOutside:Kn},props:{value:{type:[String,Number,Boolean,Object],default:""},record:{type:Object},column:{type:Object,default:()=>({})},index:Z.number},setup(e){const t=Oe(),o=j(!1),c=j(),s=j(!1),a=j(""),r=j([]),i=j(e.value),f=j(e.value),l=j(!1),{prefixCls:y}=Le("editable-cell"),u=T(()=>{var m;return((m=e.column)==null?void 0:m.editComponent)||"Input"}),g=T(()=>{var m;return(m=e.column)==null?void 0:m.editRule}),w=T(()=>n(a)&&n(s)),R=T(()=>{const m=n(u);return["Checkbox","Switch"].includes(m)}),S=T(()=>{var B,V;const m=(V=(B=e.column)==null?void 0:B.editComponentProps)!=null?V:{},P=n(u),k={};P==="ApiSelect"&&(k.cache=!0);const E=n(R),p=E?"checked":"value",_=n(i),H=E?ot(_)&&ge(_)?_:!!_:_;return me(x(x({size:"small",getPopupContainer:()=>{var q;return(q=n(t==null?void 0:t.wrapRef.value))!=null?q:document.body},getCalendarContainer:()=>{var q;return(q=n(t==null?void 0:t.wrapRef.value))!=null?q:document.body},placeholder:wt(n(u))},k),Qe(m,"onChange")),{[p]:H})}),h=T(()=>{var H,B;const{editComponentProps:m,editValueMap:P}=e.column,k=n(i);if(P&&se(P))return P(k);if(!n(u).includes("Select"))return k;const _=((H=m==null?void 0:m.options)!=null?H:n(r)||[]).find(V=>`${V.value}`==`${k}`);return(B=_==null?void 0:_.label)!=null?B:k}),C=T(()=>n(R)||n(O)?{}:{width:"calc(100% - 48px)"}),I=T(()=>{const{align:m="center"}=e.column;return`edit-cell-align-${m}`}),O=T(()=>{const{editable:m}=e.record||{};return!!m});Pe(()=>{f.value=e.value,i.value=e.value}),Pe(()=>{const{editable:m}=e.column;(ge(m)||ge(n(O)))&&(o.value=!!m||n(O))});function D(){var m;n(O)||n((m=e.column)==null?void 0:m.editRow)||(a.value="",o.value=!0,ye(()=>{var k;const P=n(c);(k=P==null?void 0:P.focus)==null||k.call(P)}))}function X(P){return re(this,arguments,function*(m){var p,_,H;const k=n(u);m?m!=null&&m.target&&Reflect.has(m.target,"value")?i.value=m.target.value:k==="Checkbox"?i.value=m.target.checked:(Ue(m)||ge(m)||ot(m)||xe(m))&&(i.value=m):i.value=m;const E=(_=(p=e.column)==null?void 0:p.editComponentProps)==null?void 0:_.onChange;E&&se(E)&&E(...arguments),(H=t.emit)==null||H.call(t,"edit-change",{column:e.column,value:n(i),record:pe(e.record)}),Y()})}function Y(){return re(this,null,function*(){const{column:m,record:P}=e,{editRule:k}=m,E=n(i);if(k){if(ge(k)&&!E&&!ot(E)){s.value=!0;const p=n(u);return a.value=wt(p),!1}if(se(k)){const p=yield k(E,P);return p?(a.value=p,s.value=!0,!1):(a.value="",!0)}}return a.value="",!0})}function G(m=!0,P=!0){return re(this,null,function*(){var q;if(P&&!(yield Y()))return!1;const{column:k,index:E,record:p}=e;if(!p)return!1;const{key:_,dataIndex:H}=k,B=n(i);if(!_||!H)return;const V=H||_;if(!p.editable){const{getBindValues:Se}=t,{beforeEditSubmit:we,columns:de}=n(Se);if(we&&se(we)){l.value=!0;const ke=de.map(Re=>Re.dataIndex).filter(Re=>!!Re);let Te=!0;try{Te=yield we({record:wn(p,ke),index:E,key:_,value:B})}catch(Re){Te=!1}finally{l.value=!1}if(Te===!1)return}}kn(p,V,B),m&&((q=t.emit)==null||q.call(t,"edit-end",{record:p,index:E,key:_,value:B})),o.value=!1})}function ue(){return re(this,null,function*(){var m;(m=e.column)!=null&&m.editRow||G()})}function ne(){G()}function v(){var _;o.value=!1,i.value=f.value;const{column:m,index:P,record:k}=e,{key:E,dataIndex:p}=m;(_=t.emit)==null||_.call(t,"edit-cancel",{record:k,index:P,key:p||E,value:n(i)})}function $(){var P;if((P=e.column)!=null&&P.editable||n(O))return;n(u).includes("Input")&&v()}function z(m){var E,p;const{replaceFields:P}=(p=(E=e.column)==null?void 0:E.editComponentProps)!=null?p:{};if(n(u)==="ApiTreeSelect"){const{title:_="title",value:H="value",children:B="children"}=P||{};let V=qn(m,{children:B});V=V.map(q=>({label:q[_],value:q[H]})),r.value=V}else r.value=m}function U(m,P){var k;e.record&&(xe(e.record[m])?(k=e.record[m])==null||k.push(P):e.record[m]=[P])}return e.record&&(U("submitCbs",G),U("validCbs",Y),U("cancelCbs",v),e.column.dataIndex&&(e.record.editValueRefs||(e.record.editValueRefs={}),e.record.editValueRefs[e.column.dataIndex]=i),e.record.onCancelEdit=()=>{var m,P;xe((m=e.record)==null?void 0:m.cancelCbs)&&((P=e.record)==null||P.cancelCbs.forEach(k=>k()))},e.record.onSubmitEdit=()=>re(this,null,function*(){var m,P,k,E,p;if(xe((m=e.record)==null?void 0:m.submitCbs))return(k=(P=e.record)==null?void 0:P.onValid)!=null&&k.call(P)?((((E=e.record)==null?void 0:E.submitCbs)||[]).forEach(H=>H(!1,!1)),(p=t.emit)==null||p.call(t,"edit-row-end"),!0):void 0})),{isEdit:o,prefixCls:y,handleEdit:D,currentValueRef:i,handleSubmit:G,handleChange:X,handleCancel:v,elRef:c,getComponent:u,getRule:g,onClickOutside:$,ruleMessage:a,getRuleVisible:w,getComponentProps:S,handleOptionsChange:z,getWrapperStyle:C,getWrapperClass:I,getRowEditable:O,getValues:h,handleEnter:ue,handleSubmitClick:ne,spinning:l}}});const Ro=["title"];function Io(e,t,o,c,s,a){var g;const r=A("FormOutlined"),i=A("CellComponent"),f=A("CheckOutlined"),l=A("CloseOutlined"),y=A("a-spin"),u=ln("click-outside");return K(),ie("div",{class:le(e.prefixCls)},[st(ce("div",{class:le({[`${e.prefixCls}__normal`]:!0,"ellipsis-cell":e.column.ellipsis}),onClick:t[0]||(t[0]=(...w)=>e.handleEdit&&e.handleEdit(...w))},[ce("div",{class:"cell-content",title:e.column.ellipsis&&(g=e.getValues)!=null?g:""},ae(e.getValues?e.getValues:" "),9,Ro),e.column.editRow?oe("",!0):(K(),Q(r,{key:0,class:le(`${e.prefixCls}__normal-icon`)},null,8,["class"]))],2),[[$t,!e.isEdit]]),e.isEdit?(K(),Q(y,{key:0,spinning:e.spinning},{default:N(()=>[st((K(),ie("div",{class:le(`${e.prefixCls}__wrapper`)},[W(i,be(e.getComponentProps,{component:e.getComponent,style:e.getWrapperStyle,popoverVisible:e.getRuleVisible,rule:e.getRule,ruleMessage:e.ruleMessage,class:e.getWrapperClass,ref:"elRef",onChange:e.handleChange,onOptionsChange:e.handleOptionsChange,onPressEnter:e.handleEnter}),null,16,["component","style","popoverVisible","rule","ruleMessage","class","onChange","onOptionsChange","onPressEnter"]),e.getRowEditable?oe("",!0):(K(),ie("div",{key:0,class:le(`${e.prefixCls}__action`)},[W(f,{class:le([`${e.prefixCls}__icon`,"mx-2"]),onClick:e.handleSubmitClick},null,8,["class","onClick"]),W(l,{class:le(`${e.prefixCls}__icon `),onClick:e.handleCancel},null,8,["class","onClick"])],2))],2)),[[u,e.onClickOutside]])]),_:1},8,["spinning"])):oe("",!0)],2)}const $o=ve(To,[["render",Io]]);function Fo(e){return({text:t,record:o,index:c})=>(pe(o).onValid=()=>re(this,null,function*(){if(xe(o==null?void 0:o.validCbs)){const s=((o==null?void 0:o.validCbs)||[]).map(r=>r());return(yield Promise.all(s)).every(r=>!!r)}else return!1}),pe(o).onEdit=(s,a=!1)=>re(this,null,function*(){var r,i;return a||(o.editable=s),!s&&a?(yield o.onValid())&&(yield(r=o.onSubmitEdit)==null?void 0:r.call(o))?(o.editable=!1,!0):!1:(!s&&!a&&((i=o.onCancelEdit)==null||i.call(o)),!0)}),je($o,{value:t,record:o,column:e,index:c}))}const Ze="j-custom-selected-column";function Po(e,t,o,c,s,a){const{createConfirm:r}=xt(),i=j(),f=j(0),l=j(0),y=j(0),u=j([]),g=j([]);let w=[],R=!1;const S=T(()=>{const d=Kt(s.value,a.value),b=e.value.rowSelection;if((b==null?void 0:b.type)==="checkbox"&&b.getCheckboxProps)for(let L=0,F=d.length;L<F;L++){const M=d[L];b.getCheckboxProps(M).disabled&&(d.splice(L,1),L--,F--)}return d}),h=T(()=>{const{rowSelection:d}=n(e);return d?x({preserveSelectedRowKeys:!0},Qe(d,["onChange","selectedRowKeys"])):null}),C=T(()=>{var d;return((d=h.value)==null?void 0:d.type)==="radio"}),I=T(()=>n(e).autoCreateKey&&!n(e).rowKey),O=T(()=>{const{rowKey:d}=n(e);return n(I)?_e:d}),D=d=>O.value?se(O.value)?O.value(d):d[O.value]:d[_e],X=T(()=>typeof c.value=="boolean"?{}:c.value),Y=T(()=>{const{pageSize:d=10,total:b=S.value.length}=X.value;return d>b?b:d}),G=T(()=>{var d,b;return{onSelectAll:v,isRadio:C.value,selectedLength:S.value.filter(L=>u.value.includes(D(L))).length,pageSize:Y.value,disabled:S.value.length==0,hideSelectAll:(b=(d=n(e))==null?void 0:d.rowSelection)==null?void 0:b.hideSelectAll}});Ae(()=>{var d,b;return(b=(d=n(e))==null?void 0:d.rowSelection)==null?void 0:b.selectedRowKeys},d=>{const b=n(d);Array.isArray(b)&&q(b)},{immediate:!0}),Ae([u,g],()=>{ye(()=>{V()})});const ue=_n(d=>{var b;return y.value=(b=d==null?void 0:d.target)==null?void 0:b.scrollTop},150);let ne=null;Pe(()=>{var d;if(i.value){ne=new ResizeObserver(L=>{for(let F of L)if(F.target===i.value&&F.contentRect){const{height:M}=F.contentRect;f.value=Math.ceil(M)}}),ne.observe(i.value);const b=(d=i.value)==null?void 0:d.querySelector("tbody.ant-table-tbody tr.ant-table-row");if(b){l.value=b.offsetHeight;return}}l.value=50,e.value.size}),Et(()=>re(this,null,function*(){i.value=yield Oo(o.value),i.value.addEventListener("scroll",ue)})),sn(()=>{var d;i.value&&((d=i.value)==null||d.removeEventListener("scroll",ue)),ne!=null&&ne.disconnect()});function v(d){var F,M;if((M=(F=n(e))==null?void 0:F.rowSelection)!=null&&M.onSelectAll&&(R=d,w=we(g.value)),!d){u.value=[],g.value=[],m("all");return}let b=null;const L=()=>{b!=null&&b.update({content:"正在分批全选，请稍后……",cancelButtonProps:{disabled:!0}});let ee=0,fe=100;const Ce=[];if(S.value.forEach((De,et,tt)=>{tt.length>120?ee<=fe&&k(et,Math.max((fe-10)/2,3))?(ee++,U(De,d)):Ce.push(De):U(De,d)}),Ce.length>0)return $(Ce,d,fe);m("all")};S.value.length>120?b=r({title:"全选",content:"当前数据量较大，全选可能会导致页面卡顿，确定要执行此操作吗？",iconType:"warning",onOk:()=>L()}):L()}function $(d,b,L){return new Promise(F=>{(function M(){setTimeout(()=>{const ee=d.splice(0,L);ee.length>0?(ee.forEach(fe=>{U(fe,b)}),M()):setTimeout(()=>{m("all"),setTimeout(()=>F(),0)},500)},300)})()})}function z(d,b){U(d,b),m()}function U(d,b){const L=D(d);if(C.value){u.value=[L],g.value=[d];return}const F=u.value.findIndex(M=>M===L);b?F===-1&&(u.value.push(L),g.value.push(d)):F!==-1&&(u.value.splice(F,1),g.value.splice(F,1))}function m(d="single"){var L;const{rowSelection:b}=n(e);if(b){const{onChange:F}=b;F&&se(F)&&setTimeout(()=>{F(u.value,g.value)},0)}if(t("selection-change",{keys:ke(),rows:de()}),d=="all"){const F=(L=n(e))==null?void 0:L.rowSelection;F!=null&&F.onSelectAll&&F.onSelectAll(R,pe(de()),pe(w))}}function P(d){return d.key===Ze}function k(d,b=3){if(S.value.length>50){const F=y.value-l.value*b<d*l.value,M=d*l.value<y.value+f.value+l.value*b;return F&&M}return!0}function E(d){const{index:b}=d;return e.value.canResize&&!k(b)?"":C.value?_(d):p(d)}function p({record:d}){var F;const b=D(d),L=(M=>{var ee;if(typeof M=="function")try{return(ee=M(d))!=null?ee:{}}catch(fe){}return{}})((F=e.value.rowSelection)==null?void 0:F.getCheckboxProps);return W(Ge,be(L,{key:"j-select__"+b,checked:u.value.includes(b),"onUpdate:checked":M=>z(d,M)}),null)}function _({record:d}){const b=D(d),L=(()=>{const F=e.value.rowSelection;return F!=null&&F.getCheckboxProps?F.getCheckboxProps(d):{}})();return W(Tn,be(L,{key:"j-select__"+b,checked:u.value.includes(b),"onUpdate:checked":F=>z(d,F)}),null)}function H(d){const b=e.value.rowSelection;if(!b)return;const L=b.fixed||d.some(F=>F.fixed==="left");d.unshift(me(x({title:"选择列",flag:"CHECKBOX",key:Ze,width:50,minWidth:50,maxWidth:50,align:"center"},L?{fixed:"left"}:{}),{customRender:E}))}function B(){v(!1)}function V(){u.value.length!==g.value.length&&q(u.value)}function q(d){var M;const b=u.value===d;u.value=d;const L=vt(pe(n(S)).concat(pe(n(g))),ee=>d.includes(D(ee)),{children:(M=e.value.childrenColumnName)!=null?M:"children"}),F=[];d.forEach(ee=>{const fe=L.find(Ce=>D(Ce)===ee);fe&&F.push(fe)}),b&&Se(g.value,F)||(g.value=F,m())}function Se(d,b){let L=[],F=[];if(d.length===b.length){L=d.map(M=>D(M)),F=b.map(M=>D(M));for(let M=0,ee=L.length;M<ee;M++)if(!F.find(Ce=>Ce===L[M]))return!1;return!0}return!1}function we(d){var L;const b=vt(pe(n(S)),()=>!0,{children:(L=e.value.childrenColumnName)!=null?L:"children"});if(d.length===0||d.length===b.length)return b;{const F=b.map(M=>D(M));d.forEach(M=>{const ee=D(M),fe=F.findIndex(Ce=>ee===Ce);fe!=-1&&(F.splice(fe,1),b.splice(fe,1))})}return b}function de(){return n(g)}function ke(){return n(u)}function Te(){return n(h)}function Re(d){const b=u.value.findIndex(L=>L===d);b!==-1&&(u.value.splice(b,1),g.value.splice(b,1))}const Be=T(()=>{const{expandIconColumnIndex:d}=n(e);return h.value==null?d:d==null?1:d});return{getRowSelection:Te,getRowSelectionRef:h,getSelectRows:de,getSelectRowKeys:ke,setSelectedRowKeys:q,deleteSelectRowByKey:Re,selectHeaderProps:G,isCustomSelection:P,handleCustomSelectColumn:H,clearSelectedRowKeys:B,getExpandIconColumnIndex:Be}}function Oo(e){return new Promise(t=>{(function o(){const c=e.querySelector(".ant-table-wrapper .ant-table-body");c?t(c):setTimeout(o,100)})()})}function Kt(e,t){let o=[];return(e||[]).forEach(c=>{o.push(c),c&&typeof c=="object"&&t in c&&(o=[...o,...Kt(c[t],t)])}),o}function Ht(e,t){const{key:o,dataIndex:c,children:s}=e;e.align=e.align||eo,t&&(o||(e.key=c),ge(e.ellipsis)||Object.assign(e,{ellipsis:t})),s&&s.length&&Lt(s,!!t)}function Lt(e,t){e&&e.forEach(o=>{const{children:c}=o;Ht(o,t),Lt(c,t)})}function Eo(e,t,o){const{t:c}=Ee(),{showIndexColumn:s,indexColumnProps:a,isTreeTable:r}=n(e);let i=!1;if(n(r)||(o.forEach(()=>{const l=o.findIndex(y=>y.flag===We);s?i=l===-1:!s&&l!==-1&&o.splice(l,1)}),!i))return;const f=o.some(l=>l.fixed==="left");o.unshift(x(x({flag:We,width:50,title:c("component.table.index"),align:"center",customRender:({index:l})=>{const y=n(t);if(ge(y))return`${l+1}`;const{current:u=1,pageSize:g=Xe}=y;return((u<1?1:u)-1)*g+l+1}},f?{fixed:"left"}:{}),a))}function xo(e,t){const{actionColumn:o,showActionColumn:c}=n(e);if(!o||!c)return;const s=t.findIndex(a=>a.flag===Ye);s===-1&&t.push(me(x(x({},t[s]),o),{flag:Ye}))}function Ao(e,t,o){const c=j(n(e).columns);let s=n(e).columns;const a=T(()=>{const w=He(n(c));if(Eo(e,t,w),xo(e,w),o(w),!w)return[];const{ellipsis:R}=n(e);return w.forEach(S=>{const{customRender:h,slots:C}=S;Ht(S,Reflect.has(S,"ellipsis")?!!S.ellipsis:!!R&&!h&&!C)}),w});function r(w){const R=w.ifShow;let S=!0;return ge(R)&&(S=R),se(R)&&(S=R(w)),S}const{hasPermission:i}=Hn(),f=T(()=>{const w=kt(n(a)),S=He(w).filter(h=>i(h.auth)&&r(h)).map(h=>{var ne;(ne=h.slots)!=null&&ne.customRender&&(h.slotsBak=h.slots,delete h.slots);const{slots:C,customRender:I,format:O,edit:D,editRow:X,flag:Y,title:G}=h;(!C||!(C!=null&&C.title))&&(h.customTitle=h.title,Reflect.deleteProperty(h,"title")),h.children&&(h.title=G);const ue=[We,Ye].includes(Y);return!I&&O&&!D&&!ue&&(h.customRender=({text:v,record:$,index:z})=>Do(v,O,$,z)),(D||X)&&!ue&&(h.customRender=Fo(h)),it(h)});if(e.value.expandedRowKeys&&!e.value.isTreeTable){let h=0;const C=S.findIndex(D=>D.key===Ze);C!=-1&&(h=C+1);const I=S[h+1];let O=rt.EXPAND_COLUMN;I&&(I.fixed==!0||I.fixed=="left")&&(O=Object.assign(O,{fixed:"left"})),S.splice(h,0,O)}return S});Ae(()=>n(e).columns,w=>{var R;c.value=w,s=(R=w==null?void 0:w.filter(S=>!S.flag))!=null?R:[]});function l(w,R){!w||!R||s.forEach(S=>{if(S.dataIndex===w){Object.assign(S,R);return}})}function y(w){const R=He(w);if(!xe(R))return;if(R.length<=0){c.value=[];return}const S=R[0],h=s.map(C=>C.dataIndex);if(!Ue(S)&&!xe(S))c.value=R;else{const C=R.map(O=>O.toString()),I=[];s.forEach(O=>{var D;I.push(me(x({},O),{defaultHidden:!C.includes(((D=O.dataIndex)==null?void 0:D.toString())||O.key)}))}),Rn(h,R)||I.sort((O,D)=>{var X,Y;return C.indexOf((X=O.dataIndex)==null?void 0:X.toString())-C.indexOf((Y=D.dataIndex)==null?void 0:Y.toString())}),c.value=I}}function u(w){const{ignoreIndex:R,ignoreAction:S,sort:h}=w||{};let C=pe(n(a));return R&&(C=C.filter(I=>I.flag!==We)),S&&(C=C.filter(I=>I.flag!==Ye)),C=C.filter(I=>I.key!==Ze),h&&(C=kt(C)),C}function g(){return s}return{getColumnsRef:a,getCacheColumns:g,getColumns:u,setColumns:y,getViewColumns:f,setCacheColumnsByField:l}}function kt(e){const t=[],o=[],c=[];for(const s of e){if(s.fixed==="left"){t.push(s);continue}if(s.fixed==="right"){o.push(s);continue}c.push(s)}return[...t,...c,...o].filter(s=>!s.defaultHidden)}function Do(e,t,o,c){if(!t)return e;if(se(t))return t(e,o,c);try{const s="date|";if(Ue(t)&&t.startsWith(s)){const a=t.replace(s,"");return a?Gn(e,a):e}if(Xn(t))return t.get(e)}catch(s){return e}}function Ko(e,{getPaginationInfo:t,setPagination:o,setLoading:c,validate:s,clearSelectedRowKeys:a,tableData:r},i){const f=it({sortInfo:{},filterInfo:{}}),l=j([]),y=j({});Pe(()=>{r.value=n(l)}),Ae(()=>n(e).dataSource,()=>{const{dataSource:v,api:$}=n(e);!$&&v&&(l.value=v)},{immediate:!0});function u(v,$,z){const{clearSelectOnPageChange:U,sortFn:m,filterFn:P}=n(e);U&&a(),o(v);const k={};if(z&&se(m)){const E=m(z);f.sortInfo=E,k.sortInfo=E}if($&&se(P)){const E=P($);f.filterInfo=E,k.filterInfo=E}X(k)}function g(v){!v||!Array.isArray(v)||v.forEach($=>{$[_e]||($[_e]=yt()),$.children&&$.children.length&&g($.children)})}const w=T(()=>n(e).autoCreateKey&&!n(e).rowKey),R=T(()=>{const{rowKey:v}=n(e);return n(w)?_e:v}),S=T(()=>{const v=n(l);if(!v||v.length===0)return n(l);if(n(w)){const $=v[0],z=v[v.length-1];if($&&z&&(!$[_e]||!z[_e])){const U=He(n(l));U.forEach(m=>{m[_e]||(m[_e]=yt()),m.children&&m.children.length&&g(m.children)}),l.value=U}}return n(l)});function h(v,$,z){return re(this,null,function*(){return l.value[v]&&(l.value[v][$]=z),l.value[v]})}function C(v,$){const z=D(v);if(z){for(const U in z)Reflect.has($,U)&&(z[U]=$[U]);return z}}function I(v){var U,m,P;if(!l.value||l.value.length==0)return;const $=n(R);if(!$)return;const z=Array.isArray(v)?v:[v];for(const k of z){let E=l.value.findIndex(p=>{let _;return typeof $=="function"?_=$(p):_=$,p[_]===k});E>=0&&l.value.splice(E,1),E=(U=n(e).dataSource)==null?void 0:U.findIndex(p=>{let _;return typeof $=="function"?_=$(p):_=$,p[_]===k}),typeof E!="undefined"&&E!==-1&&((m=n(e).dataSource)==null||m.splice(E,1))}o({total:(P=n(e).dataSource)==null?void 0:P.length})}function O(v,$){var z;return $=$!=null?$:(z=l.value)==null?void 0:z.length,n(l).splice($,0,v),n(l)}function D(v){if(!l.value||l.value.length==0)return;const $=n(R);if(!$)return;const{childrenColumnName:z="children"}=n(e);return(m=>{let P;return m.some(function k(E){if(typeof $=="function"){if($(E)===v)return P=E,!0}else if(Reflect.has(E,$)&&E[$]===v)return P=E,!0;return E[z]&&E[z].some(k)}),P})(l.value)}function X(v){return re(this,null,function*(){var _,H,B;const{api:$,searchInfo:z,defSort:U,fetchSetting:m,beforeFetch:P,afterFetch:k,useSearchForm:E,pagination:p}=n(e);if(!(!$||!se($)))try{c(!0);const{pageField:V,sizeField:q,listField:Se,totalField:we}=Object.assign({},Dt,m);let de={};const{current:ke=1,pageSize:Te=Xe}=n(t);ge(p)&&!p||ge(t)?de={}:(de[V]=v&&v.page||ke,de[q]=Te);const{sortInfo:Re={},filterInfo:Be}=f;let d=x(x(x(x(x(x(x(x(x({},de),E?yield s():{}),z),U),(_=v==null?void 0:v.searchInfo)!=null?_:{}),Re),Be),(H=v==null?void 0:v.sortInfo)!=null?H:{}),(B=v==null?void 0:v.filterInfo)!=null?B:{});P&&se(P)&&(d=(yield P(d))||d);const b=yield $(d);y.value=b;const L=Array.isArray(b);let F=L?b:Ct(b,Se);const M=L?0:Ct(b,we);if(M){const ee=Math.ceil(Number(M)/Te);if(ke>ee)return o({current:ee}),yield X(v)}return k&&se(k)&&(F=(yield k(F))||F),l.value=F,o({total:Number(M)||0}),v&&v.page&&o({current:v.page||1}),i("fetch-success",{items:n(F),total:Number(M)}),F}catch(V){i("fetch-error",V),l.value=[],o({total:0})}finally{c(!1)}})}function Y(v){l.value=v}function G(){return S.value}function ue(){return y.value}function ne(v){return re(this,null,function*(){return yield X(v)})}return an(()=>{Ln(()=>{n(e).immediate&&X()},16)}),{getDataSourceRef:S,getDataSource:G,getRawDataSource:ue,getRowKey:R,setTableData:Y,getAutoCreateKey:w,fetch:X,reload:ne,updateTableData:h,updateTableDataRecord:C,deleteTableDataRecord:I,insertTableDataRecord:O,findTableDataRecord:D,handleTableChange:u}}function Ho(e){const t=j(n(e).loading);Ae(()=>n(e).loading,s=>{t.value=s});const o=T(()=>n(t));function c(s){t.value=s}return{getLoading:o,setLoading:c}}function Lo(e,t,o,c,s){const a=j(null),r=ro(),i=Bn(l,100),f=T(()=>{const{canResize:C,scroll:I}=n(e);return C&&!(I||{}).y});Ae(()=>{var C;return[n(f),(C=n(s))==null?void 0:C.length]},()=>{i()},{flush:"post"});function l(){ye(()=>{R()})}function y(C){var I;a.value=C,(I=r==null?void 0:r.redoModalHeight)==null||I.call(r)}let u,g,w;function R(){return re(this,null,function*(){var E,p;const{resizeHeightOffset:C,pagination:I,maxHeight:O,minHeight:D}=n(e),X=n(s),Y=n(t);if(!Y)return;const G=Y.$el;if(!G||!w&&(w=G.querySelector(".ant-table-tbody"),!w))return;const ue=w.scrollHeight>w.clientHeight,ne=w.scrollWidth>w.clientWidth;if(ue?G.classList.contains("hide-scrollbar-y")&&G.classList.remove("hide-scrollbar-y"):!G.classList.contains("hide-scrollbar-y")&&G.classList.add("hide-scrollbar-y"),ne?G.classList.contains("hide-scrollbar-x")&&G.classList.remove("hide-scrollbar-x"):!G.classList.contains("hide-scrollbar-x")&&G.classList.add("hide-scrollbar-x"),w.style.height="unset",!n(f)||!X||X.length===0)return;yield ye();const v=G.querySelector(".ant-table-thead");if(!v)return;const{bottomIncludeBody:$}=Mn(v),z=32;let U=2;if(ge(I))U=-8;else if(u=G.querySelector(".ant-pagination"),u){const _=u.offsetHeight;U+=_||0}else U+=24;let m=0;if(!ge(I))if(!g)g=G.querySelector(".ant-table-footer");else{const _=g.offsetHeight;m+=_||0}let P=0;v&&(P=v.offsetHeight);let k=$-(C||0)-z-U-m-P;k=(E=k<D?D:k)!=null?E:k,k=(p=k>O?O:k)!=null?p:k,y(k),w.style.height=`${k}px`})}io(R,280),Et(()=>{R(),ye(()=>{i()})});const S=T(()=>{var ne,v;let C=0;const{maxColumnWidth:I}=n(e),O=I!=null?I:150,D=n(o).filter($=>!$.defaultHidden);D.forEach($=>{C+=Number.parseInt($.width)||0});const Y=D.filter($=>!Reflect.has($,"width")).length;Y!==0&&(C+=Y*O);const G=n(t);return((v=(ne=G==null?void 0:G.$el)==null?void 0:ne.offsetWidth)!=null?v:0)>C?"100%":C});return{getScrollRef:T(()=>{const C=n(a),{canResize:I,scroll:O}=n(e);return x({x:n(S),y:I?C:null,scrollToFirstRowOnChange:!1},O)}),redoHeight:l}}function Bo(e,t,o){return!t||o?e[_e]:Ue(t)?e[t]:se(t)?e[t(e)]:null}function Mo(e,{setSelectedRowKeys:t,getSelectRowKeys:o,getAutoCreateKey:c,clearSelectedRowKeys:s,emit:a}){return{customRow:(i,f)=>({onClick:l=>{l==null||l.stopPropagation();function y(){var I;const{rowSelection:u,rowKey:g,clickToRowSelect:w}=n(e);if(!u||!w)return;const R=o(),S=Bo(i,g,n(c));if(!S)return;if(u.type==="checkbox"){const O=(I=l.composedPath)==null?void 0:I.call(l).find(Y=>Y.tagName==="TR");if(!O)return;const D=O.querySelector("input[type=checkbox]");if(!D||D.hasAttribute("disabled"))return;if(!R.includes(S)){t([...R,S]);return}const X=R.findIndex(Y=>Y===S);R.splice(X,1),t(R);return}if(u.type==="radio"){const O=e.value.rowSelection;if(O.getCheckboxProps&&O.getCheckboxProps(i).disabled)return;if(!R.includes(S)){R.length&&s(),t([S]);return}s()}}y(),a("row-click",i,f,l)},onDblclick:l=>{a("row-dbClick",i,f,l)},onContextmenu:l=>{a("row-contextmenu",i,f,l)},onMouseenter:l=>{a("row-mouseenter",i,f,l)},onMouseleave:l=>{a("row-mouseleave",i,f,l)}})}}function No(e,t){function o(c,s){const{striped:a,rowClassName:r}=n(e),i=[];return a&&i.push((s||0)%2===1?`${t}-row__striped`:""),r&&se(r)&&i.push(r(c,s)),i.filter(f=>!!f).join(" ")}return{getRowClassName:o}}function zo(e,t,o){let c=!1;const s=Oe(),a=Yn(),{createMessage:r}=xt(),i=T(()=>{var I;let{fullPath:S}=Zn.currentRoute.value,h=S.replace(/[\/\\]/g,"_"),C=(I=s.getBindValues.value.tableSetting)==null?void 0:I.cacheKey;return C&&(h+=":"+C),"columnCache:"+h});Pe(()=>{s.getColumns().length&&f()});function f(){return re(this,null,function*(){if(c)return;c=!0;let S=a.get(i.value);if(S&&S.checkedList){const{checkedList:h,sortedList:C,sortableOrder:I,checkIndex:O}=S;yield ye(),e.sortableOrder.value=I,e.state.checkedList=h,e.plainSortOptions.value.sort((D,X)=>C.indexOf(D.value)-C.indexOf(X.value)),h.sort((D,X)=>C.indexOf(D)-C.indexOf(X)),O&&s.setProps({showIndexColumn:!0}),t(h),l(S)}})}function l(S){return re(this,null,function*(){const{fixedColumns:h}=S,C=e.plainOptions.value;for(const I of C){let O=h.find(D=>D.key===(I.key||I.dataIndex));O&&(yield ye(),o(I,O.fixed))}})}const y=/^(true|left|right)$/;function u(){var C;let S=[];const h=e.plainOptions.value;for(const I of h)y.test(((C=I.fixed)!=null?C:"").toString())&&S.push({key:I.key||I.dataIndex,fixed:I.fixed===!0?"left":I.fixed});return S}function g(){const{checkedList:S}=e.state,h=n(e.plainSortOptions).map(C=>C.value);a.set(i.value,{checkedList:S,sortedList:h,checkIndex:n(e.checkIndex),sortableOrder:n(e.sortableOrder),fixedColumns:u()}),r.success("保存成功"),e.popoverVisible.value=!1}function w(){return re(this,null,function*(){yield R(),a.remove(i.value),r.success("重置成功")})}function R(){return re(this,null,function*(){var h;const S=e.plainOptions.value;for(const C of S)C.fixed,y.test(((h=C.fixed)!=null?h:"").toString())&&(yield ye(),o(C,null))})}return{saveSetting:g,resetSetting:w}}const Vo=he({name:"ColumnSetting",props:{isMobile:Boolean},components:{SettingOutlined:In,Popover:Pt,Tooltip:Je,Checkbox:Ge,CheckboxGroup:Ge.Group,DragOutlined:$n,ScrollContainer:Nn,Divider:Ot,Icon:zn},emits:["columns-change"],setup(e,{emit:t,attrs:o}){const{t:c}=Ee(),s=Oe(),a=j(!0);ye(()=>a.value=!1);const r=Qe(s.getRowSelection(),"selectedRowKeys");let i=!1;const f=j([]),l=j([]),y=j([]),u=j(null),g=it({checkAll:!0,checkedList:[],defaultCheckList:[]}),w=j(!1),R=j(!1),{prefixCls:S}=Le("basic-column-setting"),h=T(()=>n(s==null?void 0:s.getBindValues)||{}),C=T(()=>{let p={};return e.isMobile&&(p.open=!1),p});let I;const O=j(),{saveSetting:D,resetSetting:X}=zo({state:g,popoverVisible:a,plainOptions:l,plainSortOptions:y,sortableOrder:O,checkIndex:w},k,P);Pe(()=>{setTimeout(()=>{s.getColumns().length&&!g.isInit&&G()},0)}),Pe(()=>{const p=n(h);w.value=!!p.showIndexColumn,R.value=!!p.rowSelection});function Y(){const p=[];return s.getColumns({ignoreIndex:!0,ignoreAction:!0}).forEach(_=>{p.push(x({label:_.title||_.customTitle,value:_.dataIndex||_.title},_))}),p}function G(){const p=Y(),_=s.getColumns({ignoreAction:!0}).map(H=>H.defaultHidden?"":H.dataIndex||H.title).filter(Boolean);l.value.length?n(l).forEach(H=>{const B=p.find(V=>V.dataIndex===H.dataIndex);B&&(H.fixed=B.fixed)}):(l.value=p,y.value=p,f.value=p,g.defaultCheckList=_),g.isInit=!0,g.checkedList=_}function ue(p){const _=l.value.map(H=>H.value);p.target.checked?(g.checkedList=_,k(_)):(g.checkedList=[],k([]))}const ne=T(()=>{const p=l.value.length;let _=g.checkedList.length;return n(w)&&_--,_>0&&_<p});function v(p){const _=y.value.length;g.checkAll=p.length===_;const H=n(y).map(B=>B.value);p.sort((B,V)=>H.indexOf(B)-H.indexOf(V)),k(p)}function $(){g.checkedList=s.getColumns({ignoreAction:!0}).map(p=>p.dataIndex||p.title).filter(Boolean),g.checkAll=!0,l.value=n(f),y.value=n(f),k(s.getCacheColumns()),O.value&&I.sort(O.value),X()}function z(){i||ye(()=>{const p=n(u);if(!p)return;const _=p.$el;_&&(I=Vn.create(n(_),{animation:500,delay:400,delayOnTouchOnly:!0,handle:".table-column-drag-icon ",onEnd:H=>{const{oldIndex:B,newIndex:V}=H;if(St(B)||St(V)||B===V)return;const q=He(y.value);if(B>V?(q.splice(V,0,q[B]),q.splice(B+1,1)):(q.splice(V+1,0,q[B]),q.splice(B,1)),y.value=q,g.checkedList.length!=q.length){const we=q.map(de=>de.value).filter(de=>g.checkedList.find(ke=>ke===de));k(we)}else k(q)}}),O.value||(O.value=I.toArray()),i=!0)})}function U(p){s.setProps({showIndexColumn:p.target.checked})}function m(p){s.setProps({rowSelection:p.target.checked?r:void 0})}function P(p,_){var q;if(!g.checkedList.includes(p.dataIndex))return;const H=Y(),B=p.fixed===_?!1:_,V=H.findIndex(Se=>Se.dataIndex===p.dataIndex);V!==-1&&(H[V].fixed=B),p.fixed=B,B&&!p.width&&(p.width=100),(q=s.setCacheColumnsByField)==null||q.call(s,p.dataIndex,{fixed:B}),k(H)}function k(p){s.setColumns(p);const _=n(y).map(H=>{const B=p.findIndex(V=>V===H.value||typeof V!="string"&&V.dataIndex===H.value)!==-1;return{dataIndex:H.value,fixed:H.fixed,visible:B}});t("columns-change",_)}function E(){return se(o.getPopupContainer)?o.getPopupContainer():At()}return me(x({getBindProps:C,t:c},rn(g)),{popoverVisible:a,indeterminate:ne,onCheckAllChange:ue,onChange:v,plainOptions:l,reset:$,saveSetting:D,prefixCls:S,columnListRef:u,handleVisibleChange:z,checkIndex:w,checkSelect:R,handleIndexCheckChange:U,handleSelectCheckChange:m,defaultRowSelection:r,handleColumnFixed:P,getPopupContainer:E})}});function jo(e,t,o,c,s,a){const r=A("Checkbox"),i=A("DragOutlined"),f=A("Icon"),l=A("Tooltip"),y=A("Divider"),u=A("CheckboxGroup"),g=A("ScrollContainer"),w=A("a-button"),R=A("SettingOutlined"),S=A("Popover");return K(),Q(l,be({placement:"top"},e.getBindProps),{title:N(()=>[ce("span",null,ae(e.t("component.table.settingColumn")),1)]),default:N(()=>[W(S,{open:e.popoverVisible,"onUpdate:open":t[3]||(t[3]=h=>e.popoverVisible=h),placement:"bottomLeft",trigger:"click",onOpenChange:e.handleVisibleChange,overlayClassName:`${e.prefixCls}__cloumn-list`,getPopupContainer:e.getPopupContainer},{title:N(()=>[ce("div",{class:le(`${e.prefixCls}__popover-title`)},[W(r,{indeterminate:e.indeterminate,checked:e.checkAll,"onUpdate:checked":t[0]||(t[0]=h=>e.checkAll=h),onChange:e.onCheckAllChange},{default:N(()=>[Ie(ae(e.t("component.table.settingColumnShow")),1)]),_:1},8,["indeterminate","checked","onChange"]),W(r,{checked:e.checkIndex,"onUpdate:checked":t[1]||(t[1]=h=>e.checkIndex=h),onChange:e.handleIndexCheckChange},{default:N(()=>[Ie(ae(e.t("component.table.settingIndexColumnShow")),1)]),_:1},8,["checked","onChange"])],2)]),content:N(()=>[W(g,null,{default:N(()=>[W(u,{value:e.checkedList,"onUpdate:value":t[2]||(t[2]=h=>e.checkedList=h),onChange:e.onChange,ref:"columnListRef"},{default:N(()=>[(K(!0),ie(Ve,null,at(e.plainOptions,h=>(K(),ie(Ve,{key:h.value},["ifShow"in h&&!h.ifShow?oe("",!0):(K(),ie("div",{key:0,class:le(`${e.prefixCls}__check-item`)},[W(i,{class:"table-column-drag-icon"}),W(r,{value:h.value},{default:N(()=>[Ie(ae(h.label),1)]),_:2},1032,["value"]),W(l,{placement:"bottomLeft",mouseLeaveDelay:.4,getPopupContainer:e.getPopupContainer},{title:N(()=>[Ie(ae(e.t("component.table.settingFixedLeft")),1)]),default:N(()=>[W(f,{icon:"line-md:arrow-align-left",class:le([`${e.prefixCls}__fixed-left`,{active:h.fixed==="left",disabled:!e.checkedList.includes(h.value)}]),onClick:C=>e.handleColumnFixed(h,"left")},null,8,["class","onClick"])]),_:2},1032,["getPopupContainer"]),W(y,{type:"vertical"}),W(l,{placement:"bottomLeft",mouseLeaveDelay:.4,getPopupContainer:e.getPopupContainer},{title:N(()=>[Ie(ae(e.t("component.table.settingFixedRight")),1)]),default:N(()=>[W(f,{icon:"line-md:arrow-align-left",class:le([`${e.prefixCls}__fixed-right`,{active:h.fixed==="right",disabled:!e.checkedList.includes(h.value)}]),onClick:C=>e.handleColumnFixed(h,"right")},null,8,["class","onClick"])]),_:2},1032,["getPopupContainer"])],2))],64))),128))]),_:1},8,["value","onChange"])]),_:1}),ce("div",{class:le(`${e.prefixCls}__popover-footer`)},[W(w,{size:"small",onClick:e.reset},{default:N(()=>[Ie(ae(e.t("common.resetText")),1)]),_:1},8,["onClick"]),W(w,{size:"small",type:"primary",onClick:e.saveSetting},{default:N(()=>[Ie(" 保存 ")]),_:1},8,["onClick"])],2)]),default:N(()=>[W(R)]),_:1},8,["open","onOpenChange","overlayClassName","getPopupContainer"])]),_:1},16)}const Wo=ve(Vo,[["render",jo]]),Uo=he({name:"SizeSetting",props:{isMobile:Boolean},components:{ColumnHeightOutlined:Fn,Tooltip:Je,Dropdown:Pn,Menu:bt,MenuItem:bt.Item},setup(e){const t=Oe(),{t:o}=Ee(),c=j([t.getSize()]),s=T(()=>{let r={};return e.isMobile&&(r.visible=!1),r});function a({key:r}){c.value=[r],t.setProps({size:r})}return{getBindProps:s,handleTitleClick:a,selectedKeysRef:c,getPopupContainer:At,t:o}}});function qo(e,t,o,c,s,a){const r=A("ColumnHeightOutlined"),i=A("MenuItem"),f=A("Menu"),l=A("Dropdown"),y=A("Tooltip");return K(),Q(y,be({placement:"top"},e.getBindProps),{title:N(()=>[ce("span",null,ae(e.t("component.table.settingDens")),1)]),default:N(()=>[W(l,{placement:"bottom",trigger:["click"],getPopupContainer:e.getPopupContainer},{overlay:N(()=>[W(f,{onClick:e.handleTitleClick,selectable:"",selectedKeys:e.selectedKeysRef,"onUpdate:selectedKeys":t[0]||(t[0]=u=>e.selectedKeysRef=u)},{default:N(()=>[W(i,{key:"default"},{default:N(()=>[ce("span",null,ae(e.t("component.table.settingDensDefault")),1)]),_:1}),W(i,{key:"middle"},{default:N(()=>[ce("span",null,ae(e.t("component.table.settingDensMiddle")),1)]),_:1}),W(i,{key:"small"},{default:N(()=>[ce("span",null,ae(e.t("component.table.settingDensSmall")),1)]),_:1})]),_:1},8,["onClick","selectedKeys"])]),default:N(()=>[W(r)]),_:1},8,["getPopupContainer"])]),_:1},16)}const Go=ve(Uo,[["render",qo]]),Xo=he({name:"RedoSetting",props:{isMobile:Boolean},components:{RedoOutlined:On,Tooltip:Je},setup(e){const t=Oe(),{t:o}=Ee(),c=T(()=>{let a={};return e.isMobile&&(a.visible=!1),a});function s(){t.reload(),t.emit("table-redo")}return{getBindProps:c,redo:s,t:o}}});function Yo(e,t,o,c,s,a){const r=A("RedoOutlined"),i=A("Tooltip");return K(),Q(i,be({placement:"top"},e.getBindProps),{title:N(()=>[ce("span",null,ae(e.t("common.redo")),1)]),default:N(()=>[W(r,{onClick:e.redo},null,8,["onClick"])]),_:1},16)}const Zo=ve(Xo,[["render",Yo]]),Qo=he({name:"FullScreenSetting",props:{isMobile:Boolean},components:{FullscreenExitOutlined:En,FullscreenOutlined:xn,Tooltip:Je},setup(e){const t=Oe(),{t:o}=Ee(),{toggle:c,isFullscreen:s}=jn(t.wrapRef);return{getBindProps:T(()=>{let r={};return e.isMobile&&(r.visible=!1),r}),toggle:c,isFullscreen:s,t:o}}});function Jo(e,t,o,c,s,a){const r=A("FullscreenOutlined"),i=A("FullscreenExitOutlined"),f=A("Tooltip");return K(),Q(f,be({placement:"top"},e.getBindProps),{title:N(()=>[ce("span",null,ae(e.t("component.table.settingFullScreen")),1)]),default:N(()=>[e.isFullscreen?(K(),Q(i,{key:1,onClick:e.toggle},null,8,["onClick"])):(K(),Q(r,{key:0,onClick:e.toggle},null,8,["onClick"]))]),_:1},16)}const el=ve(Qo,[["render",Jo]]),tl=he({name:"TableSetting",components:{ColumnSetting:Wo,SizeSetting:Go,RedoSetting:Zo,FullScreenSetting:el},props:{setting:{type:Object,default:()=>({})},mode:String},emits:["columns-change"],setup(e,{emit:t}){const{t:o}=Ee(),c=Oe(),s=T(()=>x({redo:!0,size:!0,setting:!0,fullScreen:!1},e.setting)),a=T(()=>e.mode==="mobile");function r(f){t("columns-change",f)}function i(){return c?n(c.wrapRef):document.body}return{getSetting:s,t:o,handleColumnChange:r,getTableContainer:i,isMobile:a}}});const nl={class:"table-settings"};function ol(e,t,o,c,s,a){const r=A("RedoSetting"),i=A("SizeSetting"),f=A("ColumnSetting"),l=A("FullScreenSetting");return K(),ie("div",nl,[e.getSetting.redo?(K(),Q(r,{key:0,isMobile:e.isMobile,getPopupContainer:e.getTableContainer},null,8,["isMobile","getPopupContainer"])):oe("",!0),e.getSetting.size?(K(),Q(i,{key:1,isMobile:e.isMobile,getPopupContainer:e.getTableContainer},null,8,["isMobile","getPopupContainer"])):oe("",!0),e.getSetting.setting?(K(),Q(f,{key:2,isMobile:e.isMobile,onColumnsChange:e.handleColumnChange,getPopupContainer:e.getTableContainer},null,8,["isMobile","onColumnsChange","getPopupContainer"])):oe("",!0),e.getSetting.fullScreen?(K(),Q(l,{key:3,isMobile:e.isMobile,getPopupContainer:e.getTableContainer},null,8,["isMobile","getPopupContainer"])):oe("",!0)])}const ll=ve(tl,[["render",ol]]),sl=he({name:"BasicTableTitle",components:{BasicTitle:Wn},props:{title:{type:[Function,String]},getSelectRows:{type:Function},helpMessage:{type:[String,Array]}},setup(e){const{prefixCls:t}=Le("basic-table-title");return{getTitle:T(()=>{const{title:c,getSelectRows:s=()=>{}}=e;let a=c;return se(c)&&(a=c({selectRows:s()})),a}),prefixCls:t}}});function al(e,t,o,c,s,a){const r=A("BasicTitle");return e.getTitle?(K(),Q(r,{key:0,class:le(e.prefixCls),helpMessage:e.helpMessage},{default:N(()=>[Ie(ae(e.getTitle),1)]),_:1},8,["class","helpMessage"])):oe("",!0)}const il=ve(sl,[["render",al]]),rl=he({name:"BasicTableHeader",components:{Divider:Ot,TableTitle:il,TableSetting:ll},props:{title:{type:[Function,String]},tableSetting:{type:Object},showTableSetting:{type:Boolean},titleHelpMessage:{type:[String,Array],default:""}},emits:["columns-change"],setup(e,{emit:t}){const{prefixCls:o}=Le("basic-table-header");function c(y){t("columns-change",y)}const{getSelectRowKeys:s,setSelectedRowKeys:a,getRowSelection:r}=Oe(),i=T(()=>s()),f=T(()=>r()),l=T(()=>{var y;return((y=f.value)==null?void 0:y.preserveSelectedRowKeys)===!0});return{prefixCls:o,handleColumnChange:c,selectRowKeys:i,setSelectedRowKeys:a,openRowSelection:f,isAcrossPage:l}}});const cl={style:{width:"100%"}},ul={key:0,style:{margin:"5px"}},dl={style:{margin:"-4px 0 -2px","padding-top":"5px"}},fl={key:0},gl={key:1};function ml(e,t,o,c,s,a){const r=A("TableTitle"),i=A("Divider"),f=A("TableSetting"),l=A("a-button"),y=A("a-popover"),u=A("a-divider"),g=A("a-alert");return K(),ie("div",cl,[e.$slots.headerTop?(K(),ie("div",ul,[$e(e.$slots,"headerTop")])):oe("",!0),ce("div",{class:le(`flex items-center ${e.prefixCls}__table-title-box`)},[ce("div",{class:le(`${e.prefixCls}__tableTitle`)},[e.$slots.tableTitle?$e(e.$slots,"tableTitle",{key:0}):oe("",!0),!e.$slots.tableTitle&&e.title?(K(),Q(r,{key:1,helpMessage:e.titleHelpMessage,title:e.title},null,8,["helpMessage","title"])):oe("",!0)],2),ce("div",{class:le(`${e.prefixCls}__toolbar`)},[$e(e.$slots,"toolbar"),e.$slots.toolbar&&e.showTableSetting?(K(),Q(i,{key:0,type:"vertical"})):oe("",!0),e.showTableSetting?(K(),Q(f,{key:1,class:le(`${e.prefixCls}__toolbar-desktop`),style:{"white-space":"nowrap"},setting:e.tableSetting,onColumnsChange:e.handleColumnChange},null,8,["class","setting","onColumnsChange"])):oe("",!0),W(y,{overlayClassName:`${e.prefixCls}__toolbar-mobile`,trigger:"click",placement:"left",getPopupContainer:w=>w==null?void 0:w.parentElement},{content:N(()=>[e.showTableSetting?(K(),Q(f,{key:0,mode:"mobile",setting:e.tableSetting,onColumnsChange:e.handleColumnChange},null,8,["setting","onColumnsChange"])):oe("",!0)]),default:N(()=>[e.showTableSetting?(K(),Q(l,{key:0,class:le(`${e.prefixCls}__toolbar-mobile`),type:"text",preIcon:"ant-design:menu",shape:"circle"},null,8,["class"])):oe("",!0)]),_:1},8,["overlayClassName","getPopupContainer"])],2)],2),ce("div",dl,[$e(e.$slots,"tableTop",{},()=>[e.openRowSelection!=null?(K(),Q(g,{key:0,type:"info","show-icon":"",class:"alert"},{message:N(()=>[e.selectRowKeys.length>0?(K(),ie(Ve,{key:0},[ce("span",null,[ce("span",null,"已选中 "+ae(e.selectRowKeys.length)+" 条记录",1),e.isAcrossPage?(K(),ie("span",fl,"(可跨页)")):oe("",!0)]),W(u,{type:"vertical"}),ce("a",{onClick:t[0]||(t[0]=w=>e.setSelectedRowKeys([]))},"清空"),$e(e.$slots,"alertAfter")],64)):(K(),ie("span",gl,"未选中任何数据"))]),_:3})):oe("",!0)])])])}const pl=ve(rl,[["render",ml]]);function hl(e,t,o){return{getHeaderProps:T(()=>{const{title:s,showTableSetting:a,titleHelpMessage:r,tableSetting:i}=n(e),f=!t.tableTitle&&!s&&!t.toolbar&&!a;return f&&!Ue(s)?{}:{title:f?null:()=>je(pl,{title:s,titleHelpMessage:r,showTableSetting:a,tableSetting:i,onColumnsChange:o.onColumnsChange},x(x(x(x(x({},t.toolbar?{toolbar:()=>ze(t,"toolbar")}:{}),t.tableTitle?{tableTitle:()=>ze(t,"tableTitle")}:{}),t.headerTop?{headerTop:()=>ze(t,"headerTop")}:{}),t.tableTop?{tableTop:()=>ze(t,"tableTop")}:{}),t.alertAfter?{alertAfter:()=>ze(t,"alertAfter")}:{}))}})}}function Cl(e,t,o){const c=j([]),s=T(()=>n(e).autoCreateKey&&!n(e).rowKey),a=T(()=>{const{rowKey:y}=n(e);return n(s)?_e:y}),r=T(()=>{const{isTreeTable:y}=n(e);return y?{expandedRowKeys:n(c),onExpandedRowsChange:u=>{c.value=u,o("expanded-rows-change",u)}}:{}});function i(){const y=f();c.value=y}function f(y){const u=[],{childrenColumnName:g}=n(e);return pe(y||n(t)).forEach(w=>{u.push(w[n(a)]);const R=w[g||"children"];R!=null&&R.length&&u.push(...f(R))}),u}function l(){c.value=[]}return{getExpandOption:r,expandAll:i,collapseAll:l}}const _t="_row",Tt="_index",bl=he({name:"BasicTableFooter",components:{Table:rt},props:{bordered:{type:Boolean,default:!1},summaryFunc:{type:Function},summaryData:{type:Array},scroll:{type:Object},rowKey:Z.string.def("key"),hasExpandedRow:Z.bool},setup(e){const t=Oe(),o=T(()=>{const{summaryFunc:s,summaryData:a}=e;if(a!=null&&a.length)return a.forEach((i,f)=>i[e.rowKey]=`${f}`),a;if(!se(s))return[];let r=pe(n(t.getDataSource()));return r=s(r),r.forEach((i,f)=>{i[e.rowKey]=`${f}`}),r});return{getColumns:T(()=>{const s=n(o);let a=He(t.getColumns());a=a.filter(u=>!u.defaultHidden);const r=a.findIndex(u=>u.flag===We),i=s.some(u=>Reflect.has(u,_t)),f=s.some(u=>Reflect.has(u,Tt));let l=!1,y=t.getRowSelection()&&i;if(r!==-1&&(f?(l=!0,a[r].customRender=({record:u})=>u[Tt],a[r].ellipsis=!1):Reflect.deleteProperty(a[r],"customRender")),y){const u=a.some(g=>g.fixed==="left"||g.fixed===!0);a.unshift(me(x({width:50,title:"selection",key:"selectionKey",align:"center"},u?{fixed:"left"}:{}),{customRender:({record:g})=>l?"":g[_t]}))}if(e.hasExpandedRow){const u=a.some(g=>g.fixed==="left");a.unshift(me(x({width:50,title:"expandedRow",key:"expandedRowKey",align:"center"},u?{fixed:"left"}:{}),{customRender:()=>""}))}return a}),getDataSource:o}}});function yl(e,t,o,c,s,a){const r=A("Table");return e.summaryFunc||e.summaryData?(K(),Q(r,{key:0,showHeader:!1,bordered:e.bordered,pagination:!1,dataSource:e.getDataSource,rowKey:i=>i[e.rowKey],columns:e.getColumns,tableLayout:"fixed",scroll:e.scroll},null,8,["bordered","dataSource","rowKey","columns","scroll"])):oe("",!0)}const vl=ve(bl,[["render",yl],["__scopeId","data-v-9e46aea3"]]);function Sl(e,t,o,c,s){const a=T(()=>(n(s)||[]).length===0),r=T(()=>Object.keys(t).includes("expandedRowRender")),i=T(()=>{const{summaryFunc:l,showSummary:y,summaryData:u,bordered:g}=n(e);return y&&!n(a)?()=>je(vl,{bordered:g,summaryFunc:l,summaryData:u,scroll:n(o),hasExpandedRow:r.value}):void 0});Pe(()=>{f()});function f(){const{showSummary:l}=n(e);!l||n(a)||ye(()=>{const y=n(c);if(!y)return;const u=y.$el.querySelector(".ant-table-content");Un({el:u,name:"scroll",listener:()=>{const g=y.$el.querySelector(".ant-table-footer .ant-table-content");!g||!u||(g.scrollLeft=u.scrollLeft)},wait:0,options:!0})})}return{getFooterProps:i}}function wl(e,t,o,c){const s=T(()=>{const{formConfig:f}=n(e),{submitButtonOptions:l,autoSubmitOnEnter:y}=f||{};return me(x({showAdvancedButton:!0},f),{submitButtonOptions:x({loading:n(c)},l),compact:!0,autoSubmitOnEnter:y})}),a=T(()=>Object.keys(t).map(l=>l.startsWith("form-")?l:null).filter(l=>!!l));function r(f){var l,y;return f&&(y=(l=f==null?void 0:f.replace)==null?void 0:l.call(f,/form\-/,""))!=null?y:""}function i(f){const{handleSearchInfoFn:l}=n(e);l&&se(l)&&(f=l(f)||f),o({searchInfo:f,page:1})}return{getFormProps:s,replaceFormSlotKey:r,getFormSlotKeys:a,handleSearchInfoChange:i}}const kl={clickToRowSelect:Z.bool.def(!0),isTreeTable:Z.bool.def(!1),tableSetting:Z.shape({}),inset:Z.bool,sortFn:{type:Function,default:to},filterFn:{type:Function,default:no},showTableSetting:Z.bool,autoCreateKey:Z.bool.def(!0),striped:Z.bool.def(!1),showSummary:Z.bool,summaryFunc:{type:[Function,Array],default:null},summaryData:{type:Array,default:null},indentSize:Z.number.def(24),canColDrag:Z.bool.def(!0),api:{type:Function,default:null},beforeFetch:{type:Function,default:null},afterFetch:{type:Function,default:null},handleSearchInfoFn:{type:Function,default:null},fetchSetting:{type:Object,default:()=>Dt},immediate:Z.bool.def(!0),emptyDataIsShowTable:Z.bool.def(!0),searchInfo:{type:Object,default:null},defSort:{type:Object,default:null},useSearchForm:Z.bool,formConfig:{type:Object,default:null},columns:{type:[Array],default:()=>[]},showIndexColumn:Z.bool.def(!0),indexColumnProps:{type:Object,default:null},showActionColumn:{type:Boolean,default:!0},actionColumn:{type:Object,default:null},ellipsis:Z.bool.def(!0),canResize:Z.bool.def(!0),clearSelectOnPageChange:Z.bool,resizeHeightOffset:Z.number.def(0),rowSelection:{type:Object,default:null},title:{type:[String,Function],default:null},titleHelpMessage:{type:[String,Array]},minHeight:Z.number,maxHeight:Z.number,maxColumnWidth:Z.number,dataSource:{type:Array,default:null},rowKey:{type:[String,Function],default:""},bordered:Z.bool,pagination:{type:[Object,Boolean],default:null},loading:Z.bool,rowClassName:{type:Function},scroll:{type:Object,default:null},beforeEditSubmit:{type:Function},size:{type:String,default:oo},expandedRowKeys:{type:Array,default:null}},ct=he({components:{Table:rt,BasicForm:co,HeaderCell:So,CustomSelectHeader:mo},props:kl,emits:["fetch-success","fetch-error","selection-change","register","row-click","row-dbClick","row-contextmenu","row-mouseenter","row-mouseleave","edit-end","edit-cancel","edit-row-end","edit-change","expanded-rows-change","change","columns-change","table-redo"],setup(e,{attrs:t,emit:o,slots:c,expose:s}){const a=j(null),r=j([]),i=j(null),f=j(),{prefixCls:l}=Le("basic-table"),[y,u]=uo(),g=T(()=>x(x({},e),n(f))),w=cn(An,!1);Pe(()=>{n(w)&&e.canResize&&Qn("'canResize' of BasicTable may not work in PageWrapper with 'fixedHeight' (especially in hot updates)")});const{getLoading:R,setLoading:S}=Ho(g),{getPaginationInfo:h,getPagination:C,setPagination:I,setShowPagination:O,getShowPagination:D}=ko(g),X=T(()=>g.value.childrenColumnName||"children"),{getRowSelection:Y,getSelectRows:G,getSelectRowKeys:ue,setSelectedRowKeys:ne,getRowSelectionRef:v,selectHeaderProps:$,isCustomSelection:z,handleCustomSelectColumn:U,clearSelectedRowKeys:m,deleteSelectRowByKey:P,getExpandIconColumnIndex:k}=Po(g,o,i,h,r,X),{handleTableChange:E,getDataSourceRef:p,getDataSource:_,getRawDataSource:H,setTableData:B,updateTableDataRecord:V,deleteTableDataRecord:q,insertTableDataRecord:Se,findTableDataRecord:we,fetch:de,getRowKey:ke,reload:Te,getAutoCreateKey:Re,updateTableData:Be}=Ko(g,{tableData:r,getPaginationInfo:h,setLoading:S,setPagination:I,validate:u.validate,clearSelectedRowKeys:m},o);function d(...J){E.call(void 0,...J),o("change",...J);const{onChange:te}=n(g);te&&se(te)&&te.call(void 0,...J)}const{getViewColumns:b,getColumns:L,setCacheColumnsByField:F,setColumns:M,getColumnsRef:ee,getCacheColumns:fe}=Ao(g,h,U),{getScrollRef:Ce,redoHeight:De}=Lo(g,a,ee,v,p),{customRow:et}=Mo(g,{setSelectedRowKeys:ne,getSelectRowKeys:ue,clearSelectedRowKeys:m,getAutoCreateKey:Re,emit:o}),{getRowClassName:tt}=No(g,l),{getExpandOption:Bt,expandAll:ut,collapseAll:Mt}=Cl(g,r,o),Nt={onColumnsChange:J=>{var te,nt;o("columns-change",J),(nt=(te=n(g)).onColumnsChange)==null||nt.call(te,J)}},{getHeaderProps:zt}=hl(g,c,Nt),{getFooterProps:Vt}=Sl(g,c,Ce,a,p),{getFormProps:jt,replaceFormSlotKey:Wt,getFormSlotKeys:Ut,handleSearchInfoChange:qt}=wl(g,c,de,R),Me=T(()=>{const J=n(p);let te=me(x(me(x(x(me(x({},t),{customRow:et}),n(g)),n(zt)),{scroll:n(Ce),loading:n(R),tableLayout:"fixed",rowSelection:n(v),rowKey:n(ke),columns:pe(n(b)),pagination:pe(n(h)),dataSource:J,footer:n(Vt)}),n(Bt)),{expandIconColumnIndex:k.value});return delete te.rowSelection,!te.isTreeTable&&delete te.expandIconColumnIndex,te.expandedRowKeys===null&&delete te.expandedRowKeys,te=Qe(te,["class","onChange"]),te}),dt=T(()=>{const J=n(Me);return J.maxColumnWidth>0?J.maxColumnWidth+"px":null}),Gt=T(()=>{const J=n(Me);return[l,t.class,{[`${l}-form-container`]:J.useSearchForm,[`${l}--inset`]:J.inset,[`${l}-col-max-width`]:dt.value!=null,[`${l}--show-summary`]:J.showSummary}]}),Xt=T(()=>{const{emptyDataIsShowTable:J,useSearchForm:te}=n(g);return J||!te?!0:!!n(p).length});function Yt(J){f.value=x(x({},n(f)),J)}const qe={reload:Te,getSelectRows:G,clearSelectedRowKeys:m,getSelectRowKeys:ue,deleteSelectRowByKey:P,setPagination:I,setTableData:B,updateTableDataRecord:V,deleteTableDataRecord:q,insertTableDataRecord:Se,findTableDataRecord:we,redoHeight:De,setSelectedRowKeys:ne,setColumns:M,setLoading:S,getDataSource:_,getRawDataSource:H,setProps:Yt,getRowSelection:Y,getPaginationRef:C,getColumns:L,getCacheColumns:fe,emit:o,updateTableData:Be,setShowPagination:O,getShowPagination:D,setCacheColumnsByField:F,expandAll:ut,collapseAll:Mt,getSize:()=>n(Me).size};lo(me(x({},qe),{wrapRef:i,getBindValues:Me}));const Zt=T(()=>{const J=[],te=[],Qt=n(b).map(Ke=>{var ft;return(ft=Ke.slotsBak)==null?void 0:ft.customRender});for(const Ke of Object.keys(c))["bodyCell"].includes(Ke)||(Qt.includes(Ke)?te.push(Ke):J.push(Ke));return{native:J,custom:te}});return ye(()=>{g.value.defaultExpandAllRows&&ut()}),s(qe),o("register",qe,u),{tableElRef:a,getBindValues:Me,getLoading:R,registerForm:y,handleSearchInfoChange:qt,getEmptyDataIsShowTable:Xt,handleTableChange:d,getRowClassName:tt,wrapRef:i,tableAction:qe,redoHeight:De,handleResizeColumn:(J,te)=>{te.width=J},getFormProps:jt,replaceFormSlotKey:Wt,getFormSlotKeys:Ut,getWrapperClass:Gt,getMaxColumnWidth:dt,columns:b,selectHeaderProps:$,isCustomSelection:z,slotNamesGroup:Zt}}}),Rt=()=>{un(e=>({a4e51004:e.getMaxColumnWidth}))},It=ct.setup;ct.setup=It?(e,t)=>(Rt(),It(e,t)):Rt;const _l=ct;function Tl(e,t,o,c,s,a){const r=A("BasicForm"),i=A("CustomSelectHeader"),f=A("HeaderCell"),l=A("Table"),y=A("a-form-item-rest");return K(),ie("div",{ref:"wrapRef",class:le(e.getWrapperClass)},[e.getBindValues.useSearchForm?(K(),Q(r,be({key:0,submitOnReset:""},e.getFormProps,{tableAction:e.tableAction,onRegister:e.registerForm,onSubmit:e.handleSearchInfoChange,onAdvancedChange:e.redoHeight}),pt({_:2},[at(e.getFormSlotKeys,u=>({name:e.replaceFormSlotKey(u),fn:N(g=>[$e(e.$slots,u,Ne(ht(g||{})))])}))]),1040,["tableAction","onRegister","onSubmit","onAdvancedChange"])):oe("",!0),W(y,null,{default:N(()=>[st(W(l,be({ref:"tableElRef"},e.getBindValues,{rowClassName:e.getRowClassName,onResizeColumn:e.handleResizeColumn,onChange:e.handleTableChange}),pt({headerCell:N(({column:u})=>[e.isCustomSelection(u)?(K(),Q(i,Ne(be({key:0},e.selectHeaderProps)),null,16)):(K(),Q(f,{key:1,column:u},null,8,["column"]))]),bodyCell:N(u=>{var g,w;return[(w=(g=u.column)==null?void 0:g.slotsBak)!=null&&w.customRender?$e(e.$slots,u.column.slotsBak.customRender,Ne(be({key:0},u||{}))):$e(e.$slots,"bodyCell",Ne(be({key:1},u||{})))]}),_:2},[at(e.slotNamesGroup.native,u=>({name:u,fn:N(g=>[$e(e.$slots,u,Ne(ht(g||{})))])}))]),1040,["rowClassName","onResizeColumn","onChange"]),[[$t,e.getEmptyDataIsShowTable]])]),_:3})],2)}const $s=ve(_l,[["render",Tl]]);export{$s as default};
