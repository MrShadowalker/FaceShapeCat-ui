var V=Object.defineProperty,z=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var b=(s,e,a)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,p=(s,e)=>{for(var a in e||(e={}))N.call(e,a)&&b(s,a,e[a]);if(C)for(var a of C(e))O.call(e,a)&&b(s,a,e[a]);return s},h=(s,e)=>z(s,I(e));var _=(s,e,a)=>new Promise((c,t)=>{var l=o=>{try{u(a.next(o))}catch(m){t(m)}},f=o=>{try{u(a.throw(o))}catch(m){t(m)}},u=o=>o.done?c(o.value):Promise.resolve(o.value).then(l,f);u((a=a.apply(s,e)).next())});import{d as R,r as P,f as k,Y as d,a6 as T,ab as U,a9 as n,k as i,E as j,ae as q,u as A}from"./tinymce-vendor-3c2b3d6e.js";import{B as G}from"./BasicModal-9d388b71.js";import{u as L,C as Y,b6 as $,bg as D}from"./jeecg-online-vendor-f57c6456.js";import"./index-64ecc8b2.js";import{rules as H}from"./validator-a0d2ebc7.js";import{a5 as J}from"./antd-vue-vendor-05bfa84d.js";import{a as K}from"./UserSetting.api-24e5eb9b.js";import{C as Q}from"./index-37448b2d.js";import"./useWindowSizeFn-e63bb4b0.js";import"./vxe-table-vendor-26792376.js";import"./user.api-367a7bce.js";const W=R({name:"user-replace-email-modal"}),ue=R(h(p({},W),{emits:["register","success"],setup(s,{emit:e}){const a=L(),{createMessage:c}=Y(),t=P({email:""}),l=k(),f={email:[p({},H.duplicateCheckRule("sys_user","email",t,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]},u=J.useForm,o=k(""),m=e,[y,{setModalProps:M,closeModal:w}]=Q(r=>_(this,null,function*(){l.value.resetFields(),l.value.clearValidate(),M({confirmLoading:!1}),o.value="修改邮箱",r.record.smscode="",Object.assign(t,r.record)}));function X(){return $({mobile:t.phone,smsmode:D.REGISTER})}function B(){return _(this,null,function*(){yield l.value.validateFields(),K(t).then(r=>{r.success?(c.success("修改邮箱成功"),m("success"),w()):c.warning(r.message)})})}return(r,g)=>{const E=d("a-input"),v=d("a-form-item"),F=d("a-button"),S=d("a-form");return T(),U(G,q(r.$attrs,{onRegister:A(y),width:"500px",title:o.value,showCancelBtn:!1,showOkBtn:!1}),{default:n(()=>[i(S,{class:"antd-modal-form",ref_key:"formRef",ref:l,model:t,rules:f},{default:n(()=>[i(v,{name:"email"},{default:n(()=>[i(E,{size:"large",value:t.email,"onUpdate:value":g[0]||(g[0]=x=>t.email=x),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),i(v,null,{default:n(()=>[i(F,{size:"large",type:"primary",block:"",onClick:B},{default:n(()=>[j(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{ue as default};
