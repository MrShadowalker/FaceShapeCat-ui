var d=(t,o,e)=>new Promise((c,r)=>{var i=n=>{try{u(e.next(n))}catch(a){r(a)}},s=n=>{try{u(e.throw(n))}catch(a){r(a)}},u=n=>n.done?c(n.value):Promise.resolve(n.value).then(i,s);u((e=e.apply(t,o)).next())});import{B,v as $,_ as m,y as C}from"./jeecg-online-vendor-f57c6456.js";import{d as v,f as b,e as w,u as f,h,Y as l,a6 as y,ab as S,ae as _,a9 as p,E as z,ad as F,aq as k,k as I,aa as A,Q as N,ah as T,ai as D}from"./tinymce-vendor-3c2b3d6e.js";import{B as P}from"./antd-vue-vendor-05bfa84d.js";import{u as j}from"./useCountdown-d833a954.js";import{k as E}from"./index-37448b2d.js";import{useRuleFormItem as O}from"./useFormItemSingle-4fd81116.js";const R={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},V=v({name:"CountButton",components:{Button:P},props:R,setup(t){const o=b(!1),{currentCount:e,isStart:c,start:r,reset:i}=j(t.count),{t:s}=B(),u=w(()=>f(c)?s("component.countdown.sendText",[f(e)]):s("component.countdown.normalText"));h(()=>{t.value===void 0&&i()});function n(){return d(this,null,function*(){const{beforeStartFunc:a}=t;if(a&&$(a)){o.value=!0;try{(yield a())&&r()}finally{o.value=!1}}else r()})}return{handleStart:n,currentCount:e,loading:o,getButtonText:u,isStart:c}}});function q(t,o,e,c,r,i){const s=l("Button");return y(),S(s,_(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:p(()=>[z(F(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}const g=m(V,[["render",q]]),L={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},Q=v({name:"CountDownInput",components:{CountButton:g},inheritAttrs:!1,props:L,setup(t){const{prefixCls:o}=E("countdown-input"),[e]=O(t);return{prefixCls:o,state:e}}});function Y(t,o,e,c,r,i){const s=l("CountButton"),u=l("a-input");return y(),S(u,_(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),k({addonAfter:p(()=>[I(s,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[A(Object.keys(t.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(a=>[N(t.$slots,n,T(D(a||{})))])}))]),1040,["class","size","value"])}const G=m(Q,[["render",Y]]),x=C(G),tt=C(g);export{x as C};
