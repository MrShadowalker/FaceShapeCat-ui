"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginAntd = void 0;
var _vue = require("vue");
var _xeUtils = _interopRequireDefault(require("xe-utils"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function isEmptyValue(cellValue) {
  return cellValue === null || cellValue === undefined || cellValue === '';
}
function getOnName(type) {
  return 'on' + type.substring(0, 1).toLocaleUpperCase() + type.substring(1);
}
function getModelProp(renderOpts) {
  var prop = 'value';
  switch (renderOpts.name) {
    case 'ASwitch':
      prop = 'checked';
      break;
  }
  return prop;
}
function getModelEvent(renderOpts) {
  var type = 'update:value';
  switch (renderOpts.name) {
    case 'ASwitch':
      type = 'update:checked';
      break;
  }
  return type;
}
function getChangeEvent(renderOpts) {
  return 'change';
}
function getCellEditFilterProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}
function getItemProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}
function formatText(cellValue) {
  return '' + (isEmptyValue(cellValue) ? '' : cellValue);
}
function getCellLabelVNs(renderOpts, params, cellLabel) {
  var placeholder = renderOpts.placeholder;
  return [(0, _vue.h)('span', {
    "class": 'vxe-cell--label'
  }, placeholder && isEmptyValue(cellLabel) ? [(0, _vue.h)('span', {
    "class": 'vxe-cell--placeholder'
  }, formatText(placeholder))] : formatText(cellLabel))];
}
function getOns(renderOpts, params, inputFunc, changeFunc) {
  var events = renderOpts.events;
  var modelEvent = getModelEvent(renderOpts);
  var changeEvent = getChangeEvent(renderOpts);
  var isSameEvent = changeEvent === modelEvent;
  var ons = {};
  _xeUtils["default"].objectEach(events, function (func, key) {
    ons[getOnName(key)] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      func.apply(void 0, [params].concat(args));
    };
  });
  if (inputFunc) {
    ons[getOnName(modelEvent)] = function (targetEvnt) {
      inputFunc(targetEvnt);
      if (events && events[modelEvent]) {
        events[modelEvent](params, targetEvnt);
      }
      if (isSameEvent && changeFunc) {
        changeFunc(targetEvnt);
      }
    };
  }
  if (!isSameEvent && changeFunc) {
    ons[getOnName(changeEvent)] = function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }
      changeFunc.apply(void 0, args);
      if (events && events[changeEvent]) {
        events[changeEvent].apply(events, [params].concat(args));
      }
    };
  }
  return ons;
}
function getEditOns(renderOpts, params) {
  var $table = params.$table,
    row = params.row,
    column = params.column;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(row, column.field, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $table.updateStatus(params);
  });
}
function getFilterOns(renderOpts, params, option, changeFunc) {
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    option.data = value;
  }, changeFunc);
}
function getItemOns(renderOpts, params) {
  var $form = params.$form,
    data = params.data,
    field = params.field;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(data, field, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $form.updateStatus(params);
  });
}
function matchCascaderData(index, list, values, labels) {
  var val = values[index];
  if (list && values.length > index) {
    _xeUtils["default"].each(list, function (item) {
      if (item.value === val) {
        labels.push(item.label);
        matchCascaderData(++index, item.children, values, labels);
      }
    });
  }
}
function formatDatePicker(defaultFormat) {
  return function (renderOpts, params) {
    return getCellLabelVNs(renderOpts, params, getDatePickerCellValue(renderOpts, params, defaultFormat));
  };
}
function getSelectCellValue(renderOpts, params) {
  var _renderOpts$options = renderOpts.options,
    options = _renderOpts$options === void 0 ? [] : _renderOpts$options,
    optionGroups = renderOpts.optionGroups,
    _renderOpts$props = renderOpts.props,
    props = _renderOpts$props === void 0 ? {} : _renderOpts$props,
    _renderOpts$optionPro = renderOpts.optionProps,
    optionProps = _renderOpts$optionPro === void 0 ? {} : _renderOpts$optionPro,
    _renderOpts$optionGro = renderOpts.optionGroupProps,
    optionGroupProps = _renderOpts$optionGro === void 0 ? {} : _renderOpts$optionGro;
  var row = params.row,
    column = params.column;
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  var groupOptions = optionGroupProps.options || 'options';
  var cellValue = _xeUtils["default"].get(row, column.field);
  if (!isEmptyValue(cellValue)) {
    return _xeUtils["default"].map(props.mode === 'multiple' ? cellValue : [cellValue], optionGroups ? function (value) {
      var selectItem;
      for (var index = 0; index < optionGroups.length; index++) {
        selectItem = _xeUtils["default"].find(optionGroups[index][groupOptions], function (item) {
          return item[valueProp] === value;
        });
        if (selectItem) {
          break;
        }
      }
      return selectItem ? selectItem[labelProp] : value;
    } : function (value) {
      var selectItem = _xeUtils["default"].find(options, function (item) {
        return item[valueProp] === value;
      });
      return selectItem ? selectItem[labelProp] : value;
    }).join(', ');
  }
  return '';
}
function getCascaderCellValue(renderOpts, params) {
  var _renderOpts$props2 = renderOpts.props,
    props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
  var row = params.row,
    column = params.column;
  var cellValue = _xeUtils["default"].get(row, column.field);
  var values = cellValue || [];
  var labels = [];
  matchCascaderData(0, props.options, values, labels);
  return (props.showAllLevels === false ? labels.slice(labels.length - 1, labels.length) : labels).join(" ".concat(props.separator || '/', " "));
}
function getRangePickerCellValue(renderOpts, params) {
  var _renderOpts$props3 = renderOpts.props,
    props = _renderOpts$props3 === void 0 ? {} : _renderOpts$props3;
  var row = params.row,
    column = params.column;
  var cellValue = _xeUtils["default"].get(row, column.field);
  if (cellValue) {
    cellValue = _xeUtils["default"].map(cellValue, function (date) {
      return date.format(props.format || 'YYYY-MM-DD');
    }).join(' ~ ');
  }
  return cellValue;
}
function getTreeSelectCellValue(renderOpts, params) {
  var _renderOpts$props4 = renderOpts.props,
    props = _renderOpts$props4 === void 0 ? {} : _renderOpts$props4;
  var treeData = props.treeData,
    treeCheckable = props.treeCheckable;
  var row = params.row,
    column = params.column;
  var cellValue = _xeUtils["default"].get(row, column.field);
  if (!isEmptyValue(cellValue)) {
    return _xeUtils["default"].map(treeCheckable ? cellValue : [cellValue], function (value) {
      var matchObj = _xeUtils["default"].findTree(treeData, function (item) {
        return item.value === value;
      }, {
        children: 'children'
      });
      return matchObj ? matchObj.item.title : value;
    }).join(', ');
  }
  return cellValue;
}
function getDatePickerCellValue(renderOpts, params, defaultFormat) {
  var _renderOpts$props5 = renderOpts.props,
    props = _renderOpts$props5 === void 0 ? {} : _renderOpts$props5;
  var row = params.row,
    column = params.column;
  var cellValue = _xeUtils["default"].get(row, column.field);
  if (cellValue) {
    cellValue = cellValue.format(props.format || defaultFormat);
  }
  return cellValue;
}
function createEditRender(defaultProps) {
  return function (renderOpts, params) {
    var row = params.row,
      column = params.column;
    var name = renderOpts.name,
      attrs = renderOpts.attrs;
    var cellValue = _xeUtils["default"].get(row, column.field);
    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, cellValue, defaultProps)), getEditOns(renderOpts, params)))];
  };
}
function defaultButtonEditRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  return [(0, _vue.h)((0, _vue.resolveComponent)('a-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, null)), getOns(renderOpts, params)), cellText(renderOpts.content))];
}
function defaultButtonsEditRender(renderOpts, params) {
  var children = renderOpts.children;
  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonEditRender(childRenderOpts, params)[0];
    });
  }
  return [];
}
function createFilterRender(defaultProps) {
  return function (renderOpts, params) {
    var column = params.column;
    var name = renderOpts.name,
      attrs = renderOpts.attrs;
    return [(0, _vue.h)('div', {
      "class": 'vxe-table--filter-antd-wrapper'
    }, column.filters.map(function (option, oIndex) {
      var optionValue = option.data;
      return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
        key: oIndex
      }, attrs), getCellEditFilterProps(renderOpts, params, optionValue, defaultProps)), getFilterOns(renderOpts, params, option, function () {
        // 处理 change 事件相关逻辑
        handleConfirmFilter(params, !!option.data, option);
      })));
    }))];
  };
}
function handleConfirmFilter(params, checked, option) {
  var $panel = params.$panel;
  $panel.changeOption(null, checked, option);
}
/**
 * 模糊匹配
 * @param params
 */
function defaultFuzzyFilterMethod(params) {
  var option = params.option,
    row = params.row,
    column = params.column;
  var data = option.data;
  var cellValue = _xeUtils["default"].get(row, column.field);
  return _xeUtils["default"].toValueString(cellValue).indexOf(data) > -1;
}
/**
 * 精确匹配
 * @param params
 */
function defaultExactFilterMethod(params) {
  var option = params.option,
    row = params.row,
    column = params.column;
  var data = option.data;
  var cellValue = _xeUtils["default"].get(row, column.field);
  /* eslint-disable eqeqeq */
  return cellValue === data;
}
function cellText(cellValue) {
  return [formatText(cellValue)];
}
function renderOptions(options, optionProps) {
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  return _xeUtils["default"].map(options, function (item, oIndex) {
    return (0, _vue.h)((0, _vue.resolveComponent)('a-select-option'), {
      key: oIndex,
      value: item[valueProp],
      disabled: item.disabled
    }, {
      "default": function _default() {
        return cellText(item[labelProp]);
      }
    });
  });
}
function createFormItemRender(defaultProps) {
  return function (renderOpts, params) {
    var data = params.data,
      field = params.field;
    var name = renderOpts.name;
    var attrs = renderOpts.attrs;
    var itemValue = _xeUtils["default"].get(data, field);
    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue, defaultProps)), getItemOns(renderOpts, params)))];
  };
}
function defaultButtonItemRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  var props = getItemProps(renderOpts, params, null);
  return [(0, _vue.h)((0, _vue.resolveComponent)('a-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), getItemOns(renderOpts, params)), {
    "default": function _default() {
      return cellText(renderOpts.content || props.content);
    }
  })];
}
function defaultButtonsItemRender(renderOpts, params) {
  var children = renderOpts.children;
  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonItemRender(childRenderOpts, params)[0];
    });
  }
  return [];
}
function createDatePickerExportMethod(defaultFormat) {
  return function (params) {
    var row = params.row,
      column = params.column,
      options = params.options;
    return options && options.original ? _xeUtils["default"].get(row, column.field) : getDatePickerCellValue(column.editRender || column.cellRender, params, defaultFormat);
  };
}
function createExportMethod(getExportCellValue) {
  return function (params) {
    var row = params.row,
      column = params.column,
      options = params.options;
    return options && options.original ? _xeUtils["default"].get(row, column.field) : getExportCellValue(column.editRender || column.cellRender, params);
  };
}
function createFormItemRadioAndCheckboxRender() {
  return function (renderOpts, params) {
    var name = renderOpts.name,
      _renderOpts$options2 = renderOpts.options,
      options = _renderOpts$options2 === void 0 ? [] : _renderOpts$options2,
      _renderOpts$optionPro2 = renderOpts.optionProps,
      optionProps = _renderOpts$optionPro2 === void 0 ? {} : _renderOpts$optionPro2;
    var data = params.data,
      field = params.field;
    var attrs = renderOpts.attrs;
    var labelProp = optionProps.label || 'label';
    var valueProp = optionProps.value || 'value';
    var itemValue = _xeUtils["default"].get(data, field);
    return [(0, _vue.h)((0, _vue.resolveComponent)("".concat(name, "Group")), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue)), getItemOns(renderOpts, params)), {
      "default": function _default() {
        return options.map(function (option, oIndex) {
          return (0, _vue.h)((0, _vue.resolveComponent)(name), {
            key: oIndex,
            value: option[valueProp],
            disabled: option.disabled
          }, {
            "default": function _default() {
              return cellText(option[labelProp]);
            }
          });
        });
      }
    })];
  };
}
/**
 * 检查触发源是否属于目标节点
 */
function getEventTargetNode(evnt, container, className) {
  var targetElem;
  var target = evnt.target;
  while (target && target.nodeType && target !== document) {
    if (className && target.className && target.className.split && target.className.split(' ').indexOf(className) > -1) {
      targetElem = target;
    } else if (target === container) {
      return {
        flag: className ? !!targetElem : true,
        container: container,
        targetElem: targetElem
      };
    }
    target = target.parentNode;
  }
  return {
    flag: false
  };
}
/**
 * 事件兼容性处理
 */
function handleClearEvent(params) {
  var $event = params.$event;
  var bodyElem = document.body;
  if (
  // 下拉框
  getEventTargetNode($event, bodyElem, 'ant-select-dropdown').flag ||
  // 级联
  getEventTargetNode($event, bodyElem, 'ant-cascader-menus').flag ||
  // 日期
  getEventTargetNode($event, bodyElem, 'ant-picker-dropdown').flag || getEventTargetNode($event, bodyElem, 'ant-calendar-picker-container').flag ||
  // 时间选择
  getEventTargetNode($event, bodyElem, 'ant-time-picker-panel').flag) {
    return false;
  }
}
/**
 * 基于 vxe-table 的表格适配插件，用于兼容 ant-design-vue 组件库
 */
var VXETablePluginAntd = {
  install: function install(vxetable) {
    // 检查版本
    if (!/^(4)\./.test(vxetable.version)) {
      console.error('[vxe-table-plugin-antd] Version vxe-table 4.x is required');
    }
    vxetable.renderer.mixin({
      AAutoComplete: {
        autofocus: 'input.ant-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      AInput: {
        autofocus: 'input.ant-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      AInputNumber: {
        autofocus: 'input.ant-input-number-input',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ASelect: {
        renderEdit: function renderEdit(renderOpts, params) {
          var _renderOpts$options3 = renderOpts.options,
            options = _renderOpts$options3 === void 0 ? [] : _renderOpts$options3,
            optionGroups = renderOpts.optionGroups,
            _renderOpts$optionPro3 = renderOpts.optionProps,
            optionProps = _renderOpts$optionPro3 === void 0 ? {} : _renderOpts$optionPro3,
            _renderOpts$optionGro2 = renderOpts.optionGroupProps,
            optionGroupProps = _renderOpts$optionGro2 === void 0 ? {} : _renderOpts$optionGro2;
          var row = params.row,
            column = params.column;
          var attrs = renderOpts.attrs;
          var cellValue = _xeUtils["default"].get(row, column.field);
          var props = getCellEditFilterProps(renderOpts, params, cellValue);
          var ons = getEditOns(renderOpts, params);
          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({}, props), attrs), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('a-select-opt-group'), {
                    key: gIndex
                  }, {
                    label: function label() {
                      return (0, _vue.h)('span', {}, group[groupLabel]);
                    },
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }
          return [(0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({}, props), attrs), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getSelectCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(renderOpts, params) {
          var _renderOpts$options4 = renderOpts.options,
            options = _renderOpts$options4 === void 0 ? [] : _renderOpts$options4,
            optionGroups = renderOpts.optionGroups,
            _renderOpts$optionPro4 = renderOpts.optionProps,
            optionProps = _renderOpts$optionPro4 === void 0 ? {} : _renderOpts$optionPro4,
            _renderOpts$optionGro3 = renderOpts.optionGroupProps,
            optionGroupProps = _renderOpts$optionGro3 === void 0 ? {} : _renderOpts$optionGro3;
          var groupOptions = optionGroupProps.options || 'options';
          var groupLabel = optionGroupProps.label || 'label';
          var column = params.column;
          var attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-antd-wrapper'
          }, optionGroups ? column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.mode === 'multiple' ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('a-select-opt-group'), {
                    key: gIndex
                  }, {
                    label: function label() {
                      return (0, _vue.h)('span', {}, group[groupLabel]);
                    },
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            });
          }) : column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.mode === 'multiple' ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return renderOptions(options, optionProps);
              }
            });
          }))];
        },
        defaultFilterMethod: function defaultFilterMethod(params) {
          var option = params.option,
            row = params.row,
            column = params.column;
          var data = option.data;
          var field = column.field,
            renderOpts = column.filterRender;
          var _renderOpts$props6 = renderOpts.props,
            props = _renderOpts$props6 === void 0 ? {} : _renderOpts$props6;
          var cellValue = _xeUtils["default"].get(row, field);
          if (props.mode === 'multiple') {
            if (_xeUtils["default"].isArray(cellValue)) {
              return _xeUtils["default"].includeArrays(cellValue, data);
            }
            return data.indexOf(cellValue) > -1;
          }
          /* eslint-disable eqeqeq */
          return cellValue == data;
        },
        renderItemContent: function renderItemContent(renderOpts, params) {
          var _renderOpts$options5 = renderOpts.options,
            options = _renderOpts$options5 === void 0 ? [] : _renderOpts$options5,
            optionGroups = renderOpts.optionGroups,
            _renderOpts$optionPro5 = renderOpts.optionProps,
            optionProps = _renderOpts$optionPro5 === void 0 ? {} : _renderOpts$optionPro5,
            _renderOpts$optionGro4 = renderOpts.optionGroupProps,
            optionGroupProps = _renderOpts$optionGro4 === void 0 ? {} : _renderOpts$optionGro4;
          var data = params.data,
            field = params.field;
          var attrs = renderOpts.attrs;
          var itemValue = _xeUtils["default"].get(data, field);
          var props = getItemProps(renderOpts, params, itemValue);
          var ons = getItemOns(renderOpts, params);
          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('a-select-opt-group'), {
                    key: gIndex
                  }, {
                    label: function label() {
                      return (0, _vue.h)('span', {}, group[groupLabel]);
                    },
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }
          return [(0, _vue.h)((0, _vue.resolveComponent)('a-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        exportMethod: createExportMethod(getSelectCellValue)
      },
      ACascader: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getCascaderCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getCascaderCellValue)
      },
      ADatePicker: {
        renderEdit: createEditRender(),
        renderCell: formatDatePicker('YYYY-MM-DD'),
        renderItemContent: createFormItemRender(),
        exportMethod: createDatePickerExportMethod('YYYY-MM-DD')
      },
      AMonthPicker: {
        renderEdit: createEditRender(),
        renderCell: formatDatePicker('YYYY-MM'),
        renderItemContent: createFormItemRender(),
        exportMethod: createDatePickerExportMethod('YYYY-MM')
      },
      ARangePicker: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getRangePickerCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getRangePickerCellValue)
      },
      AWeekPicker: {
        renderEdit: createEditRender(),
        renderCell: formatDatePicker('YYYY-WW周'),
        renderItemContent: createFormItemRender(),
        exportMethod: createDatePickerExportMethod('YYYY-WW周')
      },
      ATimePicker: {
        renderEdit: createEditRender(),
        renderCell: formatDatePicker('HH:mm:ss'),
        renderItemContent: createFormItemRender(),
        exportMethod: createDatePickerExportMethod('HH:mm:ss')
      },
      ATreeSelect: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getTreeSelectCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getTreeSelectCellValue)
      },
      ARate: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ASwitch: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: function renderFilter(renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
            attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-antd-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return (0, _vue.h)(name, _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), getCellEditFilterProps(renderOpts, params, optionValue)), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, _xeUtils["default"].isBoolean(option.data), option);
            })));
          }))];
        },
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ARadio: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      ACheckbox: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      AButton: {
        renderEdit: defaultButtonEditRender,
        renderDefault: defaultButtonEditRender,
        renderItemContent: defaultButtonItemRender
      },
      AButtons: {
        renderEdit: defaultButtonsEditRender,
        renderDefault: defaultButtonsEditRender,
        renderItemContent: defaultButtonsItemRender
      }
    });
    vxetable.interceptor.add('event.clearFilter', handleClearEvent);
    vxetable.interceptor.add('event.clearActived', handleClearEvent);
    vxetable.interceptor.add('event.clearAreas', handleClearEvent);
  }
};
exports.VXETablePluginAntd = VXETablePluginAntd;
if (typeof window !== 'undefined' && window.VXETable && window.VXETable.use) {
  window.VXETable.use(VXETablePluginAntd);
}
var _default2 = VXETablePluginAntd;
exports["default"] = _default2;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsiX3Z1ZSIsInJlcXVpcmUiLCJfeGVVdGlscyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJvd25LZXlzIiwib2JqZWN0IiwiZW51bWVyYWJsZU9ubHkiLCJrZXlzIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltYm9scyIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImZvckVhY2giLCJrZXkiLCJfZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiY2FsbCIsIlR5cGVFcnJvciIsIk51bWJlciIsImlzRW1wdHlWYWx1ZSIsImNlbGxWYWx1ZSIsImdldE9uTmFtZSIsInR5cGUiLCJzdWJzdHJpbmciLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsImdldE1vZGVsUHJvcCIsInJlbmRlck9wdHMiLCJwcm9wIiwibmFtZSIsImdldE1vZGVsRXZlbnQiLCJnZXRDaGFuZ2VFdmVudCIsImdldENlbGxFZGl0RmlsdGVyUHJvcHMiLCJwYXJhbXMiLCJkZWZhdWx0UHJvcHMiLCJYRVV0aWxzIiwiYXNzaWduIiwicHJvcHMiLCJnZXRJdGVtUHJvcHMiLCJmb3JtYXRUZXh0IiwiZ2V0Q2VsbExhYmVsVk5zIiwiY2VsbExhYmVsIiwicGxhY2Vob2xkZXIiLCJoIiwiZ2V0T25zIiwiaW5wdXRGdW5jIiwiY2hhbmdlRnVuYyIsImV2ZW50cyIsIm1vZGVsRXZlbnQiLCJjaGFuZ2VFdmVudCIsImlzU2FtZUV2ZW50Iiwib25zIiwib2JqZWN0RWFjaCIsImZ1bmMiLCJfbGVuIiwiYXJncyIsIkFycmF5IiwiX2tleSIsImNvbmNhdCIsInRhcmdldEV2bnQiLCJfbGVuMiIsIl9rZXkyIiwiZ2V0RWRpdE9ucyIsIiR0YWJsZSIsInJvdyIsImNvbHVtbiIsInNldCIsImZpZWxkIiwidXBkYXRlU3RhdHVzIiwiZ2V0RmlsdGVyT25zIiwib3B0aW9uIiwiZGF0YSIsImdldEl0ZW1PbnMiLCIkZm9ybSIsIm1hdGNoQ2FzY2FkZXJEYXRhIiwiaW5kZXgiLCJsaXN0IiwidmFsdWVzIiwibGFiZWxzIiwidmFsIiwiZWFjaCIsIml0ZW0iLCJsYWJlbCIsImNoaWxkcmVuIiwiZm9ybWF0RGF0ZVBpY2tlciIsImRlZmF1bHRGb3JtYXQiLCJnZXREYXRlUGlja2VyQ2VsbFZhbHVlIiwiZ2V0U2VsZWN0Q2VsbFZhbHVlIiwiX3JlbmRlck9wdHMkb3B0aW9ucyIsIm9wdGlvbnMiLCJvcHRpb25Hcm91cHMiLCJfcmVuZGVyT3B0cyRwcm9wcyIsIl9yZW5kZXJPcHRzJG9wdGlvblBybyIsIm9wdGlvblByb3BzIiwiX3JlbmRlck9wdHMkb3B0aW9uR3JvIiwib3B0aW9uR3JvdXBQcm9wcyIsImxhYmVsUHJvcCIsInZhbHVlUHJvcCIsImdyb3VwT3B0aW9ucyIsImdldCIsIm1hcCIsIm1vZGUiLCJzZWxlY3RJdGVtIiwiZmluZCIsImpvaW4iLCJnZXRDYXNjYWRlckNlbGxWYWx1ZSIsIl9yZW5kZXJPcHRzJHByb3BzMiIsInNob3dBbGxMZXZlbHMiLCJzbGljZSIsInNlcGFyYXRvciIsImdldFJhbmdlUGlja2VyQ2VsbFZhbHVlIiwiX3JlbmRlck9wdHMkcHJvcHMzIiwiZGF0ZSIsImZvcm1hdCIsImdldFRyZWVTZWxlY3RDZWxsVmFsdWUiLCJfcmVuZGVyT3B0cyRwcm9wczQiLCJ0cmVlRGF0YSIsInRyZWVDaGVja2FibGUiLCJtYXRjaE9iaiIsImZpbmRUcmVlIiwidGl0bGUiLCJfcmVuZGVyT3B0cyRwcm9wczUiLCJjcmVhdGVFZGl0UmVuZGVyIiwiYXR0cnMiLCJyZXNvbHZlQ29tcG9uZW50IiwiZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIiLCJjZWxsVGV4dCIsImNvbnRlbnQiLCJkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIiLCJjaGlsZFJlbmRlck9wdHMiLCJjcmVhdGVGaWx0ZXJSZW5kZXIiLCJmaWx0ZXJzIiwib0luZGV4Iiwib3B0aW9uVmFsdWUiLCJoYW5kbGVDb25maXJtRmlsdGVyIiwiY2hlY2tlZCIsIiRwYW5lbCIsImNoYW5nZU9wdGlvbiIsImRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCIsInRvVmFsdWVTdHJpbmciLCJpbmRleE9mIiwiZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kIiwicmVuZGVyT3B0aW9ucyIsImRpc2FibGVkIiwiX2RlZmF1bHQiLCJjcmVhdGVGb3JtSXRlbVJlbmRlciIsIml0ZW1WYWx1ZSIsImRlZmF1bHRCdXR0b25JdGVtUmVuZGVyIiwiZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyIiwiY3JlYXRlRGF0ZVBpY2tlckV4cG9ydE1ldGhvZCIsIm9yaWdpbmFsIiwiZWRpdFJlbmRlciIsImNlbGxSZW5kZXIiLCJjcmVhdGVFeHBvcnRNZXRob2QiLCJnZXRFeHBvcnRDZWxsVmFsdWUiLCJjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIiLCJfcmVuZGVyT3B0cyRvcHRpb25zMiIsIl9yZW5kZXJPcHRzJG9wdGlvblBybzIiLCJnZXRFdmVudFRhcmdldE5vZGUiLCJldm50IiwiY29udGFpbmVyIiwiY2xhc3NOYW1lIiwidGFyZ2V0RWxlbSIsIm5vZGVUeXBlIiwiZG9jdW1lbnQiLCJzcGxpdCIsImZsYWciLCJwYXJlbnROb2RlIiwiaGFuZGxlQ2xlYXJFdmVudCIsIiRldmVudCIsImJvZHlFbGVtIiwiYm9keSIsIlZYRVRhYmxlUGx1Z2luQW50ZCIsImluc3RhbGwiLCJ2eGV0YWJsZSIsInRlc3QiLCJ2ZXJzaW9uIiwiY29uc29sZSIsImVycm9yIiwicmVuZGVyZXIiLCJtaXhpbiIsIkFBdXRvQ29tcGxldGUiLCJhdXRvZm9jdXMiLCJyZW5kZXJEZWZhdWx0IiwicmVuZGVyRWRpdCIsInJlbmRlckZpbHRlciIsImRlZmF1bHRGaWx0ZXJNZXRob2QiLCJyZW5kZXJJdGVtQ29udGVudCIsIkFJbnB1dCIsIkFJbnB1dE51bWJlciIsIkFTZWxlY3QiLCJfcmVuZGVyT3B0cyRvcHRpb25zMyIsIl9yZW5kZXJPcHRzJG9wdGlvblBybzMiLCJfcmVuZGVyT3B0cyRvcHRpb25Hcm8yIiwiZ3JvdXBMYWJlbCIsImdyb3VwIiwiZ0luZGV4IiwicmVuZGVyQ2VsbCIsIl9yZW5kZXJPcHRzJG9wdGlvbnM0IiwiX3JlbmRlck9wdHMkb3B0aW9uUHJvNCIsIl9yZW5kZXJPcHRzJG9wdGlvbkdybzMiLCJlcU51bGwiLCJmaWx0ZXJSZW5kZXIiLCJfcmVuZGVyT3B0cyRwcm9wczYiLCJpc0FycmF5IiwiaW5jbHVkZUFycmF5cyIsIl9yZW5kZXJPcHRzJG9wdGlvbnM1IiwiX3JlbmRlck9wdHMkb3B0aW9uUHJvNSIsIl9yZW5kZXJPcHRzJG9wdGlvbkdybzQiLCJleHBvcnRNZXRob2QiLCJBQ2FzY2FkZXIiLCJBRGF0ZVBpY2tlciIsIkFNb250aFBpY2tlciIsIkFSYW5nZVBpY2tlciIsIkFXZWVrUGlja2VyIiwiQVRpbWVQaWNrZXIiLCJBVHJlZVNlbGVjdCIsIkFSYXRlIiwiQVN3aXRjaCIsImlzQm9vbGVhbiIsIkFSYWRpbyIsIkFDaGVja2JveCIsIkFCdXR0b24iLCJBQnV0dG9ucyIsImludGVyY2VwdG9yIiwiYWRkIiwiZXhwb3J0cyIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIiwiX2RlZmF1bHQyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJ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RTtRQUNUbEMsaUJBQWlCLEVBQUVoQyxvQ0FBb0MsQ0FBQTtNQ3ZDbkQsQ0R3Q0w7TUFDRG1FLE9BQU8sRUFBRTtRQUNQdEMsVUFBVSxFQUFFM0QsdUJBQXVCO1FBQ25DMEQsYUFBYSxFQUFFMUQsdUJBQXVCO1FBQ3RDOEQsaUJBQWlCLEVBQUV4QztNQ3ZDZixDRHdDTDtNQUNENEUsUUFBUSxFQUFFO1FBQ1J2QyxVQUFVLEVBQUV4RCx3QkFBd0I7UUFDcEN1RCxhQUFhLEVBQUV2RCx3QkFBd0I7UUFDdkMyRCxpQkFBaUIsRUFBRXZDO01DdkNmO0lBQ0osQ0R3Q0gsQ0FBQztJQUVGMEIsUUFBUSxDQUFDa0QsV0FBVyxDQUFDQyxHQUFHLENBQUMsbUJBQW1CLEVBQUV6RCxnQkFBZ0IsQ0FBQztJQUMvRE0sUUFBUSxDQUFDa0QsV0FBVyxDQUFDQyxHQUFHLENBQUMsb0JBQW9CLEVBQUV6RCxnQkFBZ0IsQ0FBQztJQUNoRU0sUUFBUSxDQUFDa0QsV0FBVyxDQUFDQyxHQUFHLENBQUMsa0JBQWtCLEVBQUV6RCxnQkFBZ0IsQ0FBQztFQUNoRTtBQ3hDRixDRHlDQztBQUFBMEQsT0FBQSxDQUFBdEQsa0JBQUEsR0FBQUEsa0JBQUE7QUFFRCxJQUFJLE9BQU91RCxNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNDLFFBQVEsSUFBSUQsTUFBTSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsRUFBRTtFQUMzRUYsTUFBTSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQ3pELGtCQUFrQixDQUFDO0FDekN6QztBRDBDQyxJQUFBMEQsU0FBQSxHQUVjMUQsa0JBQWtCO0FBQUFzRCxPQUFBLGNBQUFJLFNBQUEiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaCwgcmVzb2x2ZUNvbXBvbmVudCwgQ29tcG9uZW50T3B0aW9ucyB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMnXHJcbmltcG9ydCB7IFZYRVRhYmxlQ29yZSwgVnhlVGFibGVEZWZpbmVzLCBWeGVDb2x1bW5Qcm9wVHlwZXMsIFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcywgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLCBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcyB9IGZyb20gJ3Z4ZS10YWJsZSdcclxuXHJcbmZ1bmN0aW9uIGlzRW1wdHlWYWx1ZSAoY2VsbFZhbHVlOiBhbnkpIHtcclxuICByZXR1cm4gY2VsbFZhbHVlID09PSBudWxsIHx8IGNlbGxWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGNlbGxWYWx1ZSA9PT0gJydcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0T25OYW1lICh0eXBlOiBzdHJpbmcpIHtcclxuICByZXR1cm4gJ29uJyArIHR5cGUuc3Vic3RyaW5nKDAsIDEpLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyB0eXBlLnN1YnN0cmluZygxKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNb2RlbFByb3AgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgbGV0IHByb3AgPSAndmFsdWUnXHJcbiAgc3dpdGNoIChyZW5kZXJPcHRzLm5hbWUpIHtcclxuICAgIGNhc2UgJ0FTd2l0Y2gnOlxyXG4gICAgICBwcm9wID0gJ2NoZWNrZWQnXHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG4gIHJldHVybiBwcm9wXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1vZGVsRXZlbnQgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgbGV0IHR5cGUgPSAndXBkYXRlOnZhbHVlJ1xyXG4gIHN3aXRjaCAocmVuZGVyT3B0cy5uYW1lKSB7XHJcbiAgICBjYXNlICdBU3dpdGNoJzpcclxuICAgICAgdHlwZSA9ICd1cGRhdGU6Y2hlY2tlZCdcclxuICAgICAgYnJlYWtcclxuICB9XHJcbiAgcmV0dXJuIHR5cGVcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2hhbmdlRXZlbnQgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgcmV0dXJuICdjaGFuZ2UnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENlbGxFZGl0RmlsdGVyUHJvcHMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zIHwgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckZpbHRlclBhcmFtcywgdmFsdWU6IGFueSwgZGVmYXVsdFByb3BzPzogeyBbcHJvcDogc3RyaW5nXTogYW55IH0pIHtcclxuICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sIGRlZmF1bHRQcm9wcywgcmVuZGVyT3B0cy5wcm9wcywgeyBbZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpXTogdmFsdWUgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbVByb3BzIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMsIHZhbHVlOiBhbnksIGRlZmF1bHRQcm9wcz86IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRleHQgKGNlbGxWYWx1ZTogYW55KSB7XHJcbiAgcmV0dXJuICcnICsgKGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpID8gJycgOiBjZWxsVmFsdWUpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENlbGxMYWJlbFZOcyAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMsIGNlbGxMYWJlbDogYW55KSB7XHJcbiAgY29uc3QgeyBwbGFjZWhvbGRlciB9ID0gcmVuZGVyT3B0c1xyXG4gIHJldHVybiBbXHJcbiAgICBoKCdzcGFuJywge1xyXG4gICAgICBjbGFzczogJ3Z4ZS1jZWxsLS1sYWJlbCdcclxuICAgIH0sIHBsYWNlaG9sZGVyICYmIGlzRW1wdHlWYWx1ZShjZWxsTGFiZWwpXHJcbiAgICAgID8gW1xyXG4gICAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tcGxhY2Vob2xkZXInXHJcbiAgICAgICAgICB9LCBmb3JtYXRUZXh0KHBsYWNlaG9sZGVyKSlcclxuICAgICAgICBdXHJcbiAgICAgIDogZm9ybWF0VGV4dChjZWxsTGFiZWwpKVxyXG4gIF1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0T25zIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyUGFyYW1zLCBpbnB1dEZ1bmM/OiBGdW5jdGlvbiwgY2hhbmdlRnVuYz86IEZ1bmN0aW9uKSB7XHJcbiAgY29uc3QgeyBldmVudHMgfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCBtb2RlbEV2ZW50ID0gZ2V0TW9kZWxFdmVudChyZW5kZXJPcHRzKVxyXG4gIGNvbnN0IGNoYW5nZUV2ZW50ID0gZ2V0Q2hhbmdlRXZlbnQocmVuZGVyT3B0cylcclxuICBjb25zdCBpc1NhbWVFdmVudCA9IGNoYW5nZUV2ZW50ID09PSBtb2RlbEV2ZW50XHJcbiAgY29uc3Qgb25zOiB7IFt0eXBlOiBzdHJpbmddOiBGdW5jdGlvbiB9ID0ge31cclxuICBYRVV0aWxzLm9iamVjdEVhY2goZXZlbnRzLCAoZnVuYzogRnVuY3Rpb24sIGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICBvbnNbZ2V0T25OYW1lKGtleSldID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgIGZ1bmMocGFyYW1zLCAuLi5hcmdzKVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgaWYgKGlucHV0RnVuYykge1xyXG4gICAgb25zW2dldE9uTmFtZShtb2RlbEV2ZW50KV0gPSBmdW5jdGlvbiAodGFyZ2V0RXZudDogYW55KSB7XHJcbiAgICAgIGlucHV0RnVuYyh0YXJnZXRFdm50KVxyXG4gICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1ttb2RlbEV2ZW50XSkge1xyXG4gICAgICAgIGV2ZW50c1ttb2RlbEV2ZW50XShwYXJhbXMsIHRhcmdldEV2bnQpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcclxuICAgICAgICBjaGFuZ2VGdW5jKHRhcmdldEV2bnQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgaWYgKCFpc1NhbWVFdmVudCAmJiBjaGFuZ2VGdW5jKSB7XHJcbiAgICBvbnNbZ2V0T25OYW1lKGNoYW5nZUV2ZW50KV0gPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgY2hhbmdlRnVuYyguLi5hcmdzKVxyXG4gICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1tjaGFuZ2VFdmVudF0pIHtcclxuICAgICAgICBldmVudHNbY2hhbmdlRXZlbnRdKHBhcmFtcywgLi4uYXJncylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gb25zXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEVkaXRPbnMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcclxuICAgIFhFVXRpbHMuc2V0KHJvdywgY29sdW1uLmZpZWxkLCB2YWx1ZSlcclxuICB9LCAoKSA9PiB7XHJcbiAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgJHRhYmxlLnVwZGF0ZVN0YXR1cyhwYXJhbXMpXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmlsdGVyT25zIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRmlsdGVyUGFyYW1zLCBvcHRpb246IFZ4ZVRhYmxlRGVmaW5lcy5GaWx0ZXJPcHRpb24sIGNoYW5nZUZ1bmM6IEZ1bmN0aW9uKSB7XHJcbiAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXHJcbiAgICBvcHRpb24uZGF0YSA9IHZhbHVlXHJcbiAgfSwgY2hhbmdlRnVuYylcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbU9ucyAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkZm9ybSwgZGF0YSwgZmllbGQgfSA9IHBhcmFtc1xyXG4gIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWU6IGFueSkgPT4ge1xyXG4gICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxyXG4gICAgWEVVdGlscy5zZXQoZGF0YSwgZmllbGQsIHZhbHVlKVxyXG4gIH0sICgpID0+IHtcclxuICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAkZm9ybS51cGRhdGVTdGF0dXMocGFyYW1zKVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hdGNoQ2FzY2FkZXJEYXRhIChpbmRleDogbnVtYmVyLCBsaXN0OiBhbnlbXSwgdmFsdWVzOiBhbnlbXSwgbGFiZWxzOiBhbnlbXSkge1xyXG4gIGNvbnN0IHZhbCA9IHZhbHVlc1tpbmRleF1cclxuICBpZiAobGlzdCAmJiB2YWx1ZXMubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgIFhFVXRpbHMuZWFjaChsaXN0LCAoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gdmFsKSB7XHJcbiAgICAgICAgbGFiZWxzLnB1c2goaXRlbS5sYWJlbClcclxuICAgICAgICBtYXRjaENhc2NhZGVyRGF0YSgrK2luZGV4LCBpdGVtLmNoaWxkcmVuLCB2YWx1ZXMsIGxhYmVscylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdERhdGVQaWNrZXIgKGRlZmF1bHRGb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMpIHtcclxuICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcywgZGVmYXVsdEZvcm1hdCkpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWxlY3RDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3VwcywgcHJvcHMgPSB7fSwgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpXHJcbiAgaWYgKCFpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSkge1xyXG4gICAgcmV0dXJuIFhFVXRpbHMubWFwKHByb3BzLm1vZGUgPT09ICdtdWx0aXBsZScgPyBjZWxsVmFsdWUgOiBbY2VsbFZhbHVlXSwgb3B0aW9uR3JvdXBzXHJcbiAgICAgID8gKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBsZXQgc2VsZWN0SXRlbVxyXG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgc2VsZWN0SXRlbSA9IFhFVXRpbHMuZmluZChvcHRpb25Hcm91cHNbaW5kZXhdW2dyb3VwT3B0aW9uc10sIChpdGVtKSA9PiBpdGVtW3ZhbHVlUHJvcF0gPT09IHZhbHVlKVxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0SXRlbSkge1xyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtID8gc2VsZWN0SXRlbVtsYWJlbFByb3BdIDogdmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgIDogKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbnMsIChpdGVtKSA9PiBpdGVtW3ZhbHVlUHJvcF0gPT09IHZhbHVlKVxyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZVxyXG4gICAgICAgIH0pLmpvaW4oJywgJylcclxuICB9XHJcbiAgcmV0dXJuICcnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENhc2NhZGVyQ2VsbFZhbHVlIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyQ2VsbFBhcmFtcyB8IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5FeHBvcnRNZXRob2RQYXJhbXMpIHtcclxuICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICBjb25zdCB2YWx1ZXMgPSBjZWxsVmFsdWUgfHwgW11cclxuICBjb25zdCBsYWJlbHM6IEFycmF5PGFueT4gPSBbXVxyXG4gIG1hdGNoQ2FzY2FkZXJEYXRhKDAsIHByb3BzLm9wdGlvbnMsIHZhbHVlcywgbGFiZWxzKVxyXG4gIHJldHVybiAocHJvcHMuc2hvd0FsbExldmVscyA9PT0gZmFsc2UgPyBsYWJlbHMuc2xpY2UobGFiZWxzLmxlbmd0aCAtIDEsIGxhYmVscy5sZW5ndGgpIDogbGFiZWxzKS5qb2luKGAgJHtwcm9wcy5zZXBhcmF0b3IgfHwgJy8nfSBgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSYW5nZVBpY2tlckNlbGxWYWx1ZSAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMgfCBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGxldCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICBpZiAoY2VsbFZhbHVlKSB7XHJcbiAgICBjZWxsVmFsdWUgPSBYRVV0aWxzLm1hcChjZWxsVmFsdWUsIChkYXRlOiBhbnkpID0+IGRhdGUuZm9ybWF0KHByb3BzLmZvcm1hdCB8fCAnWVlZWS1NTS1ERCcpKS5qb2luKCcgfiAnKVxyXG4gIH1cclxuICByZXR1cm4gY2VsbFZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRyZWVTZWxlY3RDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zIHwgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckVkaXRQYXJhbXMpIHtcclxuICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCB7IHRyZWVEYXRhLCB0cmVlQ2hlY2thYmxlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKVxyXG4gIGlmICghaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkpIHtcclxuICAgIHJldHVybiBYRVV0aWxzLm1hcCh0cmVlQ2hlY2thYmxlID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sICh2YWx1ZSkgPT4ge1xyXG4gICAgICBjb25zdCBtYXRjaE9iaiA9IFhFVXRpbHMuZmluZFRyZWUodHJlZURhdGEsIChpdGVtOiBhbnkpID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlLCB7IGNoaWxkcmVuOiAnY2hpbGRyZW4nIH0pXHJcbiAgICAgIHJldHVybiBtYXRjaE9iaiA/IG1hdGNoT2JqLml0ZW0udGl0bGUgOiB2YWx1ZVxyXG4gICAgfSkuam9pbignLCAnKVxyXG4gIH1cclxuICByZXR1cm4gY2VsbFZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhdGVQaWNrZXJDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zIHwgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkV4cG9ydE1ldGhvZFBhcmFtcywgZGVmYXVsdEZvcm1hdDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKVxyXG4gIGlmIChjZWxsVmFsdWUpIHtcclxuICAgIGNlbGxWYWx1ZSA9IGNlbGxWYWx1ZS5mb3JtYXQocHJvcHMuZm9ybWF0IHx8IGRlZmF1bHRGb3JtYXQpXHJcbiAgfVxyXG4gIHJldHVybiBjZWxsVmFsdWVcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWRpdFJlbmRlciAoZGVmYXVsdFByb3BzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIgJiB7IG5hbWU6IHN0cmluZyB9LCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKVxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XHJcbiAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNlbGxWYWx1ZSwgZGVmYXVsdFByb3BzKSxcclxuICAgICAgICAuLi5nZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgfSlcclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlciwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICByZXR1cm4gW1xyXG4gICAgaChyZXNvbHZlQ29tcG9uZW50KCdhLWJ1dHRvbicpLCB7XHJcbiAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgbnVsbCksXHJcbiAgICAgIC4uLmdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICB9LCBjZWxsVGV4dChyZW5kZXJPcHRzLmNvbnRlbnQpKVxyXG4gIF1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlciwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHJlbmRlck9wdHNcclxuICBpZiAoY2hpbGRyZW4pIHtcclxuICAgIHJldHVybiBjaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIpID0+IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyKGNoaWxkUmVuZGVyT3B0cywgcGFyYW1zKVswXSlcclxuICB9XHJcbiAgcmV0dXJuIFtdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlclJlbmRlciAoZGVmYXVsdFByb3BzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkZpbHRlclJlbmRlciAmIHsgbmFtZTogc3RyaW5nIH0sIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckZpbHRlclBhcmFtcykge1xyXG4gICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItYW50ZC13cmFwcGVyJ1xyXG4gICAgICB9LCBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YVxyXG4gICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcclxuICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbilcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgfSkpXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDb25maXJtRmlsdGVyIChwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJGaWx0ZXJQYXJhbXMsIGNoZWNrZWQ6IGJvb2xlYW4sIG9wdGlvbjogVnhlVGFibGVEZWZpbmVzLkZpbHRlck9wdGlvbikge1xyXG4gIGNvbnN0IHsgJHBhbmVsIH0gPSBwYXJhbXNcclxuICAkcGFuZWwuY2hhbmdlT3B0aW9uKG51bGwsIGNoZWNrZWQsIG9wdGlvbilcclxufVxyXG5cclxuLyoqXHJcbiAqIOaooeeziuWMuemFjVxyXG4gKiBAcGFyYW0gcGFyYW1zXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZhdWx0RnV6enlGaWx0ZXJNZXRob2QgKHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkZpbHRlck1ldGhvZFBhcmFtcykge1xyXG4gIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb25cclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICByZXR1cm4gWEVVdGlscy50b1ZhbHVlU3RyaW5nKGNlbGxWYWx1ZSkuaW5kZXhPZihkYXRhKSA+IC0xXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnsr7noa7ljLnphY1cclxuICogQHBhcmFtIHBhcmFtc1xyXG4gKi9cclxuZnVuY3Rpb24gZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kIChwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5GaWx0ZXJNZXRob2RQYXJhbXMpIHtcclxuICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpXHJcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gZGF0YVxyXG59XHJcblxyXG5mdW5jdGlvbiBjZWxsVGV4dCAoY2VsbFZhbHVlOiBhbnkpOiBzdHJpbmdbXSB7XHJcbiAgcmV0dXJuIFtmb3JtYXRUZXh0KGNlbGxWYWx1ZSldXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlck9wdGlvbnMgKG9wdGlvbnM6IGFueVtdLCBvcHRpb25Qcm9wczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvblByb3BzKSB7XHJcbiAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9ucywgKGl0ZW0sIG9JbmRleCkgPT4ge1xyXG4gICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3Qtb3B0aW9uJykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgdmFsdWU6IGl0ZW1bdmFsdWVQcm9wXSxcclxuICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWRcclxuICAgIH0sIHtcclxuICAgICAgZGVmYXVsdDogKCkgPT4gY2VsbFRleHQoaXRlbVtsYWJlbFByb3BdKVxyXG4gICAgfSlcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJlbmRlciAoZGVmYXVsdFByb3BzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zICYgeyBuYW1lOiBzdHJpbmcgfSwgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZmllbGQgfSA9IHBhcmFtc1xyXG4gICAgY29uc3QgeyBuYW1lIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBmaWVsZClcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xyXG4gICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgIC4uLmdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSwgZGVmYXVsdFByb3BzKSxcclxuICAgICAgICAuLi5nZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgfSlcclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyIChyZW5kZXJPcHRzOiBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IHByb3BzID0gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgbnVsbClcclxuICByZXR1cm4gW1xyXG4gICAgaChyZXNvbHZlQ29tcG9uZW50KCdhLWJ1dHRvbicpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgLi4uYXR0cnMsXHJcbiAgICAgIC4uLnByb3BzLFxyXG4gICAgICAuLi5nZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgIH0sIHtcclxuICAgICAgZGVmYXVsdDogKCkgPT4gY2VsbFRleHQocmVuZGVyT3B0cy5jb250ZW50IHx8IHByb3BzLmNvbnRlbnQpXHJcbiAgICB9KVxyXG4gIF1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyIChyZW5kZXJPcHRzOiBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcmVuZGVyT3B0c1xyXG4gIGlmIChjaGlsZHJlbikge1xyXG4gICAgcmV0dXJuIGNoaWxkcmVuLm1hcCgoY2hpbGRSZW5kZXJPcHRzOiBGb3JtSXRlbVJlbmRlck9wdGlvbnMpID0+IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyKGNoaWxkUmVuZGVyT3B0cywgcGFyYW1zKVswXSlcclxuICB9XHJcbiAgcmV0dXJuIFtdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURhdGVQaWNrZXJFeHBvcnRNZXRob2QgKGRlZmF1bHRGb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuRXhwb3J0TWV0aG9kUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IHJvdywgY29sdW1uLCBvcHRpb25zIH0gPSBwYXJhbXNcclxuICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luYWwgPyBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCkgOiBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKGNvbHVtbi5lZGl0UmVuZGVyIHx8IGNvbHVtbi5jZWxsUmVuZGVyLCBwYXJhbXMsIGRlZmF1bHRGb3JtYXQpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFeHBvcnRNZXRob2QgKGdldEV4cG9ydENlbGxWYWx1ZTogRnVuY3Rpb24pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkV4cG9ydE1ldGhvZFBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiwgb3B0aW9ucyB9ID0gcGFyYW1zXHJcbiAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbmFsID8gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpIDogZ2V0RXhwb3J0Q2VsbFZhbHVlKGNvbHVtbi5lZGl0UmVuZGVyIHx8IGNvbHVtbi5jZWxsUmVuZGVyLCBwYXJhbXMpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIgKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zICYgeyBuYW1lOiBzdHJpbmcgfSwgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgb3B0aW9ucyA9IFtdLCBvcHRpb25Qcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXNcclxuICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgIGNvbnN0IGxhYmVsUHJvcCA9IG9wdGlvblByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIGZpZWxkKVxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgaChyZXNvbHZlQ29tcG9uZW50KGAke25hbWV9R3JvdXBgKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgLi4uZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKSxcclxuICAgICAgICAuLi5nZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgfSwge1xyXG4gICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiBvcHRpb25zLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvblt2YWx1ZVByb3BdLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBvcHRpb24uZGlzYWJsZWRcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGNlbGxUZXh0KG9wdGlvbltsYWJlbFByb3BdKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5qOA5p+l6Kem5Y+R5rqQ5piv5ZCm5bGe5LqO55uu5qCH6IqC54K5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldE5vZGUgKGV2bnQ6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpIHtcclxuICBsZXQgdGFyZ2V0RWxlbVxyXG4gIGxldCB0YXJnZXQgPSBldm50LnRhcmdldFxyXG4gIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlICYmIHRhcmdldCAhPT0gZG9jdW1lbnQpIHtcclxuICAgIGlmIChjbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZSAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0ICYmIHRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzTmFtZSkgPiAtMSkge1xyXG4gICAgICB0YXJnZXRFbGVtID0gdGFyZ2V0XHJcbiAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gY29udGFpbmVyKSB7XHJcbiAgICAgIHJldHVybiB7IGZsYWc6IGNsYXNzTmFtZSA/ICEhdGFyZ2V0RWxlbSA6IHRydWUsIGNvbnRhaW5lciwgdGFyZ2V0RWxlbTogdGFyZ2V0RWxlbSB9XHJcbiAgICB9XHJcbiAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZVxyXG4gIH1cclxuICByZXR1cm4geyBmbGFnOiBmYWxzZSB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuovku7blhbzlrrnmgKflpITnkIZcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUNsZWFyRXZlbnQgKHBhcmFtczogVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLkludGVyY2VwdG9yQ2xlYXJGaWx0ZXJQYXJhbXMgfCBWeGVHbG9iYWxJbnRlcmNlcHRvckhhbmRsZXMuSW50ZXJjZXB0b3JDbGVhckFjdGl2ZWRQYXJhbXMgfCBWeGVHbG9iYWxJbnRlcmNlcHRvckhhbmRsZXMuSW50ZXJjZXB0b3JDbGVhckFyZWFzUGFyYW1zKSB7XHJcbiAgY29uc3QgeyAkZXZlbnQgfSA9IHBhcmFtc1xyXG4gIGNvbnN0IGJvZHlFbGVtID0gZG9jdW1lbnQuYm9keVxyXG4gIGlmIChcclxuICAgIC8vIOS4i+aLieahhlxyXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtc2VsZWN0LWRyb3Bkb3duJykuZmxhZyB8fFxyXG4gICAgLy8g57qn6IGUXHJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2FudC1jYXNjYWRlci1tZW51cycpLmZsYWcgfHxcclxuICAgIC8vIOaXpeacn1xyXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtcGlja2VyLWRyb3Bkb3duJykuZmxhZyB8fFxyXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtY2FsZW5kYXItcGlja2VyLWNvbnRhaW5lcicpLmZsYWcgfHxcclxuICAgIC8vIOaXtumXtOmAieaLqVxyXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtdGltZS1waWNrZXItcGFuZWwnKS5mbGFnXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOeahOihqOagvOmAgumFjeaPkuS7tu+8jOeUqOS6juWFvOWuuSBhbnQtZGVzaWduLXZ1ZSDnu4Tku7blupNcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbkFudGQgPSB7XHJcbiAgaW5zdGFsbCAodnhldGFibGU6IFZYRVRhYmxlQ29yZSkge1xyXG4gICAgLy8g5qOA5p+l54mI5pysXHJcbiAgICBpZiAoIS9eKDQpXFwuLy50ZXN0KHZ4ZXRhYmxlLnZlcnNpb24pKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2eGUtdGFibGUtcGx1Z2luLWFudGRdIFZlcnNpb24gdnhlLXRhYmxlIDQueCBpcyByZXF1aXJlZCcpXHJcbiAgICB9XHJcblxyXG4gICAgdnhldGFibGUucmVuZGVyZXIubWl4aW4oe1xyXG4gICAgICBBQXV0b0NvbXBsZXRlOiB7XHJcbiAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuYW50LWlucHV0JyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFJbnB1dDoge1xyXG4gICAgICAgIGF1dG9mb2N1czogJ2lucHV0LmFudC1pbnB1dCcsXHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBBSW5wdXROdW1iZXI6IHtcclxuICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5hbnQtaW5wdXQtbnVtYmVyLWlucHV0JyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFTZWxlY3Q6IHtcclxuICAgICAgICByZW5kZXJFZGl0IChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNlbGxWYWx1ZSlcclxuICAgICAgICAgIGNvbnN0IG9ucyA9IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgLi4ucHJvcHMsXHJcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdhLXNlbGVjdC1vcHQtZ3JvdXAnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge30sIGdyb3VwW2dyb3VwTGFiZWxdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJ1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItYW50ZC13cmFwcGVyJ1xyXG4gICAgICAgICAgICB9LCBvcHRpb25Hcm91cHNcclxuICAgICAgICAgICAgICA/IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIHByb3BzLm1vZGUgPT09ICdtdWx0aXBsZScgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3Qtb3B0LWdyb3VwJykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge30sIGdyb3VwW2dyb3VwTGFiZWxdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiByZW5kZXJPcHRpb25zKGdyb3VwW2dyb3VwT3B0aW9uc10sIG9wdGlvblByb3BzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgOiBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBwcm9wcy5tb2RlID09PSAnbXVsdGlwbGUnID8gKG9wdGlvbi5kYXRhICYmIG9wdGlvbi5kYXRhLmxlbmd0aCA+IDApIDogIVhFVXRpbHMuZXFOdWxsKG9wdGlvbi5kYXRhKSwgb3B0aW9uKVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiByZW5kZXJPcHRpb25zKG9wdGlvbnMsIG9wdGlvblByb3BzKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2QgKHBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uXHJcbiAgICAgICAgICBjb25zdCB7IGZpZWxkLCBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtblxyXG4gICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGZpZWxkKVxyXG4gICAgICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICdtdWx0aXBsZScpIHtcclxuICAgICAgICAgICAgaWYgKFhFVXRpbHMuaXNBcnJheShjZWxsVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMuaW5jbHVkZUFycmF5cyhjZWxsVmFsdWUsIGRhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuaW5kZXhPZihjZWxsVmFsdWUpID4gLTFcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xyXG4gICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PSBkYXRhXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZmllbGQgfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgZmllbGQpXHJcbiAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSlcclxuICAgICAgICAgIGNvbnN0IG9ucyA9IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xyXG4gICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCdcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdhLXNlbGVjdC1vcHQtZ3JvdXAnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge30sIGdyb3VwW2dyb3VwTGFiZWxdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldFNlbGVjdENlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgQUNhc2NhZGVyOiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldENhc2NhZGVyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRDYXNjYWRlckNlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgQURhdGVQaWNrZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbDogZm9ybWF0RGF0ZVBpY2tlcignWVlZWS1NTS1ERCcpLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRGF0ZVBpY2tlckV4cG9ydE1ldGhvZCgnWVlZWS1NTS1ERCcpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFNb250aFBpY2tlcjoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJDZWxsOiBmb3JtYXREYXRlUGlja2VyKCdZWVlZLU1NJyksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVEYXRlUGlja2VyRXhwb3J0TWV0aG9kKCdZWVlZLU1NJylcclxuICAgICAgfSxcclxuICAgICAgQVJhbmdlUGlja2VyOiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFJhbmdlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRSYW5nZVBpY2tlckNlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgQVdlZWtQaWNrZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbDogZm9ybWF0RGF0ZVBpY2tlcignWVlZWS1XV+WRqCcpLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRGF0ZVBpY2tlckV4cG9ydE1ldGhvZCgnWVlZWS1XV+WRqCcpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFUaW1lUGlja2VyOiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckNlbGw6IGZvcm1hdERhdGVQaWNrZXIoJ0hIOm1tOnNzJyksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVEYXRlUGlja2VyRXhwb3J0TWV0aG9kKCdISDptbTpzcycpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFUcmVlU2VsZWN0OiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFRyZWVTZWxlY3RDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldFRyZWVTZWxlY3RDZWxsVmFsdWUpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFSYXRlOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBBU3dpdGNoOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXIgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItYW50ZC13cmFwcGVyJ1xyXG4gICAgICAgICAgICB9LCBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YVxyXG4gICAgICAgICAgICAgIHJldHVybiBoKG5hbWUgYXMgc3RyaW5nLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKSxcclxuICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgWEVVdGlscy5pc0Jvb2xlYW4ob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEFSYWRpbzoge1xyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBBQ2hlY2tib3g6IHtcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgQUJ1dHRvbjoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlclxyXG4gICAgICB9LFxyXG4gICAgICBBQnV0dG9uczoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGRlZmF1bHRCdXR0b25zRWRpdFJlbmRlcixcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlclxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHZ4ZXRhYmxlLmludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJGaWx0ZXInLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgdnhldGFibGUuaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFjdGl2ZWQnLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgdnhldGFibGUuaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFyZWFzJywgaGFuZGxlQ2xlYXJFdmVudClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUgJiYgd2luZG93LlZYRVRhYmxlLnVzZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5BbnRkKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkFudGRcclxuIiwiaW1wb3J0IHsgaCwgcmVzb2x2ZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscyc7XG5mdW5jdGlvbiBpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSB7XG4gICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gbnVsbCB8fCBjZWxsVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBjZWxsVmFsdWUgPT09ICcnO1xufVxuZnVuY3Rpb24gZ2V0T25OYW1lKHR5cGUpIHtcbiAgICByZXR1cm4gJ29uJyArIHR5cGUuc3Vic3RyaW5nKDAsIDEpLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyB0eXBlLnN1YnN0cmluZygxKTtcbn1cbmZ1bmN0aW9uIGdldE1vZGVsUHJvcChyZW5kZXJPcHRzKSB7XG4gICAgbGV0IHByb3AgPSAndmFsdWUnO1xuICAgIHN3aXRjaCAocmVuZGVyT3B0cy5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ0FTd2l0Y2gnOlxuICAgICAgICAgICAgcHJvcCA9ICdjaGVja2VkJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcDtcbn1cbmZ1bmN0aW9uIGdldE1vZGVsRXZlbnQocmVuZGVyT3B0cykge1xuICAgIGxldCB0eXBlID0gJ3VwZGF0ZTp2YWx1ZSc7XG4gICAgc3dpdGNoIChyZW5kZXJPcHRzLm5hbWUpIHtcbiAgICAgICAgY2FzZSAnQVN3aXRjaCc6XG4gICAgICAgICAgICB0eXBlID0gJ3VwZGF0ZTpjaGVja2VkJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbn1cbmZ1bmN0aW9uIGdldENoYW5nZUV2ZW50KHJlbmRlck9wdHMpIHtcbiAgICByZXR1cm4gJ2NoYW5nZSc7XG59XG5mdW5jdGlvbiBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgdmFsdWUsIGRlZmF1bHRQcm9wcykge1xuICAgIHJldHVybiBYRVV0aWxzLmFzc2lnbih7fSwgZGVmYXVsdFByb3BzLCByZW5kZXJPcHRzLnByb3BzLCB7IFtnZXRNb2RlbFByb3AocmVuZGVyT3B0cyldOiB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIHZhbHVlLCBkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sIGRlZmF1bHRQcm9wcywgcmVuZGVyT3B0cy5wcm9wcywgeyBbZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpXTogdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBmb3JtYXRUZXh0KGNlbGxWYWx1ZSkge1xuICAgIHJldHVybiAnJyArIChpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSA/ICcnIDogY2VsbFZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNlbGxMYWJlbCkge1xuICAgIGNvbnN0IHsgcGxhY2Vob2xkZXIgfSA9IHJlbmRlck9wdHM7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgIGNsYXNzOiAndnhlLWNlbGwtLWxhYmVsJ1xuICAgICAgICB9LCBwbGFjZWhvbGRlciAmJiBpc0VtcHR5VmFsdWUoY2VsbExhYmVsKVxuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tcGxhY2Vob2xkZXInXG4gICAgICAgICAgICAgICAgfSwgZm9ybWF0VGV4dChwbGFjZWhvbGRlcikpXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICA6IGZvcm1hdFRleHQoY2VsbExhYmVsKSlcbiAgICBdO1xufVxuZnVuY3Rpb24gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgaW5wdXRGdW5jLCBjaGFuZ2VGdW5jKSB7XG4gICAgY29uc3QgeyBldmVudHMgfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgbW9kZWxFdmVudCA9IGdldE1vZGVsRXZlbnQocmVuZGVyT3B0cyk7XG4gICAgY29uc3QgY2hhbmdlRXZlbnQgPSBnZXRDaGFuZ2VFdmVudChyZW5kZXJPcHRzKTtcbiAgICBjb25zdCBpc1NhbWVFdmVudCA9IGNoYW5nZUV2ZW50ID09PSBtb2RlbEV2ZW50O1xuICAgIGNvbnN0IG9ucyA9IHt9O1xuICAgIFhFVXRpbHMub2JqZWN0RWFjaChldmVudHMsIChmdW5jLCBrZXkpID0+IHtcbiAgICAgICAgb25zW2dldE9uTmFtZShrZXkpXSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBmdW5jKHBhcmFtcywgLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgaWYgKGlucHV0RnVuYykge1xuICAgICAgICBvbnNbZ2V0T25OYW1lKG1vZGVsRXZlbnQpXSA9IGZ1bmN0aW9uICh0YXJnZXRFdm50KSB7XG4gICAgICAgICAgICBpbnB1dEZ1bmModGFyZ2V0RXZudCk7XG4gICAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1ttb2RlbEV2ZW50XSkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1ttb2RlbEV2ZW50XShwYXJhbXMsIHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VGdW5jKHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgb25zW2dldE9uTmFtZShjaGFuZ2VFdmVudCldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNoYW5nZUZ1bmMoLi4uYXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1tjaGFuZ2VFdmVudF0pIHtcbiAgICAgICAgICAgICAgICBldmVudHNbY2hhbmdlRXZlbnRdKHBhcmFtcywgLi4uYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBvbnM7XG59XG5mdW5jdGlvbiBnZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgJHRhYmxlLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWUpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxuICAgICAgICBYRVV0aWxzLnNldChyb3csIGNvbHVtbi5maWVsZCwgdmFsdWUpO1xuICAgIH0sICgpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgJHRhYmxlLnVwZGF0ZVN0YXR1cyhwYXJhbXMpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCBjaGFuZ2VGdW5jKSB7XG4gICAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXG4gICAgICAgIG9wdGlvbi5kYXRhID0gdmFsdWU7XG4gICAgfSwgY2hhbmdlRnVuYyk7XG59XG5mdW5jdGlvbiBnZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgJGZvcm0sIGRhdGEsIGZpZWxkIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXG4gICAgICAgIFhFVXRpbHMuc2V0KGRhdGEsIGZpZWxkLCB2YWx1ZSk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAkZm9ybS51cGRhdGVTdGF0dXMocGFyYW1zKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG1hdGNoQ2FzY2FkZXJEYXRhKGluZGV4LCBsaXN0LCB2YWx1ZXMsIGxhYmVscykge1xuICAgIGNvbnN0IHZhbCA9IHZhbHVlc1tpbmRleF07XG4gICAgaWYgKGxpc3QgJiYgdmFsdWVzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgIFhFVXRpbHMuZWFjaChsaXN0LCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKGl0ZW0ubGFiZWwpO1xuICAgICAgICAgICAgICAgIG1hdGNoQ2FzY2FkZXJEYXRhKCsraW5kZXgsIGl0ZW0uY2hpbGRyZW4sIHZhbHVlcywgbGFiZWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0RGF0ZVBpY2tlcihkZWZhdWx0Rm9ybWF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldERhdGVQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zLCBkZWZhdWx0Rm9ybWF0KSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBwcm9wcyA9IHt9LCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxhYmVsUHJvcCA9IG9wdGlvblByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJztcbiAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICBpZiAoIWlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBYRVV0aWxzLm1hcChwcm9wcy5tb2RlID09PSAnbXVsdGlwbGUnID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sIG9wdGlvbkdyb3Vwc1xuICAgICAgICAgICAgPyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0SXRlbTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uR3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbkdyb3Vwc1tpbmRleF1bZ3JvdXBPcHRpb25zXSwgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0SXRlbSA9IFhFVXRpbHMuZmluZChvcHRpb25zLCAoaXRlbSkgPT4gaXRlbVt2YWx1ZVByb3BdID09PSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZTtcbiAgICAgICAgICAgIH0pLmpvaW4oJywgJyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cbmZ1bmN0aW9uIGdldENhc2NhZGVyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpO1xuICAgIGNvbnN0IHZhbHVlcyA9IGNlbGxWYWx1ZSB8fCBbXTtcbiAgICBjb25zdCBsYWJlbHMgPSBbXTtcbiAgICBtYXRjaENhc2NhZGVyRGF0YSgwLCBwcm9wcy5vcHRpb25zLCB2YWx1ZXMsIGxhYmVscyk7XG4gICAgcmV0dXJuIChwcm9wcy5zaG93QWxsTGV2ZWxzID09PSBmYWxzZSA/IGxhYmVscy5zbGljZShsYWJlbHMubGVuZ3RoIC0gMSwgbGFiZWxzLmxlbmd0aCkgOiBsYWJlbHMpLmpvaW4oYCAke3Byb3BzLnNlcGFyYXRvciB8fCAnLyd9IGApO1xufVxuZnVuY3Rpb24gZ2V0UmFuZ2VQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBsZXQgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpO1xuICAgIGlmIChjZWxsVmFsdWUpIHtcbiAgICAgICAgY2VsbFZhbHVlID0gWEVVdGlscy5tYXAoY2VsbFZhbHVlLCAoZGF0ZSkgPT4gZGF0ZS5mb3JtYXQocHJvcHMuZm9ybWF0IHx8ICdZWVlZLU1NLUREJykpLmpvaW4oJyB+ICcpO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbFZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0VHJlZVNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgeyB0cmVlRGF0YSwgdHJlZUNoZWNrYWJsZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICBpZiAoIWlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBYRVV0aWxzLm1hcCh0cmVlQ2hlY2thYmxlID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hPYmogPSBYRVV0aWxzLmZpbmRUcmVlKHRyZWVEYXRhLCAoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUsIHsgY2hpbGRyZW46ICdjaGlsZHJlbicgfSk7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hPYmogPyBtYXRjaE9iai5pdGVtLnRpdGxlIDogdmFsdWU7XG4gICAgICAgIH0pLmpvaW4oJywgJyk7XG4gICAgfVxuICAgIHJldHVybiBjZWxsVmFsdWU7XG59XG5mdW5jdGlvbiBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcywgZGVmYXVsdEZvcm1hdCkge1xuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICBpZiAoY2VsbFZhbHVlKSB7XG4gICAgICAgIGNlbGxWYWx1ZSA9IGNlbGxWYWx1ZS5mb3JtYXQocHJvcHMuZm9ybWF0IHx8IGRlZmF1bHRGb3JtYXQpO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbFZhbHVlO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRpdFJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXG4gICAgICAgICAgICAgICAgLi4uZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgIHJldHVybiBbXG4gICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1idXR0b24nKSwge1xuICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgbnVsbCksXG4gICAgICAgICAgICAuLi5nZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICB9LCBjZWxsVGV4dChyZW5kZXJPcHRzLmNvbnRlbnQpKVxuICAgIF07XG59XG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcmVuZGVyT3B0cztcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuLm1hcCgoY2hpbGRSZW5kZXJPcHRzKSA9PiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlcihjaGlsZFJlbmRlck9wdHMsIHBhcmFtcylbMF0pO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59XG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXJSZW5kZXIoZGVmYXVsdFByb3BzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWFudGQtd3JhcHBlcidcbiAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUsIGRlZmF1bHRQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCAhIW9wdGlvbi5kYXRhLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgIF07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBjaGVja2VkLCBvcHRpb24pIHtcbiAgICBjb25zdCB7ICRwYW5lbCB9ID0gcGFyYW1zO1xuICAgICRwYW5lbC5jaGFuZ2VPcHRpb24obnVsbCwgY2hlY2tlZCwgb3B0aW9uKTtcbn1cbi8qKlxuICog5qih57OK5Yy56YWNXG4gKiBAcGFyYW0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvbjtcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgcmV0dXJuIFhFVXRpbHMudG9WYWx1ZVN0cmluZyhjZWxsVmFsdWUpLmluZGV4T2YoZGF0YSkgPiAtMTtcbn1cbi8qKlxuICog57K+56Gu5Yy56YWNXG4gKiBAcGFyYW0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvbjtcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gZGF0YTtcbn1cbmZ1bmN0aW9uIGNlbGxUZXh0KGNlbGxWYWx1ZSkge1xuICAgIHJldHVybiBbZm9ybWF0VGV4dChjZWxsVmFsdWUpXTtcbn1cbmZ1bmN0aW9uIHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpIHtcbiAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSc7XG4gICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbnMsIChpdGVtLCBvSW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3Qtb3B0aW9uJyksIHtcbiAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgdmFsdWU6IGl0ZW1bdmFsdWVQcm9wXSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGNlbGxUZXh0KGl0ZW1bbGFiZWxQcm9wXSlcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgbmFtZSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgZmllbGQpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgIC4uLmdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpO1xuICAgIHJldHVybiBbXG4gICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1idXR0b24nKSwge1xuICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIC4uLmdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChyZW5kZXJPcHRzLmNvbnRlbnQgfHwgcHJvcHMuY29udGVudClcbiAgICAgICAgfSlcbiAgICBdO1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHJlbmRlck9wdHM7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0cykgPT4gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufVxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBpY2tlckV4cG9ydE1ldGhvZChkZWZhdWx0Rm9ybWF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyByb3csIGNvbHVtbiwgb3B0aW9ucyB9ID0gcGFyYW1zO1xuICAgICAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbmFsID8gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpIDogZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZShjb2x1bW4uZWRpdFJlbmRlciB8fCBjb2x1bW4uY2VsbFJlbmRlciwgcGFyYW1zLCBkZWZhdWx0Rm9ybWF0KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRXhwb3J0TWV0aG9kKGdldEV4cG9ydENlbGxWYWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4sIG9wdGlvbnMgfSA9IHBhcmFtcztcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW5hbCA/IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKSA6IGdldEV4cG9ydENlbGxWYWx1ZShjb2x1bW4uZWRpdFJlbmRlciB8fCBjb2x1bW4uY2VsbFJlbmRlciwgcGFyYW1zKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgb3B0aW9ucyA9IFtdLCBvcHRpb25Qcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IGxhYmVsUHJvcCA9IG9wdGlvblByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSc7XG4gICAgICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIGZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChgJHtuYW1lfUdyb3VwYCksIHtcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAuLi5nZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUpLFxuICAgICAgICAgICAgICAgIC4uLmdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb25bdmFsdWVQcm9wXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gY2VsbFRleHQob3B0aW9uW2xhYmVsUHJvcF0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuLyoqXG4gKiDmo4Dmn6Xop6blj5HmupDmmK/lkKblsZ7kuo7nm67moIfoioLngrlcbiAqL1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXROb2RlKGV2bnQsIGNvbnRhaW5lciwgY2xhc3NOYW1lKSB7XG4gICAgbGV0IHRhcmdldEVsZW07XG4gICAgbGV0IHRhcmdldCA9IGV2bnQudGFyZ2V0O1xuICAgIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlICYmIHRhcmdldCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSAmJiB0YXJnZXQuY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUuc3BsaXQgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3NOYW1lKSA+IC0xKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtID0gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldCA9PT0gY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmbGFnOiBjbGFzc05hbWUgPyAhIXRhcmdldEVsZW0gOiB0cnVlLCBjb250YWluZXIsIHRhcmdldEVsZW06IHRhcmdldEVsZW0gfTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZmxhZzogZmFsc2UgfTtcbn1cbi8qKlxuICog5LqL5Lu25YW85a655oCn5aSE55CGXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUNsZWFyRXZlbnQocGFyYW1zKSB7XG4gICAgY29uc3QgeyAkZXZlbnQgfSA9IHBhcmFtcztcbiAgICBjb25zdCBib2R5RWxlbSA9IGRvY3VtZW50LmJvZHk7XG4gICAgaWYgKFxuICAgIC8vIOS4i+aLieahhlxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnYW50LXNlbGVjdC1kcm9wZG93bicpLmZsYWcgfHxcbiAgICAgICAgLy8g57qn6IGUXG4gICAgICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnYW50LWNhc2NhZGVyLW1lbnVzJykuZmxhZyB8fFxuICAgICAgICAvLyDml6XmnJ9cbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtcGlja2VyLWRyb3Bkb3duJykuZmxhZyB8fFxuICAgICAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2FudC1jYWxlbmRhci1waWNrZXItY29udGFpbmVyJykuZmxhZyB8fFxuICAgICAgICAvLyDml7bpl7TpgInmi6lcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdhbnQtdGltZS1waWNrZXItcGFuZWwnKS5mbGFnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIOWfuuS6jiB2eGUtdGFibGUg55qE6KGo5qC86YCC6YWN5o+S5Lu277yM55So5LqO5YW85a65IGFudC1kZXNpZ24tdnVlIOe7hOS7tuW6k1xuICovXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5BbnRkID0ge1xuICAgIGluc3RhbGwodnhldGFibGUpIHtcbiAgICAgICAgLy8g5qOA5p+l54mI5pysXG4gICAgICAgIGlmICghL14oNClcXC4vLnRlc3QodnhldGFibGUudmVyc2lvbikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2eGUtdGFibGUtcGx1Z2luLWFudGRdIFZlcnNpb24gdnhlLXRhYmxlIDQueCBpcyByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHZ4ZXRhYmxlLnJlbmRlcmVyLm1peGluKHtcbiAgICAgICAgICAgIEFBdXRvQ29tcGxldGU6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5hbnQtaW5wdXQnLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5hbnQtaW5wdXQnLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RnV6enlGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBSW5wdXROdW1iZXI6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5hbnQtaW5wdXQtbnVtYmVyLWlucHV0JyxcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQVNlbGVjdDoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNlbGxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ucyA9IGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdhLXNlbGVjdC1vcHQtZ3JvdXAnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge30sIGdyb3VwW2dyb3VwTGFiZWxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItYW50ZC13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9uR3JvdXBzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubW9kZSA9PT0gJ211bHRpcGxlJyA/IChvcHRpb24uZGF0YSAmJiBvcHRpb24uZGF0YS5sZW5ndGggPiAwKSA6ICFYRVV0aWxzLmVxTnVsbChvcHRpb24uZGF0YSksIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3Qtb3B0LWdyb3VwJyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7fSwgZ3JvdXBbZ3JvdXBMYWJlbF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2Etc2VsZWN0JyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIHByb3BzLm1vZGUgPT09ICdtdWx0aXBsZScgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmllbGQsIGZpbHRlclJlbmRlcjogcmVuZGVyT3B0cyB9ID0gY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcHMubW9kZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFhFVXRpbHMuaXNBcnJheShjZWxsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMuaW5jbHVkZUFycmF5cyhjZWxsVmFsdWUsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaW5kZXhPZihjZWxsVmFsdWUpID4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT0gZGF0YTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50KHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZmllbGQgfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ucyA9IGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbkdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdhLXNlbGVjdC1vcHQtZ3JvdXAnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywge30sIGdyb3VwW2dyb3VwTGFiZWxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnYS1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0U2VsZWN0Q2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFDYXNjYWRlcjoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJDZWxsKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRDYXNjYWRlckNlbGxWYWx1ZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBRGF0ZVBpY2tlcjoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJDZWxsOiBmb3JtYXREYXRlUGlja2VyKCdZWVlZLU1NLUREJyksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVEYXRlUGlja2VyRXhwb3J0TWV0aG9kKCdZWVlZLU1NLUREJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBTW9udGhQaWNrZXI6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbDogZm9ybWF0RGF0ZVBpY2tlcignWVlZWS1NTScpLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRGF0ZVBpY2tlckV4cG9ydE1ldGhvZCgnWVlZWS1NTScpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQVJhbmdlUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBnZXRSYW5nZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldFJhbmdlUGlja2VyQ2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFXZWVrUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGw6IGZvcm1hdERhdGVQaWNrZXIoJ1lZWVktV1flkagnKSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZURhdGVQaWNrZXJFeHBvcnRNZXRob2QoJ1lZWVktV1flkagnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFUaW1lUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGw6IGZvcm1hdERhdGVQaWNrZXIoJ0hIOm1tOnNzJyksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVEYXRlUGlja2VyRXhwb3J0TWV0aG9kKCdISDptbTpzcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQVRyZWVTZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFRyZWVTZWxlY3RDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRUcmVlU2VsZWN0Q2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFSYXRlOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFTd2l0Y2g6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWFudGQtd3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKG5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgWEVVdGlscy5pc0Jvb2xlYW4ob3B0aW9uLmRhdGEpLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBUmFkaW86IHtcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBQ2hlY2tib3g6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBQnV0dG9uOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQUJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uc0l0ZW1SZW5kZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZ4ZXRhYmxlLmludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJGaWx0ZXInLCBoYW5kbGVDbGVhckV2ZW50KTtcbiAgICAgICAgdnhldGFibGUuaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFjdGl2ZWQnLCBoYW5kbGVDbGVhckV2ZW50KTtcbiAgICAgICAgdnhldGFibGUuaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFyZWFzJywgaGFuZGxlQ2xlYXJFdmVudCk7XG4gICAgfVxufTtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUgJiYgd2luZG93LlZYRVRhYmxlLnVzZSkge1xuICAgIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5BbnRkKTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZYRVRhYmxlUGx1Z2luQW50ZDtcbiJdfQ==
