"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../../tools/dom"),_utils=require("../../tools/utils"),_log=require("../../tools/log"),_resize=require("../../tools/resize"),_event=require("../../tools/event"),_size=require("../../hooks/size"),_vXETable=require("../../v-x-e-table"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_cell=_interopRequireDefault(require("./cell")),_body=_interopRequireDefault(require("./body")),_header=_interopRequireDefault(require("../../header")),_footer=_interopRequireDefault(require("../../footer")),_props=_interopRequireDefault(require("./props")),_emits=_interopRequireDefault(require("./emits")),_index=_interopRequireDefault(require("../../loading/index")),_util=require("./util"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,l=1,r=arguments.length;l<r;l++)for(var n in t=arguments[l])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__spreadArray=function(e,t,l){if(l||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||((r=r||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},isWebkit=_dom.browse["-webkit"]&&!_dom.browse.edge,resizableStorageKey="VXE_TABLE_CUSTOM_COLUMN_WIDTH",visibleStorageKey="VXE_TABLE_CUSTOM_COLUMN_VISIBLE",fixedStorageKey="VXE_TABLE_CUSTOM_COLUMN_FIXED",orderStorageKey="VXE_TABLE_CUSTOM_COLUMN_ORDER",_default=(0,_vue.defineComponent)({name:"VxeTable",props:_props.default,emits:_emits.default,setup:function(K,e){function p(e,t,l){return e=_xeUtils.default.get(e,l),t=_xeUtils.default.get(t,l),!(!(0,_utils.eqEmptyValue)(e)||!(0,_utils.eqEmptyValue)(t))||(_xeUtils.default.isString(e)||_xeUtils.default.isNumber(e)?""+e==""+t:_xeUtils.default.isEqual(e,t))}function c(e){var t=T.value.orders,e=e.order||null,e=t.indexOf(e)+1;return t[e<t.length?e:0]}function t(e,a,i){var t,u;e&&(t=K.treeConfig,u=X.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t,l,r=e.row,n=e.col,o=e.rowspan,e=e.colspan;i&&_xeUtils.default.isNumber(r)&&(r=i[r]),_xeUtils.default.isNumber(n)&&(n=u[n]),(i?r:_xeUtils.default.isNumber(r))&&n&&(o||e)&&(o=_xeUtils.default.toNumber(o)||1,e=_xeUtils.default.toNumber(e)||1,1<o||1<e)&&(t=_xeUtils.default.findIndexOf(a,function(e){return!(e._row!==r&&(0,_util.getRowid)(le,e._row)!==(0,_util.getRowid)(le,r)||e._col.id!==n&&e._col.id!==n.id)}),(t=a[t])?(t.rowspan=o,t.colspan=e,t._rowspan=o,t._colspan=e):(t=i?le.findRowIndexOf(i,r):r,l=W.getVTColumnIndex(n),a.push({row:t,col:l,rowspan:o,colspan:e,_row:r,_col:n,_rowspan:o,_colspan:e})))}))}function l(e,r,n){var t,o,a=[];return e&&(t=K.treeConfig,o=X.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t=e.row,l=e.col,e=(n&&_xeUtils.default.isNumber(t)&&(t=n[t]),_xeUtils.default.isNumber(l)&&(l=o[l]),_xeUtils.default.findIndexOf(r,function(e){return!(e._row!==t&&(0,_util.getRowid)(le,e._row)!==(0,_util.getRowid)(le,t)||e._col.id!==l&&e._col.id!==l.id)}));-1<e&&(e=r.splice(e,1),a.push(e[0]))})),a}function i(){X.tableFullColumn.forEach(function(e){e.order=null})}function m(){function a(e,t,l,r,n){var o=e.id,a=e.field,i=e.fixed,u=e.type,c=e.treeNode,t={column:e,colid:o,index:t,items:l,parent:n};a&&("development"===process.env.NODE_ENV&&m[a]&&(0,_log.warnLog)("vxe.error.colRepet",["field",a]),m[a]=t),!h&&i&&(h=i),g||"html"!==u||(g=e),c?("development"===process.env.NODE_ENV&&s&&(0,_log.warnLog)("vxe.error.colRepet",["tree-node",c]),s=s||e):"expand"===u&&("development"===process.env.NODE_ENV&&d&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),d=d||e),"development"===process.env.NODE_ENV&&("checkbox"===u?(f&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),f=f||e):"radio"===u&&(v&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),v=v||e)),_&&!1===e.showOverflow&&(_=!1),p[o]&&(0,_log.errLog)("vxe.error.colRepet",["colId",o]),p[o]=t}var d,s,f,v,g,h,e=X.tableFullColumn,t=X.collectColumn,p=X.fullColumnIdData={},m=X.fullColumnFieldData={},l=Q.value,r=G.value,n=Z.value,o=t.some(_utils.hasChildrenList),_=!!K.showOverflow;o?_xeUtils.default.eachTree(t,function(e,t,l,r,n,o){e.level=o.length,a(e,t,l,0,n)}):e.forEach(a),"development"===process.env.NODE_ENV&&d&&l.area&&(0,_log.errLog)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),"development"===process.env.NODE_ENV&&g&&(r.useKey||(0,_log.errLog)("vxe.error.reqProp",["column-config.useKey","column.type=html"]),n.useKey||(0,_log.errLog)("vxe.error.reqProp",["row-config.useKey","column.type=html"])),P.isGroup=o,P.treeNodeColumn=s,P.expandColumn=d,P.isAllOverflow=_}function D(){X.customHeight=xt("height"),X.customMinHeight=xt("minHeight"),X.customMaxHeight=xt("maxHeight")}function r(){var e=$.value,t=j.value,l=Y.value,r=t?t.$el:null,n=e?e.$el:null,t=l?l.$el:null;if(r){var o=0,e=r.clientWidth-1,l=e,a=l/100,i=K.fit,u=P.columnStore,c=u.resizeList,d=u.pxMinList,s=u.pxList,f=u.scaleList,v=u.scaleMinList,u=u.autoList;if(d.forEach(function(e){var t=_xeUtils.default.toInteger(e.minWidth);o+=t,e.renderWidth=t}),v.forEach(function(e){var t=Math.floor(_xeUtils.default.toInteger(e.minWidth)*a);o+=t,e.renderWidth=t}),f.forEach(function(e){var t=Math.floor(_xeUtils.default.toInteger(e.width)*a);o+=t,e.renderWidth=t}),s.forEach(function(e){var t=_xeUtils.default.toInteger(e.width);o+=t,e.renderWidth=t}),c.forEach(function(e){var t=_xeUtils.default.toInteger(e.resizeWidth);o+=t,e.renderWidth=t}),a=0<(l-=o)?Math.floor(l/(v.length+d.length+u.length)):0,i?0<l&&v.concat(d).forEach(function(e){o+=a,e.renderWidth+=a}):a=40,u.forEach(function(e){var t=Math.max(a,40);e.renderWidth=t,o+=t}),i){var g=f.concat(v).concat(d).concat(u),h=g.length-1;if(0<h){var p=e-o;if(0<p){for(;0<p&&0<=h;)p--,g[h--].renderWidth++;o=e}}}s=r.offsetHeight,c=r.scrollHeight>r.clientHeight,l=0,i=(c&&(l=Math.max(r.offsetWidth-r.clientWidth,0)),P.scrollbarWidth=l,P.overflowY=c,X.tableWidth=o,X.tableHeight=s,0),f=(n&&(i=n.clientHeight,(0,_vue.nextTick)(function(){n&&r&&n.scrollLeft!==r.scrollLeft&&(n.scrollLeft=r.scrollLeft)})),X.headerHeight=i,!1),v=0,d=0;t?(v=t.offsetHeight,(f=o>t.clientWidth)&&(d=Math.max(v-t.clientHeight,0))):(f=e<o)&&(d=Math.max(s-r.clientHeight,0)),X.footerHeight=v,P.overflowX=f,P.scrollbarHeight=d,D(),P.parentHeight=Math.max(X.headerHeight+v+20,H.getParentHeight()),f&&H.checkScrolling()}}function M(t){var l=t.sortBy,r=t.sortType;return function(e){e=l?_xeUtils.default.isFunction(l)?l({row:e,column:t}):_xeUtils.default.get(e,l):H.getCellLabel(e,t);return r&&"auto"!==r?"number"===r?_xeUtils.default.toNumber(e):"string"===r?_xeUtils.default.toValueString(e):e:isNaN(e)?e:_xeUtils.default.toNumber(e)}}function k(){var e=K.treeConfig,t=X.afterFullData,a=X.fullDataRowIdData,i=X.fullAllDataRowIdData,l=X.afterTreeFullData,r=te.value,n=r.children||r.childrenField,u={};e?_xeUtils.default.eachTree(l,function(e,t,l,r){var n=(0,_util.getRowid)(le,e),o=i[n],r=r.map(function(e,t){return t%2==0?Number(e)+1:"."}).join("");o?(o.seq=r,o._index=t):(i[n]=o={row:e,rowid:n,seq:r,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[n]=o),u[n]=e},{children:r.transform?r.mapChildrenField:n}):t.forEach(function(e,t){var l=(0,_util.getRowid)(le,e),r=i[l],n=t+1;r?(r.seq=n,r._index=t):(i[l]=r={row:e,rowid:l,seq:n,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[l]=r),u[l]=e}),X.afterFullRowMaps=u}function b(){var i,u,e=K.treeConfig,c=P.treeExpandedMaps,t=te.value;return e&&t.transform?(i=[],u={},_xeUtils.default.eachTree(X.afterTreeFullData,function(e,t,l,r,n){var o=(0,_util.getRowid)(le,e),a=(0,_util.getRowid)(le,n);(!n||u[a]&&c[a])&&(u[o]=1,i.push(e))},{children:t.mapChildrenField}),X.afterFullData=i,ne(i),i):X.afterFullData}function a(e){return le.triggerValidate?le.triggerValidate(e):(0,_vue.nextTick)()}function F(e,t){a("blur").catch(function(e){return e}).then(function(){le.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})})}function C(e,t){var l,r=X.checkboxReserveRowMap;R.value.reserve&&(l=(0,_util.getRowid)(le,e),t?r[l]=e:r[l]&&delete r[l])}function _(a){return new Promise(function(t){var e,l,r,n,o=y.value.loadMethod;o?(e=X.fullAllDataRowIdData,l=P.rowExpandLazyLoadedMaps,r=(0,_util.getRowid)(le,a),n=e[r],l[r]=a,o({$table:le,row:a,rowIndex:W.getRowIndex(a),$rowIndex:W.getVMRowIndex(a)}).then(function(){var e=P.rowExpandedMaps;n.expandLoaded=!0,e[r]=a}).catch(function(){n.expandLoaded=!1}).finally(function(){var e=P.rowExpandLazyLoadedMaps;e[r]&&delete e[r],(0,_vue.nextTick)().then(function(){return W.recalculate()}).then(function(){return t()})})):t()})}function I(e,t){var l,r=X.rowExpandedReserveRowMap;y.value.reserve&&(l=(0,_util.getRowid)(le,e),t?r[l]=e:r[l]&&delete r[l])}function L(){return(0,_vue.nextTick)().then(function(){var e=P.scrollXLoad,t=P.scrollYLoad,l=X.scrollXStore,r=X.scrollYStore,n=x.value,o=qe.value,e=(e?(e=pt().visibleSize,o=o.oSize?_xeUtils.default.toNumber(o.oSize):_dom.browse.edge?5:0,l.offsetSize=o,l.visibleSize=e,l.endIndex=Math.max(l.startIndex+l.visibleSize+o,l.endIndex),H.updateScrollXData()):H.updateScrollXSpace(),mt()),o=e.rowHeight,l=e.visibleSize;r.rowHeight=o,t?(e=n.oSize?_xeUtils.default.toNumber(n.oSize):_dom.browse.edge?10:0,r.offsetSize=e,r.visibleSize=l,r.endIndex=Math.max(r.startIndex+l+e,r.endIndex),H.updateScrollYData()):H.updateScrollYSpace(),P.rowHeight=o,(0,_vue.nextTick)(w)})}function U(e){var t=K.keepSource,l=K.treeConfig,r=P.editStore,g=P.scrollYLoad,h=X.scrollYStore,n=X.scrollXStore,p=X.lastScrollLeft,m=X.lastScrollTop,o=te.value,a=o.transform,i=o.children||o.childrenField,u=[],c=e?e.slice(0):[],_=(l&&(a?("development"===process.env.NODE_ENV&&(o.rowField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.rowField"]),o.parentField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.parentField"]),i||(0,_log.errLog)("vxe.error.reqProp",["tree-config.childrenField"]),o.mapChildrenField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.mapChildrenField"]),i===o.mapChildrenField)&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),c=(u=_xeUtils.default.toArrayTree(c,{key:o.rowField,parentKey:o.parentField,children:i,mapChildren:o.mapChildrenField})).slice(0)):u=c.slice(0)),h.startIndex=0,h.endIndex=1,n.startIndex=0,n.endIndex=1,P.scrollVMLoading=!1,r.insertMaps={},r.removeMaps={},ne(c));return P.scrollYLoad=_,X.tableFullData=c,X.tableFullTreeData=u,H.cacheRowMap(!0),X.tableSynchData=e,t&&H.cacheSourceMap(c),"development"===process.env.NODE_ENV&&_&&(K.height||K.maxHeight||(0,_log.errLog)("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),K.showOverflow||(0,_log.warnLog)("vxe.error.reqProp",["table.show-overflow"]),K.spanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["table.span-method"]),le.clearCellAreas&&K.mouseConfig&&(le.clearCellAreas(),le.clearCopyCellArea()),W.clearMergeCells(),W.clearMergeFooterItems(),H.handleTableData(!0),W.updateFooter(),(0,_vue.nextTick)().then(function(){D(),w()}).then(function(){L()}).then(function(){var e,t,l,r,n,o,a,i,u,c,d,s,f,v;return _&&(h.endIndex=h.visibleSize),e=K.treeConfig,t=P.expandColumn,l=P.currentRow,r=P.selectCheckboxMaps,n=P.selectRadioRow,o=P.rowExpandedMaps,a=P.treeExpandedMaps,i=X.fullDataRowIdData,u=X.fullAllDataRowIdData,c=X.radioReserveRow,d=y.value,s=te.value,f=E.value,v=R.value,n&&!u[(0,_util.getRowid)(le,n)]&&(P.selectRadioRow=null),f.reserve&&c&&i[n=(0,_util.getRowid)(le,c)]&&wt(i[n].row,!0),P.selectCheckboxMaps=gt(r),v.reserve&&S(ht(X.checkboxReserveRowMap),!0,!0),l&&!u[(0,_util.getRowid)(le,l)]&&(P.currentRow=null),P.rowExpandedMaps=t?gt(o):{},t&&d.reserve&&W.setRowExpand(ht(X.rowExpandedReserveRowMap),!0),P.treeExpandedMaps=e?gt(a):{},e&&s.reserve&&W.setTreeExpand(ht(X.treeExpandedReserveRowMap),!0),H.checkSelectionStatus(),new Promise(function(n){(0,_vue.nextTick)().then(function(){return W.recalculate()}).then(function(){var e=p,t=m,l=qe.value,r=x.value;l.scrollToLeftOnChange&&(e=0),r.scrollToTopOnChange&&(t=0),g===_?(0,_util.restoreScrollLocation)(le,e,t).then(n):setTimeout(function(){return(0,_util.restoreScrollLocation)(le,e,t).then(n)})})})})}function O(){var t,l,e,r,n,o,a,i,u,c,d,s,f,v;K.checkboxConfig&&(t=X.fullDataRowIdData,r=(e=R.value).checkAll,e=e.checkRowKeys,r?bt(!0,!0):e&&(l=[],e.forEach(function(e){t[e]&&l.push(t[e].row)}),S(l,!0,!0))),K.radioConfig&&(r=X.fullDataRowIdData,o=(e=E.value).checkRowKey,e=e.reserve,o)&&(r[o]&&wt(r[o].row,!0),e)&&(r=(0,_util.getRowkey)(le),X.radioReserveRow=((e={})[r]=o,e)),K.expandConfig&&(n=X.fullDataRowIdData,u=(o=y.value).expandAll,o=o.expandRowKeys,u?W.setAllRowExpand(!0):o&&(a=[],o.forEach(function(e){n[e]&&a.push(n[e].row)}),W.setRowExpand(a,!0))),K.treeConfig&&(i=X.tableFullData,f=(u=te.value).expandAll,v=u.expandRowKeys,c=u.children||u.childrenField,f?W.setAllTreeExpand(!0):v&&(d=[],s=(0,_util.getRowkey)(le),v.forEach(function(t){var e=_xeUtils.default.findTree(i,function(e){return t===_xeUtils.default.get(e,s)},{children:c});e&&d.push(e.item)}),W.setTreeExpand(d,!0))),(f=K.mergeCells)&&W.setMergeCells(f),(v=K.mergeFooterItems)&&W.setMergeFooterItems(v),(0,_vue.nextTick)(function(){return setTimeout(function(){return W.recalculate()})})}function A(){var e,t,l;(l=K.sortConfig)&&(t=(e=T.value).defaultSort)&&(t=_xeUtils.default.isArray(t)?t:[t]).length&&((l.multiple?t:t.slice(0,1)).forEach(function(e,t){var l=e.field,e=e.order;l&&e&&(l=W.getColumnByField(l))&&l.sortable&&(l.order=e,l.sortTime=Date.now()+t)}),e.remote||H.handleTableData(!0).then(w))}function N(){var e=P.mergeList,t=P.mergeFooterList,l=X.scrollXStore,r=l.startIndex,n=l.endIndex,o=l.offsetSize,a=(i=pt()).toVisibleIndex,i=i.visibleSize,o={startIndex:Math.max(0,a-1-o),endIndex:a+i+o},e=(_t(e.concat(t),o,"col"),o.startIndex),t=o.endIndex;!(a<=r||n-i-1<=a)||r===e&&n===t||(l.startIndex=e,l.endIndex=t,H.updateScrollXData()),W.closeTooltip()}function re(){var t,l,r,a=[],i=[],u=[],e=P.isGroup,n=P.columnStore,o=qe.value,c=X.collectColumn,d=X.tableFullColumn,s=X.scrollXStore,f=X.fullColumnIdData,v=(e?(t=[],l=[],r=[],_xeUtils.default.eachTree(c,function(e,t,l,r,n){var o=(0,_utils.hasChildrenList)(e);n&&n.fixed&&(e.fixed=n.fixed),n&&e.fixed!==n.fixed&&(0,_log.errLog)("vxe.error.groupFixed"),o?e.visible=!!_xeUtils.default.findTree(e.children,function(e){return!(0,_utils.hasChildrenList)(e)&&e.visible}):e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),c.forEach(function(e){e.visible&&("left"===e.fixed?t:"right"===e.fixed?r:l).push(e)}),P.tableGroupColumn=t.concat(l).concat(r)):d.forEach(function(e){e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),a.concat(i).concat(u)),e=!!o.enabled&&-1<o.gt&&(0===o.gt||o.gt<d.length);return P.hasFixedColumn=0<a.length||0<u.length,Object.assign(n,{leftList:a,centerList:i,rightList:u}),e&&("development"===process.env.NODE_ENV&&(K.showHeader&&!K.showHeaderOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-header-overflow"]),K.showFooter&&!K.showFooterOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-footer-overflow"]),K.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["span-method"]),K.footerSpanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["footer-span-method"]),c=pt().visibleSize,s.startIndex=0,s.endIndex=c,s.visibleSize=c),v.length===X.visibleColumn.length&&X.visibleColumn.every(function(e,t){return e===v[t]})||(W.clearMergeCells(),W.clearMergeFooterItems()),P.scrollXLoad=e,v.forEach(function(e,t){e=e.id,e=f[e];e&&(e._index=t)}),X.visibleColumn=v,Rt(),W.updateFooter().then(function(){return W.recalculate()}).then(function(){return W.updateCellAreas(),W.recalculate()})}function o(e){X.collectColumn=e;var l,o,t,r,n,a,i,u,c=Tt(e);return X.tableFullColumn=c,m(),c=K.id,t=K.customConfig,r=X.collectColumn,n=v.value.storage,a=!0===n||n&&n.resizable,i=!0===n||n&&n.visible,u=!0===n||n&&n.fixed,n=!0===n||n&&n.order,t&&(a||i||u||n)&&(l={},c?(a&&(t=g(resizableStorageKey)[c])&&_xeUtils.default.each(t,function(e,t){l[t]={resizeWidth:e}}),u&&(a=g(fixedStorageKey)[c])&&a.split(",").forEach(function(e){var e=e.split("|"),t=e[0],e=e[1];l[t]?l[t].fixed=e:l[t]={fixed:e}}),n&&g(orderStorageKey)[c],i&&(t=g(visibleStorageKey)[c])&&(a=(u=t.split("|"))[0]?u[0].split(","):[],n=u[1]?u[1].split(","):[],a.forEach(function(e){l[e]?l[e].visible=!1:l[e]={visible:!1}}),n.forEach(function(e){l[e]?l[e].visible=!0:l[e]={visible:!0}})),o={},_xeUtils.default.eachTree(r,function(e){var t=e.getKey();t&&(o[t]=e)}),_xeUtils.default.each(l,function(e,t){var l=e.visible,r=e.resizeWidth,n=e.fixed,e=e.order,t=o[t];t&&(_xeUtils.default.isNumber(r)&&(t.resizeWidth=r),_xeUtils.default.isBoolean(l)&&(t.visible=l),n&&(t.fixed=n),e)&&(t.customOrder=e)})):(0,_log.errLog)("vxe.error.reqProp",["id"])),re().then(function(){P.scrollXLoad&&N()}),W.clearMergeCells(),W.clearMergeFooterItems(),H.handleTableData(!0),"development"===process.env.NODE_ENV&&(P.scrollXLoad||P.scrollYLoad)&&P.expandColumn&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),(0,_vue.nextTick)().then(function(){return f&&f.syncUpdate({collectColumn:e,$table:le}),W.recalculate()})}function ne(e){var t=K.treeConfig,l=x.value,r=te.value.transform,e=e||X.tableFullData,r=(r||!t)&&!!l.enabled&&-1<l.gt&&(0===l.gt||l.gt<e.length);return P.scrollYLoad=r}function u(e,t){var l=P.treeExpandedMaps,r=P.treeExpandLazyLoadedMaps,n=P.treeNodeColumn,o=__assign({},l),a=X.fullAllDataRowIdData,l=X.tableFullData,i=te.value,u=i.reserve,c=i.lazy,d=i.accordion,s=i.toggleMethod,f=i.children||i.childrenField,v=i.hasChild||i.hasChildField,g=[],h=W.getColumnIndex(n),p=W.getVMColumnIndex(n),m=s?e.filter(function(e){return s({$table:le,expanded:t,column:n,columnIndex:h,$columnIndex:p,row:e})}):e;return d&&(m=m.length?[m[m.length-1]]:[],i=_xeUtils.default.findTree(l,function(e){return e===m[0]},{children:f}))&&i.items.forEach(function(e){e=(0,_util.getRowid)(le,e);o[e]&&delete o[e]}),t?m.forEach(function(e){var t,l=(0,_util.getRowid)(le,e);o[l]||(t=a[l],c&&e[v]&&!t.treeLoaded&&!r[l]?g.push(Ct(e)):e[f]&&e[f].length&&(o[l]=e))}):m.forEach(function(e){e=(0,_util.getRowid)(le,e);o[e]&&delete o[e]}),u&&m.forEach(function(e){return Et(e,t)}),P.treeExpandedMaps=o,Promise.all(g).then(function(){return W.recalculate()})}function oe(e){var t=P.mergeList,l=X.scrollYStore,r=l.startIndex,n=l.endIndex,o=l.visibleSize,a=l.offsetSize,i=l.rowHeight,e=(e.currentTarget||e.target).scrollTop,e=Math.floor(e/i),i={startIndex:Math.max(0,e-1-a),endIndex:e+o+a},a=(_t(t,i,"row"),i.startIndex),t=i.endIndex;!(e<=r||n-o-1<=e)||r===a&&n===t||(l.startIndex=a,l.endIndex=t,H.updateScrollYData())}function ae(l){return function(e){var t=X.fullAllDataRowIdData;if(e){t=t[(0,_util.getRowid)(le,e)];if(t)return t[l]}return-1}}function ie(l){return function(e){var t=X.fullColumnIdData;if(e){t=t[e.id];if(t)return t[l]}return-1}}function ue(l){var e=P.editStore,t=P.ctxMenuStore,r=P.filterStore,n=K.mouseConfig,o=K.editRules,a=z.value,i=J.value,u=ze.value,c=e.actived,e=Se.value,d=De.value,s=Me.value;!d||(0,_dom.getEventTargetNode)(l,a,"vxe-cell--filter").flag||(0,_dom.getEventTargetNode)(l,d.$el).flag||(0,_dom.getEventTargetNode)(l,document.body,"vxe-table--ignore-clear").flag||H.preventEvent(l,"event.clearFilter",r.args,W.closeFilter),c.row?!1===i.autoClear||(d=c.args.cell)&&(0,_dom.getEventTargetNode)(l,d).flag||e&&(0,_dom.getEventTargetNode)(l,e.$el).flag||X._lastCallTime&&!(X._lastCallTime+50<Date.now())||(0,_dom.getEventTargetNode)(l,document.body,"vxe-table--ignore-clear").flag||H.preventEvent(l,"event.clearActived",c.args,function(){var e,t;(e=(e=(e="row"===i.mode?!!(e=(e=(0,_dom.getEventTargetNode)(l,a,"vxe-body--row")).flag?W.getRowNode(e.targetElem):null)&&!le.eqRow(e.item,c.args.row):!(0,_dom.getEventTargetNode)(l,a,"col--edit").flag)||(0,_dom.getEventTargetNode)(l,a,"vxe-header--row").flag)||(0,_dom.getEventTargetNode)(l,a,"vxe-footer--row").flag)||!K.height||P.overflowY||(t=l.target,(0,_dom.hasClass)(t,"vxe-table--body-wrapper")&&(e=l.offsetY<t.clientHeight)),!e&&(0,_dom.getEventTargetNode)(l,a).flag||setTimeout(function(){return le.clearEdit(l)})}):!n||(0,_dom.getEventTargetNode)(l,a).flag||B&&(0,_dom.getEventTargetNode)(l,B.getRefMaps().refElem.value).flag||s&&(0,_dom.getEventTargetNode)(l,s.getRefMaps().refElem.value).flag||f&&(0,_dom.getEventTargetNode)(l,f.getRefMaps().refElem.value).flag||(le.clearSelected(),!le.clearCellAreas)||(0,_dom.getEventTargetNode)(l,document.body,"vxe-table--ignore-areas-clear").flag||H.preventEvent(l,"event.clearAreas",{},function(){le.clearCellAreas(),le.clearCopyCellArea()}),le.closeMenu&&t.visible&&s&&!(0,_dom.getEventTargetNode)(l,s.getRefMaps().refElem.value).flag&&le.closeMenu(),!(r=(0,_dom.getEventTargetNode)(l,B?B.getRefMaps().refElem.value:a).flag)&&o&&u.autoClear&&(P.validErrorMaps={}),X.isActivated=r}function ce(){W.closeFilter(),le.closeMenu&&le.closeMenu()}function de(){W.closeTooltip(),le.closeMenu&&le.closeMenu()}function se(t){var l=K.mouseConfig,r=K.keyboardConfig,n=P.filterStore,o=P.ctxMenuStore,e=P.editStore,a=Q.value,i=ee.value,u=e.actived;(0,_event.hasEventKey)(t,_event.EVENT_KEYS.ESCAPE)&&H.preventEvent(t,"event.keydown",null,function(){var e;W.dispatchEvent("keydown-start",{},t),r&&l&&a.area&&le.handleKeyboardEvent?le.handleKeyboardEvent(t):(u.row||n.visible||o.visible)&&(t.stopPropagation(),le.closeMenu&&le.closeMenu(),W.closeFilter(),r)&&i.isEsc&&u.row&&(e=u.args,le.clearEdit(t),a.selected)&&(0,_vue.nextTick)(function(){return le.handleSelected(e,t)}),W.dispatchEvent("keydown",{},t),W.dispatchEvent("keydown-end",{},t)})}function fe(q){X.isActivated&&H.preventEvent(q,"event.keydown",null,function(){var e,t,l,r,n=K.mouseConfig,o=K.keyboardConfig,a=K.treeConfig,i=K.editConfig,u=K.highlightCurrentRow,c=P.ctxMenuStore,d=P.editStore,s=P.currentRow,f=et.value,v=Je.value,g=ee.value,h=Q.value,p=J.value,m=te.value,_=tt.value,x=Z.value,w=d.selected,d=d.actived,m=m.children||m.childrenField,b=q.keyCode,C=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ESCAPE),E=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.BACKSPACE),A=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.TAB),R=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ENTER),T=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.SPACEBAR),y=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ARROW_LEFT),S=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ARROW_UP),D=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ARROW_RIGHT),M=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.ARROW_DOWN),k=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.DELETE),F=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.F2),N=(0,_event.hasEventKey)(q,_event.EVENT_KEYS.CONTEXT_MENU),V=q.metaKey,I=q.ctrlKey,L=q.shiftKey,z=q.altKey,U=y||S||D||M,f=f&&c.visible&&(R||T||U),O=(0,_utils.isEnableConf)(i)&&d.column&&d.row;f?(q.preventDefault(),c.showChild&&(0,_utils.hasChildrenList)(c.selected)?le.moveCtxMenu(q,c,"selectChild",y,!1,c.selected.children):le.moveCtxMenu(q,c,"selected",D,!0,_)):o&&n&&h.area&&le.handleKeyboardEvent?le.handleKeyboardEvent(q):C?(le.closeMenu&&le.closeMenu(),W.closeFilter(),o&&g.isEsc&&d.row&&(e=d.args,le.clearEdit(q),h.selected)&&(0,_vue.nextTick)(function(){return le.handleSelected(e,q)})):T&&o&&g.isChecked&&w.row&&w.column&&("checkbox"===w.column.type||"radio"===w.column.type)?(q.preventDefault(),"checkbox"===w.column.type?H.handleToggleCheckRowEvent(q,w.args):H.triggerRadioRowEvent(q,w.args)):F&&(0,_utils.isEnableConf)(i)?O||w.row&&w.column&&(q.preventDefault(),le.handleActived(w.args,q)):N?(X._keyCtx=w.row&&w.column&&v.length,clearTimeout(we),we=setTimeout(function(){X._keyCtx=!1},1e3)):R&&!z&&o&&g.isEnter&&(w.row||d.row||a&&(x.isCurrent||u)&&s)?I?d.row&&(l=d.args,le.clearEdit(q),h.selected)&&(0,_vue.nextTick)(function(){return le.handleSelected(l,q)}):w.row||d.row?(f=(w.row?w:d).args,L?g.enterToTab?le.moveTabSelected(f,L,q):le.moveSelected(f,y,!0,D,!1,q):g.enterToTab?le.moveTabSelected(f,L,q):le.moveSelected(f,y,!1,D,!0,q)):a&&(x.isCurrent||u)&&s&&(c=s[m])&&c.length&&(q.preventDefault(),t=c[0],l={$table:le,row:t,rowIndex:W.getRowIndex(t),$rowIndex:W.getVMRowIndex(t)},W.setTreeExpand(s,!0).then(function(){return W.scrollToRow(t)}).then(function(){return H.triggerCurrentRowEvent(q,l)})):U&&o&&g.isArrow?O||(w.row&&w.column?le.moveSelected(w.args,y,S,D,M,q):(S||M)&&(x.isCurrent||u)&&le.moveCurrentRow(S,M,q)):A&&o&&g.isTab?w.row||w.column?le.moveTabSelected(w.args,L,q):(d.row||d.column)&&le.moveTabSelected(d.args,L,q):o&&(0,_utils.isEnableConf)(i)&&(k||(a&&(x.isCurrent||u)&&s?E&&g.isArrow:E))?O||(_=g.delMethod,n=g.backMethod,g.isDel&&(w.row||w.column)?(_?_({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:le}):(0,_util.setCellValue)(w.row,w.column,null),E?n?n({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:le}):le.handleActived(w.args,q):k&&W.updateFooter()):E&&g.isArrow&&a&&(x.isCurrent||u)&&s&&(r=_xeUtils.default.findTree(X.afterFullData,function(e){return e===s},{children:m}).parent)&&(q.preventDefault(),l={$table:le,row:r,rowIndex:W.getRowIndex(r),$rowIndex:W.getVMRowIndex(r)},W.setTreeExpand(r,!1).then(function(){return W.scrollToRow(r)}).then(function(){return H.triggerCurrentRowEvent(q,l)}))):o&&(0,_utils.isEnableConf)(i)&&g.isEdit&&!I&&!V&&(T||48<=b&&b<=57||65<=b&&b<=90||96<=b&&b<=111||186<=b&&b<=192||219<=b&&b<=222)&&(C=g.editMethod,w.column)&&w.row&&(0,_utils.isEnableConf)(w.column.editRender)&&((F=p.beforeEditMethod||p.activeMethod)&&!F(__assign(__assign({},w.args),{$table:le}))||(C?C({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:le,$grid:B}):((0,_util.setCellValue)(w.row,w.column,null),le.handleActived(w.args,q)))),W.dispatchEvent("keydown",{},q)})}function ve(e){var t=K.keyboardConfig,l=K.mouseConfig,r=P.editStore,n=P.filterStore,o=X.isActivated,a=Q.value,i=ee.value,r=r.actived;o&&!n.visible&&(r.row||r.column||t&&i.isClip&&l&&a.area&&le.handlePasteCellAreaEvent&&le.handlePasteCellAreaEvent(e),W.dispatchEvent("paste",{},e))}function ge(e){var t=K.keyboardConfig,l=K.mouseConfig,r=P.editStore,n=P.filterStore,o=X.isActivated,a=Q.value,i=ee.value,r=r.actived;o&&!n.visible&&(r.row||r.column||t&&i.isClip&&l&&a.area&&le.handleCopyCellAreaEvent&&le.handleCopyCellAreaEvent(e),W.dispatchEvent("copy",{},e))}function he(e){var t=K.keyboardConfig,l=K.mouseConfig,r=P.editStore,n=P.filterStore,o=X.isActivated,a=Q.value,i=ee.value,r=r.actived;o&&!n.visible&&(r.row||r.column||t&&i.isClip&&l&&a.area&&le.handleCutCellAreaEvent&&le.handleCutCellAreaEvent(e),W.dispatchEvent("cut",{},e))}function pe(){le.closeMenu&&le.closeMenu(),W.updateCellAreas(),W.recalculate(!0)}function me(e){var t=q.value;clearTimeout(X.tooltipTimeout),e?W.closeTooltip():t&&t.setActived(!0)}function _e(e,t,l,r,n){n.cell=t;var t=P.tooltipStore,o=s.value,a=n.column,i=n.row,u=o.showAll,n=(o=o.contentMethod)?o(n):null,c=(o=o&&!_xeUtils.default.eqNull(n))?n:_xeUtils.default.toString("html"===a.type?l.innerText:l.textContent).trim(),d=l.scrollWidth>l.clientWidth;c&&(u||o||d)&&(Object.assign(t,{row:i,column:a,visible:!0,currOpts:null}),(0,_vue.nextTick)(function(){var e=q.value;e&&e.open(!d&&r||l,(0,_utils.formatText)(c))})),(0,_vue.nextTick)()}function xe(e){var t=K.showHeader,l=K.showFooter,r=P.tableData,n=P.tableColumn,o=P.tableGroupColumn,a=P.columnStore,i=P.footerTableData,u="left"===e,a=u?a.leftList:a.rightList;return(0,_vue.h)("div",{ref:u?Oe:Ae,class:"vxe-table--fixed-".concat(e,"-wrapper")},[t?(0,_vue.h)(_header.default,{ref:u?ke:Le,fixedType:e,tableData:r,tableColumn:n,tableGroupColumn:o,fixedColumn:a}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:u?Fe:d,fixedType:e,tableData:r,tableColumn:n,fixedColumn:a}),l?(0,_vue.h)(_footer.default,{ref:u?Ie:Ue,footerTableData:i,tableColumn:n,fixedColumn:a,fixedType:e}):(0,_vue.createCommentVNode)()])}var f,we,V=e.slots,be=e.emit,Ce=_vXETable.VXETable.tooltip,Ee=_xeUtils.default.uniqueId(),Re=(0,_size.useSize)(K),Te=(0,_vue.getCurrentInstance)(),P=(0,_vue.reactive)({staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selectCheckboxMaps:{},currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},treeIndeterminateMaps:{},mergeList:[],mergeFooterList:[],upDataFlag:0,reColumnFlag:0,initStore:{filter:!1,import:!1,export:!1},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertMaps:{},removeMaps:{}},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:null},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1},scrollVMLoading:!1,_isResize:!1}),X={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},sourceDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1},W={},H={},z=(0,_vue.ref)(),q=(0,_vue.ref)(),ye=(0,_vue.ref)(),Se=(0,_vue.ref)(),De=(0,_vue.ref)(),Me=(0,_vue.ref)(),$=(0,_vue.ref)(),j=(0,_vue.ref)(),Y=(0,_vue.ref)(),ke=(0,_vue.ref)(),Fe=(0,_vue.ref)(),Ie=(0,_vue.ref)(),Le=(0,_vue.ref)(),d=(0,_vue.ref)(),Ue=(0,_vue.ref)(),Oe=(0,_vue.ref)(),Ae=(0,_vue.ref)(),Ne=(0,_vue.ref)(),Ve=(0,_vue.ref)(),B=(0,_vue.inject)("$xegrid",null),ze=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.validConfig,K.validConfig)}),qe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollX,K.scrollX)}),x=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollY,K.scrollY)}),He=(0,_vue.computed)(function(){return{default:48,medium:44,small:40,mini:36}}),G=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.columnConfig,K.columnConfig)}),Z=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.rowConfig,K.rowConfig)}),$e=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizeConfig,K.resizeConfig)}),Ke=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizableConfig,K.resizableConfig)}),Pe=(0,_vue.computed)(function(){return Object.assign({startIndex:0},_conf.default.table.seqConfig,K.seqConfig)}),E=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.radioConfig,K.radioConfig)}),R=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.checkboxConfig,K.checkboxConfig)}),s=((0,_vue.ref)(),(0,_vue.computed)(function(){return Object.assign({},_conf.default.tooltip,_conf.default.table.tooltipConfig,K.tooltipConfig)})),Xe=(0,_vue.computed)(function(){var e=P.tooltipStore,t=s.value;return __assign(__assign({},t),e.currOpts)}),We=(0,_vue.computed)(function(){var e=s.value;return Object.assign({isArrow:!1},e)}),J=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.editConfig,K.editConfig)}),T=(0,_vue.computed)(function(){return Object.assign({orders:["asc","desc",null]},_conf.default.table.sortConfig,K.sortConfig)}),je=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.filterConfig,K.filterConfig)}),Q=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.mouseConfig,K.mouseConfig)}),Ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.areaConfig,K.areaConfig)}),ee=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.keyboardConfig,K.keyboardConfig)}),Be=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.clipConfig,K.clipConfig)}),Ge=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.fnrConfig,K.fnrConfig)}),n=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.menuConfig,K.menuConfig)}),Ze=(0,_vue.computed)(function(){var e=n.value.header;return e&&e.options?e.options:[]}),Je=(0,_vue.computed)(function(){var e=n.value.body;return e&&e.options?e.options:[]}),Qe=(0,_vue.computed)(function(){var e=n.value.footer;return e&&e.options?e.options:[]}),et=(0,_vue.computed)(function(){var e=n.value,t=Ze.value,l=Je.value,r=Qe.value;return!!(K.menuConfig&&(0,_utils.isEnableConf)(e)&&(t.length||l.length||r.length))}),tt=(0,_vue.computed)(function(){var e=P.ctxMenuStore,t=[];return e.list.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}),lt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.exportConfig,K.exportConfig)}),rt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.importConfig,K.importConfig)}),nt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.printConfig,K.printConfig)}),y=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.expandConfig,K.expandConfig)}),te=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.treeConfig,K.treeConfig)}),ot=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.emptyRender,K.emptyRender)}),at=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.loadingConfig,K.loadingConfig)}),it=(0,_vue.computed)(function(){return K.border?Math.max(2,Math.ceil(P.scrollbarWidth/P.tableColumn.length)):1}),v=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.customConfig,K.customConfig)}),ut=(0,_vue.computed)(function(){var e=X.tableFullColumn,t=0;return e.forEach(function(e){e.fixed&&t++}),t}),ct=(0,_vue.computed)(function(){var e=ut.value,t=G.value.maxFixedSize;return!!t&&t<=e}),dt=(0,_vue.computed)(function(){var e=K.border;return!0===e?"full":e||"default"}),st=(0,_vue.computed)(function(){K.treeConfig;var e=P.tableData,t=X.tableFullData,l=R.value,r=l.strict,n=l.checkMethod;return!!r&&(!e.length&&!t.length||!!n&&t.every(function(e){return!n({row:e})}))}),ft={refElem:z,refTooltip:q,refValidTooltip:Se,refTableFilter:De,refTableMenu:Me,refTableHeader:$,refTableBody:j,refTableFooter:Y,refTableLeftHeader:ke,refTableLeftBody:Fe,refTableLeftFooter:Ie,refTableRightHeader:Le,refTableRightBody:d,refTableRightFooter:Ue,refLeftContainer:Oe,refRightContainer:Ae,refCellResizeBar:Ne},vt={computeSize:Re,computeValidOpts:ze,computeSXOpts:qe,computeSYOpts:x,computeColumnOpts:G,computeRowOpts:Z,computeResizeleOpts:$e,computeResizableOpts:Ke,computeSeqOpts:Pe,computeRadioOpts:E,computeCheckboxOpts:R,computeTooltipOpts:s,computeEditOpts:J,computeSortOpts:T,computeFilterOpts:je,computeMouseOpts:Q,computeAreaOpts:Ye,computeKeyboardOpts:ee,computeClipOpts:Be,computeFNROpts:Ge,computeHeaderMenu:Ze,computeBodyMenu:Je,computeFooterMenu:Qe,computeIsMenu:et,computeMenuOpts:n,computeExportOpts:lt,computeImportOpts:rt,computePrintOpts:nt,computeExpandOpts:y,computeTreeOpts:te,computeEmptyOpts:ot,computeLoadingOpts:at,computeCustomOpts:v,computeFixedColumnSize:ut,computeIsMaxFixedColumn:ct,computeIsAllCheckboxDisabled:st},le={xID:Ee,props:K,context:e,instance:Te,reactData:P,internalData:X,getRefMaps:function(){return ft},getComputeMaps:function(){return vt},xegrid:B},g=function(e){var t=_conf.default.version,e=_xeUtils.default.toStringJSON(localStorage.getItem(e)||"");return e&&e._v===t?e:{_v:t}},gt=function(e){var l=X.fullAllDataRowIdData,r={};return _xeUtils.default.each(e,function(e,t){l[t]&&(r[t]=e)}),r},ht=function(e){var l=X.fullDataRowIdData,r=[];return _xeUtils.default.each(e,function(e,t){l[t]&&-1===le.findRowIndexOf(r,l[t].row)&&r.push(l[t].row)}),r},pt=function(){var e=X.visibleColumn,t=j.value,t=t?t.$el:null;if(t){for(var l=t.scrollLeft,r=l+t.clientWidth,n=-1,o=0,a=0,i=0,u=e.length;i<u&&(o+=e[i].renderWidth,!(0<=(n=-1===n&&l<o?i:n)&&(a++,r<o)));i++);return{toVisibleIndex:Math.max(0,n),visibleSize:Math.max(8,a)}}return{toVisibleIndex:0,visibleSize:8}},mt=function(){var e,t,l=$.value,r=j.value,r=r?r.$el:null,n=Re.value,o=He.value;return r?(l=l?l.$el:null,e=void(t=0),{rowHeight:t=(t=(e=!(e=r.querySelector("tr"))&&l?l.querySelector("tr"):e)?e.clientHeight:t)||o[n||"default"],visibleSize:Math.max(8,Math.ceil(r.clientHeight/t)+2)}):{rowHeight:0,visibleSize:8}},_t=function(e,t,l){for(var r=0,n=e.length;r<n;r++){var o=e[r],a=t.startIndex,i=t.endIndex,u=o[l],o=u+o[l+"span"];u<a&&a<o&&(t.startIndex=u),u<i&&i<o&&(t.endIndex=o),t.startIndex===a&&t.endIndex===i||(r=-1)}},xt=function(e){var t,l=P.parentHeight,e=K[e],r=0;return r=e?"auto"===e?l:(t=le.getExcludeHeight(),r=(0,_dom.isScale)(e)?Math.floor((_xeUtils.default.toInteger(e)||1)/100*l):_xeUtils.default.toNumber(e),Math.max(40,r-t)):r},w=function(){var g=K.border,h=K.showFooter,p=K.showOverflow,m=K.showHeaderOverflow,_=K.showFooterOverflow,e=K.mouseConfig,x=K.spanMethod,w=K.footerSpanMethod,b=K.keyboardConfig,C=P.isGroup,t=P.currentRow,E=P.tableColumn,R=P.scrollXLoad,T=P.scrollYLoad,y=P.scrollbarWidth,S=P.scrollbarHeight,l=P.columnStore,r=P.editStore,D=P.mergeList,M=P.mergeFooterList,k=P.isAllOverflow,F=X.visibleColumn,I=X.fullColumnIdData,L=X.tableHeight,U=X.tableWidth,O=X.headerHeight,A=X.footerHeight,N=X.elemStore,V=X.customHeight,z=X.customMinHeight,q=X.customMaxHeight,n=Ve.value,H=it.value,o=Q.value,$=ee.value,a=N["main-body-wrapper"],a=a?a.value:null;return n&&(n.style.top="".concat(O,"px"),n.style.height=a?"".concat(a.offsetHeight-S,"px"):""),0<V&&h&&(V+=S),["main","left","right"].forEach(function(c,e){var d,s=0<e?c:"",f="left"===s,v=[];s&&(v=f?l.leftList:l.rightList,d=(f?Oe:Ae).value),["header","body","footer"].forEach(function(o){var e,t,l,r,n=N["".concat(c,"-").concat(o,"-wrapper")],n=n?n.value:null,a=N["".concat(c,"-").concat(o,"-table")],a=a?a.value:null,i=("header"===o?(l=U,r=E,C?r=F:s&&(R||m)&&(r=v),l=r.reduce(function(e,t){return e+t.renderWidth},0),a&&(a.style.width=l?"".concat(l+y,"px"):""),(e=(e=N["".concat(c,"-").concat(o,"-repair")])?e.value:null)&&(e.style.width="".concat(U,"px")),e=(e=N["".concat(c,"-").concat(o,"-list")])?e.value:null,C&&e&&_xeUtils.default.arrayEach(e.querySelectorAll(".col--group"),function(e){var t,l,r,n=W.getColumnNode(e);n&&(n=(t=n.item).showHeaderOverflow,n=_xeUtils.default.isBoolean(n)?n:m,r=l=0,(n="title"===n||(!0===n||"tooltip"===n)||"ellipsis"===n)&&_xeUtils.default.eachTree(t.children,function(e){e.children&&t.children.length||r++,l+=e.renderWidth},{children:"children"}),e.style.width=n?"".concat(l-r-(g?2:0),"px"):"")})):"body"===o?(e=(e=N["".concat(c,"-").concat(o,"-emptyBlock")])?e.value:null,(0,_dom.isNodeElement)(n)&&(t=s?z-O-A-(h?0:S):z-O-A,i=0,q&&(i=Math.max(t,s?q-O-(h?0:S):q-O-A),n.style.maxHeight="".concat(i,"px")),0<V?(u=s?(0<V?V-O-A:L)-(h?0:S):V-O-A,i&&(u=Math.min(i,u)),n.style.height="".concat(Math.max(t,u),"px")):n.style.height="",n.style.minHeight="".concat(t,"px")),d&&((0,_dom.isNodeElement)(n)&&(n.style.top="".concat(O,"px")),d.style.height="".concat((0<V?V-O-A:L)+O+A-S*(h?2:1),"px"),d.style.width="".concat(v.reduce(function(e,t){return e+t.renderWidth},f?0:y),"px")),l=U,r=E,l=(r=s?P.expandColumn||!(T||p&&k)||D.length||x||b&&$.isMerge?F:v:r).reduce(function(e,t){return e+t.renderWidth},0),a&&(a.style.width=l?"".concat(l,"px"):"",a.style.paddingRight=y&&s&&(_dom.browse["-moz"]||_dom.browse.safari)?"".concat(y,"px"):""),e&&(e.style.width=l?"".concat(l,"px"):"")):"footer"===o&&(l=U,r=E,l=(r=s?P.expandColumn||!R&&!_||M.length&&w?F:v:r).reduce(function(e,t){return e+t.renderWidth},0),(0,_dom.isNodeElement)(n)&&(d&&(n.style.top="".concat(0<V?V-A:L+O,"px")),n.style.marginTop="".concat(-Math.max(1,S),"px")),a)&&(a.style.width=l?"".concat(l+y,"px"):""),N["".concat(c,"-").concat(o,"-colgroup")]),u=i?i.value:null;u&&_xeUtils.default.arrayEach(u.children,function(e){var a,t,l,i,r,n=e.getAttribute("name");"col_gutter"===n&&(e.style.width="".concat(y,"px")),I[n]&&(n=(a=I[n].column).showHeaderOverflow,r=a.showFooterOverflow,t=a.showOverflow,l=void 0,e.style.width="".concat(a.renderWidth,"px"),e="ellipsis"===(l="header"===o?_xeUtils.default.isUndefined(n)||_xeUtils.default.isNull(n)?m:n:"footer"===o?_xeUtils.default.isUndefined(r)||_xeUtils.default.isNull(r)?_:r:_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?p:t),i="title"===l||(!0===l||"tooltip"===l)||e,r=(n=N["".concat(c,"-").concat(o,"-list")])?n.value:null,T&&!i&&(i=!0),r)&&_xeUtils.default.arrayEach(r.querySelectorAll(".".concat(a.id)),function(e){var t=parseInt(e.getAttribute("colspan")||1),e=e.querySelector(".vxe-cell"),l=a.renderWidth;if(e){if(1<t)for(var r=W.getColumnIndex(a),n=1;n<t;n++){var o=W.getColumns(r+n);o&&(l+=o.renderWidth)}e.style.width=i?"".concat(l-H*t,"px"):""}})})})}),t&&W.setCurrentRow(t),e&&o.selected&&r.selected.row&&r.selected.column&&le.addCellSelectedClass(),(0,_vue.nextTick)()},wt=function(e,t){var l=E.value.checkMethod;return e&&(t||!l||l({row:e}))&&(P.selectRadioRow=e,t=e,E.value.reserve)&&(X.radioReserveRow=t),(0,_vue.nextTick)()},S=function(e,t,l){return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){return H.handleSelectRow({row:e},!!t,l)}),(0,_vue.nextTick)()},bt=function(t,l){var r=K.treeConfig,n=P.selectCheckboxMaps,e=X.afterFullData,o=X.afterFullRowMaps,a=X.checkboxReserveRowMap,i=te.value,i=i.children||i.childrenField,u=R.value,c=u.checkField,d=u.reserve,s=u.checkStrictly,f=u.checkMethod,v=u.indeterminateField||u.halfField,g={};return r||_xeUtils.default.each(n,function(e,t){o[t]||(g[t]=e)}),s?P.isAllSelected=t:(c?(u=function(e){!l&&f&&!f({row:e})||(t&&(g[(0,_util.getRowid)(le,e)]=e),_xeUtils.default.set(e,c,t)),r&&v&&_xeUtils.default.set(e,v,!1)},r?_xeUtils.default.eachTree(e,u,{children:i}):e.forEach(u)):r?t?_xeUtils.default.eachTree(e,function(e){!l&&f&&!f({row:e})||(g[(0,_util.getRowid)(le,e)]=e)},{children:i}):!l&&f&&_xeUtils.default.eachTree(e,function(e){var t=(0,_util.getRowid)(le,e);!f({row:e})&&n[t]&&(g[t]=e)},{children:i}):t?!l&&f?e.forEach(function(e){var t=(0,_util.getRowid)(le,e);(n[t]||f({row:e}))&&(g[t]=e)}):e.forEach(function(e){g[(0,_util.getRowid)(le,e)]=e}):!l&&f&&e.forEach(function(e){var t=(0,_util.getRowid)(le,e);!f({row:e})&&n[t]&&(g[t]=e)}),d&&(t?_xeUtils.default.each(g,function(e,t){a[t]=e}):e.forEach(function(e){return C(e,!1)})),P.selectCheckboxMaps=c?{}:g),P.treeIndeterminateMaps={},X.treeIndeterminateRowMaps={},H.checkSelectionStatus(),(0,_vue.nextTick)()},Ct=function(o){var e=te.value,t=R.value,a=e.transform,i=e.loadMethod,u=t.checkStrictly;return new Promise(function(e){var t,l,r,n;i?(t=P.treeExpandLazyLoadedMaps,l=X.fullAllDataRowIdData,r=(0,_util.getRowid)(le,o),n=l[r],t[r]=o,i({$table:le,row:o}).then(function(e){if(n.treeLoaded=!0,t[r]&&delete t[r],e=_xeUtils.default.isArray(e)?e:[])return W.loadTreeChildren(o,e).then(function(e){var t=P.treeExpandedMaps;return e.length&&!t[r]&&(t[r]=o),!u&&W.isCheckedByCheckboxRow(o)&&S(e,!0),(0,_vue.nextTick)().then(function(){if(a)return H.handleTableData()})})}).catch(function(){var e=P.treeExpandLazyLoadedMaps;n.treeLoaded=!1,e[r]&&delete e[r]}).finally(function(){(0,_vue.nextTick)().then(function(){return W.recalculate()}).then(function(){return e()})})):e()})},Et=function(e,t){var l,r=X.treeExpandedReserveRowMap;te.value.reserve&&(l=(0,_util.getRowid)(le,e),t?r[l]=e:r[l]&&delete r[l])},Rt=function(){var e=P.scrollXLoad,t=X.visibleColumn,l=X.scrollXStore,r=X.fullColumnIdData,e=e?t.slice(l.startIndex,l.endIndex):t.slice(0);e.forEach(function(e,t){e=e.id,e=r[e];e&&(e.$index=t)}),P.tableColumn=e},Tt=function(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?Tt(e.children):[e])}),t},yt=_xeUtils.default.debounce(function(e){oe(e)},20,{leading:!1,trailing:!0}),W={dispatchEvent:function(e,t,l){be(e,Object.assign({$table:le,$grid:B,$event:l},t))},clearAll:function(){return(0,_util.clearTableAllStatus)(le)},syncData:function(){return(0,_vue.nextTick)().then(function(){return P.tableData=[],be("update:data",X.tableFullData),(0,_vue.nextTick)()})},updateData:function(){var e=P.scrollXLoad,t=P.scrollYLoad;return H.handleTableData(!0).then(function(){if(W.updateFooter(),e||t)return e&&H.updateScrollXSpace(),t&&H.updateScrollYSpace(),W.refreshScroll()}).then(function(){return W.updateCellAreas(),W.recalculate(!0)}).then(function(){setTimeout(function(){return le.recalculate()},50)})},loadData:function(e){var t=X.inited,l=X.initStatus;return U(e).then(function(){return X.inited=!0,X.initStatus=!0,l||O(),t||A(),W.recalculate()})},reloadData:function(e){var t=X.inited;return W.clearAll().then(function(){return X.inited=!0,X.initStatus=!0,U(e)}).then(function(){return O(),t||A(),W.recalculate()})},reloadRow:function(e,t,l){var r=K.keepSource,n=P.tableData,o=X.tableSourceData;return r?((r=o[W.getRowIndex(e)])&&e&&(l?(o=_xeUtils.default.get(t||e,l),_xeUtils.default.set(e,l,o),_xeUtils.default.set(r,l,o)):(l=_xeUtils.default.clone(__assign({},t),!0),_xeUtils.default.destructuring(r,Object.assign(e,l)))),P.tableData=n.slice(0)):"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)()},loadTreeChildren:function(r,e){var n=K.keepSource,o=X.tableSourceData,i=X.fullDataRowIdData,u=X.fullAllDataRowIdData,a=X.sourceDataRowIdData,t=te.value,c=t.transform,d=t.mapChildrenField,s=t.children||t.childrenField,t=u[(0,_util.getRowid)(le,r)],f=t?t.level:0;return W.createData(e).then(function(e){var t,l;return n&&(t=(0,_util.getRowid)(le,r),(l=_xeUtils.default.findTree(o,function(e){return t===(0,_util.getRowid)(le,e)},{children:s}))&&(l.item[s]=_xeUtils.default.clone(e,!0)),e.forEach(function(e){var t=(0,_util.getRowid)(le,e);a[t]=_xeUtils.default.clone(e,!0)})),_xeUtils.default.eachTree(e,function(e,t,l,r,n,o){var a=(0,_util.getRowid)(le,e),e={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,items:l,parent:n,level:f+o.length};i[a]=e,u[a]=e},{children:s}),r[s]=e,c&&(r[d]=e),k(),e})},loadColumn:function(e){e=_xeUtils.default.mapTree(e,function(e){return(0,_vue.reactive)(_cell.default.createColumn(le,e))});return o(e)},reloadColumn:function(e){return W.clearAll().then(function(){return W.loadColumn(e)})},getRowNode:function(e){if(e){var t=X.fullAllDataRowIdData,e=e.getAttribute("rowid");if(e){t=t[e];if(t)return{rowid:t.rowid,item:t.row,index:t.index,items:t.items,parent:t.parent}}}return null},getColumnNode:function(e){if(e){var t=X.fullColumnIdData,e=e.getAttribute("colid");if(e){t=t[e];if(t)return{colid:t.colid,item:t.column,index:t.index,items:t.items,parent:t.parent}}}return null},getRowSeq:ae("seq"),getRowIndex:ae("index"),getVTRowIndex:ae("_index"),getVMRowIndex:ae("$index"),getColumnIndex:ie("index"),getVTColumnIndex:ie("_index"),getVMColumnIndex:ie("$index"),createData:function(e){return(0,_vue.nextTick)().then(function(){return(0,_vue.reactive)(H.defineField(e))})},createRow:function(e){var t=_xeUtils.default.isArray(e);return W.createData(e=t?e:[e||{}]).then(function(e){return t?e:e[0]})},revertData:function(e,l){var t=K.keepSource,r=X.tableSourceData,n=X.sourceDataRowIdData;return t?((t=e)?_xeUtils.default.isArray(e)||(t=[e]):t=_xeUtils.default.toArray(le.getUpdateRecords()),t.length&&t.forEach(function(e){var t;W.isInsertByRow(e)||(t=(0,_util.getRowid)(le,e),(t=n[t])&&e&&(l?_xeUtils.default.set(e,l,_xeUtils.default.clone(_xeUtils.default.get(t,l),!0)):_xeUtils.default.destructuring(e,_xeUtils.default.clone(t,!0))))}),e?(0,_vue.nextTick)():W.reloadData(r)):("development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)())},clearData:function(e,t){var l=X.tableFullData,r=X.visibleColumn;return arguments.length?e&&!_xeUtils.default.isArray(e)&&(e=[e]):e=l,t?e.forEach(function(e){return _xeUtils.default.set(e,t,null)}):e.forEach(function(t){r.forEach(function(e){e.field&&(0,_util.setCellValue)(t,e,null)})}),(0,_vue.nextTick)()},isInsertByRow:function(e){var t=P.editStore,e=(0,_util.getRowid)(le,e);return t.insertMaps[e]},removeInsertRow:function(){return P.editStore.insertMaps={},le.remove(le.getInsertRecords())},isUpdateByRow:function(e,t){var l=K.keepSource,r=X.tableFullColumn,n=X.fullDataRowIdData,o=X.sourceDataRowIdData;if(l){l=(0,_util.getRowid)(le,e);if(!n[l])return!1;var a=o[l];if(a){if(1<arguments.length)return!p(a,e,t);for(var i=0,u=r.length;i<u;i++){var c=r[i].field;if(c&&!p(a,e,c))return!0}}}return!1},getColumns:function(e){var t=X.visibleColumn;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getColumnById:function(e){var t=X.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=X.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:X.collectColumn.slice(0),fullColumn:X.tableFullColumn.slice(0),visibleColumn:X.visibleColumn.slice(0),tableColumn:P.tableColumn.slice(0)}},getData:function(e){var t=K.data||X.tableSynchData;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(l){var e=K.treeConfig,t=X.tableFullData,r=X.afterFullData,n=X.afterTreeFullData,o=X.tableFullTreeData,a=X.fullDataRowIdData,i=X.afterFullRowMaps,u=te.value,c=R.value,d=u.transform,s=u.mapChildrenField,f=c.checkField,c=u.children||u.childrenField,v=[],u=l?d?o:t:d?n:r;return f?v=e?_xeUtils.default.filterTree(u,function(e){return _xeUtils.default.get(e,f)},{children:d?s:c}):u.filter(function(e){return _xeUtils.default.get(e,f)}):(o=P.selectCheckboxMaps,_xeUtils.default.each(o,function(e,t){(l?a:i)[t]&&v.push(e)})),v},getParentRow:function(e){var t=K.treeConfig,l=X.fullDataRowIdData;if(e&&t){t=void 0;if(t=_xeUtils.default.isString(e)?e:(0,_util.getRowid)(le,e))return l[t]?l[t].parent:null}return null},getRowById:function(e){var t=X.fullDataRowIdData,e=_xeUtils.default.eqNull(e)?"":encodeURIComponent(e);return t[e]?t[e].row:null},getRowid:function(e){return(0,_util.getRowid)(le,e)},getTableData:function(){var e=P.tableData,t=P.footerTableData,l=X.tableFullData,r=X.afterFullData;return{fullData:l.slice(0),visibleData:r.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},setColumnFixed:function(e,t){var e=(0,_util.handleFieldOrColumn)(le,e),e=(0,_util.getRootColumn)(le,e),l=ct.value;return e&&e.fixed!==t?!e.fixed&&l?(_vXETable.VXETable.modal&&_vXETable.VXETable.modal.message({status:"error",content:_conf.default.i18n("vxe.table.maxFixedCol")}),(0,_vue.nextTick)()):(_xeUtils.default.eachTree([e],function(e){e.fixed=t}),H.saveCustomFixed(),W.refreshColumn()):(0,_vue.nextTick)()},clearColumnFixed:function(e){e=(0,_util.handleFieldOrColumn)(le,e),e=(0,_util.getRootColumn)(le,e);return e&&e.fixed?(_xeUtils.default.eachTree([e],function(e){e.fixed=null}),H.saveCustomFixed(),W.refreshColumn()):(0,_vue.nextTick)()},hideColumn:function(e){e=(0,_util.handleFieldOrColumn)(le,e);return e&&e.visible?(e.visible=!1,H.handleCustom()):(0,_vue.nextTick)()},showColumn:function(e){e=(0,_util.handleFieldOrColumn)(le,e);return e&&!e.visible?(e.visible=!0,H.handleCustom()):(0,_vue.nextTick)()},setColumnWidth:function(e,t){var l,r,e=(0,_util.handleFieldOrColumn)(le,e);return e&&(r=l=_xeUtils.default.toInteger(t),(0,_dom.isScale)(t)&&(t=(t=(t=j.value)?t.$el:null)?t.clientWidth-1:0,r=Math.floor(l*t)),e.renderWidth=r),(0,_vue.nextTick)()},getColumnWidth:function(e){e=(0,_util.handleFieldOrColumn)(le,e);return e?e.renderWidth:0},resetColumn:function(e){var t=X.collectColumn,l=v.value.checkMethod,r=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e},e);return _xeUtils.default.eachTree(t,function(e){r.resizable&&(e.resizeWidth=0),r.fixed&&(e.fixed=e.defaultFixed),l&&!l({column:e})||(e.visible=e.defaultVisible)}),r.resizable&&H.saveCustomResizable(!0),r.fixed&&H.saveCustomFixed(),H.handleCustom()},refreshColumn:function(){return re().then(function(){return W.refreshScroll()}).then(function(){return W.recalculate()})},refreshScroll:function(){var t=X.lastScrollLeft,l=X.lastScrollTop,e=j.value,r=Y.value,n=Fe.value,o=d.value,a=e?e.$el:null,i=n?n.$el:null,u=o?o.$el:null,c=r?r.$el:null;return new Promise(function(e){if(t||l)return(0,_util.restoreScrollLocation)(le,t,l).then().then(function(){setTimeout(e,30)});(0,_dom.setScrollTop)(a,l),(0,_dom.setScrollTop)(i,l),(0,_dom.setScrollTop)(u,l),(0,_dom.setScrollLeft)(c,t),setTimeout(e,30)})},recalculate:function(e){return r(),!0===e?L().then(function(){return r(),L()}):L()},openTooltip:function(e,t){var l=ye.value;return l?l.open(e,t):(0,_vue.nextTick)()},closeTooltip:function(){var e=P.tooltipStore,t=q.value,l=ye.value;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1}),t)&&t.close(),l&&l.close(),(0,_vue.nextTick)()},isAllCheckboxChecked:function(){return P.isAllSelected},isAllCheckboxIndeterminate:function(){return!P.isAllSelected&&P.isIndeterminate},getCheckboxIndeterminateRecords:function(e){var l,r,t=K.treeConfig,n=X.fullDataRowIdData,o=P.treeIndeterminateMaps;return t?(l=[],r=[],_xeUtils.default.each(o,function(e,t){e&&(l.push(e),n[t])&&r.push(e)}),e?l:r):[]},setCheckboxRow:function(e,t){return S(e,t,!0)},isCheckedByCheckboxRow:function(e){var t=P.selectCheckboxMaps,l=R.value.checkField;return l?_xeUtils.default.get(e,l):!!t[(0,_util.getRowid)(le,e)]},isIndeterminateByCheckboxRow:function(e){return!!P.treeIndeterminateMaps[(0,_util.getRowid)(le,e)]&&!W.isCheckedByCheckboxRow(e)},toggleCheckboxRow:function(e){var t=P.selectCheckboxMaps,l=R.value.checkField,l=l?!_xeUtils.default.get(e,l):!t[(0,_util.getRowid)(le,e)];return H.handleSelectRow({row:e},l,!0),(0,_vue.nextTick)()},setAllCheckboxRow:function(e){return bt(e,!0)},getRadioReserveRecord:function(e){var t=K.treeConfig,l=X.fullDataRowIdData,r=X.radioReserveRow,n=X.afterFullData,o=E.value,a=te.value,a=a.children||a.childrenField;if(o.reserve&&r){var i=(0,_util.getRowid)(le,r);if(e){if(!l[i])return r}else{var u=(0,_util.getRowkey)(le);if(t){if(_xeUtils.default.findTree(n,function(e){return i===_xeUtils.default.get(e,u)},{children:a}))return r}else if(!n.some(function(e){return i===_xeUtils.default.get(e,u)}))return r}}return null},clearRadioReserve:function(){return(X.radioReserveRow=null,_vue.nextTick)()},getCheckboxReserveRecords:function(l){var r,e=K.treeConfig,t=X.afterFullData,n=X.fullDataRowIdData,o=X.checkboxReserveRowMap,a=R.value,i=te.value,i=i.children||i.childrenField,u=[];return a.reserve&&(r={},e?_xeUtils.default.eachTree(t,function(e){r[(0,_util.getRowid)(le,e)]=1},{children:i}):t.forEach(function(e){r[(0,_util.getRowid)(le,e)]=1}),_xeUtils.default.each(o,function(e,t){e&&(l?n[t]||u.push(e):r[t]||u.push(e))})),u},clearCheckboxReserve:function(){return X.checkboxReserveRowMap={},(0,_vue.nextTick)()},toggleAllCheckboxRow:function(){return H.triggerCheckAllEvent(null,!P.isAllSelected),(0,_vue.nextTick)()},clearCheckboxRow:function(){var t=K.treeConfig,e=X.tableFullData,l=te.value,l=l.children||l.childrenField,r=R.value,n=r.checkField,o=r.reserve,a=r.indeterminateField||r.halfField;return n&&(r=function(e){t&&a&&_xeUtils.default.set(e,a,!1),_xeUtils.default.set(e,n,!1)},t?_xeUtils.default.eachTree(e,r,{children:l}):e.forEach(r)),o&&e.forEach(function(e){return C(e,!1)}),P.isAllSelected=!1,P.isIndeterminate=!1,P.selectCheckboxMaps={},P.treeIndeterminateMaps={},(0,_vue.nextTick)()},setCurrentRow:function(e){var t=Z.value,l=z.value;return W.clearCurrentRow(),P.currentRow=e,(t.isCurrent||K.highlightCurrentRow)&&l&&_xeUtils.default.arrayEach(l.querySelectorAll('[rowid="'.concat((0,_util.getRowid)(le,e),'"]')),function(e){return(0,_dom.addClass)(e,"row--current")}),(0,_vue.nextTick)()},isCheckedByRadioRow:function(e){return le.eqRow(P.selectRadioRow,e)},setRadioRow:function(e){return wt(e,!0)},clearCurrentRow:function(){var e=z.value;return P.currentRow=null,X.hoverRow=null,e&&_xeUtils.default.arrayEach(e.querySelectorAll(".row--current"),function(e){return(0,_dom.removeClass)(e,"row--current")}),(0,_vue.nextTick)()},clearRadioRow:function(){return(P.selectRadioRow=null,_vue.nextTick)()},getCurrentRecord:function(){return Z.value.isCurrent||K.highlightCurrentRow?P.currentRow:null},getRadioRecord:function(e){var t=X.fullDataRowIdData,l=X.afterFullRowMaps,r=P.selectRadioRow;if(r){var n=(0,_util.getRowid)(le,r);if(e){if(!t[n])return r}else if(l[n])return r}return null},getCurrentColumn:function(){return G.value.isCurrent||K.highlightCurrentColumn?P.currentColumn:null},setCurrentColumn:function(e){e=(0,_util.handleFieldOrColumn)(le,e);return e&&(W.clearCurrentColumn(),P.currentColumn=e),(0,_vue.nextTick)()},clearCurrentColumn:function(){return(P.currentColumn=null,_vue.nextTick)()},sort:function(e,t){var l=T.value,r=l.multiple,n=l.remote,o=l.orders;return e&&_xeUtils.default.isString(e)&&(e=[{field:e,order:t}]),(e=_xeUtils.default.isArray(e)?e:[e]).length?(r||i(),(r?e:[e[0]]).forEach(function(e,t){var l=e.field,e=e.order,r=l;(r=_xeUtils.default.isString(l)?W.getColumnByField(l):r)&&r.sortable&&(-1===o.indexOf(e)&&(e=c(r)),r.order!==e&&(r.order=e),r.sortTime=Date.now()+t)}),n||H.handleTableData(!0),(0,_vue.nextTick)().then(function(){return W.updateCellAreas(),w()})):(0,_vue.nextTick)()},clearSort:function(e){var t=T.value;return e?(e=(0,_util.handleFieldOrColumn)(le,e))&&(e.order=null):i(),t.remote||H.handleTableData(!0),(0,_vue.nextTick)().then(w)},isSort:function(e){return e?!!(e=(0,_util.handleFieldOrColumn)(le,e))&&e.sortable&&!!e.order:0<W.getSortColumns().length},getSortColumns:function(){var e=T.value,t=e.multiple,e=e.chronological,r=[];return X.tableFullColumn.forEach(function(e){var t=e.field,l=e.order;e.sortable&&l&&r.push({column:e,field:t,property:t,order:l,sortTime:e.sortTime})}),t&&e&&1<r.length?_xeUtils.default.orderBy(r,"sortTime"):r},closeFilter:function(){var e=P.filterStore,t=e.column,l=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),l&&le.dispatchEvent("filter-visible",{column:t,property:t.field,field:t.field,filterList:le.getCheckedFilters(),visible:!1},null),(0,_vue.nextTick)()},isActiveFilterByColumn:function(e){e=(0,_util.handleFieldOrColumn)(le,e);return e?e.filters&&e.filters.some(function(e){return e.checked}):0<le.getCheckedFilters().length},isFilter:function(e){return W.isActiveFilterByColumn(e)},isRowExpandLoaded:function(e){e=X.fullAllDataRowIdData[(0,_util.getRowid)(le,e)];return e&&!!e.expandLoaded},clearRowExpandLoaded:function(e){var t=P.rowExpandLazyLoadedMaps,l=X.fullAllDataRowIdData,r=y.value.lazy,e=(0,_util.getRowid)(le,e),l=l[e];return r&&l&&(l.expandLoaded=!1,delete t[e]),(0,_vue.nextTick)()},reloadRowExpand:function(e){var t=P.rowExpandLazyLoadedMaps,l=y.value.lazy,r=(0,_util.getRowid)(le,e);return l&&!t[r]&&W.clearRowExpandLoaded(e).then(function(){return _(e)}),(0,_vue.nextTick)()},reloadExpandContent:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),W.reloadRowExpand(e)},toggleRowExpand:function(e){return W.setRowExpand(e,!W.isExpandByRow(e))},setAllRowExpand:function(e){var t=te.value,l=X.tableFullData,r=X.tableFullTreeData,t=t.children||t.childrenField,n=[];return K.treeConfig?_xeUtils.default.eachTree(r,function(e){n.push(e)},{children:t}):n=l,W.setRowExpand(n,e)},setRowExpand:function(e,t){var l=P.rowExpandedMaps,r=P.rowExpandLazyLoadedMaps,n=P.expandColumn,o=X.fullAllDataRowIdData,a=__assign({},l),l=y.value,i=l.reserve,u=l.lazy,c=l.accordion,d=l.toggleMethod,s=[],f=W.getColumnIndex(n),v=W.getVMColumnIndex(n);return e&&(_xeUtils.default.isArray(e)||(e=[e]),c&&(a={},e=e.slice(e.length-1,e.length)),l=d?e.filter(function(e){return d({$table:le,expanded:t,column:n,columnIndex:f,$columnIndex:v,row:e,rowIndex:W.getRowIndex(e),$rowIndex:W.getVMRowIndex(e)})}):e,t?l.forEach(function(e){var t,l=(0,_util.getRowid)(le,e);a[l]||(t=o[l],u&&!t.expandLoaded&&!r[l]?s.push(_(e)):a[l]=e)}):l.forEach(function(e){e=(0,_util.getRowid)(le,e);a[e]&&delete a[e]}),i)&&l.forEach(function(e){return I(e,t)}),P.rowExpandedMaps=a,Promise.all(s).then(function(){return W.recalculate()})},isExpandByRow:function(e){return!!P.rowExpandedMaps[(0,_util.getRowid)(le,e)]},clearRowExpand:function(){var e=X.tableFullData,t=y.value.reserve,l=W.getRowExpandRecords();return P.rowExpandedMaps={},t&&e.forEach(function(e){return I(e,!1)}),(0,_vue.nextTick)().then(function(){l.length&&W.recalculate()})},clearRowExpandReserve:function(){return X.rowExpandedReserveRowMap={},(0,_vue.nextTick)()},getRowExpandRecords:function(){var t=[];return _xeUtils.default.each(P.rowExpandedMaps,function(e){e&&t.push(e)}),t},getTreeExpandRecords:function(){var t=[];return _xeUtils.default.each(P.treeExpandedMaps,function(e){e&&t.push(e)}),t},isTreeExpandLoaded:function(e){e=X.fullAllDataRowIdData[(0,_util.getRowid)(le,e)];return e&&!!e.treeLoaded},clearTreeExpandLoaded:function(e){var t=P.treeExpandedMaps,l=X.fullAllDataRowIdData,r=te.value,n=r.transform,r=r.lazy,e=(0,_util.getRowid)(le,e),l=l[e];return r&&l&&(l.treeLoaded=!1,t[e])&&delete t[e],n?(b(),H.handleTableData()):(0,_vue.nextTick)()},reloadTreeExpand:function(e){var t=P.treeExpandLazyLoadedMaps,l=te.value,r=l.hasChild||l.hasChildField,n=l.transform,l=l.lazy,o=(0,_util.getRowid)(le,e);return l&&e[r]&&!t[o]&&W.clearTreeExpandLoaded(e).then(function(){return Ct(e)}).then(function(){if(n)return b(),H.handleTableData()}).then(function(){return W.recalculate()}),(0,_vue.nextTick)()},reloadTreeChilds:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),W.reloadTreeExpand(e)},toggleTreeExpand:function(e){return W.setTreeExpand(e,!W.isTreeExpandByRow(e))},setAllTreeExpand:function(e){var t=X.tableFullData,l=te.value,r=l.transform,n=l.lazy,o=l.children||l.childrenField,a=[];return _xeUtils.default.eachTree(t,function(e){var t=e[o];(n||t&&t.length)&&a.push(e)},{children:o}),W.setTreeExpand(a,e).then(function(){if(r)return b(),W.recalculate()})},setTreeExpand:function(e,t){var l=te.value.transform;return e&&(e=_xeUtils.default.isArray(e)?e:[e]).length?l?u(e,t).then(function(){return b(),H.handleTableData()}).then(function(){return W.recalculate()}):u(e,t):(0,_vue.nextTick)()},isTreeExpandByRow:function(e){return!!P.treeExpandedMaps[(0,_util.getRowid)(le,e)]},clearTreeExpand:function(){var e=X.tableFullTreeData,t=te.value,l=t.children||t.childrenField,r=t.transform,t=t.reserve,n=W.getTreeExpandRecords();return P.treeExpandedMaps={},t&&_xeUtils.default.eachTree(e,function(e){return Et(e,!1)},{children:l}),H.handleTableData().then(function(){if(r)return b(),H.handleTableData()}).then(function(){if(n.length)return W.recalculate()})},clearTreeExpandReserve:function(){return X.treeExpandedReserveRowMap={},(0,_vue.nextTick)()},getScroll:function(){var e=P.scrollXLoad,t=P.scrollYLoad,l=j.value.$el;return{virtualX:e,virtualY:t,scrollTop:l.scrollTop,scrollLeft:l.scrollLeft}},scrollTo:function(e,t){var l=j.value,r=Y.value,n=d.value,l=l?l.$el:null,n=n?n.$el:null,r=r?r.$el:null;return _xeUtils.default.isNumber(e)&&(0,_dom.setScrollLeft)(r||l,e),_xeUtils.default.isNumber(t)&&(0,_dom.setScrollTop)(n||l,t),P.scrollXLoad||P.scrollYLoad?new Promise(function(e){setTimeout(function(){(0,_vue.nextTick)(function(){e()})},50)}):(0,_vue.nextTick)()},scrollToRow:function(e,t){var l=[];return e&&(K.treeConfig?l.push(H.scrollToTreeRow(e)):l.push((0,_util.rowToVisible)(le,e))),t&&l.push(W.scrollToColumn(t)),Promise.all(l)},scrollToColumn:function(e){var t=X.fullColumnIdData,e=(0,_util.handleFieldOrColumn)(le,e);return e&&t[e.id]?(0,_util.colToVisible)(le,e):(0,_vue.nextTick)()},clearScroll:function(){var e=X.scrollXStore,t=X.scrollYStore,l=j.value,r=Y.value,n=d.value,l=l?l.$el:null,n=n?n.$el:null,r=r?r.$el:null;return n&&((0,_util.restoreScrollListener)(n),n.scrollTop=0),r&&(r.scrollLeft=0),l&&((0,_util.restoreScrollListener)(l),l.scrollTop=0,l.scrollLeft=0),e.startIndex=0,(t.startIndex=0,_vue.nextTick)()},updateFooter:function(){var e=K.showFooter,t=K.footerMethod,l=X.visibleColumn,r=X.afterFullData;return e&&t&&(P.footerTableData=l.length?t({columns:l,data:r,$table:le,$grid:B}):[]),(0,_vue.nextTick)()},updateStatus:function(a,i){var u=!_xeUtils.default.isUndefined(i);return(0,_vue.nextTick)().then(function(){var e=K.editRules,t=P.validStore,l=j.value;if(a&&l&&e){var r=a.row,n=a.column;if(le.hasCellRules&&le.hasCellRules("change",r,n)){var o=H.getCell(r,n);if(o)return le.validCellRules("change",r,n,i).then(function(){u&&t.visible&&(0,_util.setCellValue)(r,n,i),le.clearValidate(r,n)}).catch(function(e){e=e.rule;u&&(0,_util.setCellValue)(r,n,i),le.showValidTooltip({rule:e,row:r,column:n,cell:o})})}}})},setMergeCells:function(e){return K.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),t(e,P.mergeList,X.afterFullData),(0,_vue.nextTick)().then(function(){return W.updateCellAreas()})},removeMergeCells:function(e){K.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var t=l(e,P.mergeList,X.afterFullData);return(0,_vue.nextTick)().then(function(){return W.updateCellAreas(),t})},getMergeCells:function(){return P.mergeList.slice(0)},clearMergeCells:function(){return P.mergeList=[],(0,_vue.nextTick)()},setMergeFooterItems:function(e){return K.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),t(e,P.mergeFooterList),(0,_vue.nextTick)().then(function(){return W.updateCellAreas()})},removeMergeFooterItems:function(e){K.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var t=l(e,P.mergeFooterList);return(0,_vue.nextTick)().then(function(){return W.updateCellAreas(),t})},getMergeFooterItems:function(){return P.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return P.mergeFooterList=[],(0,_vue.nextTick)()},updateCellAreas:function(){var e=K.mouseConfig,t=Q.value;return e&&t.area&&le.handleUpdateCellAreas?le.handleUpdateCellAreas():(0,_vue.nextTick)()},focus:function(){return X.isActivated=!0,(0,_vue.nextTick)()},blur:function(){return(X.isActivated=!1,_vue.nextTick)()},connect:function(e){return e?(f=e).syncUpdate({collectColumn:X.collectColumn,$table:le}):(0,_log.errLog)("vxe.error.barUnableLink"),(0,_vue.nextTick)()}},H={getSetupOptions:function(){return _conf.default},updateAfterDataIndex:k,callSlot:function(e,t){if(e){if(B)return B.callSlot(e,t);if(_xeUtils.default.isFunction(e))return(0,_vn.getSlotVNs)(e(t))}return[]},getParentElem:function(){var e,t=z.value;return B?(e=B.getRefMaps().refElem.value)?e.parentNode:null:t?t.parentNode:null},getParentHeight:function(){var e=K.height,t=z.value;return t?(t=t.parentNode,e="auto"===e?(0,_dom.getPaddingTopBottomSize)(t):0,Math.floor(B?B.getParentHeight():_xeUtils.default.toNumber(getComputedStyle(t).height)-e)):0},getExcludeHeight:function(){return B?B.getExcludeHeight():0},defineField:function(e){var t=K.treeConfig,l=y.value,r=te.value,o=E.value,a=R.value,i=r.children||r.childrenField,u=(0,_util.getRowkey)(le);return(e=_xeUtils.default.isArray(e)?e:[e]).map(function(n){return X.tableFullColumn.forEach(function(e){var t,l=e.field,r=e.editRender;!l||_xeUtils.default.has(n,l)||n[l]||(t=null,r&&(r=r.defaultValue,_xeUtils.default.isFunction(r)?t=r({column:e}):_xeUtils.default.isUndefined(r)||(t=r)),_xeUtils.default.set(n,l,t))}),[o.labelField,a.checkField,a.labelField,l.labelField].forEach(function(e){e&&(0,_utils.eqEmptyValue)(_xeUtils.default.get(n,e))&&_xeUtils.default.set(n,e,null)}),t&&r.lazy&&_xeUtils.default.isUndefined(n[i])&&(n[i]=null),(0,_utils.eqEmptyValue)(_xeUtils.default.get(n,u))&&_xeUtils.default.set(n,u,(0,_util.getRowUniqueId)()),n})},handleTableData:function(e){var i,u,t,l,r,n,o,a,c,d,s,f,v,g,h,p=P.scrollYLoad,m=X.scrollYStore,_=X.fullDataRowIdData,x=X.afterFullData,w=(e&&(e=K.treeConfig,l=X.tableFullColumn,r=X.tableFullData,n=X.tableFullTreeData,o=je.value,a=T.value,c=te.value,d=c.transform,s=o.remote,f=o.filterMethod,v=a.remote,o=a.sortMethod,w=a.multiple,a=a.chronological,g=[],h=[],s&&v?e&&d?g=h=_xeUtils.default.searchTree(n,function(){return!0},__assign(__assign({},c),{original:!0})):h=g=(e?n:r).slice(0):(i=[],u=[],l.forEach(function(e){var t,l,r=e.field,n=e.sortable,o=e.order,a=e.filters;!s&&a&&a.length&&(t=[],l=[],a.forEach(function(e){e.checked&&(l.push(e),t.push(e.value))}),l.length)&&i.push({column:e,valueList:t,itemList:l}),!v&&n&&o&&u.push({column:e,field:r,property:r,order:o,sortTime:e.sortTime})}),w&&a&&1<u.length&&(u=_xeUtils.default.orderBy(u,"sortTime")),!s&&i.length?(l=function(u){return i.every(function(e){var t=e.column,l=e.valueList,e=e.itemList,r=t.filterMethod,n=t.filterRender,n=n?_vXETable.VXETable.renderer.get(n.name):null,o=n?n.filterMethod:null,a=n?n.defaultFilterMethod:null,i=(0,_util.getCellValue)(u,t);return r?e.some(function(e){return r({value:e.value,option:e,cellValue:i,row:u,column:t,$table:le})}):o?e.some(function(e){return o({value:e.value,option:e,cellValue:i,row:u,column:t,$table:le})}):f?f({options:e,values:l,cellValue:i,row:u,column:t}):a?e.some(function(e){return a({value:e.value,option:e,cellValue:i,row:u,column:t,$table:le})}):-1<l.indexOf(_xeUtils.default.get(u,t.field))})},e&&d?g=h=_xeUtils.default.searchTree(n,l,__assign(__assign({},c),{original:!0})):h=g=(e?n:r).filter(l)):e&&d?g=h=_xeUtils.default.searchTree(n,function(){return!0},__assign(__assign({},c),{original:!0})):h=g=(e?n:r).slice(0),!v&&u.length&&(e&&d?g=h=o?(t=o({data:h,sortList:u,$table:le}),_xeUtils.default.isArray(t)?t:h):_xeUtils.default.orderBy(h,u.map(function(e){var t=e.column,e=e.order;return[M(t),e]})):h=g=o?(t=o({data:g,sortList:u,$table:le}),_xeUtils.default.isArray(t)?t:g):_xeUtils.default.orderBy(g,u.map(function(e){var t=e.column,e=e.order;return[M(t),e]})))),X.afterFullData=g,X.afterTreeFullData=h,k(),x=b()),p?x.slice(m.startIndex,m.endIndex):x.slice(0));return w.forEach(function(e,t){e=(0,_util.getRowid)(le,e),e=_[e];e&&(e.$index=t)}),P.tableData=w,(0,_vue.nextTick)()},cacheRowMap:function(i){function e(e,t,l,r,n,o){var a=(0,_util.getRowid)(le,e),r=u&&r?(0,_util.toTreePathSeq)(r):t+1,o=o?o.length-1:0,e=((0,_utils.eqEmptyValue)(a)&&(a=(0,_util.getRowUniqueId)(),_xeUtils.default.set(e,v,a)),g&&e[f]&&_xeUtils.default.isUndefined(e[s])&&(e[s]=null),{row:e,rowid:a,seq:r,index:u&&n?-1:t,_index:-1,$index:-1,items:l,parent:n,level:o});i&&(c[a]=e),d[a]=e}var u=K.treeConfig,t=te.value,c=X.fullDataRowIdData,d=X.fullAllDataRowIdData,l=X.tableFullData,r=X.tableFullTreeData,s=t.children||t.childrenField,f=t.hasChild||t.hasChildField,v=(0,_util.getRowkey)(le),g=u&&t.lazy;i&&(c=X.fullDataRowIdData={}),d=X.fullAllDataRowIdData={},u?_xeUtils.default.eachTree(r,e,{children:s}):l.forEach(e)},cacheSourceMap:function(e){function t(e){var t=(0,_util.getRowid)(le,e);(0,_utils.eqEmptyValue)(t)&&(t=(0,_util.getRowUniqueId)(),_xeUtils.default.set(e,o,t)),n[t]=e}var l=K.treeConfig,r=te.value,n=X.sourceDataRowIdData,e=_xeUtils.default.clone(e,!0),o=(0,_util.getRowkey)(le),n=X.sourceDataRowIdData={};l?(l=r.children||r.childrenField,_xeUtils.default.eachTree(e,t,{children:r.transform?r.mapChildrenField:l})):e.forEach(t),X.tableSourceData=e},analyColumnWidth:function(){var e=X.tableFullColumn,t=G.value,l=t.width,r=t.minWidth,n=[],o=[],a=[],i=[],u=[],c=[];e.forEach(function(e){l&&!e.width&&(e.width=l),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?n:(0,_dom.isPx)(e.width)?o:(0,_dom.isScale)(e.width)?i:(0,_dom.isPx)(e.minWidth)?a:(0,_dom.isScale)(e.minWidth)?u:c).push(e)}),Object.assign(P.columnStore,{resizeList:n,pxList:o,pxMinList:a,scaleList:i,scaleMinList:u,autoList:c})},saveCustomResizable:function(e){var l,t=K.id,r=K.customConfig,n=v.value,o=X.collectColumn,n=n.storage,n=!0===n||n&&n.resizable;r&&n&&(r=g(resizableStorageKey),t?(e||(l=_xeUtils.default.isPlainObject(r[t])?r[t]:{},_xeUtils.default.eachTree(o,function(e){var t;e.resizeWidth&&(t=e.getKey())&&(l[t]=e.renderWidth)})),r[t]=_xeUtils.default.isEmpty(l)?void 0:l,localStorage.setItem(resizableStorageKey,_xeUtils.default.toJSONString(r))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},saveCustomFixed:function(){var l,e=K.id,t=K.customConfig,r=X.collectColumn,n=v.value.storage,n=!0===n||n&&n.fixed;t&&n&&(t=g(fixedStorageKey),l=[],e?(_xeUtils.default.eachTree(r,function(e){var t;e.fixed&&e.fixed!==e.defaultFixed&&(t=e.getKey())&&l.push("".concat(t,"|").concat(e.fixed))}),t[e]=l.join(",")||void 0,localStorage.setItem(fixedStorageKey,_xeUtils.default.toJSONString(t))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},saveCustomVisible:function(){var l,r,e=K.id,t=K.customConfig,n=X.collectColumn,o=v.value,a=o.checkMethod,o=o.storage,o=!0===o||o&&o.visible;t&&o&&(t=g(visibleStorageKey),l=[],r=[],e?(_xeUtils.default.eachTree(n,function(e){var t;a&&!a({column:e})||(!e.visible&&e.defaultVisible?(t=e.getKey())&&l.push(t):e.visible&&!e.defaultVisible&&(t=e.getKey())&&r.push(t))}),t[e]=[l.join(",")].concat(r.length?[r.join(",")]:[]).join("|")||void 0,localStorage.setItem(visibleStorageKey,_xeUtils.default.toJSONString(t))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},handleCustom:function(){return H.saveCustomVisible(),H.analyColumnWidth(),W.refreshColumn()},handleUpdateDataQueue:function(){P.upDataFlag++},handleRefreshColumnQueue:function(){P.reColumnFlag++},preventEvent:function(t,e,l,r,n){var o;return _vXETable.VXETable.interceptor.get(e).some(function(e){return!1===e(Object.assign({$grid:B,$table:le,$event:t},l))})||r&&(o=r()),n&&n(),o},checkSelectionStatus:function(){var t,l,e=K.treeConfig,r=P.selectCheckboxMaps,n=P.treeIndeterminateMaps,o=X.afterFullData,a=R.value,i=a.checkField,u=a.checkStrictly,c=a.checkMethod,d=a.indeterminateField||a.halfField;u||(t=[],u=a=!(l=[]),u=i?(a=o.every(c?function(e){return c({row:e})?!!_xeUtils.default.get(e,i)&&(l.push(e),!0):(t.push(e),!0)}:function(e){return _xeUtils.default.get(e,i)})&&o.length!==t.length,e?d?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,d)||!!n[(0,_util.getRowid)(le,e)]}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)||!!n[(0,_util.getRowid)(le,e)]}):d?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,d)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)})):(a=o.every(c?function(e){return c({row:e})?!!r[(0,_util.getRowid)(le,e)]&&(l.push(e),!0):(t.push(e),!0)}:function(e){return r[(0,_util.getRowid)(le,e)]})&&o.length!==t.length,e?!a&&o.some(function(e){e=(0,_util.getRowid)(le,e);return n[e]||r[e]}):!a&&o.some(function(e){return r[(0,_util.getRowid)(le,e)]})),P.isAllSelected=a,P.isIndeterminate=u)},handleSelectRow:function(e,l,r){var n,o,t,a,i,u,c,d,s=e.row,e=K.treeConfig,f=P.selectCheckboxMaps,v=P.treeIndeterminateMaps,g=__assign({},f),f=X.afterFullData,h=te.value,h=h.children||h.childrenField,p=R.value,m=p.checkField,_=p.checkStrictly,x=p.checkMethod,w=p.indeterminateField||p.halfField,p=(0,_util.getRowid)(le,s);if(m)if(e&&!_){if(-1===l?(v[p]||(w&&_xeUtils.default.set(s,w,!0),v[p]=s),_xeUtils.default.set(s,m,!1)):_xeUtils.default.eachTree([s],function(e){(le.eqRow(e,s)||r||!x||x({row:e}))&&(_xeUtils.default.set(e,m,l),w&&_xeUtils.default.set(s,w,!1),delete v[(0,_util.getRowid)(le,e)],C(s,l))},{children:h}),(a=_xeUtils.default.findTree(f,function(e){return le.eqRow(e,s)},{children:h}))&&a.parent)return i=void 0,n=[],o={},!r&&x?a.items.forEach(function(e){var t;x({row:e})&&(t=(0,_util.getRowid)(le,e),n.push(o[t]=e))}):a.items.forEach(function(e){var t=(0,_util.getRowid)(le,e);n.push(o[t]=e)}),i=_xeUtils.default.find(a.items,function(e){return!!v[(0,_util.getRowid)(le,e)]})?-1:(t=[],a.items.forEach(function(e){_xeUtils.default.get(e,m)&&t.push(e)}),t.filter(function(e){return o[(0,_util.getRowid)(le,e)]}).length===n.length||!(!t.length&&-1!==l)&&-1),P.selectCheckboxMaps=g,H.handleSelectRow({row:a.parent},i,r)}else!r&&x&&!x({row:s})||(_xeUtils.default.set(s,m,l),C(s,l));else if(e&&!_){if(-1===l?(v[p]||(w&&_xeUtils.default.set(s,w,!0),v[p]=s),g[p]&&delete g[p]):_xeUtils.default.eachTree([s],function(e){var t=(0,_util.getRowid)(le,e);(le.eqRow(e,s)||r||!x||x({row:e}))&&(l?g[t]=e:g[t]&&delete g[t],w&&_xeUtils.default.set(s,w,!1),delete v[(0,_util.getRowid)(le,e)],C(s,l))},{children:h}),(a=_xeUtils.default.findTree(f,function(e){return le.eqRow(e,s)},{children:h}))&&a.parent)return i=void 0,u=[],c={},!r&&x?a.items.forEach(function(e){var t;x({row:e})&&(t=(0,_util.getRowid)(le,e),u.push(c[t]=e))}):a.items.forEach(function(e){var t=(0,_util.getRowid)(le,e);u.push(c[t]=e)}),i=_xeUtils.default.find(a.items,function(e){return!!v[(0,_util.getRowid)(le,e)]})?-1:(d=[],a.items.forEach(function(e){var t=(0,_util.getRowid)(le,e);g[t]&&d.push(e)}),d.filter(function(e){return c[(0,_util.getRowid)(le,e)]}).length===u.length||!(!d.length&&-1!==l)&&-1),P.selectCheckboxMaps=g,H.handleSelectRow({row:a.parent},i,r)}else!r&&x&&!x({row:s})||(l?g[p]||(g[p]=s):g[p]&&delete g[p],C(s,l));P.selectCheckboxMaps=g,H.checkSelectionStatus()},triggerHeaderHelpEvent:function(t,e){var l,r,e=e.column,e=e.titlePrefix||e.titleHelp;(e.content||e.message)&&(l=P.tooltipStore,r=(0,_utils.getFuncText)(e.content||e.message),me(!0),l.visible=!0,l.currOpts=__assign(__assign({},e),{content:null}),(0,_vue.nextTick)(function(){var e=q.value;e&&e.open(t.currentTarget,r)}))},triggerHeaderTooltipEvent:function(e,t){var l=P.tooltipStore,r=t.column,e=e.currentTarget;me(!0),l.column===r&&l.visible||_e(0,e,e,null,t)},triggerBodyTooltipEvent:function(e,t){var l=K.editConfig,r=P.editStore,n=P.tooltipStore,o=J.value,r=r.actived,a=t.row,i=t.column,e=e.currentTarget;if(me(n.column!==i||n.row!==a),i.editRender&&(0,_utils.isEnableConf)(l)){if("row"===o.mode&&r.row===a)return;if(r.row===a&&r.column===i)return}n.column===i&&n.row===a&&n.visible||(o=l=void 0,i.treeNode?(l=e.querySelector(".vxe-tree-cell"),"html"===i.type&&(o=e.querySelector(".vxe-cell--html"))):o=e.querySelector("html"===i.type?".vxe-cell--html":".vxe-cell--label"),_e(0,e,l||e.children[0],o,t))},triggerFooterTooltipEvent:function(e,t){var l=t.column,r=P.tooltipStore,e=e.currentTarget;me(r.column!==l||!!r.row),r.column===l&&r.visible||_e(0,e,e.querySelector(".vxe-cell--item")||e.children[0],null,t)},handleTargetLeaveEvent:function(){var e=s.value,t=q.value;t&&t.setActived(!1),e.enterable?X.tooltipTimeout=setTimeout(function(){(t=q.value)&&!t.isActived()&&W.closeTooltip()},e.leaveDelay):W.closeTooltip()},triggerHeaderCellClickEvent:function(e,t){var l=X._lastResizeTime,r=T.value,n=G.value,o=t.column,a=e.currentTarget,l=l&&l>Date.now()-300,i=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--sort").flag,u=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--filter").flag;"cell"!==r.trigger||l||i||u||H.triggerSortEvent(e,o,c(o)),W.dispatchEvent("header-cell-click",Object.assign({triggerResizable:l,triggerSort:i,triggerFilter:u,cell:a},t),e),(n.isCurrent||K.highlightCurrentColumn)&&W.setCurrentColumn(o)},triggerHeaderCellDblclickEvent:function(e,t){W.dispatchEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},triggerCellClickEvent:function(e,t){var l=K.highlightCurrentRow,r=K.editConfig,n=P.editStore,o=y.value,a=J.value,i=te.value,u=E.value,c=R.value,d=Z.value,n=n.actived,s=t.row,f=t.column,v=f.type,g=f.treeNode,h="radio"===v,p="checkbox"===v,v="expand"===v,m=e.currentTarget,_=h&&(0,_dom.getEventTargetNode)(e,m,"vxe-cell--radio").flag,x=p&&(0,_dom.getEventTargetNode)(e,m,"vxe-cell--checkbox").flag,w=g&&(0,_dom.getEventTargetNode)(e,m,"vxe-tree--btn-wrapper").flag,b=v&&(0,_dom.getEventTargetNode)(e,m,"vxe-table--expanded").flag;t=Object.assign({cell:m,triggerRadio:_,triggerCheckbox:x,triggerTreeNode:w,triggerExpandNode:b},t),!x&&!_&&(!b&&("row"===o.trigger||v&&"cell"===o.trigger)&&H.triggerRowExpandEvent(e,t),"row"===i.trigger||g&&"cell"===i.trigger)&&H.triggerTreeExpandEvent(e,t),w||(b||(!d.isCurrent&&!l||x||_||H.triggerCurrentRowEvent(e,t),!_&&("row"===u.trigger||h&&"cell"===u.trigger)&&H.triggerRadioRowEvent(e,t),!x&&("row"===c.trigger||p&&"cell"===c.trigger)&&H.handleToggleCheckRowEvent(e,t)),(0,_utils.isEnableConf)(r)&&("manual"===a.trigger?n.args&&n.row===s&&f!==n.column&&F(e,t):n.args&&s===n.row&&f===n.column||("click"===a.trigger||"dblclick"===a.trigger&&"row"===a.mode&&n.row===s)&&F(e,t))),W.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var l=K.editConfig,r=P.editStore,n=J.value,r=r.actived,o=e.currentTarget;t=Object.assign({cell:o},t),!(0,_utils.isEnableConf)(l)||"dblclick"!==n.trigger||r.args&&e.currentTarget===r.args.cell||("row"===n.mode?a("blur").catch(function(e){return e}).then(function(){le.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})}):"cell"===n.mode&&le.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})),W.dispatchEvent("cell-dblclick",t,e)},handleToggleCheckRowEvent:function(e,t){var l=P.selectCheckboxMaps,r=R.value.checkField,n=t.row,o=!1,o=r?!_xeUtils.default.get(n,r):!l[(0,_util.getRowid)(le,n)];e?H.triggerCheckRowEvent(e,t,o):H.handleSelectRow(t,o)},triggerCheckRowEvent:function(e,t,l){var r=R.value,n=t.row,o=X.afterFullData,a=r.checkMethod;if(r.isShiftKey&&e.shiftKey&&!K.treeConfig){r=W.getCheckboxRecords();if(r.length){var r=r[0],i=W.getVTRowIndex(n),r=W.getVTRowIndex(r);if(i!==r)return W.setAllCheckboxRow(!1),o=i<r?o.slice(i,r+1):o.slice(r,i+1),S(o,!0,!1),void W.dispatchEvent("checkbox-range-select",Object.assign({rangeRecords:o},t),e)}}a&&!a({row:n})||(H.handleSelectRow(t,l),W.dispatchEvent("checkbox-change",Object.assign({records:W.getCheckboxRecords(),reserves:W.getCheckboxReserveRecords(),indeterminates:W.getCheckboxIndeterminateRecords(),checked:l},t),e))},triggerCheckAllEvent:function(e,t){bt(t),e&&W.dispatchEvent("checkbox-all",{records:W.getCheckboxRecords(),reserves:W.getCheckboxReserveRecords(),indeterminates:W.getCheckboxIndeterminateRecords(),checked:t},e)},triggerRadioRowEvent:function(e,t){var l=P.selectRadioRow,r=t.row,n=E.value,o=l!==r;o?wt(r):n.strict||(o=l===r)&&(r=null,W.clearRadioRow()),o&&W.dispatchEvent("radio-change",__assign({oldValue:l,newValue:r},t),e)},triggerCurrentRowEvent:function(e,t){var l=P.currentRow,r=t.row,n=l!==r;W.setCurrentRow(r),n&&W.dispatchEvent("current-change",__assign({oldValue:l,newValue:r},t),e)},triggerRowExpandEvent:function(e,t){var l=P.rowExpandLazyLoadedMaps,r=P.expandColumn,n=y.value,t=t.row,n=n.lazy,o=(0,_util.getRowid)(le,t);n&&l[o]||(n=!W.isExpandByRow(t),l=W.getColumnIndex(r),o=W.getVMColumnIndex(r),W.setRowExpand(t,n),W.dispatchEvent("toggle-row-expand",{expanded:n,column:r,columnIndex:l,$columnIndex:o,row:t,rowIndex:W.getRowIndex(t),$rowIndex:W.getVMRowIndex(t)},e))},triggerTreeExpandEvent:function(e,t){var l=P.treeExpandLazyLoadedMaps,r=te.value,n=t.row,t=t.column,r=r.lazy,o=(0,_util.getRowid)(le,n);r&&l[o]||(r=!W.isTreeExpandByRow(n),l=W.getColumnIndex(t),o=W.getVMColumnIndex(t),W.setTreeExpand(n,r),W.dispatchEvent("toggle-tree-expand",{expanded:r,column:t,columnIndex:l,$columnIndex:o,row:n},e))},triggerSortEvent:function(e,t,l){var r=K.mouseConfig,n=T.value,o=Q.value,a=t.field;if(t.sortable){l&&t.order!==l?W.sort({field:a,order:l}):W.clearSort(n.multiple?t:null);l={$table:le,$event:e,column:t,field:a,property:a,order:t.order,sortList:W.getSortColumns(),sortTime:t.sortTime};if(r&&o.area&&le.handleSortEvent)return le.handleSortEvent(e,l);W.dispatchEvent("sort-change",l,e)}},triggerScrollXEvent:function(){N()},triggerScrollYEvent:function(e){var t=X.scrollYStore,l=t.adaptive,r=t.offsetSize,t=t.visibleSize;(isWebkit&&l&&2*r+t<=40?oe:yt)(e)},scrollToTreeRow:function(t){var l,e=K.treeConfig,r=X.tableFullData,n=[];return e&&(e=(e=te.value).children||e.childrenField,r=_xeUtils.default.findTree(r,function(e){return le.eqRow(e,t)},{children:e}))&&(l=r.nodes).forEach(function(e,t){t<l.length-1&&!W.isTreeExpandByRow(e)&&n.push(W.setTreeExpand(e,!0))}),Promise.all(n).then(function(){return(0,_util.rowToVisible)(le,t)})},updateScrollYStatus:ne,updateScrollXSpace:function(){var e=P.isGroup,r=P.scrollXLoad,n=P.scrollbarWidth,t=X.visibleColumn,l=X.scrollXStore,o=X.elemStore,a=X.tableWidth,i=$.value,u=j.value,c=Y.value,u=u?u.$el:null;u&&(i=i?i.$el:null,c=c?c.$el:null,i=i?i.querySelector(".vxe-table--header"):null,u=u.querySelector(".vxe-table--body"),c=c?c.querySelector(".vxe-table--footer"):null,t=t.slice(0,l.startIndex).reduce(function(e,t){return e+t.renderWidth},0),l="",r&&(l="".concat(t,"px")),i&&(i.style.marginLeft=e?"":l),u.style.marginLeft=l,c&&(c.style.marginLeft=l),["main"].forEach(function(l){["header","body","footer"].forEach(function(e){var t=o["".concat(l,"-").concat(e,"-xSpace")],t=t?t.value:null;t&&(t.style.width=r?"".concat(a+("header"===e?n:0),"px"):"")})}),(0,_vue.nextTick)(w))},updateScrollYSpace:function(){var e=P.scrollYLoad,t=X.scrollYStore,l=X.elemStore,r=X.afterFullData,n=t.startIndex,t=t.rowHeight,r=r.length*t,n=Math.max(0,n*t),o="",a="";e&&(o="".concat(n,"px"),a="".concat(r,"px")),["main","left","right"].forEach(function(t){var e=l["".concat(t,"-body-table")],e=e?e.value:null;e&&(e.style.marginTop=o),["header","body","footer"].forEach(function(e){e=l["".concat(t,"-").concat(e,"-ySpace")],e=e?e.value:null;e&&(e.style.height=a)})}),(0,_vue.nextTick)(w)},updateScrollXData:function(){(0,_vue.nextTick)(function(){Rt(),H.updateScrollXSpace()})},updateScrollYData:function(){(0,_vue.nextTick)(function(){H.handleTableData(),H.updateScrollYSpace()})},checkScrolling:function(){var e=Oe.value,t=Ae.value,l=j.value,l=l?l.$el:null;l&&(e&&(0<l.scrollLeft?(0,_dom.addClass):(0,_dom.removeClass))(e,"scrolling--middle"),t)&&(l.clientWidth<l.scrollWidth-Math.ceil(l.scrollLeft)?(0,_dom.addClass):(0,_dom.removeClass))(t,"scrolling--middle")},updateZindex:function(){K.zIndex?X.tZindex=K.zIndex:X.tZindex<(0,_utils.getLastZIndex)()&&(X.tZindex=(0,_utils.nextZIndex)())},handleCheckedCheckboxRow:S,triggerHoverEvent:function(e,t){t=t.row;H.setHoverRow(t)},setHoverRow:function(e){var t=(0,_util.getRowid)(le,e),l=z.value;H.clearHoverRow(),l&&_xeUtils.default.arrayEach(l.querySelectorAll('[rowid="'.concat(t,'"]')),function(e){return(0,_dom.addClass)(e,"row--hover")}),X.hoverRow=e},clearHoverRow:function(){var e=z.value;e&&_xeUtils.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),function(e){return(0,_dom.removeClass)(e,"row--hover")}),X.hoverRow=null},getCell:function(e,t){var l,e=(0,_util.getRowid)(le,e),r=j.value,n=Fe.value,o=d.value;return t.fixed&&("left"===t.fixed?n&&(l=n.$el):o&&(l=o.$el)),(l=l||r.$el)?l.querySelector('.vxe-body--row[rowid="'.concat(e,'"] .').concat(t.id)):null},getCellLabel:function(e,t){var l=t.formatter,r=(0,_util.getCellValue)(e,t),n=r;if(l){var o=void 0,a=X.fullAllDataRowIdData,i=(0,_util.getRowid)(le,e),u=t.id,c=a[i];if(c&&(o=(o=c.formatData)||(a[i].formatData={}),c)&&o[u]&&o[u].value===r)return o[u].label;var d,a={cellValue:r,row:e,rowIndex:W.getRowIndex(e),column:t,columnIndex:W.getColumnIndex(t)};n=_xeUtils.default.isString(l)?(d=_vXETable.VXETable.formats.get(l))&&d.cellFormatMethod?d.cellFormatMethod(a):"":_xeUtils.default.isArray(l)?(d=_vXETable.VXETable.formats.get(l[0]))&&d.cellFormatMethod?d.cellFormatMethod.apply(d,__spreadArray([a],l.slice(1),!1)):"":l(a),o&&(o[u]={value:r,label:n})}return n},findRowIndexOf:function(e,t){return t?_xeUtils.default.findIndexOf(e,function(e){return le.eqRow(e,t)}):-1},eqRow:function(e,t){return!(!e||!t||e!==t&&(0,_util.getRowid)(le,e)!==(0,_util.getRowid)(le,t))}};"development"===process.env.NODE_ENV&&("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach(function(e){le[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Export"])}}),"clearValidate,fullValidate,validate".split(",").forEach(function(e){le[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Validator"])}})),Object.assign(le,W,H);function St(){var e=z.value;e&&e.clientWidth&&e.clientHeight&&W.recalculate()}var h,Dt=(0,_vue.ref)(0),Mt=((0,_vue.watch)(function(){return K.data?K.data.length:-1},function(){Dt.value++}),(0,_vue.watch)(function(){return K.data},function(){Dt.value++}),(0,_vue.watch)(Dt,function(){var n=X.inited,o=X.initStatus;U(K.data||[]).then(function(){var e,t=P.scrollXLoad,l=P.scrollYLoad,r=P.expandColumn;X.inited=!0,X.initStatus=!0,o||O(),n||A(),"development"===process.env.NODE_ENV&&(e=R.value,X.tableFullColumn.find(function(e){return"checkbox"===e.type})&&300<X.tableFullData.length&&!e.checkField&&(0,_log.warnLog)("vxe.error.checkProp",["checkbox-config.checkField"]),t||l)&&r&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),W.recalculate()})}),(0,_vue.ref)(0)),kt=((0,_vue.watch)(function(){return P.staticColumns.length},function(){Mt.value++}),(0,_vue.watch)(function(){return P.staticColumns},function(){Mt.value++}),(0,_vue.watch)(Mt,function(){o(P.staticColumns)}),(0,_vue.ref)(0)),Ft=((0,_vue.watch)(function(){return P.tableColumn.length},function(){kt.value++}),(0,_vue.watch)(function(){return P.tableColumn},function(){kt.value++}),(0,_vue.watch)(kt,function(){H.analyColumnWidth()}),(0,_vue.watch)(function(){return P.upDataFlag},function(){(0,_vue.nextTick)(function(){W.updateData()})}),(0,_vue.watch)(function(){return P.reColumnFlag},function(){(0,_vue.nextTick)(function(){W.refreshColumn()})}),(0,_vue.watch)(function(){return K.showHeader},function(){(0,_vue.nextTick)(function(){W.recalculate(!0).then(function(){return W.refreshScroll()})})}),(0,_vue.watch)(function(){return K.showFooter},function(){(0,_vue.nextTick)(function(){W.recalculate(!0).then(function(){return W.refreshScroll()})})}),(0,_vue.watch)(function(){return K.height},function(){(0,_vue.nextTick)(function(){return W.recalculate(!0)})}),(0,_vue.watch)(function(){return K.maxHeight},function(){(0,_vue.nextTick)(function(){return W.recalculate(!0)})}),(0,_vue.watch)(function(){return K.syncResize},function(e){e&&(St(),(0,_vue.nextTick)(function(){St(),setTimeout(St)}))}),(0,_vue.ref)(0)),It=((0,_vue.watch)(function(){return K.mergeCells?K.mergeCells.length:-1},function(){Ft.value++}),(0,_vue.watch)(function(){return K.mergeCells},function(){Ft.value++}),(0,_vue.watch)(Ft,function(){W.clearMergeCells(),(0,_vue.nextTick)(function(){K.mergeCells&&W.setMergeCells(K.mergeCells)})}),(0,_vue.ref)(0));(0,_vue.watch)(function(){return K.mergeFooterItems?K.mergeFooterItems.length:-1},function(){It.value++}),(0,_vue.watch)(function(){return K.mergeFooterItems},function(){It.value++}),(0,_vue.watch)(It,function(){W.clearMergeFooterItems(),(0,_vue.nextTick)(function(){K.mergeFooterItems&&W.setMergeFooterItems(K.mergeFooterItems)})}),_vXETable.VXETable.hooks.forEach(function(e){var e=e.setupTable;e&&(e=e(le))&&_xeUtils.default.isObject(e)&&Object.assign(le,e)}),H.preventEvent(null,"created",{$table:le}),(0,_vue.onActivated)(function(){W.recalculate().then(function(){return W.refreshScroll()}),H.preventEvent(null,"activated",{$table:le})}),(0,_vue.onDeactivated)(function(){X.isActivated=!1,H.preventEvent(null,"deactivated",{$table:le})}),(0,_vue.onMounted)(function(){(0,_vue.nextTick)(function(){var e,t=K.data,l=K.treeConfig,r=K.showOverflow,n=X.scrollXStore,o=X.scrollYStore,a=x.value,i=J.value,u=te.value,c=E.value,d=R.value,s=y.value,f=Z.value;if("development"===process.env.NODE_ENV&&(K.rowId||f.keyField||!(d.reserve||d.checkRowKeys||c.reserve||c.checkRowKey||s.expandRowKeys||u.expandRowKeys)||(0,_log.warnLog)("vxe.error.reqProp",["row-config.keyField"]),K.editConfig&&(i.showStatus||i.showUpdateStatus||i.showInsertStatus)&&!K.keepSource&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),!l||!u.showLine&&!u.line||(K.rowKey||f.useKey)&&r||(0,_log.warnLog)("vxe.error.reqProp",["row-config.useKey | show-overflow"]),l&&K.stripe&&(0,_log.warnLog)("vxe.error.noTree",["stripe"]),K.showFooter&&!K.footerMethod&&(0,_log.warnLog)("vxe.error.reqProp",["footer-method"]),c=K.exportConfig,s=K.importConfig,f=lt.value,r=rt.value,s&&r.types&&!r.importMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.globalConfs.importTypes,r.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(r.types.join(",")),r.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.globalConfs.importTypes,e)}).join(",")||_vXETable.VXETable.globalConfs.importTypes.join(",")]),c)&&f.types&&!f.exportMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.globalConfs.exportTypes,f.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(f.types.join(",")),f.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.globalConfs.exportTypes,e)}).join(",")||_vXETable.VXETable.globalConfs.exportTypes.join(",")]),"development"===process.env.NODE_ENV){var l=v.value,s=Q.value,r=Z.value;if(!K.id&&K.customConfig&&(!0===l.storage||l.storage&&l.storage.resizable||l.storage&&l.storage.visible)&&(0,_log.errLog)("vxe.error.reqProp",["id"]),K.treeConfig&&d.range&&(0,_log.errLog)("vxe.error.noTree",["checkbox-config.range"]),r.height&&!K.showOverflow&&(0,_log.warnLog)("vxe.error.notProp",["table.show-overflow"]),!le.handleUpdateCellAreas&&(K.clipConfig&&(0,_log.warnLog)("vxe.error.notProp",["clip-config"]),K.fnrConfig&&(0,_log.warnLog)("vxe.error.notProp",["fnr-config"]),s.area))return void(0,_log.errLog)("vxe.error.notProp",["mouse-config.area"]);K.treeConfig&&u.children&&(0,_log.warnLog)("vxe.error.delProp",["tree-config.children","tree-config.childrenField"]),K.treeConfig&&u.line&&(0,_log.warnLog)("vxe.error.delProp",["tree-config.line","tree-config.showLine"]),s.area&&s.selected&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),s.area&&d.range&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","checkbox-config.range"]),K.treeConfig&&s.area&&(0,_log.errLog)("vxe.error.noTree",["mouse-config.area"]),K.editConfig&&i.activeMethod&&(0,_log.warnLog)("vxe.error.delProp",["edit-config.activeMethod","edit-config.beforeEditMethod"]),K.treeConfig&&d.isShiftKey&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config","checkbox-config.isShiftKey"]),d.halfField&&(0,_log.warnLog)("vxe.error.delProp",["checkbox-config.halfField","checkbox-config.indeterminateField"])}"development"===process.env.NODE_ENV&&(K.editConfig&&!le.insert&&(0,_log.errLog)("vxe.error.reqModule",["Edit"]),K.editRules&&!le.validate&&(0,_log.errLog)("vxe.error.reqModule",["Validator"]),(d.range||K.keyboardConfig||K.mouseConfig)&&!le.triggerCellMousedownEvent&&(0,_log.errLog)("vxe.error.reqModule",["Keyboard"]),K.printConfig||K.importConfig||K.exportConfig)&&!le.exportData&&(0,_log.errLog)("vxe.error.reqModule",["Export"]),Object.assign(o,{startIndex:0,endIndex:0,visibleSize:0,adaptive:!1!==a.adaptive}),Object.assign(n,{startIndex:0,endIndex:0,visibleSize:0}),U(t||[]).then(function(){t&&t.length&&(X.inited=!0,X.initStatus=!0,O(),A()),w()}),K.autoResize&&(c=$e.value.refreshDelay,f=z.value,l=H.getParentElem(),e=c?_xeUtils.default.throttle(function(){return W.recalculate(!0)},c,{leading:!0,trailing:!0}):null,h=(0,_resize.createResizeEvent)(e?function(){K.autoResize&&requestAnimationFrame(e)}:function(){K.autoResize&&W.recalculate(!0)}),f&&h.observe(f),l)&&h.observe(l)}),_event.GlobalEvent.on(le,"paste",ve),_event.GlobalEvent.on(le,"copy",ge),_event.GlobalEvent.on(le,"cut",he),_event.GlobalEvent.on(le,"mousedown",ue),_event.GlobalEvent.on(le,"blur",ce),_event.GlobalEvent.on(le,"mousewheel",de),_event.GlobalEvent.on(le,"keydown",fe),_event.GlobalEvent.on(le,"resize",pe),le.handleGlobalContextmenuEvent&&_event.GlobalEvent.on(le,"contextmenu",le.handleGlobalContextmenuEvent),H.preventEvent(null,"mounted",{$table:le})}),(0,_vue.onBeforeUnmount)(function(){h&&h.disconnect(),W.closeFilter(),le.closeMenu&&le.closeMenu(),H.preventEvent(null,"beforeUnmount",{$table:le})}),(0,_vue.onUnmounted)(function(){_event.GlobalEvent.off(le,"paste"),_event.GlobalEvent.off(le,"copy"),_event.GlobalEvent.off(le,"cut"),_event.GlobalEvent.off(le,"mousedown"),_event.GlobalEvent.off(le,"blur"),_event.GlobalEvent.off(le,"mousewheel"),_event.GlobalEvent.off(le,"keydown"),_event.GlobalEvent.off(le,"resize"),_event.GlobalEvent.off(le,"contextmenu"),H.preventEvent(null,"unmounted",{$table:le})});return le.renderVN=function(){var e=K.loading,t=K.stripe,l=K.showHeader,r=K.height,n=K.treeConfig,o=K.mouseConfig,a=K.showFooter,i=K.highlightCell,u=K.highlightHoverRow,c=K.highlightHoverColumn,d=K.editConfig,s=K.editRules,f=P.isGroup,v=P.overflowX,g=P.overflowY,h=P.scrollXLoad,p=P.scrollYLoad,m=P.scrollbarHeight,_=P.tableData,x=P.tableColumn,w=P.tableGroupColumn,b=P.footerTableData,C=P.initStore,E=P.columnStore,R=P.filterStore,T=E.leftList,E=E.rightList,y=V.loading,S=Xe.value,D=ze.value,M=te.value,k=Z.value,F=G.value,I=Re.value,L=dt.value,U=Q.value,A=We.value,O=at.value,N=et.value;return(0,_vue.h)("div",{ref:z,class:["vxe-table","vxe-table--render-default","tid_".concat(Ee),"border--".concat(L),((L={})["size--".concat(I)]=I,L["vaild-msg--".concat(D.msgMode)]=!!s,L["vxe-editable"]=!!d,L["old-cell-valid"]=s&&"obsolete"===_conf.default.cellVaildMode,L["cell--highlight"]=i,L["cell--selected"]=o&&U.selected,L["cell--area"]=o&&U.area,L["row--highlight"]=k.isHover||u,L["column--highlight"]=F.isHover||c,L["is--header"]=l,L["is--footer"]=a,L["is--group"]=f,L["is--tree-line"]=n&&(M.showLine||M.line),L["is--fixed-left"]=T.length,L["is--fixed-right"]=E.length,L["is--animat"]=!!K.animat,L["is--round"]=K.round,L["is--stripe"]=!n&&t,L["is--loading"]=e,L["is--empty"]=!e&&!_.length,L["is--scroll-y"]=g,L["is--scroll-x"]=v,L["is--virtual-x"]=h,L["is--virtual-y"]=p,L)],onKeydown:se},[(0,_vue.h)("div",{class:"vxe-table-slots"},V.default?V.default({}):[]),(0,_vue.h)("div",{class:"vxe-table--render-wrapper"},[(0,_vue.h)("div",{class:"vxe-table--main-wrapper"},[l?(0,_vue.h)(_header.default,{ref:$,tableData:_,tableColumn:x,tableGroupColumn:w}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:j,tableData:_,tableColumn:x}),a?(0,_vue.h)(_footer.default,{ref:Y,footerTableData:b,tableColumn:x}):(0,_vue.createCommentVNode)()]),(0,_vue.h)("div",{class:"vxe-table--fixed-wrapper"},[T&&T.length&&v?xe("left"):(0,_vue.createCommentVNode)(),E&&E.length&&v?xe("right"):(0,_vue.createCommentVNode)()])]),(0,_vue.h)("div",{ref:Ve,class:"vxe-table--empty-placeholder"},[(0,_vue.h)("div",{class:"vxe-table--empty-content"},(I=ot.value,d={$table:le},V.empty?V.empty(d):(i=(i=I.name?_vXETable.VXETable.renderer.get(I.name):null)?i.renderEmpty:null)?(0,_vn.getSlotVNs)(i(I,d)):(0,_utils.getFuncText)(K.emptyText)||_conf.default.i18n("vxe.table.emptyText")))]),(0,_vue.h)("div",{class:"vxe-table--border-line"}),(0,_vue.h)("div",{ref:Ne,class:"vxe-table--resizable-bar",style:v?{"padding-bottom":"".concat(m,"px")}:null}),(0,_vue.h)(_index.default,{class:"vxe-table--loading",modelValue:e,icon:O.icon,text:O.text},y?{default:function(){return y({$table:le,$grid:B})}}:{}),C.filter?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-filter"),{ref:De,filterStore:R}):(0,_vue.createCommentVNode)(),C.import&&K.importConfig?(0,_vue.h)((0,_vue.resolveComponent)("vxe-import-panel"),{defaultOptions:P.importParams,storeData:P.importStore}):(0,_vue.createCommentVNode)(),C.export&&(K.exportConfig||K.printConfig)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-export-panel"),{defaultOptions:P.exportParams,storeData:P.exportStore}):(0,_vue.createCommentVNode)(),N?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-context-menu"),{ref:Me}):(0,_vue.createCommentVNode)(),Ce?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),{ref:ye,isArrow:!1,enterable:!1}):(0,_vue.createCommentVNode)(),Ce&&K.editRules&&D.showMessage&&("default"===D.message?!r:"tooltip"===D.message)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:Se,class:[{"old-cell-valid":s&&"obsolete"===_conf.default.cellVaildMode},"vxe-table--valid-error"]},"tooltip"===D.message||1===_.length?A:{})):(0,_vue.createCommentVNode)(),Ce?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:q},S)):(0,_vue.createCommentVNode)()])},(0,_vue.provide)("xecolgroup",null),(0,_vue.provide)("$xetable",le),le},render:function(){return this.renderVN()}});exports.default=_default;